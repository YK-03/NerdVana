(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function DT(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var nm={exports:{}},mu={},rm={exports:{}},He={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k_;function DP(){if(k_)return He;k_=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.iterator;function v(q){return q===null||typeof q!="object"?null:(q=g&&q[g]||q["@@iterator"],typeof q=="function"?q:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},T=Object.assign,I={};function b(q,ne,R){this.props=q,this.context=ne,this.refs=I,this.updater=R||x}b.prototype.isReactComponent={},b.prototype.setState=function(q,ne){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,ne,"setState")},b.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function N(){}N.prototype=b.prototype;function z(q,ne,R){this.props=q,this.context=ne,this.refs=I,this.updater=R||x}var U=z.prototype=new N;U.constructor=z,T(U,b.prototype),U.isPureReactComponent=!0;var J=Array.isArray,X=Object.prototype.hasOwnProperty,H={current:null},O={key:!0,ref:!0,__self:!0,__source:!0};function A(q,ne,R){var ue,xe={},we=null,Be=null;if(ne!=null)for(ue in ne.ref!==void 0&&(Be=ne.ref),ne.key!==void 0&&(we=""+ne.key),ne)X.call(ne,ue)&&!O.hasOwnProperty(ue)&&(xe[ue]=ne[ue]);var Ce=arguments.length-2;if(Ce===1)xe.children=R;else if(1<Ce){for(var be=Array(Ce),Pe=0;Pe<Ce;Pe++)be[Pe]=arguments[Pe+2];xe.children=be}if(q&&q.defaultProps)for(ue in Ce=q.defaultProps,Ce)xe[ue]===void 0&&(xe[ue]=Ce[ue]);return{$$typeof:t,type:q,key:we,ref:Be,props:xe,_owner:H.current}}function V(q,ne){return{$$typeof:t,type:q.type,key:ne,ref:q.ref,props:q.props,_owner:q._owner}}function S(q){return typeof q=="object"&&q!==null&&q.$$typeof===t}function M(q){var ne={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(R){return ne[R]})}var F=/\/+/g;function D(q,ne){return typeof q=="object"&&q!==null&&q.key!=null?M(""+q.key):ne.toString(36)}function ce(q,ne,R,ue,xe){var we=typeof q;(we==="undefined"||we==="boolean")&&(q=null);var Be=!1;if(q===null)Be=!0;else switch(we){case"string":case"number":Be=!0;break;case"object":switch(q.$$typeof){case t:case e:Be=!0}}if(Be)return Be=q,xe=xe(Be),q=ue===""?"."+D(Be,0):ue,J(xe)?(R="",q!=null&&(R=q.replace(F,"$&/")+"/"),ce(xe,ne,R,"",function(Pe){return Pe})):xe!=null&&(S(xe)&&(xe=V(xe,R+(!xe.key||Be&&Be.key===xe.key?"":(""+xe.key).replace(F,"$&/")+"/")+q)),ne.push(xe)),1;if(Be=0,ue=ue===""?".":ue+":",J(q))for(var Ce=0;Ce<q.length;Ce++){we=q[Ce];var be=ue+D(we,Ce);Be+=ce(we,ne,R,be,xe)}else if(be=v(q),typeof be=="function")for(q=be.call(q),Ce=0;!(we=q.next()).done;)we=we.value,be=ue+D(we,Ce++),Be+=ce(we,ne,R,be,xe);else if(we==="object")throw ne=String(q),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.");return Be}function ae(q,ne,R){if(q==null)return q;var ue=[],xe=0;return ce(q,ue,"","",function(we){return ne.call(R,we,xe++)}),ue}function Me(q){if(q._status===-1){var ne=q._result;ne=ne(),ne.then(function(R){(q._status===0||q._status===-1)&&(q._status=1,q._result=R)},function(R){(q._status===0||q._status===-1)&&(q._status=2,q._result=R)}),q._status===-1&&(q._status=0,q._result=ne)}if(q._status===1)return q._result.default;throw q._result}var _e={current:null},ie={transition:null},me={ReactCurrentDispatcher:_e,ReactCurrentBatchConfig:ie,ReactCurrentOwner:H};function L(){throw Error("act(...) is not supported in production builds of React.")}return He.Children={map:ae,forEach:function(q,ne,R){ae(q,function(){ne.apply(this,arguments)},R)},count:function(q){var ne=0;return ae(q,function(){ne++}),ne},toArray:function(q){return ae(q,function(ne){return ne})||[]},only:function(q){if(!S(q))throw Error("React.Children.only expected to receive a single React element child.");return q}},He.Component=b,He.Fragment=n,He.Profiler=i,He.PureComponent=z,He.StrictMode=r,He.Suspense=h,He.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=me,He.act=L,He.cloneElement=function(q,ne,R){if(q==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+q+".");var ue=T({},q.props),xe=q.key,we=q.ref,Be=q._owner;if(ne!=null){if(ne.ref!==void 0&&(we=ne.ref,Be=H.current),ne.key!==void 0&&(xe=""+ne.key),q.type&&q.type.defaultProps)var Ce=q.type.defaultProps;for(be in ne)X.call(ne,be)&&!O.hasOwnProperty(be)&&(ue[be]=ne[be]===void 0&&Ce!==void 0?Ce[be]:ne[be])}var be=arguments.length-2;if(be===1)ue.children=R;else if(1<be){Ce=Array(be);for(var Pe=0;Pe<be;Pe++)Ce[Pe]=arguments[Pe+2];ue.children=Ce}return{$$typeof:t,type:q.type,key:xe,ref:we,props:ue,_owner:Be}},He.createContext=function(q){return q={$$typeof:l,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},q.Provider={$$typeof:o,_context:q},q.Consumer=q},He.createElement=A,He.createFactory=function(q){var ne=A.bind(null,q);return ne.type=q,ne},He.createRef=function(){return{current:null}},He.forwardRef=function(q){return{$$typeof:u,render:q}},He.isValidElement=S,He.lazy=function(q){return{$$typeof:p,_payload:{_status:-1,_result:q},_init:Me}},He.memo=function(q,ne){return{$$typeof:f,type:q,compare:ne===void 0?null:ne}},He.startTransition=function(q){var ne=ie.transition;ie.transition={};try{q()}finally{ie.transition=ne}},He.unstable_act=L,He.useCallback=function(q,ne){return _e.current.useCallback(q,ne)},He.useContext=function(q){return _e.current.useContext(q)},He.useDebugValue=function(){},He.useDeferredValue=function(q){return _e.current.useDeferredValue(q)},He.useEffect=function(q,ne){return _e.current.useEffect(q,ne)},He.useId=function(){return _e.current.useId()},He.useImperativeHandle=function(q,ne,R){return _e.current.useImperativeHandle(q,ne,R)},He.useInsertionEffect=function(q,ne){return _e.current.useInsertionEffect(q,ne)},He.useLayoutEffect=function(q,ne){return _e.current.useLayoutEffect(q,ne)},He.useMemo=function(q,ne){return _e.current.useMemo(q,ne)},He.useReducer=function(q,ne,R){return _e.current.useReducer(q,ne,R)},He.useRef=function(q){return _e.current.useRef(q)},He.useState=function(q){return _e.current.useState(q)},He.useSyncExternalStore=function(q,ne,R){return _e.current.useSyncExternalStore(q,ne,R)},He.useTransition=function(){return _e.current.useTransition()},He.version="18.3.1",He}var S_;function fy(){return S_||(S_=1,rm.exports=DP()),rm.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I_;function LP(){if(I_)return mu;I_=1;var t=fy(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(u,h,f){var p,g={},v=null,x=null;f!==void 0&&(v=""+f),h.key!==void 0&&(v=""+h.key),h.ref!==void 0&&(x=h.ref);for(p in h)r.call(h,p)&&!o.hasOwnProperty(p)&&(g[p]=h[p]);if(u&&u.defaultProps)for(p in h=u.defaultProps,h)g[p]===void 0&&(g[p]=h[p]);return{$$typeof:e,type:u,key:v,ref:x,props:g,_owner:i.current}}return mu.Fragment=n,mu.jsx=l,mu.jsxs=l,mu}var C_;function VP(){return C_||(C_=1,nm.exports=LP()),nm.exports}var C=VP(),Fh={},im={exports:{}},Vn={},sm={exports:{}},om={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b_;function MP(){return b_||(b_=1,(function(t){function e(ie,me){var L=ie.length;ie.push(me);e:for(;0<L;){var q=L-1>>>1,ne=ie[q];if(0<i(ne,me))ie[q]=me,ie[L]=ne,L=q;else break e}}function n(ie){return ie.length===0?null:ie[0]}function r(ie){if(ie.length===0)return null;var me=ie[0],L=ie.pop();if(L!==me){ie[0]=L;e:for(var q=0,ne=ie.length,R=ne>>>1;q<R;){var ue=2*(q+1)-1,xe=ie[ue],we=ue+1,Be=ie[we];if(0>i(xe,L))we<ne&&0>i(Be,xe)?(ie[q]=Be,ie[we]=L,q=we):(ie[q]=xe,ie[ue]=L,q=ue);else if(we<ne&&0>i(Be,L))ie[q]=Be,ie[we]=L,q=we;else break e}}return me}function i(ie,me){var L=ie.sortIndex-me.sortIndex;return L!==0?L:ie.id-me.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();t.unstable_now=function(){return l.now()-u}}var h=[],f=[],p=1,g=null,v=3,x=!1,T=!1,I=!1,b=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function U(ie){for(var me=n(f);me!==null;){if(me.callback===null)r(f);else if(me.startTime<=ie)r(f),me.sortIndex=me.expirationTime,e(h,me);else break;me=n(f)}}function J(ie){if(I=!1,U(ie),!T)if(n(h)!==null)T=!0,Me(X);else{var me=n(f);me!==null&&_e(J,me.startTime-ie)}}function X(ie,me){T=!1,I&&(I=!1,N(A),A=-1),x=!0;var L=v;try{for(U(me),g=n(h);g!==null&&(!(g.expirationTime>me)||ie&&!M());){var q=g.callback;if(typeof q=="function"){g.callback=null,v=g.priorityLevel;var ne=q(g.expirationTime<=me);me=t.unstable_now(),typeof ne=="function"?g.callback=ne:g===n(h)&&r(h),U(me)}else r(h);g=n(h)}if(g!==null)var R=!0;else{var ue=n(f);ue!==null&&_e(J,ue.startTime-me),R=!1}return R}finally{g=null,v=L,x=!1}}var H=!1,O=null,A=-1,V=5,S=-1;function M(){return!(t.unstable_now()-S<V)}function F(){if(O!==null){var ie=t.unstable_now();S=ie;var me=!0;try{me=O(!0,ie)}finally{me?D():(H=!1,O=null)}}else H=!1}var D;if(typeof z=="function")D=function(){z(F)};else if(typeof MessageChannel<"u"){var ce=new MessageChannel,ae=ce.port2;ce.port1.onmessage=F,D=function(){ae.postMessage(null)}}else D=function(){b(F,0)};function Me(ie){O=ie,H||(H=!0,D())}function _e(ie,me){A=b(function(){ie(t.unstable_now())},me)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ie){ie.callback=null},t.unstable_continueExecution=function(){T||x||(T=!0,Me(X))},t.unstable_forceFrameRate=function(ie){0>ie||125<ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<ie?Math.floor(1e3/ie):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_getFirstCallbackNode=function(){return n(h)},t.unstable_next=function(ie){switch(v){case 1:case 2:case 3:var me=3;break;default:me=v}var L=v;v=me;try{return ie()}finally{v=L}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(ie,me){switch(ie){case 1:case 2:case 3:case 4:case 5:break;default:ie=3}var L=v;v=ie;try{return me()}finally{v=L}},t.unstable_scheduleCallback=function(ie,me,L){var q=t.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?q+L:q):L=q,ie){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=L+ne,ie={id:p++,callback:me,priorityLevel:ie,startTime:L,expirationTime:ne,sortIndex:-1},L>q?(ie.sortIndex=L,e(f,ie),n(h)===null&&ie===n(f)&&(I?(N(A),A=-1):I=!0,_e(J,L-q))):(ie.sortIndex=ne,e(h,ie),T||x||(T=!0,Me(X))),ie},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(ie){var me=v;return function(){var L=v;v=me;try{return ie.apply(this,arguments)}finally{v=L}}}})(om)),om}var A_;function OP(){return A_||(A_=1,sm.exports=MP()),sm.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P_;function FP(){if(P_)return Vn;P_=1;var t=fy(),e=OP();function n(s){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+s,c=1;c<arguments.length;c++)a+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function o(s,a){l(s,a),l(s+"Capture",a)}function l(s,a){for(i[s]=a,s=0;s<a.length;s++)r.add(a[s])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},g={};function v(s){return h.call(g,s)?!0:h.call(p,s)?!1:f.test(s)?g[s]=!0:(p[s]=!0,!1)}function x(s,a,c,m){if(c!==null&&c.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return m?!1:c!==null?!c.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function T(s,a,c,m){if(a===null||typeof a>"u"||x(s,a,c,m))return!0;if(m)return!1;if(c!==null)switch(c.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function I(s,a,c,m,y,w,k){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=m,this.attributeNamespace=y,this.mustUseProperty=c,this.propertyName=s,this.type=a,this.sanitizeURL=w,this.removeEmptyString=k}var b={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){b[s]=new I(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var a=s[0];b[a]=new I(a,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){b[s]=new I(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){b[s]=new I(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){b[s]=new I(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){b[s]=new I(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){b[s]=new I(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){b[s]=new I(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){b[s]=new I(s,5,!1,s.toLowerCase(),null,!1,!1)});var N=/[\-:]([a-z])/g;function z(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var a=s.replace(N,z);b[a]=new I(a,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var a=s.replace(N,z);b[a]=new I(a,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var a=s.replace(N,z);b[a]=new I(a,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){b[s]=new I(s,1,!1,s.toLowerCase(),null,!1,!1)}),b.xlinkHref=new I("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){b[s]=new I(s,1,!1,s.toLowerCase(),null,!0,!0)});function U(s,a,c,m){var y=b.hasOwnProperty(a)?b[a]:null;(y!==null?y.type!==0:m||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(T(a,c,y,m)&&(c=null),m||y===null?v(a)&&(c===null?s.removeAttribute(a):s.setAttribute(a,""+c)):y.mustUseProperty?s[y.propertyName]=c===null?y.type===3?!1:"":c:(a=y.attributeName,m=y.attributeNamespace,c===null?s.removeAttribute(a):(y=y.type,c=y===3||y===4&&c===!0?"":""+c,m?s.setAttributeNS(m,a,c):s.setAttribute(a,c))))}var J=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,X=Symbol.for("react.element"),H=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),V=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),M=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),ce=Symbol.for("react.suspense_list"),ae=Symbol.for("react.memo"),Me=Symbol.for("react.lazy"),_e=Symbol.for("react.offscreen"),ie=Symbol.iterator;function me(s){return s===null||typeof s!="object"?null:(s=ie&&s[ie]||s["@@iterator"],typeof s=="function"?s:null)}var L=Object.assign,q;function ne(s){if(q===void 0)try{throw Error()}catch(c){var a=c.stack.trim().match(/\n( *(at )?)/);q=a&&a[1]||""}return`
`+q+s}var R=!1;function ue(s,a){if(!s||R)return"";R=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(Q){var m=Q}Reflect.construct(s,[],a)}else{try{a.call()}catch(Q){m=Q}s.call(a.prototype)}else{try{throw Error()}catch(Q){m=Q}s()}}catch(Q){if(Q&&m&&typeof Q.stack=="string"){for(var y=Q.stack.split(`
`),w=m.stack.split(`
`),k=y.length-1,j=w.length-1;1<=k&&0<=j&&y[k]!==w[j];)j--;for(;1<=k&&0<=j;k--,j--)if(y[k]!==w[j]){if(k!==1||j!==1)do if(k--,j--,0>j||y[k]!==w[j]){var B=`
`+y[k].replace(" at new "," at ");return s.displayName&&B.includes("<anonymous>")&&(B=B.replace("<anonymous>",s.displayName)),B}while(1<=k&&0<=j);break}}}finally{R=!1,Error.prepareStackTrace=c}return(s=s?s.displayName||s.name:"")?ne(s):""}function xe(s){switch(s.tag){case 5:return ne(s.type);case 16:return ne("Lazy");case 13:return ne("Suspense");case 19:return ne("SuspenseList");case 0:case 2:case 15:return s=ue(s.type,!1),s;case 11:return s=ue(s.type.render,!1),s;case 1:return s=ue(s.type,!0),s;default:return""}}function we(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case O:return"Fragment";case H:return"Portal";case V:return"Profiler";case A:return"StrictMode";case D:return"Suspense";case ce:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case M:return(s.displayName||"Context")+".Consumer";case S:return(s._context.displayName||"Context")+".Provider";case F:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case ae:return a=s.displayName||null,a!==null?a:we(s.type)||"Memo";case Me:a=s._payload,s=s._init;try{return we(s(a))}catch{}}return null}function Be(s){var a=s.type;switch(s.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=a.render,s=s.displayName||s.name||"",a.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return we(a);case 8:return a===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function Ce(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function be(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Pe(s){var a=be(s)?"checked":"value",c=Object.getOwnPropertyDescriptor(s.constructor.prototype,a),m=""+s[a];if(!s.hasOwnProperty(a)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var y=c.get,w=c.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return y.call(this)},set:function(k){m=""+k,w.call(this,k)}}),Object.defineProperty(s,a,{enumerable:c.enumerable}),{getValue:function(){return m},setValue:function(k){m=""+k},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function Lt(s){s._valueTracker||(s._valueTracker=Pe(s))}function _t(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var c=a.getValue(),m="";return s&&(m=be(s)?s.checked?"true":"false":s.value),s=m,s!==c?(a.setValue(s),!0):!1}function st(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function tr(s,a){var c=a.checked;return L({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:c??s._wrapperState.initialChecked})}function Fr(s,a){var c=a.defaultValue==null?"":a.defaultValue,m=a.checked!=null?a.checked:a.defaultChecked;c=Ce(a.value!=null?a.value:c),s._wrapperState={initialChecked:m,initialValue:c,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function yt(s,a){a=a.checked,a!=null&&U(s,"checked",a,!1)}function jr(s,a){yt(s,a);var c=Ce(a.value),m=a.type;if(c!=null)m==="number"?(c===0&&s.value===""||s.value!=c)&&(s.value=""+c):s.value!==""+c&&(s.value=""+c);else if(m==="submit"||m==="reset"){s.removeAttribute("value");return}a.hasOwnProperty("value")?xt(s,a.type,c):a.hasOwnProperty("defaultValue")&&xt(s,a.type,Ce(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(s.defaultChecked=!!a.defaultChecked)}function Ws(s,a,c){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var m=a.type;if(!(m!=="submit"&&m!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+s._wrapperState.initialValue,c||a===s.value||(s.value=a),s.defaultValue=a}c=s.name,c!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,c!==""&&(s.name=c)}function xt(s,a,c){(a!=="number"||st(s.ownerDocument)!==s)&&(c==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+c&&(s.defaultValue=""+c))}var vt=Array.isArray;function jn(s,a,c,m){if(s=s.options,a){a={};for(var y=0;y<c.length;y++)a["$"+c[y]]=!0;for(c=0;c<s.length;c++)y=a.hasOwnProperty("$"+s[c].value),s[c].selected!==y&&(s[c].selected=y),y&&m&&(s[c].defaultSelected=!0)}else{for(c=""+Ce(c),a=null,y=0;y<s.length;y++){if(s[y].value===c){s[y].selected=!0,m&&(s[y].defaultSelected=!0);return}a!==null||s[y].disabled||(a=s[y])}a!==null&&(a.selected=!0)}}function Gs(s,a){if(a.dangerouslySetInnerHTML!=null)throw Error(n(91));return L({},a,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function Ks(s,a){var c=a.value;if(c==null){if(c=a.children,a=a.defaultValue,c!=null){if(a!=null)throw Error(n(92));if(vt(c)){if(1<c.length)throw Error(n(93));c=c[0]}a=c}a==null&&(a=""),c=a}s._wrapperState={initialValue:Ce(c)}}function Qo(s,a){var c=Ce(a.value),m=Ce(a.defaultValue);c!=null&&(c=""+c,c!==s.value&&(s.value=c),a.defaultValue==null&&s.defaultValue!==c&&(s.defaultValue=c)),m!=null&&(s.defaultValue=""+m)}function Ur(s){var a=s.textContent;a===s._wrapperState.initialValue&&a!==""&&a!==null&&(s.value=a)}function Z(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function de(s,a){return s==null||s==="http://www.w3.org/1999/xhtml"?Z(a):s==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var Re,qe=(function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,c,m,y){MSApp.execUnsafeLocalFunction(function(){return s(a,c,m,y)})}:s})(function(s,a){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=a;else{for(Re=Re||document.createElement("div"),Re.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=Re.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;a.firstChild;)s.appendChild(a.firstChild)}});function Ye(s,a){if(a){var c=s.firstChild;if(c&&c===s.lastChild&&c.nodeType===3){c.nodeValue=a;return}}s.textContent=a}var Vt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},nr=["Webkit","ms","Moz","O"];Object.keys(Vt).forEach(function(s){nr.forEach(function(a){a=a+s.charAt(0).toUpperCase()+s.substring(1),Vt[a]=Vt[s]})});function Gt(s,a,c){return a==null||typeof a=="boolean"||a===""?"":c||typeof a!="number"||a===0||Vt.hasOwnProperty(s)&&Vt[s]?(""+a).trim():a+"px"}function rr(s,a){s=s.style;for(var c in a)if(a.hasOwnProperty(c)){var m=c.indexOf("--")===0,y=Gt(c,a[c],m);c==="float"&&(c="cssFloat"),m?s.setProperty(c,y):s[c]=y}}var yr=L({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ft(s,a){if(a){if(yr[s]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(n(137,s));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(n(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(n(61))}if(a.style!=null&&typeof a.style!="object")throw Error(n(62))}}function Un(s,a){if(s.indexOf("-")===-1)return typeof a.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Kt=null;function Yo(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var xi=null,Ei=null,Ct=null;function Cl(s){if(s=eu(s)){if(typeof xi!="function")throw Error(n(280));var a=s.stateNode;a&&(a=Zc(a),xi(s.stateNode,s.type,a))}}function Qi(s){Ei?Ct?Ct.push(s):Ct=[s]:Ei=s}function Yi(){if(Ei){var s=Ei,a=Ct;if(Ct=Ei=null,Cl(s),a)for(s=0;s<a.length;s++)Cl(a[s])}}function Cc(s,a){return s(a)}function bc(){}var Br=!1;function Ac(s,a,c){if(Br)return s(a,c);Br=!0;try{return Cc(s,a,c)}finally{Br=!1,(Ei!==null||Ct!==null)&&(bc(),Yi())}}function Qs(s,a){var c=s.stateNode;if(c===null)return null;var m=Zc(c);if(m===null)return null;c=m[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(s=s.type,m=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!m;break e;default:s=!1}if(s)return null;if(c&&typeof c!="function")throw Error(n(231,a,typeof c));return c}var Xi=!1;if(u)try{var Ji={};Object.defineProperty(Ji,"passive",{get:function(){Xi=!0}}),window.addEventListener("test",Ji,Ji),window.removeEventListener("test",Ji,Ji)}catch{Xi=!1}function Pc(s,a,c,m,y,w,k,j,B){var Q=Array.prototype.slice.call(arguments,3);try{a.apply(c,Q)}catch(oe){this.onError(oe)}}var Ti=!1,zr=null,Xo=!1,ir=null,Rc={onError:function(s){Ti=!0,zr=s}};function Nc(s,a,c,m,y,w,k,j,B){Ti=!1,zr=null,Pc.apply(Rc,arguments)}function bl(s,a,c,m,y,w,k,j,B){if(Nc.apply(this,arguments),Ti){if(Ti){var Q=zr;Ti=!1,zr=null}else throw Error(n(198));Xo||(Xo=!0,ir=Q)}}function vr(s){var a=s,c=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,(a.flags&4098)!==0&&(c=a.return),s=a.return;while(s)}return a.tag===3?c:null}function Al(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function Dc(s){if(vr(s)!==s)throw Error(n(188))}function Lc(s){var a=s.alternate;if(!a){if(a=vr(s),a===null)throw Error(n(188));return a!==s?null:s}for(var c=s,m=a;;){var y=c.return;if(y===null)break;var w=y.alternate;if(w===null){if(m=y.return,m!==null){c=m;continue}break}if(y.child===w.child){for(w=y.child;w;){if(w===c)return Dc(y),s;if(w===m)return Dc(y),a;w=w.sibling}throw Error(n(188))}if(c.return!==m.return)c=y,m=w;else{for(var k=!1,j=y.child;j;){if(j===c){k=!0,c=y,m=w;break}if(j===m){k=!0,m=y,c=w;break}j=j.sibling}if(!k){for(j=w.child;j;){if(j===c){k=!0,c=w,m=y;break}if(j===m){k=!0,m=w,c=y;break}j=j.sibling}if(!k)throw Error(n(189))}}if(c.alternate!==m)throw Error(n(190))}if(c.tag!==3)throw Error(n(188));return c.stateNode.current===c?s:a}function Vc(s){return s=Lc(s),s!==null?Ys(s):null}function Ys(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var a=Ys(s);if(a!==null)return a;s=s.sibling}return null}var Pl=e.unstable_scheduleCallback,Jo=e.unstable_cancelCallback,Xs=e.unstable_shouldYield,ki=e.unstable_requestPaint,dt=e.unstable_now,Dd=e.unstable_getCurrentPriorityLevel,Zo=e.unstable_ImmediatePriority,Rl=e.unstable_UserBlockingPriority,Js=e.unstable_NormalPriority,Nl=e.unstable_LowPriority,ea=e.unstable_IdlePriority,Zs=null,Bn=null;function Mc(s){if(Bn&&typeof Bn.onCommitFiberRoot=="function")try{Bn.onCommitFiberRoot(Zs,s,void 0,(s.current.flags&128)===128)}catch{}}var zn=Math.clz32?Math.clz32:eo,$r=Math.log,sr=Math.LN2;function eo(s){return s>>>=0,s===0?32:31-($r(s)/sr|0)|0}var qr=64,Zi=4194304;function nt(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function Si(s,a){var c=s.pendingLanes;if(c===0)return 0;var m=0,y=s.suspendedLanes,w=s.pingedLanes,k=c&268435455;if(k!==0){var j=k&~y;j!==0?m=nt(j):(w&=k,w!==0&&(m=nt(w)))}else k=c&~y,k!==0?m=nt(k):w!==0&&(m=nt(w));if(m===0)return 0;if(a!==0&&a!==m&&(a&y)===0&&(y=m&-m,w=a&-a,y>=w||y===16&&(w&4194240)!==0))return a;if((m&4)!==0&&(m|=c&16),a=s.entangledLanes,a!==0)for(s=s.entanglements,a&=m;0<a;)c=31-zn(a),y=1<<c,m|=s[c],a&=~y;return m}function to(s,a){switch(s){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function no(s,a){for(var c=s.suspendedLanes,m=s.pingedLanes,y=s.expirationTimes,w=s.pendingLanes;0<w;){var k=31-zn(w),j=1<<k,B=y[k];B===-1?((j&c)===0||(j&m)!==0)&&(y[k]=to(j,a)):B<=a&&(s.expiredLanes|=j),w&=~j}}function Dl(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function Ll(){var s=qr;return qr<<=1,(qr&4194240)===0&&(qr=64),s}function Vl(s){for(var a=[],c=0;31>c;c++)a.push(s);return a}function ro(s,a,c){s.pendingLanes|=a,a!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,a=31-zn(a),s[a]=c}function Ld(s,a){var c=s.pendingLanes&~a;s.pendingLanes=a,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=a,s.mutableReadLanes&=a,s.entangledLanes&=a,a=s.entanglements;var m=s.eventTimes;for(s=s.expirationTimes;0<c;){var y=31-zn(c),w=1<<y;a[y]=0,m[y]=-1,s[y]=-1,c&=~w}}function Ml(s,a){var c=s.entangledLanes|=a;for(s=s.entanglements;c;){var m=31-zn(c),y=1<<m;y&a|s[m]&a&&(s[m]|=a),c&=~y}}var Xe=0;function Hr(s){return s&=-s,1<s?4<s?(s&268435455)!==0?16:536870912:4:1}var Ol,ta,Fl,jl,Ul,Wr=!1,na=[],Gr=null,Kr=null,Zt=null,io=new Map,Ii=new Map,$n=[],Oc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function es(s,a){switch(s){case"focusin":case"focusout":Gr=null;break;case"dragenter":case"dragleave":Kr=null;break;case"mouseover":case"mouseout":Zt=null;break;case"pointerover":case"pointerout":io.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ii.delete(a.pointerId)}}function wr(s,a,c,m,y,w){return s===null||s.nativeEvent!==w?(s={blockedOn:a,domEventName:c,eventSystemFlags:m,nativeEvent:w,targetContainers:[y]},a!==null&&(a=eu(a),a!==null&&ta(a)),s):(s.eventSystemFlags|=m,a=s.targetContainers,y!==null&&a.indexOf(y)===-1&&a.push(y),s)}function Fc(s,a,c,m,y){switch(a){case"focusin":return Gr=wr(Gr,s,a,c,m,y),!0;case"dragenter":return Kr=wr(Kr,s,a,c,m,y),!0;case"mouseover":return Zt=wr(Zt,s,a,c,m,y),!0;case"pointerover":var w=y.pointerId;return io.set(w,wr(io.get(w)||null,s,a,c,m,y)),!0;case"gotpointercapture":return w=y.pointerId,Ii.set(w,wr(Ii.get(w)||null,s,a,c,m,y)),!0}return!1}function ra(s){var a=lo(s.target);if(a!==null){var c=vr(a);if(c!==null){if(a=c.tag,a===13){if(a=Al(c),a!==null){s.blockedOn=a,Ul(s.priority,function(){Fl(c)});return}}else if(a===3&&c.stateNode.current.memoizedState.isDehydrated){s.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}s.blockedOn=null}function ot(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var c=ia(s.domEventName,s.eventSystemFlags,a[0],s.nativeEvent);if(c===null){c=s.nativeEvent;var m=new c.constructor(c.type,c);Kt=m,c.target.dispatchEvent(m),Kt=null}else return a=eu(c),a!==null&&ta(a),s.blockedOn=c,!1;a.shift()}return!0}function jc(s,a,c){ot(s)&&c.delete(a)}function Vd(){Wr=!1,Gr!==null&&ot(Gr)&&(Gr=null),Kr!==null&&ot(Kr)&&(Kr=null),Zt!==null&&ot(Zt)&&(Zt=null),io.forEach(jc),Ii.forEach(jc)}function ts(s,a){s.blockedOn===a&&(s.blockedOn=null,Wr||(Wr=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Vd)))}function ns(s){function a(y){return ts(y,s)}if(0<na.length){ts(na[0],s);for(var c=1;c<na.length;c++){var m=na[c];m.blockedOn===s&&(m.blockedOn=null)}}for(Gr!==null&&ts(Gr,s),Kr!==null&&ts(Kr,s),Zt!==null&&ts(Zt,s),io.forEach(a),Ii.forEach(a),c=0;c<$n.length;c++)m=$n[c],m.blockedOn===s&&(m.blockedOn=null);for(;0<$n.length&&(c=$n[0],c.blockedOn===null);)ra(c),c.blockedOn===null&&$n.shift()}var Ci=J.ReactCurrentBatchConfig,bi=!0;function Qr(s,a,c,m){var y=Xe,w=Ci.transition;Ci.transition=null;try{Xe=1,Bl(s,a,c,m)}finally{Xe=y,Ci.transition=w}}function Uc(s,a,c,m){var y=Xe,w=Ci.transition;Ci.transition=null;try{Xe=4,Bl(s,a,c,m)}finally{Xe=y,Ci.transition=w}}function Bl(s,a,c,m){if(bi){var y=ia(s,a,c,m);if(y===null)Wd(s,a,m,Yr,c),es(s,m);else if(Fc(y,s,a,c,m))m.stopPropagation();else if(es(s,m),a&4&&-1<Oc.indexOf(s)){for(;y!==null;){var w=eu(y);if(w!==null&&Ol(w),w=ia(s,a,c,m),w===null&&Wd(s,a,m,Yr,c),w===y)break;y=w}y!==null&&m.stopPropagation()}else Wd(s,a,m,null,c)}}var Yr=null;function ia(s,a,c,m){if(Yr=null,s=Yo(m),s=lo(s),s!==null)if(a=vr(s),a===null)s=null;else if(c=a.tag,c===13){if(s=Al(a),s!==null)return s;s=null}else if(c===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null);return Yr=s,null}function sa(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Dd()){case Zo:return 1;case Rl:return 4;case Js:case Nl:return 16;case ea:return 536870912;default:return 16}default:return 16}}var qn=null,oa=null,Ai=null;function Bc(){if(Ai)return Ai;var s,a=oa,c=a.length,m,y="value"in qn?qn.value:qn.textContent,w=y.length;for(s=0;s<c&&a[s]===y[s];s++);var k=c-s;for(m=1;m<=k&&a[c-m]===y[w-m];m++);return Ai=y.slice(s,1<m?1-m:void 0)}function so(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function Xr(){return!0}function zl(){return!1}function ln(s){function a(c,m,y,w,k){this._reactName=c,this._targetInst=y,this.type=m,this.nativeEvent=w,this.target=k,this.currentTarget=null;for(var j in s)s.hasOwnProperty(j)&&(c=s[j],this[j]=c?c(w):w[j]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?Xr:zl,this.isPropagationStopped=zl,this}return L(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Xr)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Xr)},persist:function(){},isPersistent:Xr}),a}var Jr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},oo=ln(Jr),rs=L({},Jr,{view:0,detail:0}),aa=ln(rs),la,ua,Hn,ao=L({},rs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ze,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Hn&&(Hn&&s.type==="mousemove"?(la=s.screenX-Hn.screenX,ua=s.screenY-Hn.screenY):ua=la=0,Hn=s),la)},movementY:function(s){return"movementY"in s?s.movementY:ua}}),$l=ln(ao),zc=L({},ao,{dataTransfer:0}),$c=ln(zc),ca=L({},rs,{relatedTarget:0}),en=ln(ca),qc=L({},Jr,{animationName:0,elapsedTime:0,pseudoElement:0}),Hc=ln(qc),is=L({},Jr,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),d=ln(is),_=L({},Jr,{data:0}),E=ln(_),P={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},G={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Y={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pe(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=Y[s])?!!a[s]:!1}function ze(){return pe}var Rt=L({},rs,{key:function(s){if(s.key){var a=P[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=so(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?G[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ze,charCode:function(s){return s.type==="keypress"?so(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?so(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),it=ln(Rt),Mt=L({},ao,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Wn=ln(Mt),Pi=L({},rs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ze}),Zr=ln(Pi),ei=L({},Jr,{propertyName:0,elapsedTime:0,pseudoElement:0}),ha=ln(ei),ql=L({},ao,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),CA=ln(ql),bA=[9,13,27,32],Md=u&&"CompositionEvent"in window,Hl=null;u&&"documentMode"in document&&(Hl=document.documentMode);var AA=u&&"TextEvent"in window&&!Hl,gw=u&&(!Md||Hl&&8<Hl&&11>=Hl),yw=" ",vw=!1;function ww(s,a){switch(s){case"keyup":return bA.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _w(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var fa=!1;function PA(s,a){switch(s){case"compositionend":return _w(a);case"keypress":return a.which!==32?null:(vw=!0,yw);case"textInput":return s=a.data,s===yw&&vw?null:s;default:return null}}function RA(s,a){if(fa)return s==="compositionend"||!Md&&ww(s,a)?(s=Bc(),Ai=oa=qn=null,fa=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return gw&&a.locale!=="ko"?null:a.data;default:return null}}var NA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xw(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!NA[s.type]:a==="textarea"}function Ew(s,a,c,m){Qi(m),a=Yc(a,"onChange"),0<a.length&&(c=new oo("onChange","change",null,c,m),s.push({event:c,listeners:a}))}var Wl=null,Gl=null;function DA(s){Uw(s,0)}function Wc(s){var a=ya(s);if(_t(a))return s}function LA(s,a){if(s==="change")return a}var Tw=!1;if(u){var Od;if(u){var Fd="oninput"in document;if(!Fd){var kw=document.createElement("div");kw.setAttribute("oninput","return;"),Fd=typeof kw.oninput=="function"}Od=Fd}else Od=!1;Tw=Od&&(!document.documentMode||9<document.documentMode)}function Sw(){Wl&&(Wl.detachEvent("onpropertychange",Iw),Gl=Wl=null)}function Iw(s){if(s.propertyName==="value"&&Wc(Gl)){var a=[];Ew(a,Gl,s,Yo(s)),Ac(DA,a)}}function VA(s,a,c){s==="focusin"?(Sw(),Wl=a,Gl=c,Wl.attachEvent("onpropertychange",Iw)):s==="focusout"&&Sw()}function MA(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Wc(Gl)}function OA(s,a){if(s==="click")return Wc(a)}function FA(s,a){if(s==="input"||s==="change")return Wc(a)}function jA(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var _r=typeof Object.is=="function"?Object.is:jA;function Kl(s,a){if(_r(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var c=Object.keys(s),m=Object.keys(a);if(c.length!==m.length)return!1;for(m=0;m<c.length;m++){var y=c[m];if(!h.call(a,y)||!_r(s[y],a[y]))return!1}return!0}function Cw(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function bw(s,a){var c=Cw(s);s=0;for(var m;c;){if(c.nodeType===3){if(m=s+c.textContent.length,s<=a&&m>=a)return{node:c,offset:a-s};s=m}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=Cw(c)}}function Aw(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?Aw(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function Pw(){for(var s=window,a=st();a instanceof s.HTMLIFrameElement;){try{var c=typeof a.contentWindow.location.href=="string"}catch{c=!1}if(c)s=a.contentWindow;else break;a=st(s.document)}return a}function jd(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}function UA(s){var a=Pw(),c=s.focusedElem,m=s.selectionRange;if(a!==c&&c&&c.ownerDocument&&Aw(c.ownerDocument.documentElement,c)){if(m!==null&&jd(c)){if(a=m.start,s=m.end,s===void 0&&(s=a),"selectionStart"in c)c.selectionStart=a,c.selectionEnd=Math.min(s,c.value.length);else if(s=(a=c.ownerDocument||document)&&a.defaultView||window,s.getSelection){s=s.getSelection();var y=c.textContent.length,w=Math.min(m.start,y);m=m.end===void 0?w:Math.min(m.end,y),!s.extend&&w>m&&(y=m,m=w,w=y),y=bw(c,w);var k=bw(c,m);y&&k&&(s.rangeCount!==1||s.anchorNode!==y.node||s.anchorOffset!==y.offset||s.focusNode!==k.node||s.focusOffset!==k.offset)&&(a=a.createRange(),a.setStart(y.node,y.offset),s.removeAllRanges(),w>m?(s.addRange(a),s.extend(k.node,k.offset)):(a.setEnd(k.node,k.offset),s.addRange(a)))}}for(a=[],s=c;s=s.parentNode;)s.nodeType===1&&a.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof c.focus=="function"&&c.focus(),c=0;c<a.length;c++)s=a[c],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var BA=u&&"documentMode"in document&&11>=document.documentMode,da=null,Ud=null,Ql=null,Bd=!1;function Rw(s,a,c){var m=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Bd||da==null||da!==st(m)||(m=da,"selectionStart"in m&&jd(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),Ql&&Kl(Ql,m)||(Ql=m,m=Yc(Ud,"onSelect"),0<m.length&&(a=new oo("onSelect","select",null,a,c),s.push({event:a,listeners:m}),a.target=da)))}function Gc(s,a){var c={};return c[s.toLowerCase()]=a.toLowerCase(),c["Webkit"+s]="webkit"+a,c["Moz"+s]="moz"+a,c}var pa={animationend:Gc("Animation","AnimationEnd"),animationiteration:Gc("Animation","AnimationIteration"),animationstart:Gc("Animation","AnimationStart"),transitionend:Gc("Transition","TransitionEnd")},zd={},Nw={};u&&(Nw=document.createElement("div").style,"AnimationEvent"in window||(delete pa.animationend.animation,delete pa.animationiteration.animation,delete pa.animationstart.animation),"TransitionEvent"in window||delete pa.transitionend.transition);function Kc(s){if(zd[s])return zd[s];if(!pa[s])return s;var a=pa[s],c;for(c in a)if(a.hasOwnProperty(c)&&c in Nw)return zd[s]=a[c];return s}var Dw=Kc("animationend"),Lw=Kc("animationiteration"),Vw=Kc("animationstart"),Mw=Kc("transitionend"),Ow=new Map,Fw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ss(s,a){Ow.set(s,a),o(a,[s])}for(var $d=0;$d<Fw.length;$d++){var qd=Fw[$d],zA=qd.toLowerCase(),$A=qd[0].toUpperCase()+qd.slice(1);ss(zA,"on"+$A)}ss(Dw,"onAnimationEnd"),ss(Lw,"onAnimationIteration"),ss(Vw,"onAnimationStart"),ss("dblclick","onDoubleClick"),ss("focusin","onFocus"),ss("focusout","onBlur"),ss(Mw,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qA=new Set("cancel close invalid load scroll toggle".split(" ").concat(Yl));function jw(s,a,c){var m=s.type||"unknown-event";s.currentTarget=c,bl(m,a,void 0,s),s.currentTarget=null}function Uw(s,a){a=(a&4)!==0;for(var c=0;c<s.length;c++){var m=s[c],y=m.event;m=m.listeners;e:{var w=void 0;if(a)for(var k=m.length-1;0<=k;k--){var j=m[k],B=j.instance,Q=j.currentTarget;if(j=j.listener,B!==w&&y.isPropagationStopped())break e;jw(y,j,Q),w=B}else for(k=0;k<m.length;k++){if(j=m[k],B=j.instance,Q=j.currentTarget,j=j.listener,B!==w&&y.isPropagationStopped())break e;jw(y,j,Q),w=B}}}if(Xo)throw s=ir,Xo=!1,ir=null,s}function pt(s,a){var c=a[Jd];c===void 0&&(c=a[Jd]=new Set);var m=s+"__bubble";c.has(m)||(Bw(a,s,2,!1),c.add(m))}function Hd(s,a,c){var m=0;a&&(m|=4),Bw(c,s,m,a)}var Qc="_reactListening"+Math.random().toString(36).slice(2);function Xl(s){if(!s[Qc]){s[Qc]=!0,r.forEach(function(c){c!=="selectionchange"&&(qA.has(c)||Hd(c,!1,s),Hd(c,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[Qc]||(a[Qc]=!0,Hd("selectionchange",!1,a))}}function Bw(s,a,c,m){switch(sa(a)){case 1:var y=Qr;break;case 4:y=Uc;break;default:y=Bl}c=y.bind(null,a,c,s),y=void 0,!Xi||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(y=!0),m?y!==void 0?s.addEventListener(a,c,{capture:!0,passive:y}):s.addEventListener(a,c,!0):y!==void 0?s.addEventListener(a,c,{passive:y}):s.addEventListener(a,c,!1)}function Wd(s,a,c,m,y){var w=m;if((a&1)===0&&(a&2)===0&&m!==null)e:for(;;){if(m===null)return;var k=m.tag;if(k===3||k===4){var j=m.stateNode.containerInfo;if(j===y||j.nodeType===8&&j.parentNode===y)break;if(k===4)for(k=m.return;k!==null;){var B=k.tag;if((B===3||B===4)&&(B=k.stateNode.containerInfo,B===y||B.nodeType===8&&B.parentNode===y))return;k=k.return}for(;j!==null;){if(k=lo(j),k===null)return;if(B=k.tag,B===5||B===6){m=w=k;continue e}j=j.parentNode}}m=m.return}Ac(function(){var Q=w,oe=Yo(c),le=[];e:{var se=Ow.get(s);if(se!==void 0){var ye=oo,Te=s;switch(s){case"keypress":if(so(c)===0)break e;case"keydown":case"keyup":ye=it;break;case"focusin":Te="focus",ye=en;break;case"focusout":Te="blur",ye=en;break;case"beforeblur":case"afterblur":ye=en;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ye=$l;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ye=$c;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ye=Zr;break;case Dw:case Lw:case Vw:ye=Hc;break;case Mw:ye=ha;break;case"scroll":ye=aa;break;case"wheel":ye=CA;break;case"copy":case"cut":case"paste":ye=d;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ye=Wn}var Se=(a&4)!==0,Nt=!Se&&s==="scroll",W=Se?se!==null?se+"Capture":null:se;Se=[];for(var $=Q,K;$!==null;){K=$;var fe=K.stateNode;if(K.tag===5&&fe!==null&&(K=fe,W!==null&&(fe=Qs($,W),fe!=null&&Se.push(Jl($,fe,K)))),Nt)break;$=$.return}0<Se.length&&(se=new ye(se,Te,null,c,oe),le.push({event:se,listeners:Se}))}}if((a&7)===0){e:{if(se=s==="mouseover"||s==="pointerover",ye=s==="mouseout"||s==="pointerout",se&&c!==Kt&&(Te=c.relatedTarget||c.fromElement)&&(lo(Te)||Te[Ri]))break e;if((ye||se)&&(se=oe.window===oe?oe:(se=oe.ownerDocument)?se.defaultView||se.parentWindow:window,ye?(Te=c.relatedTarget||c.toElement,ye=Q,Te=Te?lo(Te):null,Te!==null&&(Nt=vr(Te),Te!==Nt||Te.tag!==5&&Te.tag!==6)&&(Te=null)):(ye=null,Te=Q),ye!==Te)){if(Se=$l,fe="onMouseLeave",W="onMouseEnter",$="mouse",(s==="pointerout"||s==="pointerover")&&(Se=Wn,fe="onPointerLeave",W="onPointerEnter",$="pointer"),Nt=ye==null?se:ya(ye),K=Te==null?se:ya(Te),se=new Se(fe,$+"leave",ye,c,oe),se.target=Nt,se.relatedTarget=K,fe=null,lo(oe)===Q&&(Se=new Se(W,$+"enter",Te,c,oe),Se.target=K,Se.relatedTarget=Nt,fe=Se),Nt=fe,ye&&Te)t:{for(Se=ye,W=Te,$=0,K=Se;K;K=ma(K))$++;for(K=0,fe=W;fe;fe=ma(fe))K++;for(;0<$-K;)Se=ma(Se),$--;for(;0<K-$;)W=ma(W),K--;for(;$--;){if(Se===W||W!==null&&Se===W.alternate)break t;Se=ma(Se),W=ma(W)}Se=null}else Se=null;ye!==null&&zw(le,se,ye,Se,!1),Te!==null&&Nt!==null&&zw(le,Nt,Te,Se,!0)}}e:{if(se=Q?ya(Q):window,ye=se.nodeName&&se.nodeName.toLowerCase(),ye==="select"||ye==="input"&&se.type==="file")var Ie=LA;else if(xw(se))if(Tw)Ie=FA;else{Ie=MA;var Ne=VA}else(ye=se.nodeName)&&ye.toLowerCase()==="input"&&(se.type==="checkbox"||se.type==="radio")&&(Ie=OA);if(Ie&&(Ie=Ie(s,Q))){Ew(le,Ie,c,oe);break e}Ne&&Ne(s,se,Q),s==="focusout"&&(Ne=se._wrapperState)&&Ne.controlled&&se.type==="number"&&xt(se,"number",se.value)}switch(Ne=Q?ya(Q):window,s){case"focusin":(xw(Ne)||Ne.contentEditable==="true")&&(da=Ne,Ud=Q,Ql=null);break;case"focusout":Ql=Ud=da=null;break;case"mousedown":Bd=!0;break;case"contextmenu":case"mouseup":case"dragend":Bd=!1,Rw(le,c,oe);break;case"selectionchange":if(BA)break;case"keydown":case"keyup":Rw(le,c,oe)}var De;if(Md)e:{switch(s){case"compositionstart":var Oe="onCompositionStart";break e;case"compositionend":Oe="onCompositionEnd";break e;case"compositionupdate":Oe="onCompositionUpdate";break e}Oe=void 0}else fa?ww(s,c)&&(Oe="onCompositionEnd"):s==="keydown"&&c.keyCode===229&&(Oe="onCompositionStart");Oe&&(gw&&c.locale!=="ko"&&(fa||Oe!=="onCompositionStart"?Oe==="onCompositionEnd"&&fa&&(De=Bc()):(qn=oe,oa="value"in qn?qn.value:qn.textContent,fa=!0)),Ne=Yc(Q,Oe),0<Ne.length&&(Oe=new E(Oe,s,null,c,oe),le.push({event:Oe,listeners:Ne}),De?Oe.data=De:(De=_w(c),De!==null&&(Oe.data=De)))),(De=AA?PA(s,c):RA(s,c))&&(Q=Yc(Q,"onBeforeInput"),0<Q.length&&(oe=new E("onBeforeInput","beforeinput",null,c,oe),le.push({event:oe,listeners:Q}),oe.data=De))}Uw(le,a)})}function Jl(s,a,c){return{instance:s,listener:a,currentTarget:c}}function Yc(s,a){for(var c=a+"Capture",m=[];s!==null;){var y=s,w=y.stateNode;y.tag===5&&w!==null&&(y=w,w=Qs(s,c),w!=null&&m.unshift(Jl(s,w,y)),w=Qs(s,a),w!=null&&m.push(Jl(s,w,y))),s=s.return}return m}function ma(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function zw(s,a,c,m,y){for(var w=a._reactName,k=[];c!==null&&c!==m;){var j=c,B=j.alternate,Q=j.stateNode;if(B!==null&&B===m)break;j.tag===5&&Q!==null&&(j=Q,y?(B=Qs(c,w),B!=null&&k.unshift(Jl(c,B,j))):y||(B=Qs(c,w),B!=null&&k.push(Jl(c,B,j)))),c=c.return}k.length!==0&&s.push({event:a,listeners:k})}var HA=/\r\n?/g,WA=/\u0000|\uFFFD/g;function $w(s){return(typeof s=="string"?s:""+s).replace(HA,`
`).replace(WA,"")}function Xc(s,a,c){if(a=$w(a),$w(s)!==a&&c)throw Error(n(425))}function Jc(){}var Gd=null,Kd=null;function Qd(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Yd=typeof setTimeout=="function"?setTimeout:void 0,GA=typeof clearTimeout=="function"?clearTimeout:void 0,qw=typeof Promise=="function"?Promise:void 0,KA=typeof queueMicrotask=="function"?queueMicrotask:typeof qw<"u"?function(s){return qw.resolve(null).then(s).catch(QA)}:Yd;function QA(s){setTimeout(function(){throw s})}function Xd(s,a){var c=a,m=0;do{var y=c.nextSibling;if(s.removeChild(c),y&&y.nodeType===8)if(c=y.data,c==="/$"){if(m===0){s.removeChild(y),ns(a);return}m--}else c!=="$"&&c!=="$?"&&c!=="$!"||m++;c=y}while(c);ns(a)}function os(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return s}function Hw(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var c=s.data;if(c==="$"||c==="$!"||c==="$?"){if(a===0)return s;a--}else c==="/$"&&a++}s=s.previousSibling}return null}var ga=Math.random().toString(36).slice(2),ti="__reactFiber$"+ga,Zl="__reactProps$"+ga,Ri="__reactContainer$"+ga,Jd="__reactEvents$"+ga,YA="__reactListeners$"+ga,XA="__reactHandles$"+ga;function lo(s){var a=s[ti];if(a)return a;for(var c=s.parentNode;c;){if(a=c[Ri]||c[ti]){if(c=a.alternate,a.child!==null||c!==null&&c.child!==null)for(s=Hw(s);s!==null;){if(c=s[ti])return c;s=Hw(s)}return a}s=c,c=s.parentNode}return null}function eu(s){return s=s[ti]||s[Ri],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function ya(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(n(33))}function Zc(s){return s[Zl]||null}var Zd=[],va=-1;function as(s){return{current:s}}function mt(s){0>va||(s.current=Zd[va],Zd[va]=null,va--)}function lt(s,a){va++,Zd[va]=s.current,s.current=a}var ls={},un=as(ls),Pn=as(!1),uo=ls;function wa(s,a){var c=s.type.contextTypes;if(!c)return ls;var m=s.stateNode;if(m&&m.__reactInternalMemoizedUnmaskedChildContext===a)return m.__reactInternalMemoizedMaskedChildContext;var y={},w;for(w in c)y[w]=a[w];return m&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=a,s.__reactInternalMemoizedMaskedChildContext=y),y}function Rn(s){return s=s.childContextTypes,s!=null}function eh(){mt(Pn),mt(un)}function Ww(s,a,c){if(un.current!==ls)throw Error(n(168));lt(un,a),lt(Pn,c)}function Gw(s,a,c){var m=s.stateNode;if(a=a.childContextTypes,typeof m.getChildContext!="function")return c;m=m.getChildContext();for(var y in m)if(!(y in a))throw Error(n(108,Be(s)||"Unknown",y));return L({},c,m)}function th(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||ls,uo=un.current,lt(un,s),lt(Pn,Pn.current),!0}function Kw(s,a,c){var m=s.stateNode;if(!m)throw Error(n(169));c?(s=Gw(s,a,uo),m.__reactInternalMemoizedMergedChildContext=s,mt(Pn),mt(un),lt(un,s)):mt(Pn),lt(Pn,c)}var Ni=null,nh=!1,ep=!1;function Qw(s){Ni===null?Ni=[s]:Ni.push(s)}function JA(s){nh=!0,Qw(s)}function us(){if(!ep&&Ni!==null){ep=!0;var s=0,a=Xe;try{var c=Ni;for(Xe=1;s<c.length;s++){var m=c[s];do m=m(!0);while(m!==null)}Ni=null,nh=!1}catch(y){throw Ni!==null&&(Ni=Ni.slice(s+1)),Pl(Zo,us),y}finally{Xe=a,ep=!1}}return null}var _a=[],xa=0,rh=null,ih=0,or=[],ar=0,co=null,Di=1,Li="";function ho(s,a){_a[xa++]=ih,_a[xa++]=rh,rh=s,ih=a}function Yw(s,a,c){or[ar++]=Di,or[ar++]=Li,or[ar++]=co,co=s;var m=Di;s=Li;var y=32-zn(m)-1;m&=~(1<<y),c+=1;var w=32-zn(a)+y;if(30<w){var k=y-y%5;w=(m&(1<<k)-1).toString(32),m>>=k,y-=k,Di=1<<32-zn(a)+y|c<<y|m,Li=w+s}else Di=1<<w|c<<y|m,Li=s}function tp(s){s.return!==null&&(ho(s,1),Yw(s,1,0))}function np(s){for(;s===rh;)rh=_a[--xa],_a[xa]=null,ih=_a[--xa],_a[xa]=null;for(;s===co;)co=or[--ar],or[ar]=null,Li=or[--ar],or[ar]=null,Di=or[--ar],or[ar]=null}var Gn=null,Kn=null,wt=!1,xr=null;function Xw(s,a){var c=hr(5,null,null,0);c.elementType="DELETED",c.stateNode=a,c.return=s,a=s.deletions,a===null?(s.deletions=[c],s.flags|=16):a.push(c)}function Jw(s,a){switch(s.tag){case 5:var c=s.type;return a=a.nodeType!==1||c.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(s.stateNode=a,Gn=s,Kn=os(a.firstChild),!0):!1;case 6:return a=s.pendingProps===""||a.nodeType!==3?null:a,a!==null?(s.stateNode=a,Gn=s,Kn=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(c=co!==null?{id:Di,overflow:Li}:null,s.memoizedState={dehydrated:a,treeContext:c,retryLane:1073741824},c=hr(18,null,null,0),c.stateNode=a,c.return=s,s.child=c,Gn=s,Kn=null,!0):!1;default:return!1}}function rp(s){return(s.mode&1)!==0&&(s.flags&128)===0}function ip(s){if(wt){var a=Kn;if(a){var c=a;if(!Jw(s,a)){if(rp(s))throw Error(n(418));a=os(c.nextSibling);var m=Gn;a&&Jw(s,a)?Xw(m,c):(s.flags=s.flags&-4097|2,wt=!1,Gn=s)}}else{if(rp(s))throw Error(n(418));s.flags=s.flags&-4097|2,wt=!1,Gn=s}}}function Zw(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;Gn=s}function sh(s){if(s!==Gn)return!1;if(!wt)return Zw(s),wt=!0,!1;var a;if((a=s.tag!==3)&&!(a=s.tag!==5)&&(a=s.type,a=a!=="head"&&a!=="body"&&!Qd(s.type,s.memoizedProps)),a&&(a=Kn)){if(rp(s))throw e0(),Error(n(418));for(;a;)Xw(s,a),a=os(a.nextSibling)}if(Zw(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(n(317));e:{for(s=s.nextSibling,a=0;s;){if(s.nodeType===8){var c=s.data;if(c==="/$"){if(a===0){Kn=os(s.nextSibling);break e}a--}else c!=="$"&&c!=="$!"&&c!=="$?"||a++}s=s.nextSibling}Kn=null}}else Kn=Gn?os(s.stateNode.nextSibling):null;return!0}function e0(){for(var s=Kn;s;)s=os(s.nextSibling)}function Ea(){Kn=Gn=null,wt=!1}function sp(s){xr===null?xr=[s]:xr.push(s)}var ZA=J.ReactCurrentBatchConfig;function tu(s,a,c){if(s=c.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(c._owner){if(c=c._owner,c){if(c.tag!==1)throw Error(n(309));var m=c.stateNode}if(!m)throw Error(n(147,s));var y=m,w=""+s;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===w?a.ref:(a=function(k){var j=y.refs;k===null?delete j[w]:j[w]=k},a._stringRef=w,a)}if(typeof s!="string")throw Error(n(284));if(!c._owner)throw Error(n(290,s))}return s}function oh(s,a){throw s=Object.prototype.toString.call(a),Error(n(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s))}function t0(s){var a=s._init;return a(s._payload)}function n0(s){function a(W,$){if(s){var K=W.deletions;K===null?(W.deletions=[$],W.flags|=16):K.push($)}}function c(W,$){if(!s)return null;for(;$!==null;)a(W,$),$=$.sibling;return null}function m(W,$){for(W=new Map;$!==null;)$.key!==null?W.set($.key,$):W.set($.index,$),$=$.sibling;return W}function y(W,$){return W=ys(W,$),W.index=0,W.sibling=null,W}function w(W,$,K){return W.index=K,s?(K=W.alternate,K!==null?(K=K.index,K<$?(W.flags|=2,$):K):(W.flags|=2,$)):(W.flags|=1048576,$)}function k(W){return s&&W.alternate===null&&(W.flags|=2),W}function j(W,$,K,fe){return $===null||$.tag!==6?($=Yp(K,W.mode,fe),$.return=W,$):($=y($,K),$.return=W,$)}function B(W,$,K,fe){var Ie=K.type;return Ie===O?oe(W,$,K.props.children,fe,K.key):$!==null&&($.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===Me&&t0(Ie)===$.type)?(fe=y($,K.props),fe.ref=tu(W,$,K),fe.return=W,fe):(fe=Ph(K.type,K.key,K.props,null,W.mode,fe),fe.ref=tu(W,$,K),fe.return=W,fe)}function Q(W,$,K,fe){return $===null||$.tag!==4||$.stateNode.containerInfo!==K.containerInfo||$.stateNode.implementation!==K.implementation?($=Xp(K,W.mode,fe),$.return=W,$):($=y($,K.children||[]),$.return=W,$)}function oe(W,$,K,fe,Ie){return $===null||$.tag!==7?($=_o(K,W.mode,fe,Ie),$.return=W,$):($=y($,K),$.return=W,$)}function le(W,$,K){if(typeof $=="string"&&$!==""||typeof $=="number")return $=Yp(""+$,W.mode,K),$.return=W,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case X:return K=Ph($.type,$.key,$.props,null,W.mode,K),K.ref=tu(W,null,$),K.return=W,K;case H:return $=Xp($,W.mode,K),$.return=W,$;case Me:var fe=$._init;return le(W,fe($._payload),K)}if(vt($)||me($))return $=_o($,W.mode,K,null),$.return=W,$;oh(W,$)}return null}function se(W,$,K,fe){var Ie=$!==null?$.key:null;if(typeof K=="string"&&K!==""||typeof K=="number")return Ie!==null?null:j(W,$,""+K,fe);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case X:return K.key===Ie?B(W,$,K,fe):null;case H:return K.key===Ie?Q(W,$,K,fe):null;case Me:return Ie=K._init,se(W,$,Ie(K._payload),fe)}if(vt(K)||me(K))return Ie!==null?null:oe(W,$,K,fe,null);oh(W,K)}return null}function ye(W,$,K,fe,Ie){if(typeof fe=="string"&&fe!==""||typeof fe=="number")return W=W.get(K)||null,j($,W,""+fe,Ie);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case X:return W=W.get(fe.key===null?K:fe.key)||null,B($,W,fe,Ie);case H:return W=W.get(fe.key===null?K:fe.key)||null,Q($,W,fe,Ie);case Me:var Ne=fe._init;return ye(W,$,K,Ne(fe._payload),Ie)}if(vt(fe)||me(fe))return W=W.get(K)||null,oe($,W,fe,Ie,null);oh($,fe)}return null}function Te(W,$,K,fe){for(var Ie=null,Ne=null,De=$,Oe=$=0,Xt=null;De!==null&&Oe<K.length;Oe++){De.index>Oe?(Xt=De,De=null):Xt=De.sibling;var tt=se(W,De,K[Oe],fe);if(tt===null){De===null&&(De=Xt);break}s&&De&&tt.alternate===null&&a(W,De),$=w(tt,$,Oe),Ne===null?Ie=tt:Ne.sibling=tt,Ne=tt,De=Xt}if(Oe===K.length)return c(W,De),wt&&ho(W,Oe),Ie;if(De===null){for(;Oe<K.length;Oe++)De=le(W,K[Oe],fe),De!==null&&($=w(De,$,Oe),Ne===null?Ie=De:Ne.sibling=De,Ne=De);return wt&&ho(W,Oe),Ie}for(De=m(W,De);Oe<K.length;Oe++)Xt=ye(De,W,Oe,K[Oe],fe),Xt!==null&&(s&&Xt.alternate!==null&&De.delete(Xt.key===null?Oe:Xt.key),$=w(Xt,$,Oe),Ne===null?Ie=Xt:Ne.sibling=Xt,Ne=Xt);return s&&De.forEach(function(vs){return a(W,vs)}),wt&&ho(W,Oe),Ie}function Se(W,$,K,fe){var Ie=me(K);if(typeof Ie!="function")throw Error(n(150));if(K=Ie.call(K),K==null)throw Error(n(151));for(var Ne=Ie=null,De=$,Oe=$=0,Xt=null,tt=K.next();De!==null&&!tt.done;Oe++,tt=K.next()){De.index>Oe?(Xt=De,De=null):Xt=De.sibling;var vs=se(W,De,tt.value,fe);if(vs===null){De===null&&(De=Xt);break}s&&De&&vs.alternate===null&&a(W,De),$=w(vs,$,Oe),Ne===null?Ie=vs:Ne.sibling=vs,Ne=vs,De=Xt}if(tt.done)return c(W,De),wt&&ho(W,Oe),Ie;if(De===null){for(;!tt.done;Oe++,tt=K.next())tt=le(W,tt.value,fe),tt!==null&&($=w(tt,$,Oe),Ne===null?Ie=tt:Ne.sibling=tt,Ne=tt);return wt&&ho(W,Oe),Ie}for(De=m(W,De);!tt.done;Oe++,tt=K.next())tt=ye(De,W,Oe,tt.value,fe),tt!==null&&(s&&tt.alternate!==null&&De.delete(tt.key===null?Oe:tt.key),$=w(tt,$,Oe),Ne===null?Ie=tt:Ne.sibling=tt,Ne=tt);return s&&De.forEach(function(NP){return a(W,NP)}),wt&&ho(W,Oe),Ie}function Nt(W,$,K,fe){if(typeof K=="object"&&K!==null&&K.type===O&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case X:e:{for(var Ie=K.key,Ne=$;Ne!==null;){if(Ne.key===Ie){if(Ie=K.type,Ie===O){if(Ne.tag===7){c(W,Ne.sibling),$=y(Ne,K.props.children),$.return=W,W=$;break e}}else if(Ne.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===Me&&t0(Ie)===Ne.type){c(W,Ne.sibling),$=y(Ne,K.props),$.ref=tu(W,Ne,K),$.return=W,W=$;break e}c(W,Ne);break}else a(W,Ne);Ne=Ne.sibling}K.type===O?($=_o(K.props.children,W.mode,fe,K.key),$.return=W,W=$):(fe=Ph(K.type,K.key,K.props,null,W.mode,fe),fe.ref=tu(W,$,K),fe.return=W,W=fe)}return k(W);case H:e:{for(Ne=K.key;$!==null;){if($.key===Ne)if($.tag===4&&$.stateNode.containerInfo===K.containerInfo&&$.stateNode.implementation===K.implementation){c(W,$.sibling),$=y($,K.children||[]),$.return=W,W=$;break e}else{c(W,$);break}else a(W,$);$=$.sibling}$=Xp(K,W.mode,fe),$.return=W,W=$}return k(W);case Me:return Ne=K._init,Nt(W,$,Ne(K._payload),fe)}if(vt(K))return Te(W,$,K,fe);if(me(K))return Se(W,$,K,fe);oh(W,K)}return typeof K=="string"&&K!==""||typeof K=="number"?(K=""+K,$!==null&&$.tag===6?(c(W,$.sibling),$=y($,K),$.return=W,W=$):(c(W,$),$=Yp(K,W.mode,fe),$.return=W,W=$),k(W)):c(W,$)}return Nt}var Ta=n0(!0),r0=n0(!1),ah=as(null),lh=null,ka=null,op=null;function ap(){op=ka=lh=null}function lp(s){var a=ah.current;mt(ah),s._currentValue=a}function up(s,a,c){for(;s!==null;){var m=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,m!==null&&(m.childLanes|=a)):m!==null&&(m.childLanes&a)!==a&&(m.childLanes|=a),s===c)break;s=s.return}}function Sa(s,a){lh=s,op=ka=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&a)!==0&&(Nn=!0),s.firstContext=null)}function lr(s){var a=s._currentValue;if(op!==s)if(s={context:s,memoizedValue:a,next:null},ka===null){if(lh===null)throw Error(n(308));ka=s,lh.dependencies={lanes:0,firstContext:s}}else ka=ka.next=s;return a}var fo=null;function cp(s){fo===null?fo=[s]:fo.push(s)}function i0(s,a,c,m){var y=a.interleaved;return y===null?(c.next=c,cp(a)):(c.next=y.next,y.next=c),a.interleaved=c,Vi(s,m)}function Vi(s,a){s.lanes|=a;var c=s.alternate;for(c!==null&&(c.lanes|=a),c=s,s=s.return;s!==null;)s.childLanes|=a,c=s.alternate,c!==null&&(c.childLanes|=a),c=s,s=s.return;return c.tag===3?c.stateNode:null}var cs=!1;function hp(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function s0(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function Mi(s,a){return{eventTime:s,lane:a,tag:0,payload:null,callback:null,next:null}}function hs(s,a,c){var m=s.updateQueue;if(m===null)return null;if(m=m.shared,(et&2)!==0){var y=m.pending;return y===null?a.next=a:(a.next=y.next,y.next=a),m.pending=a,Vi(s,c)}return y=m.interleaved,y===null?(a.next=a,cp(m)):(a.next=y.next,y.next=a),m.interleaved=a,Vi(s,c)}function uh(s,a,c){if(a=a.updateQueue,a!==null&&(a=a.shared,(c&4194240)!==0)){var m=a.lanes;m&=s.pendingLanes,c|=m,a.lanes=c,Ml(s,c)}}function o0(s,a){var c=s.updateQueue,m=s.alternate;if(m!==null&&(m=m.updateQueue,c===m)){var y=null,w=null;if(c=c.firstBaseUpdate,c!==null){do{var k={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};w===null?y=w=k:w=w.next=k,c=c.next}while(c!==null);w===null?y=w=a:w=w.next=a}else y=w=a;c={baseState:m.baseState,firstBaseUpdate:y,lastBaseUpdate:w,shared:m.shared,effects:m.effects},s.updateQueue=c;return}s=c.lastBaseUpdate,s===null?c.firstBaseUpdate=a:s.next=a,c.lastBaseUpdate=a}function ch(s,a,c,m){var y=s.updateQueue;cs=!1;var w=y.firstBaseUpdate,k=y.lastBaseUpdate,j=y.shared.pending;if(j!==null){y.shared.pending=null;var B=j,Q=B.next;B.next=null,k===null?w=Q:k.next=Q,k=B;var oe=s.alternate;oe!==null&&(oe=oe.updateQueue,j=oe.lastBaseUpdate,j!==k&&(j===null?oe.firstBaseUpdate=Q:j.next=Q,oe.lastBaseUpdate=B))}if(w!==null){var le=y.baseState;k=0,oe=Q=B=null,j=w;do{var se=j.lane,ye=j.eventTime;if((m&se)===se){oe!==null&&(oe=oe.next={eventTime:ye,lane:0,tag:j.tag,payload:j.payload,callback:j.callback,next:null});e:{var Te=s,Se=j;switch(se=a,ye=c,Se.tag){case 1:if(Te=Se.payload,typeof Te=="function"){le=Te.call(ye,le,se);break e}le=Te;break e;case 3:Te.flags=Te.flags&-65537|128;case 0:if(Te=Se.payload,se=typeof Te=="function"?Te.call(ye,le,se):Te,se==null)break e;le=L({},le,se);break e;case 2:cs=!0}}j.callback!==null&&j.lane!==0&&(s.flags|=64,se=y.effects,se===null?y.effects=[j]:se.push(j))}else ye={eventTime:ye,lane:se,tag:j.tag,payload:j.payload,callback:j.callback,next:null},oe===null?(Q=oe=ye,B=le):oe=oe.next=ye,k|=se;if(j=j.next,j===null){if(j=y.shared.pending,j===null)break;se=j,j=se.next,se.next=null,y.lastBaseUpdate=se,y.shared.pending=null}}while(!0);if(oe===null&&(B=le),y.baseState=B,y.firstBaseUpdate=Q,y.lastBaseUpdate=oe,a=y.shared.interleaved,a!==null){y=a;do k|=y.lane,y=y.next;while(y!==a)}else w===null&&(y.shared.lanes=0);go|=k,s.lanes=k,s.memoizedState=le}}function a0(s,a,c){if(s=a.effects,a.effects=null,s!==null)for(a=0;a<s.length;a++){var m=s[a],y=m.callback;if(y!==null){if(m.callback=null,m=c,typeof y!="function")throw Error(n(191,y));y.call(m)}}}var nu={},ni=as(nu),ru=as(nu),iu=as(nu);function po(s){if(s===nu)throw Error(n(174));return s}function fp(s,a){switch(lt(iu,a),lt(ru,s),lt(ni,nu),s=a.nodeType,s){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:de(null,"");break;default:s=s===8?a.parentNode:a,a=s.namespaceURI||null,s=s.tagName,a=de(a,s)}mt(ni),lt(ni,a)}function Ia(){mt(ni),mt(ru),mt(iu)}function l0(s){po(iu.current);var a=po(ni.current),c=de(a,s.type);a!==c&&(lt(ru,s),lt(ni,c))}function dp(s){ru.current===s&&(mt(ni),mt(ru))}var Et=as(0);function hh(s){for(var a=s;a!==null;){if(a.tag===13){var c=a.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||c.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var pp=[];function mp(){for(var s=0;s<pp.length;s++)pp[s]._workInProgressVersionPrimary=null;pp.length=0}var fh=J.ReactCurrentDispatcher,gp=J.ReactCurrentBatchConfig,mo=0,Tt=null,$t=null,Qt=null,dh=!1,su=!1,ou=0,eP=0;function cn(){throw Error(n(321))}function yp(s,a){if(a===null)return!1;for(var c=0;c<a.length&&c<s.length;c++)if(!_r(s[c],a[c]))return!1;return!0}function vp(s,a,c,m,y,w){if(mo=w,Tt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,fh.current=s===null||s.memoizedState===null?iP:sP,s=c(m,y),su){w=0;do{if(su=!1,ou=0,25<=w)throw Error(n(301));w+=1,Qt=$t=null,a.updateQueue=null,fh.current=oP,s=c(m,y)}while(su)}if(fh.current=gh,a=$t!==null&&$t.next!==null,mo=0,Qt=$t=Tt=null,dh=!1,a)throw Error(n(300));return s}function wp(){var s=ou!==0;return ou=0,s}function ri(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qt===null?Tt.memoizedState=Qt=s:Qt=Qt.next=s,Qt}function ur(){if($t===null){var s=Tt.alternate;s=s!==null?s.memoizedState:null}else s=$t.next;var a=Qt===null?Tt.memoizedState:Qt.next;if(a!==null)Qt=a,$t=s;else{if(s===null)throw Error(n(310));$t=s,s={memoizedState:$t.memoizedState,baseState:$t.baseState,baseQueue:$t.baseQueue,queue:$t.queue,next:null},Qt===null?Tt.memoizedState=Qt=s:Qt=Qt.next=s}return Qt}function au(s,a){return typeof a=="function"?a(s):a}function _p(s){var a=ur(),c=a.queue;if(c===null)throw Error(n(311));c.lastRenderedReducer=s;var m=$t,y=m.baseQueue,w=c.pending;if(w!==null){if(y!==null){var k=y.next;y.next=w.next,w.next=k}m.baseQueue=y=w,c.pending=null}if(y!==null){w=y.next,m=m.baseState;var j=k=null,B=null,Q=w;do{var oe=Q.lane;if((mo&oe)===oe)B!==null&&(B=B.next={lane:0,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),m=Q.hasEagerState?Q.eagerState:s(m,Q.action);else{var le={lane:oe,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null};B===null?(j=B=le,k=m):B=B.next=le,Tt.lanes|=oe,go|=oe}Q=Q.next}while(Q!==null&&Q!==w);B===null?k=m:B.next=j,_r(m,a.memoizedState)||(Nn=!0),a.memoizedState=m,a.baseState=k,a.baseQueue=B,c.lastRenderedState=m}if(s=c.interleaved,s!==null){y=s;do w=y.lane,Tt.lanes|=w,go|=w,y=y.next;while(y!==s)}else y===null&&(c.lanes=0);return[a.memoizedState,c.dispatch]}function xp(s){var a=ur(),c=a.queue;if(c===null)throw Error(n(311));c.lastRenderedReducer=s;var m=c.dispatch,y=c.pending,w=a.memoizedState;if(y!==null){c.pending=null;var k=y=y.next;do w=s(w,k.action),k=k.next;while(k!==y);_r(w,a.memoizedState)||(Nn=!0),a.memoizedState=w,a.baseQueue===null&&(a.baseState=w),c.lastRenderedState=w}return[w,m]}function u0(){}function c0(s,a){var c=Tt,m=ur(),y=a(),w=!_r(m.memoizedState,y);if(w&&(m.memoizedState=y,Nn=!0),m=m.queue,Ep(d0.bind(null,c,m,s),[s]),m.getSnapshot!==a||w||Qt!==null&&Qt.memoizedState.tag&1){if(c.flags|=2048,lu(9,f0.bind(null,c,m,y,a),void 0,null),Yt===null)throw Error(n(349));(mo&30)!==0||h0(c,a,y)}return y}function h0(s,a,c){s.flags|=16384,s={getSnapshot:a,value:c},a=Tt.updateQueue,a===null?(a={lastEffect:null,stores:null},Tt.updateQueue=a,a.stores=[s]):(c=a.stores,c===null?a.stores=[s]:c.push(s))}function f0(s,a,c,m){a.value=c,a.getSnapshot=m,p0(a)&&m0(s)}function d0(s,a,c){return c(function(){p0(a)&&m0(s)})}function p0(s){var a=s.getSnapshot;s=s.value;try{var c=a();return!_r(s,c)}catch{return!0}}function m0(s){var a=Vi(s,1);a!==null&&Sr(a,s,1,-1)}function g0(s){var a=ri();return typeof s=="function"&&(s=s()),a.memoizedState=a.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:au,lastRenderedState:s},a.queue=s,s=s.dispatch=rP.bind(null,Tt,s),[a.memoizedState,s]}function lu(s,a,c,m){return s={tag:s,create:a,destroy:c,deps:m,next:null},a=Tt.updateQueue,a===null?(a={lastEffect:null,stores:null},Tt.updateQueue=a,a.lastEffect=s.next=s):(c=a.lastEffect,c===null?a.lastEffect=s.next=s:(m=c.next,c.next=s,s.next=m,a.lastEffect=s)),s}function y0(){return ur().memoizedState}function ph(s,a,c,m){var y=ri();Tt.flags|=s,y.memoizedState=lu(1|a,c,void 0,m===void 0?null:m)}function mh(s,a,c,m){var y=ur();m=m===void 0?null:m;var w=void 0;if($t!==null){var k=$t.memoizedState;if(w=k.destroy,m!==null&&yp(m,k.deps)){y.memoizedState=lu(a,c,w,m);return}}Tt.flags|=s,y.memoizedState=lu(1|a,c,w,m)}function v0(s,a){return ph(8390656,8,s,a)}function Ep(s,a){return mh(2048,8,s,a)}function w0(s,a){return mh(4,2,s,a)}function _0(s,a){return mh(4,4,s,a)}function x0(s,a){if(typeof a=="function")return s=s(),a(s),function(){a(null)};if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function E0(s,a,c){return c=c!=null?c.concat([s]):null,mh(4,4,x0.bind(null,a,s),c)}function Tp(){}function T0(s,a){var c=ur();a=a===void 0?null:a;var m=c.memoizedState;return m!==null&&a!==null&&yp(a,m[1])?m[0]:(c.memoizedState=[s,a],s)}function k0(s,a){var c=ur();a=a===void 0?null:a;var m=c.memoizedState;return m!==null&&a!==null&&yp(a,m[1])?m[0]:(s=s(),c.memoizedState=[s,a],s)}function S0(s,a,c){return(mo&21)===0?(s.baseState&&(s.baseState=!1,Nn=!0),s.memoizedState=c):(_r(c,a)||(c=Ll(),Tt.lanes|=c,go|=c,s.baseState=!0),a)}function tP(s,a){var c=Xe;Xe=c!==0&&4>c?c:4,s(!0);var m=gp.transition;gp.transition={};try{s(!1),a()}finally{Xe=c,gp.transition=m}}function I0(){return ur().memoizedState}function nP(s,a,c){var m=ms(s);if(c={lane:m,action:c,hasEagerState:!1,eagerState:null,next:null},C0(s))b0(a,c);else if(c=i0(s,a,c,m),c!==null){var y=Tn();Sr(c,s,m,y),A0(c,a,m)}}function rP(s,a,c){var m=ms(s),y={lane:m,action:c,hasEagerState:!1,eagerState:null,next:null};if(C0(s))b0(a,y);else{var w=s.alternate;if(s.lanes===0&&(w===null||w.lanes===0)&&(w=a.lastRenderedReducer,w!==null))try{var k=a.lastRenderedState,j=w(k,c);if(y.hasEagerState=!0,y.eagerState=j,_r(j,k)){var B=a.interleaved;B===null?(y.next=y,cp(a)):(y.next=B.next,B.next=y),a.interleaved=y;return}}catch{}finally{}c=i0(s,a,y,m),c!==null&&(y=Tn(),Sr(c,s,m,y),A0(c,a,m))}}function C0(s){var a=s.alternate;return s===Tt||a!==null&&a===Tt}function b0(s,a){su=dh=!0;var c=s.pending;c===null?a.next=a:(a.next=c.next,c.next=a),s.pending=a}function A0(s,a,c){if((c&4194240)!==0){var m=a.lanes;m&=s.pendingLanes,c|=m,a.lanes=c,Ml(s,c)}}var gh={readContext:lr,useCallback:cn,useContext:cn,useEffect:cn,useImperativeHandle:cn,useInsertionEffect:cn,useLayoutEffect:cn,useMemo:cn,useReducer:cn,useRef:cn,useState:cn,useDebugValue:cn,useDeferredValue:cn,useTransition:cn,useMutableSource:cn,useSyncExternalStore:cn,useId:cn,unstable_isNewReconciler:!1},iP={readContext:lr,useCallback:function(s,a){return ri().memoizedState=[s,a===void 0?null:a],s},useContext:lr,useEffect:v0,useImperativeHandle:function(s,a,c){return c=c!=null?c.concat([s]):null,ph(4194308,4,x0.bind(null,a,s),c)},useLayoutEffect:function(s,a){return ph(4194308,4,s,a)},useInsertionEffect:function(s,a){return ph(4,2,s,a)},useMemo:function(s,a){var c=ri();return a=a===void 0?null:a,s=s(),c.memoizedState=[s,a],s},useReducer:function(s,a,c){var m=ri();return a=c!==void 0?c(a):a,m.memoizedState=m.baseState=a,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:a},m.queue=s,s=s.dispatch=nP.bind(null,Tt,s),[m.memoizedState,s]},useRef:function(s){var a=ri();return s={current:s},a.memoizedState=s},useState:g0,useDebugValue:Tp,useDeferredValue:function(s){return ri().memoizedState=s},useTransition:function(){var s=g0(!1),a=s[0];return s=tP.bind(null,s[1]),ri().memoizedState=s,[a,s]},useMutableSource:function(){},useSyncExternalStore:function(s,a,c){var m=Tt,y=ri();if(wt){if(c===void 0)throw Error(n(407));c=c()}else{if(c=a(),Yt===null)throw Error(n(349));(mo&30)!==0||h0(m,a,c)}y.memoizedState=c;var w={value:c,getSnapshot:a};return y.queue=w,v0(d0.bind(null,m,w,s),[s]),m.flags|=2048,lu(9,f0.bind(null,m,w,c,a),void 0,null),c},useId:function(){var s=ri(),a=Yt.identifierPrefix;if(wt){var c=Li,m=Di;c=(m&~(1<<32-zn(m)-1)).toString(32)+c,a=":"+a+"R"+c,c=ou++,0<c&&(a+="H"+c.toString(32)),a+=":"}else c=eP++,a=":"+a+"r"+c.toString(32)+":";return s.memoizedState=a},unstable_isNewReconciler:!1},sP={readContext:lr,useCallback:T0,useContext:lr,useEffect:Ep,useImperativeHandle:E0,useInsertionEffect:w0,useLayoutEffect:_0,useMemo:k0,useReducer:_p,useRef:y0,useState:function(){return _p(au)},useDebugValue:Tp,useDeferredValue:function(s){var a=ur();return S0(a,$t.memoizedState,s)},useTransition:function(){var s=_p(au)[0],a=ur().memoizedState;return[s,a]},useMutableSource:u0,useSyncExternalStore:c0,useId:I0,unstable_isNewReconciler:!1},oP={readContext:lr,useCallback:T0,useContext:lr,useEffect:Ep,useImperativeHandle:E0,useInsertionEffect:w0,useLayoutEffect:_0,useMemo:k0,useReducer:xp,useRef:y0,useState:function(){return xp(au)},useDebugValue:Tp,useDeferredValue:function(s){var a=ur();return $t===null?a.memoizedState=s:S0(a,$t.memoizedState,s)},useTransition:function(){var s=xp(au)[0],a=ur().memoizedState;return[s,a]},useMutableSource:u0,useSyncExternalStore:c0,useId:I0,unstable_isNewReconciler:!1};function Er(s,a){if(s&&s.defaultProps){a=L({},a),s=s.defaultProps;for(var c in s)a[c]===void 0&&(a[c]=s[c]);return a}return a}function kp(s,a,c,m){a=s.memoizedState,c=c(m,a),c=c==null?a:L({},a,c),s.memoizedState=c,s.lanes===0&&(s.updateQueue.baseState=c)}var yh={isMounted:function(s){return(s=s._reactInternals)?vr(s)===s:!1},enqueueSetState:function(s,a,c){s=s._reactInternals;var m=Tn(),y=ms(s),w=Mi(m,y);w.payload=a,c!=null&&(w.callback=c),a=hs(s,w,y),a!==null&&(Sr(a,s,y,m),uh(a,s,y))},enqueueReplaceState:function(s,a,c){s=s._reactInternals;var m=Tn(),y=ms(s),w=Mi(m,y);w.tag=1,w.payload=a,c!=null&&(w.callback=c),a=hs(s,w,y),a!==null&&(Sr(a,s,y,m),uh(a,s,y))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var c=Tn(),m=ms(s),y=Mi(c,m);y.tag=2,a!=null&&(y.callback=a),a=hs(s,y,m),a!==null&&(Sr(a,s,m,c),uh(a,s,m))}};function P0(s,a,c,m,y,w,k){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(m,w,k):a.prototype&&a.prototype.isPureReactComponent?!Kl(c,m)||!Kl(y,w):!0}function R0(s,a,c){var m=!1,y=ls,w=a.contextType;return typeof w=="object"&&w!==null?w=lr(w):(y=Rn(a)?uo:un.current,m=a.contextTypes,w=(m=m!=null)?wa(s,y):ls),a=new a(c,w),s.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=yh,s.stateNode=a,a._reactInternals=s,m&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=y,s.__reactInternalMemoizedMaskedChildContext=w),a}function N0(s,a,c,m){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(c,m),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(c,m),a.state!==s&&yh.enqueueReplaceState(a,a.state,null)}function Sp(s,a,c,m){var y=s.stateNode;y.props=c,y.state=s.memoizedState,y.refs={},hp(s);var w=a.contextType;typeof w=="object"&&w!==null?y.context=lr(w):(w=Rn(a)?uo:un.current,y.context=wa(s,w)),y.state=s.memoizedState,w=a.getDerivedStateFromProps,typeof w=="function"&&(kp(s,a,w,c),y.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(a=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),a!==y.state&&yh.enqueueReplaceState(y,y.state,null),ch(s,c,y,m),y.state=s.memoizedState),typeof y.componentDidMount=="function"&&(s.flags|=4194308)}function Ca(s,a){try{var c="",m=a;do c+=xe(m),m=m.return;while(m);var y=c}catch(w){y=`
Error generating stack: `+w.message+`
`+w.stack}return{value:s,source:a,stack:y,digest:null}}function Ip(s,a,c){return{value:s,source:null,stack:c??null,digest:a??null}}function Cp(s,a){try{console.error(a.value)}catch(c){setTimeout(function(){throw c})}}var aP=typeof WeakMap=="function"?WeakMap:Map;function D0(s,a,c){c=Mi(-1,c),c.tag=3,c.payload={element:null};var m=a.value;return c.callback=function(){kh||(kh=!0,zp=m),Cp(s,a)},c}function L0(s,a,c){c=Mi(-1,c),c.tag=3;var m=s.type.getDerivedStateFromError;if(typeof m=="function"){var y=a.value;c.payload=function(){return m(y)},c.callback=function(){Cp(s,a)}}var w=s.stateNode;return w!==null&&typeof w.componentDidCatch=="function"&&(c.callback=function(){Cp(s,a),typeof m!="function"&&(ds===null?ds=new Set([this]):ds.add(this));var k=a.stack;this.componentDidCatch(a.value,{componentStack:k!==null?k:""})}),c}function V0(s,a,c){var m=s.pingCache;if(m===null){m=s.pingCache=new aP;var y=new Set;m.set(a,y)}else y=m.get(a),y===void 0&&(y=new Set,m.set(a,y));y.has(c)||(y.add(c),s=xP.bind(null,s,a,c),a.then(s,s))}function M0(s){do{var a;if((a=s.tag===13)&&(a=s.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return s;s=s.return}while(s!==null);return null}function O0(s,a,c,m,y){return(s.mode&1)===0?(s===a?s.flags|=65536:(s.flags|=128,c.flags|=131072,c.flags&=-52805,c.tag===1&&(c.alternate===null?c.tag=17:(a=Mi(-1,1),a.tag=2,hs(c,a,1))),c.lanes|=1),s):(s.flags|=65536,s.lanes=y,s)}var lP=J.ReactCurrentOwner,Nn=!1;function En(s,a,c,m){a.child=s===null?r0(a,null,c,m):Ta(a,s.child,c,m)}function F0(s,a,c,m,y){c=c.render;var w=a.ref;return Sa(a,y),m=vp(s,a,c,m,w,y),c=wp(),s!==null&&!Nn?(a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~y,Oi(s,a,y)):(wt&&c&&tp(a),a.flags|=1,En(s,a,m,y),a.child)}function j0(s,a,c,m,y){if(s===null){var w=c.type;return typeof w=="function"&&!Qp(w)&&w.defaultProps===void 0&&c.compare===null&&c.defaultProps===void 0?(a.tag=15,a.type=w,U0(s,a,w,m,y)):(s=Ph(c.type,null,m,a,a.mode,y),s.ref=a.ref,s.return=a,a.child=s)}if(w=s.child,(s.lanes&y)===0){var k=w.memoizedProps;if(c=c.compare,c=c!==null?c:Kl,c(k,m)&&s.ref===a.ref)return Oi(s,a,y)}return a.flags|=1,s=ys(w,m),s.ref=a.ref,s.return=a,a.child=s}function U0(s,a,c,m,y){if(s!==null){var w=s.memoizedProps;if(Kl(w,m)&&s.ref===a.ref)if(Nn=!1,a.pendingProps=m=w,(s.lanes&y)!==0)(s.flags&131072)!==0&&(Nn=!0);else return a.lanes=s.lanes,Oi(s,a,y)}return bp(s,a,c,m,y)}function B0(s,a,c){var m=a.pendingProps,y=m.children,w=s!==null?s.memoizedState:null;if(m.mode==="hidden")if((a.mode&1)===0)a.memoizedState={baseLanes:0,cachePool:null,transitions:null},lt(Aa,Qn),Qn|=c;else{if((c&1073741824)===0)return s=w!==null?w.baseLanes|c:c,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:s,cachePool:null,transitions:null},a.updateQueue=null,lt(Aa,Qn),Qn|=s,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},m=w!==null?w.baseLanes:c,lt(Aa,Qn),Qn|=m}else w!==null?(m=w.baseLanes|c,a.memoizedState=null):m=c,lt(Aa,Qn),Qn|=m;return En(s,a,y,c),a.child}function z0(s,a){var c=a.ref;(s===null&&c!==null||s!==null&&s.ref!==c)&&(a.flags|=512,a.flags|=2097152)}function bp(s,a,c,m,y){var w=Rn(c)?uo:un.current;return w=wa(a,w),Sa(a,y),c=vp(s,a,c,m,w,y),m=wp(),s!==null&&!Nn?(a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~y,Oi(s,a,y)):(wt&&m&&tp(a),a.flags|=1,En(s,a,c,y),a.child)}function $0(s,a,c,m,y){if(Rn(c)){var w=!0;th(a)}else w=!1;if(Sa(a,y),a.stateNode===null)wh(s,a),R0(a,c,m),Sp(a,c,m,y),m=!0;else if(s===null){var k=a.stateNode,j=a.memoizedProps;k.props=j;var B=k.context,Q=c.contextType;typeof Q=="object"&&Q!==null?Q=lr(Q):(Q=Rn(c)?uo:un.current,Q=wa(a,Q));var oe=c.getDerivedStateFromProps,le=typeof oe=="function"||typeof k.getSnapshotBeforeUpdate=="function";le||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(j!==m||B!==Q)&&N0(a,k,m,Q),cs=!1;var se=a.memoizedState;k.state=se,ch(a,m,k,y),B=a.memoizedState,j!==m||se!==B||Pn.current||cs?(typeof oe=="function"&&(kp(a,c,oe,m),B=a.memoizedState),(j=cs||P0(a,c,j,m,se,B,Q))?(le||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount()),typeof k.componentDidMount=="function"&&(a.flags|=4194308)):(typeof k.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=m,a.memoizedState=B),k.props=m,k.state=B,k.context=Q,m=j):(typeof k.componentDidMount=="function"&&(a.flags|=4194308),m=!1)}else{k=a.stateNode,s0(s,a),j=a.memoizedProps,Q=a.type===a.elementType?j:Er(a.type,j),k.props=Q,le=a.pendingProps,se=k.context,B=c.contextType,typeof B=="object"&&B!==null?B=lr(B):(B=Rn(c)?uo:un.current,B=wa(a,B));var ye=c.getDerivedStateFromProps;(oe=typeof ye=="function"||typeof k.getSnapshotBeforeUpdate=="function")||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(j!==le||se!==B)&&N0(a,k,m,B),cs=!1,se=a.memoizedState,k.state=se,ch(a,m,k,y);var Te=a.memoizedState;j!==le||se!==Te||Pn.current||cs?(typeof ye=="function"&&(kp(a,c,ye,m),Te=a.memoizedState),(Q=cs||P0(a,c,Q,m,se,Te,B)||!1)?(oe||typeof k.UNSAFE_componentWillUpdate!="function"&&typeof k.componentWillUpdate!="function"||(typeof k.componentWillUpdate=="function"&&k.componentWillUpdate(m,Te,B),typeof k.UNSAFE_componentWillUpdate=="function"&&k.UNSAFE_componentWillUpdate(m,Te,B)),typeof k.componentDidUpdate=="function"&&(a.flags|=4),typeof k.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof k.componentDidUpdate!="function"||j===s.memoizedProps&&se===s.memoizedState||(a.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||j===s.memoizedProps&&se===s.memoizedState||(a.flags|=1024),a.memoizedProps=m,a.memoizedState=Te),k.props=m,k.state=Te,k.context=B,m=Q):(typeof k.componentDidUpdate!="function"||j===s.memoizedProps&&se===s.memoizedState||(a.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||j===s.memoizedProps&&se===s.memoizedState||(a.flags|=1024),m=!1)}return Ap(s,a,c,m,w,y)}function Ap(s,a,c,m,y,w){z0(s,a);var k=(a.flags&128)!==0;if(!m&&!k)return y&&Kw(a,c,!1),Oi(s,a,w);m=a.stateNode,lP.current=a;var j=k&&typeof c.getDerivedStateFromError!="function"?null:m.render();return a.flags|=1,s!==null&&k?(a.child=Ta(a,s.child,null,w),a.child=Ta(a,null,j,w)):En(s,a,j,w),a.memoizedState=m.state,y&&Kw(a,c,!0),a.child}function q0(s){var a=s.stateNode;a.pendingContext?Ww(s,a.pendingContext,a.pendingContext!==a.context):a.context&&Ww(s,a.context,!1),fp(s,a.containerInfo)}function H0(s,a,c,m,y){return Ea(),sp(y),a.flags|=256,En(s,a,c,m),a.child}var Pp={dehydrated:null,treeContext:null,retryLane:0};function Rp(s){return{baseLanes:s,cachePool:null,transitions:null}}function W0(s,a,c){var m=a.pendingProps,y=Et.current,w=!1,k=(a.flags&128)!==0,j;if((j=k)||(j=s!==null&&s.memoizedState===null?!1:(y&2)!==0),j?(w=!0,a.flags&=-129):(s===null||s.memoizedState!==null)&&(y|=1),lt(Et,y&1),s===null)return ip(a),s=a.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?((a.mode&1)===0?a.lanes=1:s.data==="$!"?a.lanes=8:a.lanes=1073741824,null):(k=m.children,s=m.fallback,w?(m=a.mode,w=a.child,k={mode:"hidden",children:k},(m&1)===0&&w!==null?(w.childLanes=0,w.pendingProps=k):w=Rh(k,m,0,null),s=_o(s,m,c,null),w.return=a,s.return=a,w.sibling=s,a.child=w,a.child.memoizedState=Rp(c),a.memoizedState=Pp,s):Np(a,k));if(y=s.memoizedState,y!==null&&(j=y.dehydrated,j!==null))return uP(s,a,k,m,j,y,c);if(w){w=m.fallback,k=a.mode,y=s.child,j=y.sibling;var B={mode:"hidden",children:m.children};return(k&1)===0&&a.child!==y?(m=a.child,m.childLanes=0,m.pendingProps=B,a.deletions=null):(m=ys(y,B),m.subtreeFlags=y.subtreeFlags&14680064),j!==null?w=ys(j,w):(w=_o(w,k,c,null),w.flags|=2),w.return=a,m.return=a,m.sibling=w,a.child=m,m=w,w=a.child,k=s.child.memoizedState,k=k===null?Rp(c):{baseLanes:k.baseLanes|c,cachePool:null,transitions:k.transitions},w.memoizedState=k,w.childLanes=s.childLanes&~c,a.memoizedState=Pp,m}return w=s.child,s=w.sibling,m=ys(w,{mode:"visible",children:m.children}),(a.mode&1)===0&&(m.lanes=c),m.return=a,m.sibling=null,s!==null&&(c=a.deletions,c===null?(a.deletions=[s],a.flags|=16):c.push(s)),a.child=m,a.memoizedState=null,m}function Np(s,a){return a=Rh({mode:"visible",children:a},s.mode,0,null),a.return=s,s.child=a}function vh(s,a,c,m){return m!==null&&sp(m),Ta(a,s.child,null,c),s=Np(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function uP(s,a,c,m,y,w,k){if(c)return a.flags&256?(a.flags&=-257,m=Ip(Error(n(422))),vh(s,a,k,m)):a.memoizedState!==null?(a.child=s.child,a.flags|=128,null):(w=m.fallback,y=a.mode,m=Rh({mode:"visible",children:m.children},y,0,null),w=_o(w,y,k,null),w.flags|=2,m.return=a,w.return=a,m.sibling=w,a.child=m,(a.mode&1)!==0&&Ta(a,s.child,null,k),a.child.memoizedState=Rp(k),a.memoizedState=Pp,w);if((a.mode&1)===0)return vh(s,a,k,null);if(y.data==="$!"){if(m=y.nextSibling&&y.nextSibling.dataset,m)var j=m.dgst;return m=j,w=Error(n(419)),m=Ip(w,m,void 0),vh(s,a,k,m)}if(j=(k&s.childLanes)!==0,Nn||j){if(m=Yt,m!==null){switch(k&-k){case 4:y=2;break;case 16:y=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:y=32;break;case 536870912:y=268435456;break;default:y=0}y=(y&(m.suspendedLanes|k))!==0?0:y,y!==0&&y!==w.retryLane&&(w.retryLane=y,Vi(s,y),Sr(m,s,y,-1))}return Kp(),m=Ip(Error(n(421))),vh(s,a,k,m)}return y.data==="$?"?(a.flags|=128,a.child=s.child,a=EP.bind(null,s),y._reactRetry=a,null):(s=w.treeContext,Kn=os(y.nextSibling),Gn=a,wt=!0,xr=null,s!==null&&(or[ar++]=Di,or[ar++]=Li,or[ar++]=co,Di=s.id,Li=s.overflow,co=a),a=Np(a,m.children),a.flags|=4096,a)}function G0(s,a,c){s.lanes|=a;var m=s.alternate;m!==null&&(m.lanes|=a),up(s.return,a,c)}function Dp(s,a,c,m,y){var w=s.memoizedState;w===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:m,tail:c,tailMode:y}:(w.isBackwards=a,w.rendering=null,w.renderingStartTime=0,w.last=m,w.tail=c,w.tailMode=y)}function K0(s,a,c){var m=a.pendingProps,y=m.revealOrder,w=m.tail;if(En(s,a,m.children,c),m=Et.current,(m&2)!==0)m=m&1|2,a.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&G0(s,c,a);else if(s.tag===19)G0(s,c,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break e;for(;s.sibling===null;){if(s.return===null||s.return===a)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}m&=1}if(lt(Et,m),(a.mode&1)===0)a.memoizedState=null;else switch(y){case"forwards":for(c=a.child,y=null;c!==null;)s=c.alternate,s!==null&&hh(s)===null&&(y=c),c=c.sibling;c=y,c===null?(y=a.child,a.child=null):(y=c.sibling,c.sibling=null),Dp(a,!1,y,c,w);break;case"backwards":for(c=null,y=a.child,a.child=null;y!==null;){if(s=y.alternate,s!==null&&hh(s)===null){a.child=y;break}s=y.sibling,y.sibling=c,c=y,y=s}Dp(a,!0,c,null,w);break;case"together":Dp(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function wh(s,a){(a.mode&1)===0&&s!==null&&(s.alternate=null,a.alternate=null,a.flags|=2)}function Oi(s,a,c){if(s!==null&&(a.dependencies=s.dependencies),go|=a.lanes,(c&a.childLanes)===0)return null;if(s!==null&&a.child!==s.child)throw Error(n(153));if(a.child!==null){for(s=a.child,c=ys(s,s.pendingProps),a.child=c,c.return=a;s.sibling!==null;)s=s.sibling,c=c.sibling=ys(s,s.pendingProps),c.return=a;c.sibling=null}return a.child}function cP(s,a,c){switch(a.tag){case 3:q0(a),Ea();break;case 5:l0(a);break;case 1:Rn(a.type)&&th(a);break;case 4:fp(a,a.stateNode.containerInfo);break;case 10:var m=a.type._context,y=a.memoizedProps.value;lt(ah,m._currentValue),m._currentValue=y;break;case 13:if(m=a.memoizedState,m!==null)return m.dehydrated!==null?(lt(Et,Et.current&1),a.flags|=128,null):(c&a.child.childLanes)!==0?W0(s,a,c):(lt(Et,Et.current&1),s=Oi(s,a,c),s!==null?s.sibling:null);lt(Et,Et.current&1);break;case 19:if(m=(c&a.childLanes)!==0,(s.flags&128)!==0){if(m)return K0(s,a,c);a.flags|=128}if(y=a.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),lt(Et,Et.current),m)break;return null;case 22:case 23:return a.lanes=0,B0(s,a,c)}return Oi(s,a,c)}var Q0,Lp,Y0,X0;Q0=function(s,a){for(var c=a.child;c!==null;){if(c.tag===5||c.tag===6)s.appendChild(c.stateNode);else if(c.tag!==4&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return;c=c.return}c.sibling.return=c.return,c=c.sibling}},Lp=function(){},Y0=function(s,a,c,m){var y=s.memoizedProps;if(y!==m){s=a.stateNode,po(ni.current);var w=null;switch(c){case"input":y=tr(s,y),m=tr(s,m),w=[];break;case"select":y=L({},y,{value:void 0}),m=L({},m,{value:void 0}),w=[];break;case"textarea":y=Gs(s,y),m=Gs(s,m),w=[];break;default:typeof y.onClick!="function"&&typeof m.onClick=="function"&&(s.onclick=Jc)}ft(c,m);var k;c=null;for(Q in y)if(!m.hasOwnProperty(Q)&&y.hasOwnProperty(Q)&&y[Q]!=null)if(Q==="style"){var j=y[Q];for(k in j)j.hasOwnProperty(k)&&(c||(c={}),c[k]="")}else Q!=="dangerouslySetInnerHTML"&&Q!=="children"&&Q!=="suppressContentEditableWarning"&&Q!=="suppressHydrationWarning"&&Q!=="autoFocus"&&(i.hasOwnProperty(Q)?w||(w=[]):(w=w||[]).push(Q,null));for(Q in m){var B=m[Q];if(j=y!=null?y[Q]:void 0,m.hasOwnProperty(Q)&&B!==j&&(B!=null||j!=null))if(Q==="style")if(j){for(k in j)!j.hasOwnProperty(k)||B&&B.hasOwnProperty(k)||(c||(c={}),c[k]="");for(k in B)B.hasOwnProperty(k)&&j[k]!==B[k]&&(c||(c={}),c[k]=B[k])}else c||(w||(w=[]),w.push(Q,c)),c=B;else Q==="dangerouslySetInnerHTML"?(B=B?B.__html:void 0,j=j?j.__html:void 0,B!=null&&j!==B&&(w=w||[]).push(Q,B)):Q==="children"?typeof B!="string"&&typeof B!="number"||(w=w||[]).push(Q,""+B):Q!=="suppressContentEditableWarning"&&Q!=="suppressHydrationWarning"&&(i.hasOwnProperty(Q)?(B!=null&&Q==="onScroll"&&pt("scroll",s),w||j===B||(w=[])):(w=w||[]).push(Q,B))}c&&(w=w||[]).push("style",c);var Q=w;(a.updateQueue=Q)&&(a.flags|=4)}},X0=function(s,a,c,m){c!==m&&(a.flags|=4)};function uu(s,a){if(!wt)switch(s.tailMode){case"hidden":a=s.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?s.tail=null:c.sibling=null;break;case"collapsed":c=s.tail;for(var m=null;c!==null;)c.alternate!==null&&(m=c),c=c.sibling;m===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:m.sibling=null}}function hn(s){var a=s.alternate!==null&&s.alternate.child===s.child,c=0,m=0;if(a)for(var y=s.child;y!==null;)c|=y.lanes|y.childLanes,m|=y.subtreeFlags&14680064,m|=y.flags&14680064,y.return=s,y=y.sibling;else for(y=s.child;y!==null;)c|=y.lanes|y.childLanes,m|=y.subtreeFlags,m|=y.flags,y.return=s,y=y.sibling;return s.subtreeFlags|=m,s.childLanes=c,a}function hP(s,a,c){var m=a.pendingProps;switch(np(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return hn(a),null;case 1:return Rn(a.type)&&eh(),hn(a),null;case 3:return m=a.stateNode,Ia(),mt(Pn),mt(un),mp(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(s===null||s.child===null)&&(sh(a)?a.flags|=4:s===null||s.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,xr!==null&&(Hp(xr),xr=null))),Lp(s,a),hn(a),null;case 5:dp(a);var y=po(iu.current);if(c=a.type,s!==null&&a.stateNode!=null)Y0(s,a,c,m,y),s.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!m){if(a.stateNode===null)throw Error(n(166));return hn(a),null}if(s=po(ni.current),sh(a)){m=a.stateNode,c=a.type;var w=a.memoizedProps;switch(m[ti]=a,m[Zl]=w,s=(a.mode&1)!==0,c){case"dialog":pt("cancel",m),pt("close",m);break;case"iframe":case"object":case"embed":pt("load",m);break;case"video":case"audio":for(y=0;y<Yl.length;y++)pt(Yl[y],m);break;case"source":pt("error",m);break;case"img":case"image":case"link":pt("error",m),pt("load",m);break;case"details":pt("toggle",m);break;case"input":Fr(m,w),pt("invalid",m);break;case"select":m._wrapperState={wasMultiple:!!w.multiple},pt("invalid",m);break;case"textarea":Ks(m,w),pt("invalid",m)}ft(c,w),y=null;for(var k in w)if(w.hasOwnProperty(k)){var j=w[k];k==="children"?typeof j=="string"?m.textContent!==j&&(w.suppressHydrationWarning!==!0&&Xc(m.textContent,j,s),y=["children",j]):typeof j=="number"&&m.textContent!==""+j&&(w.suppressHydrationWarning!==!0&&Xc(m.textContent,j,s),y=["children",""+j]):i.hasOwnProperty(k)&&j!=null&&k==="onScroll"&&pt("scroll",m)}switch(c){case"input":Lt(m),Ws(m,w,!0);break;case"textarea":Lt(m),Ur(m);break;case"select":case"option":break;default:typeof w.onClick=="function"&&(m.onclick=Jc)}m=y,a.updateQueue=m,m!==null&&(a.flags|=4)}else{k=y.nodeType===9?y:y.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=Z(c)),s==="http://www.w3.org/1999/xhtml"?c==="script"?(s=k.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof m.is=="string"?s=k.createElement(c,{is:m.is}):(s=k.createElement(c),c==="select"&&(k=s,m.multiple?k.multiple=!0:m.size&&(k.size=m.size))):s=k.createElementNS(s,c),s[ti]=a,s[Zl]=m,Q0(s,a,!1,!1),a.stateNode=s;e:{switch(k=Un(c,m),c){case"dialog":pt("cancel",s),pt("close",s),y=m;break;case"iframe":case"object":case"embed":pt("load",s),y=m;break;case"video":case"audio":for(y=0;y<Yl.length;y++)pt(Yl[y],s);y=m;break;case"source":pt("error",s),y=m;break;case"img":case"image":case"link":pt("error",s),pt("load",s),y=m;break;case"details":pt("toggle",s),y=m;break;case"input":Fr(s,m),y=tr(s,m),pt("invalid",s);break;case"option":y=m;break;case"select":s._wrapperState={wasMultiple:!!m.multiple},y=L({},m,{value:void 0}),pt("invalid",s);break;case"textarea":Ks(s,m),y=Gs(s,m),pt("invalid",s);break;default:y=m}ft(c,y),j=y;for(w in j)if(j.hasOwnProperty(w)){var B=j[w];w==="style"?rr(s,B):w==="dangerouslySetInnerHTML"?(B=B?B.__html:void 0,B!=null&&qe(s,B)):w==="children"?typeof B=="string"?(c!=="textarea"||B!=="")&&Ye(s,B):typeof B=="number"&&Ye(s,""+B):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(i.hasOwnProperty(w)?B!=null&&w==="onScroll"&&pt("scroll",s):B!=null&&U(s,w,B,k))}switch(c){case"input":Lt(s),Ws(s,m,!1);break;case"textarea":Lt(s),Ur(s);break;case"option":m.value!=null&&s.setAttribute("value",""+Ce(m.value));break;case"select":s.multiple=!!m.multiple,w=m.value,w!=null?jn(s,!!m.multiple,w,!1):m.defaultValue!=null&&jn(s,!!m.multiple,m.defaultValue,!0);break;default:typeof y.onClick=="function"&&(s.onclick=Jc)}switch(c){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}}m&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return hn(a),null;case 6:if(s&&a.stateNode!=null)X0(s,a,s.memoizedProps,m);else{if(typeof m!="string"&&a.stateNode===null)throw Error(n(166));if(c=po(iu.current),po(ni.current),sh(a)){if(m=a.stateNode,c=a.memoizedProps,m[ti]=a,(w=m.nodeValue!==c)&&(s=Gn,s!==null))switch(s.tag){case 3:Xc(m.nodeValue,c,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&Xc(m.nodeValue,c,(s.mode&1)!==0)}w&&(a.flags|=4)}else m=(c.nodeType===9?c:c.ownerDocument).createTextNode(m),m[ti]=a,a.stateNode=m}return hn(a),null;case 13:if(mt(Et),m=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(wt&&Kn!==null&&(a.mode&1)!==0&&(a.flags&128)===0)e0(),Ea(),a.flags|=98560,w=!1;else if(w=sh(a),m!==null&&m.dehydrated!==null){if(s===null){if(!w)throw Error(n(318));if(w=a.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(n(317));w[ti]=a}else Ea(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;hn(a),w=!1}else xr!==null&&(Hp(xr),xr=null),w=!0;if(!w)return a.flags&65536?a:null}return(a.flags&128)!==0?(a.lanes=c,a):(m=m!==null,m!==(s!==null&&s.memoizedState!==null)&&m&&(a.child.flags|=8192,(a.mode&1)!==0&&(s===null||(Et.current&1)!==0?qt===0&&(qt=3):Kp())),a.updateQueue!==null&&(a.flags|=4),hn(a),null);case 4:return Ia(),Lp(s,a),s===null&&Xl(a.stateNode.containerInfo),hn(a),null;case 10:return lp(a.type._context),hn(a),null;case 17:return Rn(a.type)&&eh(),hn(a),null;case 19:if(mt(Et),w=a.memoizedState,w===null)return hn(a),null;if(m=(a.flags&128)!==0,k=w.rendering,k===null)if(m)uu(w,!1);else{if(qt!==0||s!==null&&(s.flags&128)!==0)for(s=a.child;s!==null;){if(k=hh(s),k!==null){for(a.flags|=128,uu(w,!1),m=k.updateQueue,m!==null&&(a.updateQueue=m,a.flags|=4),a.subtreeFlags=0,m=c,c=a.child;c!==null;)w=c,s=m,w.flags&=14680066,k=w.alternate,k===null?(w.childLanes=0,w.lanes=s,w.child=null,w.subtreeFlags=0,w.memoizedProps=null,w.memoizedState=null,w.updateQueue=null,w.dependencies=null,w.stateNode=null):(w.childLanes=k.childLanes,w.lanes=k.lanes,w.child=k.child,w.subtreeFlags=0,w.deletions=null,w.memoizedProps=k.memoizedProps,w.memoizedState=k.memoizedState,w.updateQueue=k.updateQueue,w.type=k.type,s=k.dependencies,w.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),c=c.sibling;return lt(Et,Et.current&1|2),a.child}s=s.sibling}w.tail!==null&&dt()>Pa&&(a.flags|=128,m=!0,uu(w,!1),a.lanes=4194304)}else{if(!m)if(s=hh(k),s!==null){if(a.flags|=128,m=!0,c=s.updateQueue,c!==null&&(a.updateQueue=c,a.flags|=4),uu(w,!0),w.tail===null&&w.tailMode==="hidden"&&!k.alternate&&!wt)return hn(a),null}else 2*dt()-w.renderingStartTime>Pa&&c!==1073741824&&(a.flags|=128,m=!0,uu(w,!1),a.lanes=4194304);w.isBackwards?(k.sibling=a.child,a.child=k):(c=w.last,c!==null?c.sibling=k:a.child=k,w.last=k)}return w.tail!==null?(a=w.tail,w.rendering=a,w.tail=a.sibling,w.renderingStartTime=dt(),a.sibling=null,c=Et.current,lt(Et,m?c&1|2:c&1),a):(hn(a),null);case 22:case 23:return Gp(),m=a.memoizedState!==null,s!==null&&s.memoizedState!==null!==m&&(a.flags|=8192),m&&(a.mode&1)!==0?(Qn&1073741824)!==0&&(hn(a),a.subtreeFlags&6&&(a.flags|=8192)):hn(a),null;case 24:return null;case 25:return null}throw Error(n(156,a.tag))}function fP(s,a){switch(np(a),a.tag){case 1:return Rn(a.type)&&eh(),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return Ia(),mt(Pn),mt(un),mp(),s=a.flags,(s&65536)!==0&&(s&128)===0?(a.flags=s&-65537|128,a):null;case 5:return dp(a),null;case 13:if(mt(Et),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(n(340));Ea()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return mt(Et),null;case 4:return Ia(),null;case 10:return lp(a.type._context),null;case 22:case 23:return Gp(),null;case 24:return null;default:return null}}var _h=!1,fn=!1,dP=typeof WeakSet=="function"?WeakSet:Set,Ee=null;function ba(s,a){var c=s.ref;if(c!==null)if(typeof c=="function")try{c(null)}catch(m){bt(s,a,m)}else c.current=null}function Vp(s,a,c){try{c()}catch(m){bt(s,a,m)}}var J0=!1;function pP(s,a){if(Gd=bi,s=Pw(),jd(s)){if("selectionStart"in s)var c={start:s.selectionStart,end:s.selectionEnd};else e:{c=(c=s.ownerDocument)&&c.defaultView||window;var m=c.getSelection&&c.getSelection();if(m&&m.rangeCount!==0){c=m.anchorNode;var y=m.anchorOffset,w=m.focusNode;m=m.focusOffset;try{c.nodeType,w.nodeType}catch{c=null;break e}var k=0,j=-1,B=-1,Q=0,oe=0,le=s,se=null;t:for(;;){for(var ye;le!==c||y!==0&&le.nodeType!==3||(j=k+y),le!==w||m!==0&&le.nodeType!==3||(B=k+m),le.nodeType===3&&(k+=le.nodeValue.length),(ye=le.firstChild)!==null;)se=le,le=ye;for(;;){if(le===s)break t;if(se===c&&++Q===y&&(j=k),se===w&&++oe===m&&(B=k),(ye=le.nextSibling)!==null)break;le=se,se=le.parentNode}le=ye}c=j===-1||B===-1?null:{start:j,end:B}}else c=null}c=c||{start:0,end:0}}else c=null;for(Kd={focusedElem:s,selectionRange:c},bi=!1,Ee=a;Ee!==null;)if(a=Ee,s=a.child,(a.subtreeFlags&1028)!==0&&s!==null)s.return=a,Ee=s;else for(;Ee!==null;){a=Ee;try{var Te=a.alternate;if((a.flags&1024)!==0)switch(a.tag){case 0:case 11:case 15:break;case 1:if(Te!==null){var Se=Te.memoizedProps,Nt=Te.memoizedState,W=a.stateNode,$=W.getSnapshotBeforeUpdate(a.elementType===a.type?Se:Er(a.type,Se),Nt);W.__reactInternalSnapshotBeforeUpdate=$}break;case 3:var K=a.stateNode.containerInfo;K.nodeType===1?K.textContent="":K.nodeType===9&&K.documentElement&&K.removeChild(K.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(fe){bt(a,a.return,fe)}if(s=a.sibling,s!==null){s.return=a.return,Ee=s;break}Ee=a.return}return Te=J0,J0=!1,Te}function cu(s,a,c){var m=a.updateQueue;if(m=m!==null?m.lastEffect:null,m!==null){var y=m=m.next;do{if((y.tag&s)===s){var w=y.destroy;y.destroy=void 0,w!==void 0&&Vp(a,c,w)}y=y.next}while(y!==m)}}function xh(s,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var c=a=a.next;do{if((c.tag&s)===s){var m=c.create;c.destroy=m()}c=c.next}while(c!==a)}}function Mp(s){var a=s.ref;if(a!==null){var c=s.stateNode;switch(s.tag){case 5:s=c;break;default:s=c}typeof a=="function"?a(s):a.current=s}}function Z0(s){var a=s.alternate;a!==null&&(s.alternate=null,Z0(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&(delete a[ti],delete a[Zl],delete a[Jd],delete a[YA],delete a[XA])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function e_(s){return s.tag===5||s.tag===3||s.tag===4}function t_(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||e_(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Op(s,a,c){var m=s.tag;if(m===5||m===6)s=s.stateNode,a?c.nodeType===8?c.parentNode.insertBefore(s,a):c.insertBefore(s,a):(c.nodeType===8?(a=c.parentNode,a.insertBefore(s,c)):(a=c,a.appendChild(s)),c=c._reactRootContainer,c!=null||a.onclick!==null||(a.onclick=Jc));else if(m!==4&&(s=s.child,s!==null))for(Op(s,a,c),s=s.sibling;s!==null;)Op(s,a,c),s=s.sibling}function Fp(s,a,c){var m=s.tag;if(m===5||m===6)s=s.stateNode,a?c.insertBefore(s,a):c.appendChild(s);else if(m!==4&&(s=s.child,s!==null))for(Fp(s,a,c),s=s.sibling;s!==null;)Fp(s,a,c),s=s.sibling}var tn=null,Tr=!1;function fs(s,a,c){for(c=c.child;c!==null;)n_(s,a,c),c=c.sibling}function n_(s,a,c){if(Bn&&typeof Bn.onCommitFiberUnmount=="function")try{Bn.onCommitFiberUnmount(Zs,c)}catch{}switch(c.tag){case 5:fn||ba(c,a);case 6:var m=tn,y=Tr;tn=null,fs(s,a,c),tn=m,Tr=y,tn!==null&&(Tr?(s=tn,c=c.stateNode,s.nodeType===8?s.parentNode.removeChild(c):s.removeChild(c)):tn.removeChild(c.stateNode));break;case 18:tn!==null&&(Tr?(s=tn,c=c.stateNode,s.nodeType===8?Xd(s.parentNode,c):s.nodeType===1&&Xd(s,c),ns(s)):Xd(tn,c.stateNode));break;case 4:m=tn,y=Tr,tn=c.stateNode.containerInfo,Tr=!0,fs(s,a,c),tn=m,Tr=y;break;case 0:case 11:case 14:case 15:if(!fn&&(m=c.updateQueue,m!==null&&(m=m.lastEffect,m!==null))){y=m=m.next;do{var w=y,k=w.destroy;w=w.tag,k!==void 0&&((w&2)!==0||(w&4)!==0)&&Vp(c,a,k),y=y.next}while(y!==m)}fs(s,a,c);break;case 1:if(!fn&&(ba(c,a),m=c.stateNode,typeof m.componentWillUnmount=="function"))try{m.props=c.memoizedProps,m.state=c.memoizedState,m.componentWillUnmount()}catch(j){bt(c,a,j)}fs(s,a,c);break;case 21:fs(s,a,c);break;case 22:c.mode&1?(fn=(m=fn)||c.memoizedState!==null,fs(s,a,c),fn=m):fs(s,a,c);break;default:fs(s,a,c)}}function r_(s){var a=s.updateQueue;if(a!==null){s.updateQueue=null;var c=s.stateNode;c===null&&(c=s.stateNode=new dP),a.forEach(function(m){var y=TP.bind(null,s,m);c.has(m)||(c.add(m),m.then(y,y))})}}function kr(s,a){var c=a.deletions;if(c!==null)for(var m=0;m<c.length;m++){var y=c[m];try{var w=s,k=a,j=k;e:for(;j!==null;){switch(j.tag){case 5:tn=j.stateNode,Tr=!1;break e;case 3:tn=j.stateNode.containerInfo,Tr=!0;break e;case 4:tn=j.stateNode.containerInfo,Tr=!0;break e}j=j.return}if(tn===null)throw Error(n(160));n_(w,k,y),tn=null,Tr=!1;var B=y.alternate;B!==null&&(B.return=null),y.return=null}catch(Q){bt(y,a,Q)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)i_(a,s),a=a.sibling}function i_(s,a){var c=s.alternate,m=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(kr(a,s),ii(s),m&4){try{cu(3,s,s.return),xh(3,s)}catch(Se){bt(s,s.return,Se)}try{cu(5,s,s.return)}catch(Se){bt(s,s.return,Se)}}break;case 1:kr(a,s),ii(s),m&512&&c!==null&&ba(c,c.return);break;case 5:if(kr(a,s),ii(s),m&512&&c!==null&&ba(c,c.return),s.flags&32){var y=s.stateNode;try{Ye(y,"")}catch(Se){bt(s,s.return,Se)}}if(m&4&&(y=s.stateNode,y!=null)){var w=s.memoizedProps,k=c!==null?c.memoizedProps:w,j=s.type,B=s.updateQueue;if(s.updateQueue=null,B!==null)try{j==="input"&&w.type==="radio"&&w.name!=null&&yt(y,w),Un(j,k);var Q=Un(j,w);for(k=0;k<B.length;k+=2){var oe=B[k],le=B[k+1];oe==="style"?rr(y,le):oe==="dangerouslySetInnerHTML"?qe(y,le):oe==="children"?Ye(y,le):U(y,oe,le,Q)}switch(j){case"input":jr(y,w);break;case"textarea":Qo(y,w);break;case"select":var se=y._wrapperState.wasMultiple;y._wrapperState.wasMultiple=!!w.multiple;var ye=w.value;ye!=null?jn(y,!!w.multiple,ye,!1):se!==!!w.multiple&&(w.defaultValue!=null?jn(y,!!w.multiple,w.defaultValue,!0):jn(y,!!w.multiple,w.multiple?[]:"",!1))}y[Zl]=w}catch(Se){bt(s,s.return,Se)}}break;case 6:if(kr(a,s),ii(s),m&4){if(s.stateNode===null)throw Error(n(162));y=s.stateNode,w=s.memoizedProps;try{y.nodeValue=w}catch(Se){bt(s,s.return,Se)}}break;case 3:if(kr(a,s),ii(s),m&4&&c!==null&&c.memoizedState.isDehydrated)try{ns(a.containerInfo)}catch(Se){bt(s,s.return,Se)}break;case 4:kr(a,s),ii(s);break;case 13:kr(a,s),ii(s),y=s.child,y.flags&8192&&(w=y.memoizedState!==null,y.stateNode.isHidden=w,!w||y.alternate!==null&&y.alternate.memoizedState!==null||(Bp=dt())),m&4&&r_(s);break;case 22:if(oe=c!==null&&c.memoizedState!==null,s.mode&1?(fn=(Q=fn)||oe,kr(a,s),fn=Q):kr(a,s),ii(s),m&8192){if(Q=s.memoizedState!==null,(s.stateNode.isHidden=Q)&&!oe&&(s.mode&1)!==0)for(Ee=s,oe=s.child;oe!==null;){for(le=Ee=oe;Ee!==null;){switch(se=Ee,ye=se.child,se.tag){case 0:case 11:case 14:case 15:cu(4,se,se.return);break;case 1:ba(se,se.return);var Te=se.stateNode;if(typeof Te.componentWillUnmount=="function"){m=se,c=se.return;try{a=m,Te.props=a.memoizedProps,Te.state=a.memoizedState,Te.componentWillUnmount()}catch(Se){bt(m,c,Se)}}break;case 5:ba(se,se.return);break;case 22:if(se.memoizedState!==null){a_(le);continue}}ye!==null?(ye.return=se,Ee=ye):a_(le)}oe=oe.sibling}e:for(oe=null,le=s;;){if(le.tag===5){if(oe===null){oe=le;try{y=le.stateNode,Q?(w=y.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none"):(j=le.stateNode,B=le.memoizedProps.style,k=B!=null&&B.hasOwnProperty("display")?B.display:null,j.style.display=Gt("display",k))}catch(Se){bt(s,s.return,Se)}}}else if(le.tag===6){if(oe===null)try{le.stateNode.nodeValue=Q?"":le.memoizedProps}catch(Se){bt(s,s.return,Se)}}else if((le.tag!==22&&le.tag!==23||le.memoizedState===null||le===s)&&le.child!==null){le.child.return=le,le=le.child;continue}if(le===s)break e;for(;le.sibling===null;){if(le.return===null||le.return===s)break e;oe===le&&(oe=null),le=le.return}oe===le&&(oe=null),le.sibling.return=le.return,le=le.sibling}}break;case 19:kr(a,s),ii(s),m&4&&r_(s);break;case 21:break;default:kr(a,s),ii(s)}}function ii(s){var a=s.flags;if(a&2){try{e:{for(var c=s.return;c!==null;){if(e_(c)){var m=c;break e}c=c.return}throw Error(n(160))}switch(m.tag){case 5:var y=m.stateNode;m.flags&32&&(Ye(y,""),m.flags&=-33);var w=t_(s);Fp(s,w,y);break;case 3:case 4:var k=m.stateNode.containerInfo,j=t_(s);Op(s,j,k);break;default:throw Error(n(161))}}catch(B){bt(s,s.return,B)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function mP(s,a,c){Ee=s,s_(s)}function s_(s,a,c){for(var m=(s.mode&1)!==0;Ee!==null;){var y=Ee,w=y.child;if(y.tag===22&&m){var k=y.memoizedState!==null||_h;if(!k){var j=y.alternate,B=j!==null&&j.memoizedState!==null||fn;j=_h;var Q=fn;if(_h=k,(fn=B)&&!Q)for(Ee=y;Ee!==null;)k=Ee,B=k.child,k.tag===22&&k.memoizedState!==null?l_(y):B!==null?(B.return=k,Ee=B):l_(y);for(;w!==null;)Ee=w,s_(w),w=w.sibling;Ee=y,_h=j,fn=Q}o_(s)}else(y.subtreeFlags&8772)!==0&&w!==null?(w.return=y,Ee=w):o_(s)}}function o_(s){for(;Ee!==null;){var a=Ee;if((a.flags&8772)!==0){var c=a.alternate;try{if((a.flags&8772)!==0)switch(a.tag){case 0:case 11:case 15:fn||xh(5,a);break;case 1:var m=a.stateNode;if(a.flags&4&&!fn)if(c===null)m.componentDidMount();else{var y=a.elementType===a.type?c.memoizedProps:Er(a.type,c.memoizedProps);m.componentDidUpdate(y,c.memoizedState,m.__reactInternalSnapshotBeforeUpdate)}var w=a.updateQueue;w!==null&&a0(a,w,m);break;case 3:var k=a.updateQueue;if(k!==null){if(c=null,a.child!==null)switch(a.child.tag){case 5:c=a.child.stateNode;break;case 1:c=a.child.stateNode}a0(a,k,c)}break;case 5:var j=a.stateNode;if(c===null&&a.flags&4){c=j;var B=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":B.autoFocus&&c.focus();break;case"img":B.src&&(c.src=B.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var Q=a.alternate;if(Q!==null){var oe=Q.memoizedState;if(oe!==null){var le=oe.dehydrated;le!==null&&ns(le)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}fn||a.flags&512&&Mp(a)}catch(se){bt(a,a.return,se)}}if(a===s){Ee=null;break}if(c=a.sibling,c!==null){c.return=a.return,Ee=c;break}Ee=a.return}}function a_(s){for(;Ee!==null;){var a=Ee;if(a===s){Ee=null;break}var c=a.sibling;if(c!==null){c.return=a.return,Ee=c;break}Ee=a.return}}function l_(s){for(;Ee!==null;){var a=Ee;try{switch(a.tag){case 0:case 11:case 15:var c=a.return;try{xh(4,a)}catch(B){bt(a,c,B)}break;case 1:var m=a.stateNode;if(typeof m.componentDidMount=="function"){var y=a.return;try{m.componentDidMount()}catch(B){bt(a,y,B)}}var w=a.return;try{Mp(a)}catch(B){bt(a,w,B)}break;case 5:var k=a.return;try{Mp(a)}catch(B){bt(a,k,B)}}}catch(B){bt(a,a.return,B)}if(a===s){Ee=null;break}var j=a.sibling;if(j!==null){j.return=a.return,Ee=j;break}Ee=a.return}}var gP=Math.ceil,Eh=J.ReactCurrentDispatcher,jp=J.ReactCurrentOwner,cr=J.ReactCurrentBatchConfig,et=0,Yt=null,Ot=null,nn=0,Qn=0,Aa=as(0),qt=0,hu=null,go=0,Th=0,Up=0,fu=null,Dn=null,Bp=0,Pa=1/0,Fi=null,kh=!1,zp=null,ds=null,Sh=!1,ps=null,Ih=0,du=0,$p=null,Ch=-1,bh=0;function Tn(){return(et&6)!==0?dt():Ch!==-1?Ch:Ch=dt()}function ms(s){return(s.mode&1)===0?1:(et&2)!==0&&nn!==0?nn&-nn:ZA.transition!==null?(bh===0&&(bh=Ll()),bh):(s=Xe,s!==0||(s=window.event,s=s===void 0?16:sa(s.type)),s)}function Sr(s,a,c,m){if(50<du)throw du=0,$p=null,Error(n(185));ro(s,c,m),((et&2)===0||s!==Yt)&&(s===Yt&&((et&2)===0&&(Th|=c),qt===4&&gs(s,nn)),Ln(s,m),c===1&&et===0&&(a.mode&1)===0&&(Pa=dt()+500,nh&&us()))}function Ln(s,a){var c=s.callbackNode;no(s,a);var m=Si(s,s===Yt?nn:0);if(m===0)c!==null&&Jo(c),s.callbackNode=null,s.callbackPriority=0;else if(a=m&-m,s.callbackPriority!==a){if(c!=null&&Jo(c),a===1)s.tag===0?JA(c_.bind(null,s)):Qw(c_.bind(null,s)),KA(function(){(et&6)===0&&us()}),c=null;else{switch(Hr(m)){case 1:c=Zo;break;case 4:c=Rl;break;case 16:c=Js;break;case 536870912:c=ea;break;default:c=Js}c=v_(c,u_.bind(null,s))}s.callbackPriority=a,s.callbackNode=c}}function u_(s,a){if(Ch=-1,bh=0,(et&6)!==0)throw Error(n(327));var c=s.callbackNode;if(Ra()&&s.callbackNode!==c)return null;var m=Si(s,s===Yt?nn:0);if(m===0)return null;if((m&30)!==0||(m&s.expiredLanes)!==0||a)a=Ah(s,m);else{a=m;var y=et;et|=2;var w=f_();(Yt!==s||nn!==a)&&(Fi=null,Pa=dt()+500,vo(s,a));do try{wP();break}catch(j){h_(s,j)}while(!0);ap(),Eh.current=w,et=y,Ot!==null?a=0:(Yt=null,nn=0,a=qt)}if(a!==0){if(a===2&&(y=Dl(s),y!==0&&(m=y,a=qp(s,y))),a===1)throw c=hu,vo(s,0),gs(s,m),Ln(s,dt()),c;if(a===6)gs(s,m);else{if(y=s.current.alternate,(m&30)===0&&!yP(y)&&(a=Ah(s,m),a===2&&(w=Dl(s),w!==0&&(m=w,a=qp(s,w))),a===1))throw c=hu,vo(s,0),gs(s,m),Ln(s,dt()),c;switch(s.finishedWork=y,s.finishedLanes=m,a){case 0:case 1:throw Error(n(345));case 2:wo(s,Dn,Fi);break;case 3:if(gs(s,m),(m&130023424)===m&&(a=Bp+500-dt(),10<a)){if(Si(s,0)!==0)break;if(y=s.suspendedLanes,(y&m)!==m){Tn(),s.pingedLanes|=s.suspendedLanes&y;break}s.timeoutHandle=Yd(wo.bind(null,s,Dn,Fi),a);break}wo(s,Dn,Fi);break;case 4:if(gs(s,m),(m&4194240)===m)break;for(a=s.eventTimes,y=-1;0<m;){var k=31-zn(m);w=1<<k,k=a[k],k>y&&(y=k),m&=~w}if(m=y,m=dt()-m,m=(120>m?120:480>m?480:1080>m?1080:1920>m?1920:3e3>m?3e3:4320>m?4320:1960*gP(m/1960))-m,10<m){s.timeoutHandle=Yd(wo.bind(null,s,Dn,Fi),m);break}wo(s,Dn,Fi);break;case 5:wo(s,Dn,Fi);break;default:throw Error(n(329))}}}return Ln(s,dt()),s.callbackNode===c?u_.bind(null,s):null}function qp(s,a){var c=fu;return s.current.memoizedState.isDehydrated&&(vo(s,a).flags|=256),s=Ah(s,a),s!==2&&(a=Dn,Dn=c,a!==null&&Hp(a)),s}function Hp(s){Dn===null?Dn=s:Dn.push.apply(Dn,s)}function yP(s){for(var a=s;;){if(a.flags&16384){var c=a.updateQueue;if(c!==null&&(c=c.stores,c!==null))for(var m=0;m<c.length;m++){var y=c[m],w=y.getSnapshot;y=y.value;try{if(!_r(w(),y))return!1}catch{return!1}}}if(c=a.child,a.subtreeFlags&16384&&c!==null)c.return=a,a=c;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function gs(s,a){for(a&=~Up,a&=~Th,s.suspendedLanes|=a,s.pingedLanes&=~a,s=s.expirationTimes;0<a;){var c=31-zn(a),m=1<<c;s[c]=-1,a&=~m}}function c_(s){if((et&6)!==0)throw Error(n(327));Ra();var a=Si(s,0);if((a&1)===0)return Ln(s,dt()),null;var c=Ah(s,a);if(s.tag!==0&&c===2){var m=Dl(s);m!==0&&(a=m,c=qp(s,m))}if(c===1)throw c=hu,vo(s,0),gs(s,a),Ln(s,dt()),c;if(c===6)throw Error(n(345));return s.finishedWork=s.current.alternate,s.finishedLanes=a,wo(s,Dn,Fi),Ln(s,dt()),null}function Wp(s,a){var c=et;et|=1;try{return s(a)}finally{et=c,et===0&&(Pa=dt()+500,nh&&us())}}function yo(s){ps!==null&&ps.tag===0&&(et&6)===0&&Ra();var a=et;et|=1;var c=cr.transition,m=Xe;try{if(cr.transition=null,Xe=1,s)return s()}finally{Xe=m,cr.transition=c,et=a,(et&6)===0&&us()}}function Gp(){Qn=Aa.current,mt(Aa)}function vo(s,a){s.finishedWork=null,s.finishedLanes=0;var c=s.timeoutHandle;if(c!==-1&&(s.timeoutHandle=-1,GA(c)),Ot!==null)for(c=Ot.return;c!==null;){var m=c;switch(np(m),m.tag){case 1:m=m.type.childContextTypes,m!=null&&eh();break;case 3:Ia(),mt(Pn),mt(un),mp();break;case 5:dp(m);break;case 4:Ia();break;case 13:mt(Et);break;case 19:mt(Et);break;case 10:lp(m.type._context);break;case 22:case 23:Gp()}c=c.return}if(Yt=s,Ot=s=ys(s.current,null),nn=Qn=a,qt=0,hu=null,Up=Th=go=0,Dn=fu=null,fo!==null){for(a=0;a<fo.length;a++)if(c=fo[a],m=c.interleaved,m!==null){c.interleaved=null;var y=m.next,w=c.pending;if(w!==null){var k=w.next;w.next=y,m.next=k}c.pending=m}fo=null}return s}function h_(s,a){do{var c=Ot;try{if(ap(),fh.current=gh,dh){for(var m=Tt.memoizedState;m!==null;){var y=m.queue;y!==null&&(y.pending=null),m=m.next}dh=!1}if(mo=0,Qt=$t=Tt=null,su=!1,ou=0,jp.current=null,c===null||c.return===null){qt=1,hu=a,Ot=null;break}e:{var w=s,k=c.return,j=c,B=a;if(a=nn,j.flags|=32768,B!==null&&typeof B=="object"&&typeof B.then=="function"){var Q=B,oe=j,le=oe.tag;if((oe.mode&1)===0&&(le===0||le===11||le===15)){var se=oe.alternate;se?(oe.updateQueue=se.updateQueue,oe.memoizedState=se.memoizedState,oe.lanes=se.lanes):(oe.updateQueue=null,oe.memoizedState=null)}var ye=M0(k);if(ye!==null){ye.flags&=-257,O0(ye,k,j,w,a),ye.mode&1&&V0(w,Q,a),a=ye,B=Q;var Te=a.updateQueue;if(Te===null){var Se=new Set;Se.add(B),a.updateQueue=Se}else Te.add(B);break e}else{if((a&1)===0){V0(w,Q,a),Kp();break e}B=Error(n(426))}}else if(wt&&j.mode&1){var Nt=M0(k);if(Nt!==null){(Nt.flags&65536)===0&&(Nt.flags|=256),O0(Nt,k,j,w,a),sp(Ca(B,j));break e}}w=B=Ca(B,j),qt!==4&&(qt=2),fu===null?fu=[w]:fu.push(w),w=k;do{switch(w.tag){case 3:w.flags|=65536,a&=-a,w.lanes|=a;var W=D0(w,B,a);o0(w,W);break e;case 1:j=B;var $=w.type,K=w.stateNode;if((w.flags&128)===0&&(typeof $.getDerivedStateFromError=="function"||K!==null&&typeof K.componentDidCatch=="function"&&(ds===null||!ds.has(K)))){w.flags|=65536,a&=-a,w.lanes|=a;var fe=L0(w,j,a);o0(w,fe);break e}}w=w.return}while(w!==null)}p_(c)}catch(Ie){a=Ie,Ot===c&&c!==null&&(Ot=c=c.return);continue}break}while(!0)}function f_(){var s=Eh.current;return Eh.current=gh,s===null?gh:s}function Kp(){(qt===0||qt===3||qt===2)&&(qt=4),Yt===null||(go&268435455)===0&&(Th&268435455)===0||gs(Yt,nn)}function Ah(s,a){var c=et;et|=2;var m=f_();(Yt!==s||nn!==a)&&(Fi=null,vo(s,a));do try{vP();break}catch(y){h_(s,y)}while(!0);if(ap(),et=c,Eh.current=m,Ot!==null)throw Error(n(261));return Yt=null,nn=0,qt}function vP(){for(;Ot!==null;)d_(Ot)}function wP(){for(;Ot!==null&&!Xs();)d_(Ot)}function d_(s){var a=y_(s.alternate,s,Qn);s.memoizedProps=s.pendingProps,a===null?p_(s):Ot=a,jp.current=null}function p_(s){var a=s;do{var c=a.alternate;if(s=a.return,(a.flags&32768)===0){if(c=hP(c,a,Qn),c!==null){Ot=c;return}}else{if(c=fP(c,a),c!==null){c.flags&=32767,Ot=c;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{qt=6,Ot=null;return}}if(a=a.sibling,a!==null){Ot=a;return}Ot=a=s}while(a!==null);qt===0&&(qt=5)}function wo(s,a,c){var m=Xe,y=cr.transition;try{cr.transition=null,Xe=1,_P(s,a,c,m)}finally{cr.transition=y,Xe=m}return null}function _P(s,a,c,m){do Ra();while(ps!==null);if((et&6)!==0)throw Error(n(327));c=s.finishedWork;var y=s.finishedLanes;if(c===null)return null;if(s.finishedWork=null,s.finishedLanes=0,c===s.current)throw Error(n(177));s.callbackNode=null,s.callbackPriority=0;var w=c.lanes|c.childLanes;if(Ld(s,w),s===Yt&&(Ot=Yt=null,nn=0),(c.subtreeFlags&2064)===0&&(c.flags&2064)===0||Sh||(Sh=!0,v_(Js,function(){return Ra(),null})),w=(c.flags&15990)!==0,(c.subtreeFlags&15990)!==0||w){w=cr.transition,cr.transition=null;var k=Xe;Xe=1;var j=et;et|=4,jp.current=null,pP(s,c),i_(c,s),UA(Kd),bi=!!Gd,Kd=Gd=null,s.current=c,mP(c),ki(),et=j,Xe=k,cr.transition=w}else s.current=c;if(Sh&&(Sh=!1,ps=s,Ih=y),w=s.pendingLanes,w===0&&(ds=null),Mc(c.stateNode),Ln(s,dt()),a!==null)for(m=s.onRecoverableError,c=0;c<a.length;c++)y=a[c],m(y.value,{componentStack:y.stack,digest:y.digest});if(kh)throw kh=!1,s=zp,zp=null,s;return(Ih&1)!==0&&s.tag!==0&&Ra(),w=s.pendingLanes,(w&1)!==0?s===$p?du++:(du=0,$p=s):du=0,us(),null}function Ra(){if(ps!==null){var s=Hr(Ih),a=cr.transition,c=Xe;try{if(cr.transition=null,Xe=16>s?16:s,ps===null)var m=!1;else{if(s=ps,ps=null,Ih=0,(et&6)!==0)throw Error(n(331));var y=et;for(et|=4,Ee=s.current;Ee!==null;){var w=Ee,k=w.child;if((Ee.flags&16)!==0){var j=w.deletions;if(j!==null){for(var B=0;B<j.length;B++){var Q=j[B];for(Ee=Q;Ee!==null;){var oe=Ee;switch(oe.tag){case 0:case 11:case 15:cu(8,oe,w)}var le=oe.child;if(le!==null)le.return=oe,Ee=le;else for(;Ee!==null;){oe=Ee;var se=oe.sibling,ye=oe.return;if(Z0(oe),oe===Q){Ee=null;break}if(se!==null){se.return=ye,Ee=se;break}Ee=ye}}}var Te=w.alternate;if(Te!==null){var Se=Te.child;if(Se!==null){Te.child=null;do{var Nt=Se.sibling;Se.sibling=null,Se=Nt}while(Se!==null)}}Ee=w}}if((w.subtreeFlags&2064)!==0&&k!==null)k.return=w,Ee=k;else e:for(;Ee!==null;){if(w=Ee,(w.flags&2048)!==0)switch(w.tag){case 0:case 11:case 15:cu(9,w,w.return)}var W=w.sibling;if(W!==null){W.return=w.return,Ee=W;break e}Ee=w.return}}var $=s.current;for(Ee=$;Ee!==null;){k=Ee;var K=k.child;if((k.subtreeFlags&2064)!==0&&K!==null)K.return=k,Ee=K;else e:for(k=$;Ee!==null;){if(j=Ee,(j.flags&2048)!==0)try{switch(j.tag){case 0:case 11:case 15:xh(9,j)}}catch(Ie){bt(j,j.return,Ie)}if(j===k){Ee=null;break e}var fe=j.sibling;if(fe!==null){fe.return=j.return,Ee=fe;break e}Ee=j.return}}if(et=y,us(),Bn&&typeof Bn.onPostCommitFiberRoot=="function")try{Bn.onPostCommitFiberRoot(Zs,s)}catch{}m=!0}return m}finally{Xe=c,cr.transition=a}}return!1}function m_(s,a,c){a=Ca(c,a),a=D0(s,a,1),s=hs(s,a,1),a=Tn(),s!==null&&(ro(s,1,a),Ln(s,a))}function bt(s,a,c){if(s.tag===3)m_(s,s,c);else for(;a!==null;){if(a.tag===3){m_(a,s,c);break}else if(a.tag===1){var m=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(ds===null||!ds.has(m))){s=Ca(c,s),s=L0(a,s,1),a=hs(a,s,1),s=Tn(),a!==null&&(ro(a,1,s),Ln(a,s));break}}a=a.return}}function xP(s,a,c){var m=s.pingCache;m!==null&&m.delete(a),a=Tn(),s.pingedLanes|=s.suspendedLanes&c,Yt===s&&(nn&c)===c&&(qt===4||qt===3&&(nn&130023424)===nn&&500>dt()-Bp?vo(s,0):Up|=c),Ln(s,a)}function g_(s,a){a===0&&((s.mode&1)===0?a=1:(a=Zi,Zi<<=1,(Zi&130023424)===0&&(Zi=4194304)));var c=Tn();s=Vi(s,a),s!==null&&(ro(s,a,c),Ln(s,c))}function EP(s){var a=s.memoizedState,c=0;a!==null&&(c=a.retryLane),g_(s,c)}function TP(s,a){var c=0;switch(s.tag){case 13:var m=s.stateNode,y=s.memoizedState;y!==null&&(c=y.retryLane);break;case 19:m=s.stateNode;break;default:throw Error(n(314))}m!==null&&m.delete(a),g_(s,c)}var y_;y_=function(s,a,c){if(s!==null)if(s.memoizedProps!==a.pendingProps||Pn.current)Nn=!0;else{if((s.lanes&c)===0&&(a.flags&128)===0)return Nn=!1,cP(s,a,c);Nn=(s.flags&131072)!==0}else Nn=!1,wt&&(a.flags&1048576)!==0&&Yw(a,ih,a.index);switch(a.lanes=0,a.tag){case 2:var m=a.type;wh(s,a),s=a.pendingProps;var y=wa(a,un.current);Sa(a,c),y=vp(null,a,m,s,y,c);var w=wp();return a.flags|=1,typeof y=="object"&&y!==null&&typeof y.render=="function"&&y.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,Rn(m)?(w=!0,th(a)):w=!1,a.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,hp(a),y.updater=yh,a.stateNode=y,y._reactInternals=a,Sp(a,m,s,c),a=Ap(null,a,m,!0,w,c)):(a.tag=0,wt&&w&&tp(a),En(null,a,y,c),a=a.child),a;case 16:m=a.elementType;e:{switch(wh(s,a),s=a.pendingProps,y=m._init,m=y(m._payload),a.type=m,y=a.tag=SP(m),s=Er(m,s),y){case 0:a=bp(null,a,m,s,c);break e;case 1:a=$0(null,a,m,s,c);break e;case 11:a=F0(null,a,m,s,c);break e;case 14:a=j0(null,a,m,Er(m.type,s),c);break e}throw Error(n(306,m,""))}return a;case 0:return m=a.type,y=a.pendingProps,y=a.elementType===m?y:Er(m,y),bp(s,a,m,y,c);case 1:return m=a.type,y=a.pendingProps,y=a.elementType===m?y:Er(m,y),$0(s,a,m,y,c);case 3:e:{if(q0(a),s===null)throw Error(n(387));m=a.pendingProps,w=a.memoizedState,y=w.element,s0(s,a),ch(a,m,null,c);var k=a.memoizedState;if(m=k.element,w.isDehydrated)if(w={element:m,isDehydrated:!1,cache:k.cache,pendingSuspenseBoundaries:k.pendingSuspenseBoundaries,transitions:k.transitions},a.updateQueue.baseState=w,a.memoizedState=w,a.flags&256){y=Ca(Error(n(423)),a),a=H0(s,a,m,c,y);break e}else if(m!==y){y=Ca(Error(n(424)),a),a=H0(s,a,m,c,y);break e}else for(Kn=os(a.stateNode.containerInfo.firstChild),Gn=a,wt=!0,xr=null,c=r0(a,null,m,c),a.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(Ea(),m===y){a=Oi(s,a,c);break e}En(s,a,m,c)}a=a.child}return a;case 5:return l0(a),s===null&&ip(a),m=a.type,y=a.pendingProps,w=s!==null?s.memoizedProps:null,k=y.children,Qd(m,y)?k=null:w!==null&&Qd(m,w)&&(a.flags|=32),z0(s,a),En(s,a,k,c),a.child;case 6:return s===null&&ip(a),null;case 13:return W0(s,a,c);case 4:return fp(a,a.stateNode.containerInfo),m=a.pendingProps,s===null?a.child=Ta(a,null,m,c):En(s,a,m,c),a.child;case 11:return m=a.type,y=a.pendingProps,y=a.elementType===m?y:Er(m,y),F0(s,a,m,y,c);case 7:return En(s,a,a.pendingProps,c),a.child;case 8:return En(s,a,a.pendingProps.children,c),a.child;case 12:return En(s,a,a.pendingProps.children,c),a.child;case 10:e:{if(m=a.type._context,y=a.pendingProps,w=a.memoizedProps,k=y.value,lt(ah,m._currentValue),m._currentValue=k,w!==null)if(_r(w.value,k)){if(w.children===y.children&&!Pn.current){a=Oi(s,a,c);break e}}else for(w=a.child,w!==null&&(w.return=a);w!==null;){var j=w.dependencies;if(j!==null){k=w.child;for(var B=j.firstContext;B!==null;){if(B.context===m){if(w.tag===1){B=Mi(-1,c&-c),B.tag=2;var Q=w.updateQueue;if(Q!==null){Q=Q.shared;var oe=Q.pending;oe===null?B.next=B:(B.next=oe.next,oe.next=B),Q.pending=B}}w.lanes|=c,B=w.alternate,B!==null&&(B.lanes|=c),up(w.return,c,a),j.lanes|=c;break}B=B.next}}else if(w.tag===10)k=w.type===a.type?null:w.child;else if(w.tag===18){if(k=w.return,k===null)throw Error(n(341));k.lanes|=c,j=k.alternate,j!==null&&(j.lanes|=c),up(k,c,a),k=w.sibling}else k=w.child;if(k!==null)k.return=w;else for(k=w;k!==null;){if(k===a){k=null;break}if(w=k.sibling,w!==null){w.return=k.return,k=w;break}k=k.return}w=k}En(s,a,y.children,c),a=a.child}return a;case 9:return y=a.type,m=a.pendingProps.children,Sa(a,c),y=lr(y),m=m(y),a.flags|=1,En(s,a,m,c),a.child;case 14:return m=a.type,y=Er(m,a.pendingProps),y=Er(m.type,y),j0(s,a,m,y,c);case 15:return U0(s,a,a.type,a.pendingProps,c);case 17:return m=a.type,y=a.pendingProps,y=a.elementType===m?y:Er(m,y),wh(s,a),a.tag=1,Rn(m)?(s=!0,th(a)):s=!1,Sa(a,c),R0(a,m,y),Sp(a,m,y,c),Ap(null,a,m,!0,s,c);case 19:return K0(s,a,c);case 22:return B0(s,a,c)}throw Error(n(156,a.tag))};function v_(s,a){return Pl(s,a)}function kP(s,a,c,m){this.tag=s,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hr(s,a,c,m){return new kP(s,a,c,m)}function Qp(s){return s=s.prototype,!(!s||!s.isReactComponent)}function SP(s){if(typeof s=="function")return Qp(s)?1:0;if(s!=null){if(s=s.$$typeof,s===F)return 11;if(s===ae)return 14}return 2}function ys(s,a){var c=s.alternate;return c===null?(c=hr(s.tag,a,s.key,s.mode),c.elementType=s.elementType,c.type=s.type,c.stateNode=s.stateNode,c.alternate=s,s.alternate=c):(c.pendingProps=a,c.type=s.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=s.flags&14680064,c.childLanes=s.childLanes,c.lanes=s.lanes,c.child=s.child,c.memoizedProps=s.memoizedProps,c.memoizedState=s.memoizedState,c.updateQueue=s.updateQueue,a=s.dependencies,c.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},c.sibling=s.sibling,c.index=s.index,c.ref=s.ref,c}function Ph(s,a,c,m,y,w){var k=2;if(m=s,typeof s=="function")Qp(s)&&(k=1);else if(typeof s=="string")k=5;else e:switch(s){case O:return _o(c.children,y,w,a);case A:k=8,y|=8;break;case V:return s=hr(12,c,a,y|2),s.elementType=V,s.lanes=w,s;case D:return s=hr(13,c,a,y),s.elementType=D,s.lanes=w,s;case ce:return s=hr(19,c,a,y),s.elementType=ce,s.lanes=w,s;case _e:return Rh(c,y,w,a);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case S:k=10;break e;case M:k=9;break e;case F:k=11;break e;case ae:k=14;break e;case Me:k=16,m=null;break e}throw Error(n(130,s==null?s:typeof s,""))}return a=hr(k,c,a,y),a.elementType=s,a.type=m,a.lanes=w,a}function _o(s,a,c,m){return s=hr(7,s,m,a),s.lanes=c,s}function Rh(s,a,c,m){return s=hr(22,s,m,a),s.elementType=_e,s.lanes=c,s.stateNode={isHidden:!1},s}function Yp(s,a,c){return s=hr(6,s,null,a),s.lanes=c,s}function Xp(s,a,c){return a=hr(4,s.children!==null?s.children:[],s.key,a),a.lanes=c,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}function IP(s,a,c,m,y){this.tag=a,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Vl(0),this.expirationTimes=Vl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vl(0),this.identifierPrefix=m,this.onRecoverableError=y,this.mutableSourceEagerHydrationData=null}function Jp(s,a,c,m,y,w,k,j,B){return s=new IP(s,a,c,j,B),a===1?(a=1,w===!0&&(a|=8)):a=0,w=hr(3,null,null,a),s.current=w,w.stateNode=s,w.memoizedState={element:m,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null},hp(w),s}function CP(s,a,c){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:H,key:m==null?null:""+m,children:s,containerInfo:a,implementation:c}}function w_(s){if(!s)return ls;s=s._reactInternals;e:{if(vr(s)!==s||s.tag!==1)throw Error(n(170));var a=s;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(Rn(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(n(171))}if(s.tag===1){var c=s.type;if(Rn(c))return Gw(s,c,a)}return a}function __(s,a,c,m,y,w,k,j,B){return s=Jp(c,m,!0,s,y,w,k,j,B),s.context=w_(null),c=s.current,m=Tn(),y=ms(c),w=Mi(m,y),w.callback=a??null,hs(c,w,y),s.current.lanes=y,ro(s,y,m),Ln(s,m),s}function Nh(s,a,c,m){var y=a.current,w=Tn(),k=ms(y);return c=w_(c),a.context===null?a.context=c:a.pendingContext=c,a=Mi(w,k),a.payload={element:s},m=m===void 0?null:m,m!==null&&(a.callback=m),s=hs(y,a,k),s!==null&&(Sr(s,y,k,w),uh(s,y,k)),k}function Dh(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function x_(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var c=s.retryLane;s.retryLane=c!==0&&c<a?c:a}}function Zp(s,a){x_(s,a),(s=s.alternate)&&x_(s,a)}function bP(){return null}var E_=typeof reportError=="function"?reportError:function(s){console.error(s)};function em(s){this._internalRoot=s}Lh.prototype.render=em.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(n(409));Nh(s,a,null,null)},Lh.prototype.unmount=em.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;yo(function(){Nh(null,s,null,null)}),a[Ri]=null}};function Lh(s){this._internalRoot=s}Lh.prototype.unstable_scheduleHydration=function(s){if(s){var a=jl();s={blockedOn:null,target:s,priority:a};for(var c=0;c<$n.length&&a!==0&&a<$n[c].priority;c++);$n.splice(c,0,s),c===0&&ra(s)}};function tm(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function Vh(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function T_(){}function AP(s,a,c,m,y){if(y){if(typeof m=="function"){var w=m;m=function(){var Q=Dh(k);w.call(Q)}}var k=__(a,m,s,0,null,!1,!1,"",T_);return s._reactRootContainer=k,s[Ri]=k.current,Xl(s.nodeType===8?s.parentNode:s),yo(),k}for(;y=s.lastChild;)s.removeChild(y);if(typeof m=="function"){var j=m;m=function(){var Q=Dh(B);j.call(Q)}}var B=Jp(s,0,!1,null,null,!1,!1,"",T_);return s._reactRootContainer=B,s[Ri]=B.current,Xl(s.nodeType===8?s.parentNode:s),yo(function(){Nh(a,B,c,m)}),B}function Mh(s,a,c,m,y){var w=c._reactRootContainer;if(w){var k=w;if(typeof y=="function"){var j=y;y=function(){var B=Dh(k);j.call(B)}}Nh(a,k,s,y)}else k=AP(c,a,s,y,m);return Dh(k)}Ol=function(s){switch(s.tag){case 3:var a=s.stateNode;if(a.current.memoizedState.isDehydrated){var c=nt(a.pendingLanes);c!==0&&(Ml(a,c|1),Ln(a,dt()),(et&6)===0&&(Pa=dt()+500,us()))}break;case 13:yo(function(){var m=Vi(s,1);if(m!==null){var y=Tn();Sr(m,s,1,y)}}),Zp(s,1)}},ta=function(s){if(s.tag===13){var a=Vi(s,134217728);if(a!==null){var c=Tn();Sr(a,s,134217728,c)}Zp(s,134217728)}},Fl=function(s){if(s.tag===13){var a=ms(s),c=Vi(s,a);if(c!==null){var m=Tn();Sr(c,s,a,m)}Zp(s,a)}},jl=function(){return Xe},Ul=function(s,a){var c=Xe;try{return Xe=s,a()}finally{Xe=c}},xi=function(s,a,c){switch(a){case"input":if(jr(s,c),a=c.name,c.type==="radio"&&a!=null){for(c=s;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<c.length;a++){var m=c[a];if(m!==s&&m.form===s.form){var y=Zc(m);if(!y)throw Error(n(90));_t(m),jr(m,y)}}}break;case"textarea":Qo(s,c);break;case"select":a=c.value,a!=null&&jn(s,!!c.multiple,a,!1)}},Cc=Wp,bc=yo;var PP={usingClientEntryPoint:!1,Events:[eu,ya,Zc,Qi,Yi,Wp]},pu={findFiberByHostInstance:lo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},RP={bundleType:pu.bundleType,version:pu.version,rendererPackageName:pu.rendererPackageName,rendererConfig:pu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:J.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=Vc(s),s===null?null:s.stateNode},findFiberByHostInstance:pu.findFiberByHostInstance||bP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Oh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Oh.isDisabled&&Oh.supportsFiber)try{Zs=Oh.inject(RP),Bn=Oh}catch{}}return Vn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=PP,Vn.createPortal=function(s,a){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!tm(a))throw Error(n(200));return CP(s,a,null,c)},Vn.createRoot=function(s,a){if(!tm(s))throw Error(n(299));var c=!1,m="",y=E_;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(m=a.identifierPrefix),a.onRecoverableError!==void 0&&(y=a.onRecoverableError)),a=Jp(s,1,!1,null,null,c,!1,m,y),s[Ri]=a.current,Xl(s.nodeType===8?s.parentNode:s),new em(a)},Vn.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(n(188)):(s=Object.keys(s).join(","),Error(n(268,s)));return s=Vc(a),s=s===null?null:s.stateNode,s},Vn.flushSync=function(s){return yo(s)},Vn.hydrate=function(s,a,c){if(!Vh(a))throw Error(n(200));return Mh(null,s,a,!0,c)},Vn.hydrateRoot=function(s,a,c){if(!tm(s))throw Error(n(405));var m=c!=null&&c.hydratedSources||null,y=!1,w="",k=E_;if(c!=null&&(c.unstable_strictMode===!0&&(y=!0),c.identifierPrefix!==void 0&&(w=c.identifierPrefix),c.onRecoverableError!==void 0&&(k=c.onRecoverableError)),a=__(a,null,s,1,c??null,y,!1,w,k),s[Ri]=a.current,Xl(s),m)for(s=0;s<m.length;s++)c=m[s],y=c._getVersion,y=y(c._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[c,y]:a.mutableSourceEagerHydrationData.push(c,y);return new Lh(a)},Vn.render=function(s,a,c){if(!Vh(a))throw Error(n(200));return Mh(null,s,a,!1,c)},Vn.unmountComponentAtNode=function(s){if(!Vh(s))throw Error(n(40));return s._reactRootContainer?(yo(function(){Mh(null,null,s,!1,function(){s._reactRootContainer=null,s[Ri]=null})}),!0):!1},Vn.unstable_batchedUpdates=Wp,Vn.unstable_renderSubtreeIntoContainer=function(s,a,c,m){if(!Vh(c))throw Error(n(200));if(s==null||s._reactInternals===void 0)throw Error(n(38));return Mh(s,a,c,!1,m)},Vn.version="18.3.1-next-f1338f8080-20240426",Vn}var R_;function jP(){if(R_)return im.exports;R_=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),im.exports=FP(),im.exports}var N_;function UP(){if(N_)return Fh;N_=1;var t=jP();return Fh.createRoot=t.createRoot,Fh.hydrateRoot=t.hydrateRoot,Fh}var BP=UP(),ee=fy();const LT=ee.createContext({});function zP(t){const e=ee.useRef(null);return e.current===null&&(e.current=t()),e.current}const VT=typeof window<"u",$P=VT?ee.useLayoutEffect:ee.useEffect,dy=ee.createContext(null);function py(t,e){t.indexOf(e)===-1&&t.push(e)}function my(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const mi=(t,e,n)=>n>e?e:n<t?t:n;let gy=()=>{};const zi={},MT=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function OT(t){return typeof t=="object"&&t!==null}const FT=t=>/^0[^.\s]+$/u.test(t);function yy(t){let e;return()=>(e===void 0&&(e=t()),e)}const mr=t=>t,qP=(t,e)=>n=>e(t(n)),lc=(...t)=>t.reduce(qP),zu=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class vy{constructor(){this.subscriptions=[]}add(e){return py(this.subscriptions,e),()=>my(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let o=0;o<i;o++){const l=this.subscriptions[o];l&&l(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const li=t=>t*1e3,pr=t=>t/1e3;function jT(t,e){return e?t*(1e3/e):0}const UT=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,HP=1e-7,WP=12;function GP(t,e,n,r,i){let o,l,u=0;do l=e+(n-e)/2,o=UT(l,r,i)-t,o>0?n=l:e=l;while(Math.abs(o)>HP&&++u<WP);return l}function uc(t,e,n,r){if(t===e&&n===r)return mr;const i=o=>GP(o,0,1,t,n);return o=>o===0||o===1?o:UT(i(o),e,r)}const BT=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,zT=t=>e=>1-t(1-e),$T=uc(.33,1.53,.69,.99),wy=zT($T),qT=BT(wy),HT=t=>(t*=2)<1?.5*wy(t):.5*(2-Math.pow(2,-10*(t-1))),_y=t=>1-Math.sin(Math.acos(t)),WT=zT(_y),GT=BT(_y),KP=uc(.42,0,1,1),QP=uc(0,0,.58,1),KT=uc(.42,0,.58,1),YP=t=>Array.isArray(t)&&typeof t[0]!="number",QT=t=>Array.isArray(t)&&typeof t[0]=="number",XP={linear:mr,easeIn:KP,easeInOut:KT,easeOut:QP,circIn:_y,circInOut:GT,circOut:WT,backIn:wy,backInOut:qT,backOut:$T,anticipate:HT},JP=t=>typeof t=="string",D_=t=>{if(QT(t)){gy(t.length===4);const[e,n,r,i]=t;return uc(e,n,r,i)}else if(JP(t))return XP[t];return t},jh=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function ZP(t,e){let n=new Set,r=new Set,i=!1,o=!1;const l=new WeakSet;let u={delta:0,timestamp:0,isProcessing:!1};function h(p){l.has(p)&&(f.schedule(p),t()),p(u)}const f={schedule:(p,g=!1,v=!1)=>{const T=v&&i?n:r;return g&&l.add(p),T.has(p)||T.add(p),p},cancel:p=>{r.delete(p),l.delete(p)},process:p=>{if(u=p,i){o=!0;return}i=!0,[n,r]=[r,n],n.forEach(h),n.clear(),i=!1,o&&(o=!1,f.process(p))}};return f}const eR=40;function YT(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},o=()=>n=!0,l=jh.reduce((U,J)=>(U[J]=ZP(o),U),{}),{setup:u,read:h,resolveKeyframes:f,preUpdate:p,update:g,preRender:v,render:x,postRender:T}=l,I=()=>{const U=zi.useManualTiming?i.timestamp:performance.now();n=!1,zi.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(U-i.timestamp,eR),1)),i.timestamp=U,i.isProcessing=!0,u.process(i),h.process(i),f.process(i),p.process(i),g.process(i),v.process(i),x.process(i),T.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(I))},b=()=>{n=!0,r=!0,i.isProcessing||t(I)};return{schedule:jh.reduce((U,J)=>{const X=l[J];return U[J]=(H,O=!1,A=!1)=>(n||b(),X.schedule(H,O,A)),U},{}),cancel:U=>{for(let J=0;J<jh.length;J++)l[jh[J]].cancel(U)},state:i,steps:l}}const{schedule:ht,cancel:Ds,state:rn,steps:am}=YT(typeof requestAnimationFrame<"u"?requestAnimationFrame:mr,!0);let Zh;function tR(){Zh=void 0}const In={now:()=>(Zh===void 0&&In.set(rn.isProcessing||zi.useManualTiming?rn.timestamp:performance.now()),Zh),set:t=>{Zh=t,queueMicrotask(tR)}},XT=t=>e=>typeof e=="string"&&e.startsWith(t),JT=XT("--"),nR=XT("var(--"),xy=t=>nR(t)?rR.test(t.split("/*")[0].trim()):!1,rR=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function L_(t){return typeof t!="string"?!1:t.split("/*")[0].includes("var(--")}const dl={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},$u={...dl,transform:t=>mi(0,1,t)},Uh={...dl,default:1},Cu=t=>Math.round(t*1e5)/1e5,Ey=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function iR(t){return t==null}const sR=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Ty=(t,e)=>n=>!!(typeof n=="string"&&sR.test(n)&&n.startsWith(t)||e&&!iR(n)&&Object.prototype.hasOwnProperty.call(n,e)),ZT=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,o,l,u]=r.match(Ey);return{[t]:parseFloat(i),[e]:parseFloat(o),[n]:parseFloat(l),alpha:u!==void 0?parseFloat(u):1}},oR=t=>mi(0,255,t),lm={...dl,transform:t=>Math.round(oR(t))},Io={test:Ty("rgb","red"),parse:ZT("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+lm.transform(t)+", "+lm.transform(e)+", "+lm.transform(n)+", "+Cu($u.transform(r))+")"};function aR(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const ag={test:Ty("#"),parse:aR,transform:Io.transform},cc=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),xs=cc("deg"),ui=cc("%"),ke=cc("px"),lR=cc("vh"),uR=cc("vw"),V_={...ui,parse:t=>ui.parse(t)/100,transform:t=>ui.transform(t*100)},Ba={test:Ty("hsl","hue"),parse:ZT("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+ui.transform(Cu(e))+", "+ui.transform(Cu(n))+", "+Cu($u.transform(r))+")"},Ut={test:t=>Io.test(t)||ag.test(t)||Ba.test(t),parse:t=>Io.test(t)?Io.parse(t):Ba.test(t)?Ba.parse(t):ag.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Io.transform(t):Ba.transform(t),getAnimatableNone:t=>{const e=Ut.parse(t);return e.alpha=0,Ut.transform(e)}},cR=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function hR(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(Ey))==null?void 0:e.length)||0)+(((n=t.match(cR))==null?void 0:n.length)||0)>0}const ek="number",tk="color",fR="var",dR="var(",M_="${}",pR=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function qu(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let o=0;const u=e.replace(pR,h=>(Ut.test(h)?(r.color.push(o),i.push(tk),n.push(Ut.parse(h))):h.startsWith(dR)?(r.var.push(o),i.push(fR),n.push(h)):(r.number.push(o),i.push(ek),n.push(parseFloat(h))),++o,M_)).split(M_);return{values:n,split:u,indexes:r,types:i}}function nk(t){return qu(t).values}function rk(t){const{split:e,types:n}=qu(t),r=e.length;return i=>{let o="";for(let l=0;l<r;l++)if(o+=e[l],i[l]!==void 0){const u=n[l];u===ek?o+=Cu(i[l]):u===tk?o+=Ut.transform(i[l]):o+=i[l]}return o}}const mR=t=>typeof t=="number"?0:Ut.test(t)?Ut.getAnimatableNone(t):t;function gR(t){const e=nk(t);return rk(t)(e.map(mR))}const Ls={test:hR,parse:nk,createTransformer:rk,getAnimatableNone:gR};function um(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function yR({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,o=0,l=0;if(!e)i=o=l=n;else{const u=n<.5?n*(1+e):n+e-n*e,h=2*n-u;i=um(h,u,t+1/3),o=um(h,u,t),l=um(h,u,t-1/3)}return{red:Math.round(i*255),green:Math.round(o*255),blue:Math.round(l*255),alpha:r}}function yf(t,e){return n=>n>0?e:t}const kt=(t,e,n)=>t+(e-t)*n,cm=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},vR=[ag,Io,Ba],wR=t=>vR.find(e=>e.test(t));function O_(t){const e=wR(t);if(!e)return!1;let n=e.parse(t);return e===Ba&&(n=yR(n)),n}const F_=(t,e)=>{const n=O_(t),r=O_(e);if(!n||!r)return yf(t,e);const i={...n};return o=>(i.red=cm(n.red,r.red,o),i.green=cm(n.green,r.green,o),i.blue=cm(n.blue,r.blue,o),i.alpha=kt(n.alpha,r.alpha,o),Io.transform(i))},lg=new Set(["none","hidden"]);function _R(t,e){return lg.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function xR(t,e){return n=>kt(t,e,n)}function ky(t){return typeof t=="number"?xR:typeof t=="string"?xy(t)?yf:Ut.test(t)?F_:kR:Array.isArray(t)?ik:typeof t=="object"?Ut.test(t)?F_:ER:yf}function ik(t,e){const n=[...t],r=n.length,i=t.map((o,l)=>ky(o)(o,e[l]));return o=>{for(let l=0;l<r;l++)n[l]=i[l](o);return n}}function ER(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=ky(t[i])(t[i],e[i]));return i=>{for(const o in r)n[o]=r[o](i);return n}}function TR(t,e){const n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const o=e.types[i],l=t.indexes[o][r[o]],u=t.values[l]??0;n[i]=u,r[o]++}return n}const kR=(t,e)=>{const n=Ls.createTransformer(e),r=qu(t),i=qu(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?lg.has(t)&&!i.values.length||lg.has(e)&&!r.values.length?_R(t,e):lc(ik(TR(r,i),i.values),n):yf(t,e)};function sk(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?kt(t,e,n):ky(t)(t,e)}const SR=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>ht.update(e,n),stop:()=>Ds(e),now:()=>rn.isProcessing?rn.timestamp:In.now()}},ok=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let o=0;o<i;o++)r+=Math.round(t(o/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},vf=2e4;function Sy(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<vf;)e+=n,r=t.next(e);return e>=vf?1/0:e}function IR(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min(Sy(r),vf);return{type:"keyframes",ease:o=>r.next(i*o).value/e,duration:pr(i)}}const CR=5;function ak(t,e,n){const r=Math.max(e-CR,0);return jT(n-t(r),e-r)}const At={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},hm=.001;function bR({duration:t=At.duration,bounce:e=At.bounce,velocity:n=At.velocity,mass:r=At.mass}){let i,o,l=1-e;l=mi(At.minDamping,At.maxDamping,l),t=mi(At.minDuration,At.maxDuration,pr(t)),l<1?(i=f=>{const p=f*l,g=p*t,v=p-n,x=ug(f,l),T=Math.exp(-g);return hm-v/x*T},o=f=>{const g=f*l*t,v=g*n+n,x=Math.pow(l,2)*Math.pow(f,2)*t,T=Math.exp(-g),I=ug(Math.pow(f,2),l);return(-i(f)+hm>0?-1:1)*((v-x)*T)/I}):(i=f=>{const p=Math.exp(-f*t),g=(f-n)*t+1;return-hm+p*g},o=f=>{const p=Math.exp(-f*t),g=(n-f)*(t*t);return p*g});const u=5/t,h=PR(i,o,u);if(t=li(t),isNaN(h))return{stiffness:At.stiffness,damping:At.damping,duration:t};{const f=Math.pow(h,2)*r;return{stiffness:f,damping:l*2*Math.sqrt(r*f),duration:t}}}const AR=12;function PR(t,e,n){let r=n;for(let i=1;i<AR;i++)r=r-t(r)/e(r);return r}function ug(t,e){return t*Math.sqrt(1-e*e)}const RR=["duration","bounce"],NR=["stiffness","damping","mass"];function j_(t,e){return e.some(n=>t[n]!==void 0)}function DR(t){let e={velocity:At.velocity,stiffness:At.stiffness,damping:At.damping,mass:At.mass,isResolvedFromDuration:!1,...t};if(!j_(t,NR)&&j_(t,RR))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,o=2*mi(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:At.mass,stiffness:i,damping:o}}else{const n=bR(t);e={...e,...n,mass:At.mass},e.isResolvedFromDuration=!0}return e}function wf(t=At.visualDuration,e=At.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const o=n.keyframes[0],l=n.keyframes[n.keyframes.length-1],u={done:!1,value:o},{stiffness:h,damping:f,mass:p,duration:g,velocity:v,isResolvedFromDuration:x}=DR({...n,velocity:-pr(n.velocity||0)}),T=v||0,I=f/(2*Math.sqrt(h*p)),b=l-o,N=pr(Math.sqrt(h/p)),z=Math.abs(b)<5;r||(r=z?At.restSpeed.granular:At.restSpeed.default),i||(i=z?At.restDelta.granular:At.restDelta.default);let U;if(I<1){const X=ug(N,I);U=H=>{const O=Math.exp(-I*N*H);return l-O*((T+I*N*b)/X*Math.sin(X*H)+b*Math.cos(X*H))}}else if(I===1)U=X=>l-Math.exp(-N*X)*(b+(T+N*b)*X);else{const X=N*Math.sqrt(I*I-1);U=H=>{const O=Math.exp(-I*N*H),A=Math.min(X*H,300);return l-O*((T+I*N*b)*Math.sinh(A)+X*b*Math.cosh(A))/X}}const J={calculatedDuration:x&&g||null,next:X=>{const H=U(X);if(x)u.done=X>=g;else{let O=X===0?T:0;I<1&&(O=X===0?li(T):ak(U,X,H));const A=Math.abs(O)<=r,V=Math.abs(l-H)<=i;u.done=A&&V}return u.value=u.done?l:H,u},toString:()=>{const X=Math.min(Sy(J),vf),H=ok(O=>J.next(X*O).value,X,30);return X+"ms "+H},toTransition:()=>{}};return J}wf.applyToOptions=t=>{const e=IR(t,100,wf);return t.ease=e.ease,t.duration=li(e.duration),t.type="keyframes",t};function cg({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:o=500,modifyTarget:l,min:u,max:h,restDelta:f=.5,restSpeed:p}){const g=t[0],v={done:!1,value:g},x=A=>u!==void 0&&A<u||h!==void 0&&A>h,T=A=>u===void 0?h:h===void 0||Math.abs(u-A)<Math.abs(h-A)?u:h;let I=n*e;const b=g+I,N=l===void 0?b:l(b);N!==b&&(I=N-g);const z=A=>-I*Math.exp(-A/r),U=A=>N+z(A),J=A=>{const V=z(A),S=U(A);v.done=Math.abs(V)<=f,v.value=v.done?N:S};let X,H;const O=A=>{x(v.value)&&(X=A,H=wf({keyframes:[v.value,T(v.value)],velocity:ak(U,A,v.value),damping:i,stiffness:o,restDelta:f,restSpeed:p}))};return O(0),{calculatedDuration:null,next:A=>{let V=!1;return!H&&X===void 0&&(V=!0,J(A),O(A)),X!==void 0&&A>=X?H.next(A-X):(!V&&J(A),v)}}}function LR(t,e,n){const r=[],i=n||zi.mix||sk,o=t.length-1;for(let l=0;l<o;l++){let u=i(t[l],t[l+1]);if(e){const h=Array.isArray(e)?e[l]||mr:e;u=lc(h,u)}r.push(u)}return r}function VR(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const o=t.length;if(gy(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const l=t[0]===t[1];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const u=LR(e,r,i),h=u.length,f=p=>{if(l&&p<t[0])return e[0];let g=0;if(h>1)for(;g<t.length-2&&!(p<t[g+1]);g++);const v=zu(t[g],t[g+1],p);return u[g](v)};return n?p=>f(mi(t[0],t[o-1],p)):f}function MR(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=zu(0,e,r);t.push(kt(n,1,i))}}function OR(t){const e=[0];return MR(e,t.length-1),e}function FR(t,e){return t.map(n=>n*e)}function jR(t,e){return t.map(()=>e||KT).splice(0,t.length-1)}function bu({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=YP(r)?r.map(D_):D_(r),o={done:!1,value:e[0]},l=FR(n&&n.length===e.length?n:OR(e),t),u=VR(l,e,{ease:Array.isArray(i)?i:jR(e,i)});return{calculatedDuration:t,next:h=>(o.value=u(h),o.done=h>=t,o)}}const UR=t=>t!==null;function Iy(t,{repeat:e,repeatType:n="loop"},r,i=1){const o=t.filter(UR),u=i<0||e&&n!=="loop"&&e%2===1?0:o.length-1;return!u||r===void 0?o[u]:r}const BR={decay:cg,inertia:cg,tween:bu,keyframes:bu,spring:wf};function lk(t){typeof t.type=="string"&&(t.type=BR[t.type])}class Cy{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const zR=t=>t/100;class by extends Cy{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,i;const{motionValue:n}=this.options;n&&n.updatedAt!==In.now()&&this.tick(In.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(r=this.options).onStop)==null||i.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;lk(e);const{type:n=bu,repeat:r=0,repeatDelay:i=0,repeatType:o,velocity:l=0}=e;let{keyframes:u}=e;const h=n||bu;h!==bu&&typeof u[0]!="number"&&(this.mixKeyframes=lc(zR,sk(u[0],u[1])),u=[0,100]);const f=h({...e,keyframes:u});o==="mirror"&&(this.mirroredGenerator=h({...e,keyframes:[...u].reverse(),velocity:-l})),f.calculatedDuration===null&&(f.calculatedDuration=Sy(f));const{calculatedDuration:p}=f;this.calculatedDuration=p,this.resolvedDuration=p+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=f}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:i,mixKeyframes:o,mirroredGenerator:l,resolvedDuration:u,calculatedDuration:h}=this;if(this.startTime===null)return r.next(0);const{delay:f=0,keyframes:p,repeat:g,repeatType:v,repeatDelay:x,type:T,onUpdate:I,finalKeyframe:b}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const N=this.currentTime-f*(this.playbackSpeed>=0?1:-1),z=this.playbackSpeed>=0?N<0:N>i;this.currentTime=Math.max(N,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let U=this.currentTime,J=r;if(g){const A=Math.min(this.currentTime,i)/u;let V=Math.floor(A),S=A%1;!S&&A>=1&&(S=1),S===1&&V--,V=Math.min(V,g+1),!!(V%2)&&(v==="reverse"?(S=1-S,x&&(S-=x/u)):v==="mirror"&&(J=l)),U=mi(0,1,S)*u}const X=z?{done:!1,value:p[0]}:J.next(U);o&&(X.value=o(X.value));let{done:H}=X;!z&&h!==null&&(H=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const O=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&H);return O&&T!==cg&&(X.value=Iy(p,this.options,b,this.speed)),I&&I(X.value),O&&this.finish(),X}then(e,n){return this.finished.then(e,n)}get duration(){return pr(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+pr(e)}get time(){return pr(this.currentTime)}set time(e){var n;e=li(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(In.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=pr(this.currentTime))}play(){var i,o;if(this.isStopped)return;const{driver:e=SR,startTime:n}=this.options;this.driver||(this.driver=e(l=>this.tick(l))),(o=(i=this.options).onPlay)==null||o.call(i);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(In.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function $R(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Co=t=>t*180/Math.PI,hg=t=>{const e=Co(Math.atan2(t[1],t[0]));return fg(e)},qR={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:hg,rotateZ:hg,skewX:t=>Co(Math.atan(t[1])),skewY:t=>Co(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},fg=t=>(t=t%360,t<0&&(t+=360),t),U_=hg,B_=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),z_=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),HR={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:B_,scaleY:z_,scale:t=>(B_(t)+z_(t))/2,rotateX:t=>fg(Co(Math.atan2(t[6],t[5]))),rotateY:t=>fg(Co(Math.atan2(-t[2],t[0]))),rotateZ:U_,rotate:U_,skewX:t=>Co(Math.atan(t[4])),skewY:t=>Co(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function dg(t){return t.includes("scale")?1:0}function pg(t,e){if(!t||t==="none")return dg(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=HR,i=n;else{const u=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=qR,i=u}if(!i)return dg(e);const o=r[e],l=i[1].split(",").map(GR);return typeof o=="function"?o(l):l[o]}const WR=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return pg(n,e)};function GR(t){return parseFloat(t.trim())}const pl=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ml=new Set(pl),$_=t=>t===dl||t===ke,KR=new Set(["x","y","z"]),QR=pl.filter(t=>!KR.has(t));function YR(t){const e=[];return QR.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Cs={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>pg(e,"x"),y:(t,{transform:e})=>pg(e,"y")};Cs.translateX=Cs.x;Cs.translateY=Cs.y;const Ro=new Set;let mg=!1,gg=!1,yg=!1;function uk(){if(gg){const t=Array.from(Ro).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=YR(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([o,l])=>{var u;(u=r.getValue(o))==null||u.set(l)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}gg=!1,mg=!1,Ro.forEach(t=>t.complete(yg)),Ro.clear()}function ck(){Ro.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(gg=!0)})}function XR(){yg=!0,ck(),uk(),yg=!1}class Ay{constructor(e,n,r,i,o,l=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=o,this.isAsync=l}scheduleResolve(){this.state="scheduled",this.isAsync?(Ro.add(this),mg||(mg=!0,ht.read(ck),ht.resolveKeyframes(uk))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;if(e[0]===null){const o=i==null?void 0:i.get(),l=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&n){const u=r.readValue(n,l);u!=null&&(e[0]=u)}e[0]===void 0&&(e[0]=l),i&&o===void 0&&i.set(e[0])}$R(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Ro.delete(this)}cancel(){this.state==="scheduled"&&(Ro.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const JR=t=>t.startsWith("--");function ZR(t,e,n){JR(e)?t.style.setProperty(e,n):t.style[e]=n}const e2=yy(()=>window.ScrollTimeline!==void 0),t2={};function n2(t,e){const n=yy(t);return()=>t2[e]??n()}const hk=n2(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Eu=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,q_={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Eu([0,.65,.55,1]),circOut:Eu([.55,0,1,.45]),backIn:Eu([.31,.01,.66,-.59]),backOut:Eu([.33,1.53,.69,.99])};function fk(t,e){if(t)return typeof t=="function"?hk()?ok(t,e):"ease-out":QT(t)?Eu(t):Array.isArray(t)?t.map(n=>fk(n,e)||q_.easeOut):q_[t]}function r2(t,e,n,{delay:r=0,duration:i=300,repeat:o=0,repeatType:l="loop",ease:u="easeOut",times:h}={},f=void 0){const p={[e]:n};h&&(p.offset=h);const g=fk(u,i);Array.isArray(g)&&(p.easing=g);const v={delay:r,duration:i,easing:Array.isArray(g)?"linear":g,fill:"both",iterations:o+1,direction:l==="reverse"?"alternate":"normal"};return f&&(v.pseudoElement=f),t.animate(p,v)}function dk(t){return typeof t=="function"&&"applyToOptions"in t}function i2({type:t,...e}){return dk(t)&&hk()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class s2 extends Cy{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!e)return;const{element:n,name:r,keyframes:i,pseudoElement:o,allowFlatten:l=!1,finalKeyframe:u,onComplete:h}=e;this.isPseudoElement=!!o,this.allowFlatten=l,this.options=e,gy(typeof e.type!="string");const f=i2(e);this.animation=r2(n,r,i,f,o),f.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!o){const p=Iy(i,this.options,u,this.speed);this.updateMotionValue?this.updateMotionValue(p):ZR(n,r,p),this.animation.cancel()}h==null||h(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var n,r,i;const e=(n=this.options)==null?void 0:n.element;!this.isPseudoElement&&(e!=null&&e.isConnected)&&((i=(r=this.animation).commitStyles)==null||i.call(r))}get duration(){var n,r;const e=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return pr(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+pr(e)}get time(){return pr(Number(this.animation.currentTime)||0)}set time(e){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=li(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(e){this.manualStartTime=this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&e2()?(this.animation.timeline=e,mr):n(this)}}const pk={anticipate:HT,backInOut:qT,circInOut:GT};function o2(t){return t in pk}function a2(t){typeof t.ease=="string"&&o2(t.ease)&&(t.ease=pk[t.ease])}const fm=10;class l2 extends s2{constructor(e){a2(e),lk(e),super(e),e.startTime!==void 0&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:i,element:o,...l}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const u=new by({...l,autoplay:!1}),h=Math.max(fm,In.now()-this.startTime),f=mi(0,fm,h-fm);n.setWithVelocity(u.sample(Math.max(0,h-f)).value,u.sample(h).value,f),u.stop()}}const H_=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Ls.test(t)||t==="0")&&!t.startsWith("url("));function u2(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function c2(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const o=t[t.length-1],l=H_(i,e),u=H_(o,e);return!l||!u?!1:u2(t)||(n==="spring"||dk(n))&&r}function vg(t){t.duration=0,t.type="keyframes"}const h2=new Set(["opacity","clipPath","filter","transform"]),f2=yy(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function d2(t){var p;const{motionValue:e,name:n,repeatDelay:r,repeatType:i,damping:o,type:l}=t;if(!(((p=e==null?void 0:e.owner)==null?void 0:p.current)instanceof HTMLElement))return!1;const{onUpdate:h,transformTemplate:f}=e.owner.getProps();return f2()&&n&&h2.has(n)&&(n!=="transform"||!f)&&!h&&!r&&i!=="mirror"&&o!==0&&l!=="inertia"}const p2=40;class m2 extends Cy{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:l="loop",keyframes:u,name:h,motionValue:f,element:p,...g}){var T;super(),this.stop=()=>{var I,b;this._animation&&(this._animation.stop(),(I=this.stopTimeline)==null||I.call(this)),(b=this.keyframeResolver)==null||b.cancel()},this.createdAt=In.now();const v={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:o,repeatType:l,name:h,motionValue:f,element:p,...g},x=(p==null?void 0:p.KeyframeResolver)||Ay;this.keyframeResolver=new x(u,(I,b,N)=>this.onKeyframesResolved(I,b,v,!N),h,f,p),(T=this.keyframeResolver)==null||T.scheduleResolve()}onKeyframesResolved(e,n,r,i){var b,N;this.keyframeResolver=void 0;const{name:o,type:l,velocity:u,delay:h,isHandoff:f,onUpdate:p}=r;this.resolvedAt=In.now(),c2(e,o,l,u)||((zi.instantAnimations||!h)&&(p==null||p(Iy(e,r,n))),e[0]=e[e.length-1],vg(r),r.repeat=0);const v={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>p2?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},x=!f&&d2(v),T=(N=(b=v.motionValue)==null?void 0:b.owner)==null?void 0:N.current,I=x?new l2({...v,element:T}):new by(v);I.finished.then(()=>{this.notifyFinished()}).catch(mr),this.pendingTimeline&&(this.stopTimeline=I.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=I}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),XR()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}function mk(t,e,n,r=0,i=1){const o=Array.from(t).sort((f,p)=>f.sortNodePosition(p)).indexOf(e),l=t.size,u=(l-1)*r;return typeof n=="function"?n(o,l):i===1?o*r:u-o*r}const g2=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function y2(t){const e=g2.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function gk(t,e,n=1){const[r,i]=y2(t);if(!r)return;const o=window.getComputedStyle(e).getPropertyValue(r);if(o){const l=o.trim();return MT(l)?parseFloat(l):l}return xy(i)?gk(i,e,n+1):i}const v2={type:"spring",stiffness:500,damping:25,restSpeed:10},w2=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),_2={type:"keyframes",duration:.8},x2={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},E2=(t,{keyframes:e})=>e.length>2?_2:ml.has(t)?t.startsWith("scale")?w2(e[1]):v2:x2,T2=t=>t!==null;function k2(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(T2),o=e&&n!=="loop"&&e%2===1?0:i.length-1;return i[o]}function yk(t,e){if(t!=null&&t.inherit&&e){const{inherit:n,...r}=t;return{...e,...r}}return t}function Py(t,e){const n=(t==null?void 0:t[e])??(t==null?void 0:t.default)??t;return n!==t?yk(n,t):n}function S2({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:o,repeatType:l,repeatDelay:u,from:h,elapsed:f,...p}){return!!Object.keys(p).length}const Ry=(t,e,n,r={},i,o)=>l=>{const u=Py(r,t)||{},h=u.delay||r.delay||0;let{elapsed:f=0}=r;f=f-li(h);const p={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...u,delay:-f,onUpdate:v=>{e.set(v),u.onUpdate&&u.onUpdate(v)},onComplete:()=>{l(),u.onComplete&&u.onComplete()},name:t,motionValue:e,element:o?void 0:i};S2(u)||Object.assign(p,E2(t,p)),p.duration&&(p.duration=li(p.duration)),p.repeatDelay&&(p.repeatDelay=li(p.repeatDelay)),p.from!==void 0&&(p.keyframes[0]=p.from);let g=!1;if((p.type===!1||p.duration===0&&!p.repeatDelay)&&(vg(p),p.delay===0&&(g=!0)),(zi.instantAnimations||zi.skipAnimations||i!=null&&i.shouldSkipAnimations)&&(g=!0,vg(p),p.delay=0),p.allowFlatten=!u.type&&!u.ease,g&&!o&&e.get()!==void 0){const v=k2(p.keyframes,u);if(v!==void 0){ht.update(()=>{p.onUpdate(v),p.onComplete()});return}}return u.isSync?new by(p):new m2(p)};function W_(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function Ny(t,e,n,r){if(typeof e=="function"){const[i,o]=W_(r);e=e(n!==void 0?n:t.custom,i,o)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,o]=W_(r);e=e(n!==void 0?n:t.custom,i,o)}return e}function Ga(t,e,n){const r=t.getProps();return Ny(r,e,n!==void 0?n:r.custom,t)}const vk=new Set(["width","height","top","left","right","bottom",...pl]),G_=30,I2=t=>!isNaN(parseFloat(t));class C2{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var o;const i=In.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((o=this.events.change)==null||o.notify(this.current),this.dependents))for(const l of this.dependents)l.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=In.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=I2(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new vy);const r=this.events[e].add(n);return e==="change"?()=>{r(),ht.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=In.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>G_)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,G_);return jT(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function nl(t,e){return new C2(t,e)}const wg=t=>Array.isArray(t);function b2(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,nl(n))}function A2(t){return wg(t)?t[t.length-1]||0:t}function P2(t,e){const n=Ga(t,e);let{transitionEnd:r={},transition:i={},...o}=n||{};o={...o,...r};for(const l in o){const u=A2(o[l]);b2(t,l,u)}}const gn=t=>!!(t&&t.getVelocity);function R2(t){return!!(gn(t)&&t.add)}function _g(t,e){const n=t.getValue("willChange");if(R2(n))return n.add(e);if(!n&&zi.WillChange){const r=new zi.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function Dy(t){return t.replace(/([A-Z])/g,e=>`-${e.toLowerCase()}`)}const N2="framerAppearId",wk="data-"+Dy(N2);function _k(t){return t.props[wk]}function D2({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function xk(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:o,transitionEnd:l,...u}=e;const h=t.getDefaultTransition();o=o?yk(o,h):h;const f=o==null?void 0:o.reduceMotion;r&&(o=r);const p=[],g=i&&t.animationState&&t.animationState.getState()[i];for(const v in u){const x=t.getValue(v,t.latestValues[v]??null),T=u[v];if(T===void 0||g&&D2(g,v))continue;const I={delay:n,...Py(o||{},v)},b=x.get();if(b!==void 0&&!x.isAnimating&&!Array.isArray(T)&&T===b&&!I.velocity)continue;let N=!1;if(window.MotionHandoffAnimation){const J=_k(t);if(J){const X=window.MotionHandoffAnimation(J,v,ht);X!==null&&(I.startTime=X,N=!0)}}_g(t,v);const z=f??t.shouldReduceMotion;x.start(Ry(v,x,T,z&&vk.has(v)?{type:!1}:I,t,N));const U=x.animation;U&&p.push(U)}if(l){const v=()=>ht.update(()=>{l&&P2(t,l)});p.length?Promise.all(p).then(v):v()}return p}function xg(t,e,n={}){var h;const r=Ga(t,e,n.type==="exit"?(h=t.presenceContext)==null?void 0:h.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const o=r?()=>Promise.all(xk(t,r,n)):()=>Promise.resolve(),l=t.variantChildren&&t.variantChildren.size?(f=0)=>{const{delayChildren:p=0,staggerChildren:g,staggerDirection:v}=i;return L2(t,e,f,p,g,v,n)}:()=>Promise.resolve(),{when:u}=i;if(u){const[f,p]=u==="beforeChildren"?[o,l]:[l,o];return f().then(()=>p())}else return Promise.all([o(),l(n.delay)])}function L2(t,e,n=0,r=0,i=0,o=1,l){const u=[];for(const h of t.variantChildren)h.notify("AnimationStart",e),u.push(xg(h,e,{...l,delay:n+(typeof r=="function"?0:r)+mk(t.variantChildren,h,r,i,o)}).then(()=>h.notify("AnimationComplete",e)));return Promise.all(u)}function V2(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(o=>xg(t,o,n));r=Promise.all(i)}else if(typeof e=="string")r=xg(t,e,n);else{const i=typeof e=="function"?Ga(t,e,n.custom):e;r=Promise.all(xk(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const M2={test:t=>t==="auto",parse:t=>t},Ek=t=>e=>e.test(t),Tk=[dl,ke,ui,xs,uR,lR,M2],K_=t=>Tk.find(Ek(t));function O2(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||FT(t):!0}const F2=new Set(["brightness","contrast","saturate","opacity"]);function j2(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(Ey)||[];if(!r)return t;const i=n.replace(r,"");let o=F2.has(e)?1:0;return r!==n&&(o*=100),e+"("+o+i+")"}const U2=/\b([a-z-]*)\(.*?\)/gu,Eg={...Ls,getAnimatableNone:t=>{const e=t.match(U2);return e?e.map(j2).join(" "):t}},Q_={...dl,transform:Math.round},B2={rotate:xs,rotateX:xs,rotateY:xs,rotateZ:xs,scale:Uh,scaleX:Uh,scaleY:Uh,scaleZ:Uh,skew:xs,skewX:xs,skewY:xs,distance:ke,translateX:ke,translateY:ke,translateZ:ke,x:ke,y:ke,z:ke,perspective:ke,transformPerspective:ke,opacity:$u,originX:V_,originY:V_,originZ:ke},Ly={borderWidth:ke,borderTopWidth:ke,borderRightWidth:ke,borderBottomWidth:ke,borderLeftWidth:ke,borderRadius:ke,borderTopLeftRadius:ke,borderTopRightRadius:ke,borderBottomRightRadius:ke,borderBottomLeftRadius:ke,width:ke,maxWidth:ke,height:ke,maxHeight:ke,top:ke,right:ke,bottom:ke,left:ke,inset:ke,insetBlock:ke,insetBlockStart:ke,insetBlockEnd:ke,insetInline:ke,insetInlineStart:ke,insetInlineEnd:ke,padding:ke,paddingTop:ke,paddingRight:ke,paddingBottom:ke,paddingLeft:ke,paddingBlock:ke,paddingBlockStart:ke,paddingBlockEnd:ke,paddingInline:ke,paddingInlineStart:ke,paddingInlineEnd:ke,margin:ke,marginTop:ke,marginRight:ke,marginBottom:ke,marginLeft:ke,marginBlock:ke,marginBlockStart:ke,marginBlockEnd:ke,marginInline:ke,marginInlineStart:ke,marginInlineEnd:ke,fontSize:ke,backgroundPositionX:ke,backgroundPositionY:ke,...B2,zIndex:Q_,fillOpacity:$u,strokeOpacity:$u,numOctaves:Q_},z2={...Ly,color:Ut,backgroundColor:Ut,outlineColor:Ut,fill:Ut,stroke:Ut,borderColor:Ut,borderTopColor:Ut,borderRightColor:Ut,borderBottomColor:Ut,borderLeftColor:Ut,filter:Eg,WebkitFilter:Eg},kk=t=>z2[t];function Sk(t,e){let n=kk(t);return n!==Eg&&(n=Ls),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const $2=new Set(["auto","none","0"]);function q2(t,e,n){let r=0,i;for(;r<t.length&&!i;){const o=t[r];typeof o=="string"&&!$2.has(o)&&qu(o).values.length&&(i=t[r]),r++}if(i&&n)for(const o of e)t[o]=Sk(n,i)}class H2 extends Ay{constructor(e,n,r,i,o){super(e,n,r,i,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let p=0;p<e.length;p++){let g=e[p];if(typeof g=="string"&&(g=g.trim(),xy(g))){const v=gk(g,n.current);v!==void 0&&(e[p]=v),p===e.length-1&&(this.finalKeyframe=g)}}if(this.resolveNoneKeyframes(),!vk.has(r)||e.length!==2)return;const[i,o]=e,l=K_(i),u=K_(o),h=L_(i),f=L_(o);if(h!==f&&Cs[r]){this.needsMeasurement=!0;return}if(l!==u)if($_(l)&&$_(u))for(let p=0;p<e.length;p++){const g=e[p];typeof g=="string"&&(e[p]=parseFloat(g))}else Cs[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||O2(e[i]))&&r.push(i);r.length&&q2(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Cs[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var u;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const o=r.length-1,l=r[o];r[o]=Cs[n](e.measureViewportBox(),window.getComputedStyle(e.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),(u=this.removedTransforms)!=null&&u.length&&this.removedTransforms.forEach(([h,f])=>{e.getValue(h).set(f)}),this.resolveNoneKeyframes()}}function Ik(t,e,n){if(t==null)return[];if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const i=(n==null?void 0:n[t])??r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t).filter(r=>r!=null)}const Ck=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function W2(t){return OT(t)&&"offsetHeight"in t}const{schedule:Vy}=YT(queueMicrotask,!1),Cr={x:!1,y:!1};function bk(){return Cr.x||Cr.y}function G2(t){return t==="x"||t==="y"?Cr[t]?null:(Cr[t]=!0,()=>{Cr[t]=!1}):Cr.x||Cr.y?null:(Cr.x=Cr.y=!0,()=>{Cr.x=Cr.y=!1})}function Ak(t,e){const n=Ik(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function K2(t){return!(t.pointerType==="touch"||bk())}function Q2(t,e,n={}){const[r,i,o]=Ak(t,n);return r.forEach(l=>{let u=!1,h=!1,f;const p=()=>{l.removeEventListener("pointerleave",T)},g=b=>{f&&(f(b),f=void 0),p()},v=b=>{u=!1,window.removeEventListener("pointerup",v),window.removeEventListener("pointercancel",v),h&&(h=!1,g(b))},x=()=>{u=!0,window.addEventListener("pointerup",v,i),window.addEventListener("pointercancel",v,i)},T=b=>{if(b.pointerType!=="touch"){if(u){h=!0;return}g(b)}},I=b=>{if(!K2(b))return;h=!1;const N=e(l,b);typeof N=="function"&&(f=N,l.addEventListener("pointerleave",T,i))};l.addEventListener("pointerenter",I,i),l.addEventListener("pointerdown",x,i)}),o}const Pk=(t,e)=>e?t===e?!0:Pk(t,e.parentElement):!1,My=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,Y2=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function X2(t){return Y2.has(t.tagName)||t.isContentEditable===!0}const J2=new Set(["INPUT","SELECT","TEXTAREA"]);function Z2(t){return J2.has(t.tagName)||t.isContentEditable===!0}const ef=new WeakSet;function Y_(t){return e=>{e.key==="Enter"&&t(e)}}function dm(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const eN=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=Y_(()=>{if(ef.has(n))return;dm(n,"down");const i=Y_(()=>{dm(n,"up")}),o=()=>dm(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",o,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function X_(t){return My(t)&&!bk()}const J_=new WeakSet;function tN(t,e,n={}){const[r,i,o]=Ak(t,n),l=u=>{const h=u.currentTarget;if(!X_(u)||J_.has(u))return;ef.add(h),n.stopPropagation&&J_.add(u);const f=e(h,u),p=(x,T)=>{window.removeEventListener("pointerup",g),window.removeEventListener("pointercancel",v),ef.has(h)&&ef.delete(h),X_(x)&&typeof f=="function"&&f(x,{success:T})},g=x=>{p(x,h===window||h===document||n.useGlobalTarget||Pk(h,x.target))},v=x=>{p(x,!1)};window.addEventListener("pointerup",g,i),window.addEventListener("pointercancel",v,i)};return r.forEach(u=>{(n.useGlobalTarget?window:u).addEventListener("pointerdown",l,i),W2(u)&&(u.addEventListener("focus",f=>eN(f,i)),!X2(u)&&!u.hasAttribute("tabindex")&&(u.tabIndex=0))}),o}function Oy(t){return OT(t)&&"ownerSVGElement"in t}const tf=new WeakMap;let Es;const Rk=(t,e,n)=>(r,i)=>i&&i[0]?i[0][t+"Size"]:Oy(r)&&"getBBox"in r?r.getBBox()[e]:r[n],nN=Rk("inline","width","offsetWidth"),rN=Rk("block","height","offsetHeight");function iN({target:t,borderBoxSize:e}){var n;(n=tf.get(t))==null||n.forEach(r=>{r(t,{get width(){return nN(t,e)},get height(){return rN(t,e)}})})}function sN(t){t.forEach(iN)}function oN(){typeof ResizeObserver>"u"||(Es=new ResizeObserver(sN))}function aN(t,e){Es||oN();const n=Ik(t);return n.forEach(r=>{let i=tf.get(r);i||(i=new Set,tf.set(r,i)),i.add(e),Es==null||Es.observe(r)}),()=>{n.forEach(r=>{const i=tf.get(r);i==null||i.delete(e),i!=null&&i.size||Es==null||Es.unobserve(r)})}}const nf=new Set;let za;function lN(){za=()=>{const t={get width(){return window.innerWidth},get height(){return window.innerHeight}};nf.forEach(e=>e(t))},window.addEventListener("resize",za)}function uN(t){return nf.add(t),za||lN(),()=>{nf.delete(t),!nf.size&&typeof za=="function"&&(window.removeEventListener("resize",za),za=void 0)}}function Z_(t,e){return typeof t=="function"?uN(t):aN(t,e)}function cN(t){return Oy(t)&&t.tagName==="svg"}const hN=[...Tk,Ut,Ls],fN=t=>hN.find(Ek(t)),ex=()=>({translate:0,scale:1,origin:0,originPoint:0}),$a=()=>({x:ex(),y:ex()}),tx=()=>({min:0,max:0}),Ht=()=>({x:tx(),y:tx()}),Tg={current:null},Nk={current:!1},dN=typeof window<"u";function pN(){if(Nk.current=!0,!!dN)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Tg.current=t.matches;t.addEventListener("change",e),e()}else Tg.current=!1}const mN=new WeakMap;function Yf(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Hu(t){return typeof t=="string"||Array.isArray(t)}const Fy=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],jy=["initial",...Fy];function Xf(t){return Yf(t.animate)||jy.some(e=>Hu(t[e]))}function Dk(t){return!!(Xf(t)||t.variants)}function gN(t,e,n){for(const r in e){const i=e[r],o=n[r];if(gn(i))t.addValue(r,i);else if(gn(o))t.addValue(r,nl(i,{owner:t}));else if(o!==i)if(t.hasValue(r)){const l=t.getValue(r);l.liveStyle===!0?l.jump(i):l.hasAnimated||l.set(i)}else{const l=t.getStaticValue(r);t.addValue(r,nl(l!==void 0?l:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const nx=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let _f={};function Lk(t){_f=t}function yN(){return _f}class vN{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,skipAnimations:o,blockInitialAnimation:l,visualState:u},h={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.shouldSkipAnimations=!1,this.values=new Map,this.KeyframeResolver=Ay,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.hasBeenMounted=!1,this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const x=In.now();this.renderScheduledAt<x&&(this.renderScheduledAt=x,ht.render(this.render,!1,!0))};const{latestValues:f,renderState:p}=u;this.latestValues=f,this.baseTarget={...f},this.initialValues=n.initial?{...f}:{},this.renderState=p,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.skipAnimationsConfig=o,this.options=h,this.blockInitialAnimation=!!l,this.isControllingVariants=Xf(n),this.isVariantNode=Dk(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:g,...v}=this.scrapeMotionValuesFromProps(n,{},this);for(const x in v){const T=v[x];f[x]!==void 0&&gn(T)&&T.set(f[x])}}mount(e){var n,r;if(this.hasBeenMounted)for(const i in this.initialValues)(n=this.values.get(i))==null||n.jump(this.initialValues[i]),this.latestValues[i]=this.initialValues[i];this.current=e,mN.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((i,o)=>this.bindToMotionValue(o,i)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(Nk.current||pN(),this.shouldReduceMotion=Tg.current),this.shouldSkipAnimations=this.skipAnimationsConfig??!1,(r=this.parent)==null||r.addChild(this),this.update(this.props,this.presenceContext),this.hasBeenMounted=!0}unmount(){var e;this.projection&&this.projection.unmount(),Ds(this.notifyUpdate),Ds(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=ml.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",l=>{this.latestValues[e]=l,this.props.onUpdate&&ht.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let o;typeof window<"u"&&window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),o&&o(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in _f){const n=_f[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ht()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<nx.length;r++){const i=nx[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const o="on"+i,l=e[o];l&&(this.propEventSubscriptions[i]=this.on(i,l))}this.prevMotionValues=gN(this,this.scrapeMotionValuesFromProps(e,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=nl(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(MT(r)||FT(r))?r=parseFloat(r):!fN(r)&&Ls.test(n)&&(r=Sk(e,n)),this.setBaseTarget(e,gn(r)?r.get():r)),gn(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var o;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const l=Ny(this.props,n,(o=this.presenceContext)==null?void 0:o.custom);l&&(r=l[e])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!gn(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new vy),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){Vy.render(this.render)}}class Vk extends vN{constructor(){super(...arguments),this.KeyframeResolver=H2}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){const r=e.style;return r?r[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;gn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}class zs{constructor(e){this.isMounted=!1,this.node=e}update(){}}function Mk({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function wN({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function _N(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function pm(t){return t===void 0||t===1}function kg({scale:t,scaleX:e,scaleY:n}){return!pm(t)||!pm(e)||!pm(n)}function ko(t){return kg(t)||Ok(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function Ok(t){return rx(t.x)||rx(t.y)}function rx(t){return t&&t!=="0%"}function xf(t,e,n){const r=t-n,i=e*r;return n+i}function ix(t,e,n,r,i){return i!==void 0&&(t=xf(t,i,r)),xf(t,n,r)+e}function Sg(t,e=0,n=1,r,i){t.min=ix(t.min,e,n,r,i),t.max=ix(t.max,e,n,r,i)}function Fk(t,{x:e,y:n}){Sg(t.x,e.translate,e.scale,e.originPoint),Sg(t.y,n.translate,n.scale,n.originPoint)}const sx=.999999999999,ox=1.0000000000001;function xN(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let o,l;for(let u=0;u<i;u++){o=n[u],l=o.projectionDelta;const{visualElement:h}=o.options;h&&h.props.style&&h.props.style.display==="contents"||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Ha(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),l&&(e.x*=l.x.scale,e.y*=l.y.scale,Fk(t,l)),r&&ko(o.latestValues)&&Ha(t,o.latestValues))}e.x<ox&&e.x>sx&&(e.x=1),e.y<ox&&e.y>sx&&(e.y=1)}function qa(t,e){t.min=t.min+e,t.max=t.max+e}function ax(t,e,n,r,i=.5){const o=kt(t.min,t.max,i);Sg(t,e,n,o,r)}function Ha(t,e){ax(t.x,e.x,e.scaleX,e.scale,e.originX),ax(t.y,e.y,e.scaleY,e.scale,e.originY)}function jk(t,e){return Mk(_N(t.getBoundingClientRect(),e))}function EN(t,e,n){const r=jk(t,n),{scroll:i}=e;return i&&(qa(r.x,i.offset.x),qa(r.y,i.offset.y)),r}const TN={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},kN=pl.length;function SN(t,e,n){let r="",i=!0;for(let o=0;o<kN;o++){const l=pl[o],u=t[l];if(u===void 0)continue;let h=!0;if(typeof u=="number")h=u===(l.startsWith("scale")?1:0);else{const f=parseFloat(u);h=l.startsWith("scale")?f===1:f===0}if(!h||n){const f=Ck(u,Ly[l]);if(!h){i=!1;const p=TN[l]||l;r+=`${p}(${f}) `}n&&(e[l]=f)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function Uy(t,e,n){const{style:r,vars:i,transformOrigin:o}=t;let l=!1,u=!1;for(const h in e){const f=e[h];if(ml.has(h)){l=!0;continue}else if(JT(h)){i[h]=f;continue}else{const p=Ck(f,Ly[h]);h.startsWith("origin")?(u=!0,o[h]=p):r[h]=p}}if(e.transform||(l||n?r.transform=SN(e,t.transform,n):r.transform&&(r.transform="none")),u){const{originX:h="50%",originY:f="50%",originZ:p=0}=o;r.transformOrigin=`${h} ${f} ${p}`}}function Uk(t,{style:e,vars:n},r,i){const o=t.style;let l;for(l in e)o[l]=e[l];i==null||i.applyProjectionStyles(o,r);for(l in n)o.setProperty(l,n[l])}function lx(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const gu={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(ke.test(t))t=parseFloat(t);else return t;const n=lx(t,e.target.x),r=lx(t,e.target.y);return`${n}% ${r}%`}},IN={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=Ls.parse(t);if(i.length>5)return r;const o=Ls.createTransformer(t),l=typeof i[0]!="number"?1:0,u=n.x.scale*e.x,h=n.y.scale*e.y;i[0+l]/=u,i[1+l]/=h;const f=kt(u,h,.5);return typeof i[2+l]=="number"&&(i[2+l]/=f),typeof i[3+l]=="number"&&(i[3+l]/=f),o(i)}},Ig={borderRadius:{...gu,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:gu,borderTopRightRadius:gu,borderBottomLeftRadius:gu,borderBottomRightRadius:gu,boxShadow:IN};function Bk(t,{layout:e,layoutId:n}){return ml.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Ig[t]||t==="opacity")}function By(t,e,n){var l;const r=t.style,i=e==null?void 0:e.style,o={};if(!r)return o;for(const u in r)(gn(r[u])||i&&gn(i[u])||Bk(u,t)||((l=n==null?void 0:n.getValue(u))==null?void 0:l.liveStyle)!==void 0)&&(o[u]=r[u]);return o}function CN(t){return window.getComputedStyle(t)}class bN extends Vk{constructor(){super(...arguments),this.type="html",this.renderInstance=Uk}readValueFromInstance(e,n){var r;if(ml.has(n))return(r=this.projection)!=null&&r.isProjecting?dg(n):WR(e,n);{const i=CN(e),o=(JT(n)?i.getPropertyValue(n):i[n])||0;return typeof o=="string"?o.trim():o}}measureInstanceViewportBox(e,{transformPagePoint:n}){return jk(e,n)}build(e,n,r){Uy(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return By(e,n,r)}}const AN={offset:"stroke-dashoffset",array:"stroke-dasharray"},PN={offset:"strokeDashoffset",array:"strokeDasharray"};function RN(t,e,n=1,r=0,i=!0){t.pathLength=1;const o=i?AN:PN;t[o.offset]=`${-r}`,t[o.array]=`${e} ${n}`}const NN=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function zk(t,{attrX:e,attrY:n,attrScale:r,pathLength:i,pathSpacing:o=1,pathOffset:l=0,...u},h,f,p){if(Uy(t,u,f),h){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:g,style:v}=t;g.transform&&(v.transform=g.transform,delete g.transform),(v.transform||g.transformOrigin)&&(v.transformOrigin=g.transformOrigin??"50% 50%",delete g.transformOrigin),v.transform&&(v.transformBox=(p==null?void 0:p.transformBox)??"fill-box",delete g.transformBox);for(const x of NN)g[x]!==void 0&&(v[x]=g[x],delete g[x]);e!==void 0&&(g.x=e),n!==void 0&&(g.y=n),r!==void 0&&(g.scale=r),i!==void 0&&RN(g,i,o,l,!1)}const $k=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),qk=t=>typeof t=="string"&&t.toLowerCase()==="svg";function DN(t,e,n,r){Uk(t,e,void 0,r);for(const i in e.attrs)t.setAttribute($k.has(i)?i:Dy(i),e.attrs[i])}function Hk(t,e,n){const r=By(t,e,n);for(const i in t)if(gn(t[i])||gn(e[i])){const o=pl.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[o]=t[i]}return r}class LN extends Vk{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ht}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(ml.has(n)){const r=kk(n);return r&&r.default||0}return n=$k.has(n)?n:Dy(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return Hk(e,n,r)}build(e,n,r){zk(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,i){DN(e,n,r,i)}mount(e){this.isSVGTag=qk(e.tagName),super.mount(e)}}const VN=jy.length;function Wk(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?Wk(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<VN;n++){const r=jy[n],i=t.props[r];(Hu(i)||i===!1)&&(e[r]=i)}return e}function Gk(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const MN=[...Fy].reverse(),ON=Fy.length;function FN(t){return e=>Promise.all(e.map(({animation:n,options:r})=>V2(t,n,r)))}function jN(t){let e=FN(t),n=ux(),r=!0;const i=h=>(f,p)=>{var v;const g=Ga(t,p,h==="exit"?(v=t.presenceContext)==null?void 0:v.custom:void 0);if(g){const{transition:x,transitionEnd:T,...I}=g;f={...f,...I,...T}}return f};function o(h){e=h(t)}function l(h){const{props:f}=t,p=Wk(t.parent)||{},g=[],v=new Set;let x={},T=1/0;for(let b=0;b<ON;b++){const N=MN[b],z=n[N],U=f[N]!==void 0?f[N]:p[N],J=Hu(U),X=N===h?z.isActive:null;X===!1&&(T=b);let H=U===p[N]&&U!==f[N]&&J;if(H&&r&&t.manuallyAnimateOnMount&&(H=!1),z.protectedKeys={...x},!z.isActive&&X===null||!U&&!z.prevProp||Yf(U)||typeof U=="boolean")continue;const O=UN(z.prevProp,U);let A=O||N===h&&z.isActive&&!H&&J||b>T&&J,V=!1;const S=Array.isArray(U)?U:[U];let M=S.reduce(i(N),{});X===!1&&(M={});const{prevResolvedValues:F={}}=z,D={...F,...M},ce=_e=>{A=!0,v.has(_e)&&(V=!0,v.delete(_e)),z.needsAnimating[_e]=!0;const ie=t.getValue(_e);ie&&(ie.liveStyle=!1)};for(const _e in D){const ie=M[_e],me=F[_e];if(x.hasOwnProperty(_e))continue;let L=!1;wg(ie)&&wg(me)?L=!Gk(ie,me):L=ie!==me,L?ie!=null?ce(_e):v.add(_e):ie!==void 0&&v.has(_e)?ce(_e):z.protectedKeys[_e]=!0}z.prevProp=U,z.prevResolvedValues=M,z.isActive&&(x={...x,...M}),r&&t.blockInitialAnimation&&(A=!1);const ae=H&&O;A&&(!ae||V)&&g.push(...S.map(_e=>{const ie={type:N};if(typeof _e=="string"&&r&&!ae&&t.manuallyAnimateOnMount&&t.parent){const{parent:me}=t,L=Ga(me,_e);if(me.enteringChildren&&L){const{delayChildren:q}=L.transition||{};ie.delay=mk(me.enteringChildren,t,q)}}return{animation:_e,options:ie}}))}if(v.size){const b={};if(typeof f.initial!="boolean"){const N=Ga(t,Array.isArray(f.initial)?f.initial[0]:f.initial);N&&N.transition&&(b.transition=N.transition)}v.forEach(N=>{const z=t.getBaseTarget(N),U=t.getValue(N);U&&(U.liveStyle=!0),b[N]=z??null}),g.push({animation:b})}let I=!!g.length;return r&&(f.initial===!1||f.initial===f.animate)&&!t.manuallyAnimateOnMount&&(I=!1),r=!1,I?e(g):Promise.resolve()}function u(h,f){var g;if(n[h].isActive===f)return Promise.resolve();(g=t.variantChildren)==null||g.forEach(v=>{var x;return(x=v.animationState)==null?void 0:x.setActive(h,f)}),n[h].isActive=f;const p=l(h);for(const v in n)n[v].protectedKeys={};return p}return{animateChanges:l,setActive:u,setAnimateFunction:o,getState:()=>n,reset:()=>{n=ux()}}}function UN(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!Gk(e,t):!1}function xo(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function ux(){return{animate:xo(!0),whileInView:xo(),whileHover:xo(),whileTap:xo(),whileDrag:xo(),whileFocus:xo(),exit:xo()}}function cx(t,e){t.min=e.min,t.max=e.max}function Ir(t,e){cx(t.x,e.x),cx(t.y,e.y)}function hx(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}const Kk=1e-4,BN=1-Kk,zN=1+Kk,Qk=.01,$N=0-Qk,qN=0+Qk;function Cn(t){return t.max-t.min}function HN(t,e,n){return Math.abs(t-e)<=n}function fx(t,e,n,r=.5){t.origin=r,t.originPoint=kt(e.min,e.max,t.origin),t.scale=Cn(n)/Cn(e),t.translate=kt(n.min,n.max,t.origin)-t.originPoint,(t.scale>=BN&&t.scale<=zN||isNaN(t.scale))&&(t.scale=1),(t.translate>=$N&&t.translate<=qN||isNaN(t.translate))&&(t.translate=0)}function Au(t,e,n,r){fx(t.x,e.x,n.x,r?r.originX:void 0),fx(t.y,e.y,n.y,r?r.originY:void 0)}function dx(t,e,n){t.min=n.min+e.min,t.max=t.min+Cn(e)}function WN(t,e,n){dx(t.x,e.x,n.x),dx(t.y,e.y,n.y)}function px(t,e,n){t.min=e.min-n.min,t.max=t.min+Cn(e)}function Ef(t,e,n){px(t.x,e.x,n.x),px(t.y,e.y,n.y)}function mx(t,e,n,r,i){return t-=e,t=xf(t,1/n,r),i!==void 0&&(t=xf(t,1/i,r)),t}function GN(t,e=0,n=1,r=.5,i,o=t,l=t){if(ui.test(e)&&(e=parseFloat(e),e=kt(l.min,l.max,e/100)-l.min),typeof e!="number")return;let u=kt(o.min,o.max,r);t===o&&(u-=e),t.min=mx(t.min,e,n,u,i),t.max=mx(t.max,e,n,u,i)}function gx(t,e,[n,r,i],o,l){GN(t,e[n],e[r],e[i],e.scale,o,l)}const KN=["x","scaleX","originX"],QN=["y","scaleY","originY"];function yx(t,e,n,r){gx(t.x,e,KN,n?n.x:void 0,r?r.x:void 0),gx(t.y,e,QN,n?n.y:void 0,r?r.y:void 0)}function vx(t){return t.translate===0&&t.scale===1}function Yk(t){return vx(t.x)&&vx(t.y)}function wx(t,e){return t.min===e.min&&t.max===e.max}function YN(t,e){return wx(t.x,e.x)&&wx(t.y,e.y)}function _x(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function Xk(t,e){return _x(t.x,e.x)&&_x(t.y,e.y)}function xx(t){return Cn(t.x)/Cn(t.y)}function Ex(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}function si(t){return[t("x"),t("y")]}function XN(t,e,n){let r="";const i=t.x.translate/e.x,o=t.y.translate/e.y,l=(n==null?void 0:n.z)||0;if((i||o||l)&&(r=`translate3d(${i}px, ${o}px, ${l}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:f,rotate:p,rotateX:g,rotateY:v,skewX:x,skewY:T}=n;f&&(r=`perspective(${f}px) ${r}`),p&&(r+=`rotate(${p}deg) `),g&&(r+=`rotateX(${g}deg) `),v&&(r+=`rotateY(${v}deg) `),x&&(r+=`skewX(${x}deg) `),T&&(r+=`skewY(${T}deg) `)}const u=t.x.scale*e.x,h=t.y.scale*e.y;return(u!==1||h!==1)&&(r+=`scale(${u}, ${h})`),r||"none"}const Jk=["TopLeft","TopRight","BottomLeft","BottomRight"],JN=Jk.length,Tx=t=>typeof t=="string"?parseFloat(t):t,kx=t=>typeof t=="number"||ke.test(t);function ZN(t,e,n,r,i,o){i?(t.opacity=kt(0,n.opacity??1,e3(r)),t.opacityExit=kt(e.opacity??1,0,t3(r))):o&&(t.opacity=kt(e.opacity??1,n.opacity??1,r));for(let l=0;l<JN;l++){const u=`border${Jk[l]}Radius`;let h=Sx(e,u),f=Sx(n,u);if(h===void 0&&f===void 0)continue;h||(h=0),f||(f=0),h===0||f===0||kx(h)===kx(f)?(t[u]=Math.max(kt(Tx(h),Tx(f),r),0),(ui.test(f)||ui.test(h))&&(t[u]+="%")):t[u]=f}(e.rotate||n.rotate)&&(t.rotate=kt(e.rotate||0,n.rotate||0,r))}function Sx(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const e3=Zk(0,.5,WT),t3=Zk(.5,.95,mr);function Zk(t,e,n){return r=>r<t?0:r>e?1:n(zu(t,e,r))}function n3(t,e,n){const r=gn(t)?t:nl(t);return r.start(Ry("",r,e,n)),r.animation}function Wu(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}const r3=(t,e)=>t.depth-e.depth;class i3{constructor(){this.children=[],this.isDirty=!1}add(e){py(this.children,e),this.isDirty=!0}remove(e){my(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(r3),this.isDirty=!1,this.children.forEach(e)}}function s3(t,e){const n=In.now(),r=({timestamp:i})=>{const o=i-n;o>=e&&(Ds(r),t(o-e))};return ht.setup(r,!0),()=>Ds(r)}function rf(t){return gn(t)?t.get():t}class o3{constructor(){this.members=[]}add(e){py(this.members,e),e.scheduleRender()}remove(e){if(my(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const o=this.members[i];if(o.isPresent!==!1){r=o;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender();const i=r.options.layoutDependency,o=e.options.layoutDependency;i!==void 0&&o!==void 0&&i===o||(e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0));const{crossfade:u}=e.options;u===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const sf={hasAnimatedSinceResize:!0,hasEverUpdated:!1},mm=["","X","Y","Z"],a3=1e3;let l3=0;function gm(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function eS(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=_k(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:o}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",ht,!(i||o))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&eS(r)}function tS({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(l={},u=e==null?void 0:e()){this.id=l3++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(h3),this.nodes.forEach(m3),this.nodes.forEach(g3),this.nodes.forEach(f3)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let h=0;h<this.path.length;h++)this.path[h].shouldResetTransform=!0;this.root===this&&(this.nodes=new i3)}addEventListener(l,u){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new vy),this.eventHandlers.get(l).add(u)}notifyListeners(l,...u){const h=this.eventHandlers.get(l);h&&h.notify(...u)}hasListeners(l){return this.eventHandlers.has(l)}mount(l){if(this.instance)return;this.isSVG=Oy(l)&&!cN(l),this.instance=l;const{layoutId:u,layout:h,visualElement:f}=this.options;if(f&&!f.current&&f.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(h||u)&&(this.isLayoutDirty=!0),t){let p,g=0;const v=()=>this.root.updateBlockedByResize=!1;ht.read(()=>{g=window.innerWidth}),t(l,()=>{const x=window.innerWidth;x!==g&&(g=x,this.root.updateBlockedByResize=!0,p&&p(),p=s3(v,250),sf.hasAnimatedSinceResize&&(sf.hasAnimatedSinceResize=!1,this.nodes.forEach(bx)))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&f&&(u||h)&&this.addEventListener("didUpdate",({delta:p,hasLayoutChanged:g,hasRelativeLayoutChanged:v,layout:x})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const T=this.options.transition||f.getDefaultTransition()||x3,{onLayoutAnimationStart:I,onLayoutAnimationComplete:b}=f.getProps(),N=!this.targetLayout||!Xk(this.targetLayout,x),z=!g&&v;if(this.options.layoutRoot||this.resumeFrom||z||g&&(N||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const U={...Py(T,"layout"),onPlay:I,onComplete:b};(f.shouldReduceMotion||this.options.layoutRoot)&&(U.delay=0,U.type=!1),this.startAnimation(U),this.setAnimationOrigin(p,z)}else g||bx(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=x})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Ds(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(y3),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&eS(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let p=0;p<this.path.length;p++){const g=this.path[p];g.shouldResetTransform=!0,g.updateScroll("snapshot"),g.options.layoutRoot&&g.willUpdate(!1)}const{layoutId:u,layout:h}=this.options;if(u===void 0&&!h)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Ix);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Cx);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(p3),this.nodes.forEach(u3),this.nodes.forEach(c3)):this.nodes.forEach(Cx),this.clearAllSnapshots();const u=In.now();rn.delta=mi(0,1e3/60,u-rn.timestamp),rn.timestamp=u,rn.isProcessing=!0,am.update.process(rn),am.preRender.process(rn),am.render.process(rn),rn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Vy.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(d3),this.sharedNodes.forEach(v3)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ht.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ht.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Cn(this.snapshot.measuredBox.x)&&!Cn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let h=0;h<this.path.length;h++)this.path[h].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=Ht(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let u=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(u=!1),u&&this.instance){const h=r(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:h,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:h}}}resetTransform(){if(!i)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,u=this.projectionDelta&&!Yk(this.projectionDelta),h=this.getTransformTemplate(),f=h?h(this.latestValues,""):void 0,p=f!==this.prevTransformTemplateValue;l&&this.instance&&(u||ko(this.latestValues)||p)&&(i(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const u=this.measurePageBox();let h=this.removeElementScroll(u);return l&&(h=this.removeTransform(h)),E3(h),{animationId:this.root.animationId,measuredBox:u,layoutBox:h,latestValues:{},source:this.id}}measurePageBox(){var f;const{visualElement:l}=this.options;if(!l)return Ht();const u=l.measureViewportBox();if(!(((f=this.scroll)==null?void 0:f.wasRoot)||this.path.some(T3))){const{scroll:p}=this.root;p&&(qa(u.x,p.offset.x),qa(u.y,p.offset.y))}return u}removeElementScroll(l){var h;const u=Ht();if(Ir(u,l),(h=this.scroll)!=null&&h.wasRoot)return u;for(let f=0;f<this.path.length;f++){const p=this.path[f],{scroll:g,options:v}=p;p!==this.root&&g&&v.layoutScroll&&(g.wasRoot&&Ir(u,l),qa(u.x,g.offset.x),qa(u.y,g.offset.y))}return u}applyTransform(l,u=!1){const h=Ht();Ir(h,l);for(let f=0;f<this.path.length;f++){const p=this.path[f];!u&&p.options.layoutScroll&&p.scroll&&p!==p.root&&Ha(h,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),ko(p.latestValues)&&Ha(h,p.latestValues)}return ko(this.latestValues)&&Ha(h,this.latestValues),h}removeTransform(l){const u=Ht();Ir(u,l);for(let h=0;h<this.path.length;h++){const f=this.path[h];if(!f.instance||!ko(f.latestValues))continue;kg(f.latestValues)&&f.updateSnapshot();const p=Ht(),g=f.measurePageBox();Ir(p,g),yx(u,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,p)}return ko(this.latestValues)&&yx(u,this.latestValues),u}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==rn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){var x;const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const h=!!this.resumingFrom||this!==u;if(!(l||h&&this.isSharedProjectionDirty||this.isProjectionDirty||(x=this.parent)!=null&&x.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:p,layoutId:g}=this.options;if(!this.layout||!(p||g))return;this.resolvedRelativeTargetAt=rn.timestamp;const v=this.getClosestProjectingParent();v&&this.linkedParentVersion!==v.layoutVersion&&!v.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(v&&v.layout?this.createRelativeTarget(v,this.layout.layoutBox,v.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Ht(),this.targetWithTransforms=Ht()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),WN(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ir(this.target,this.layout.layoutBox),Fk(this.target,this.targetDelta)):Ir(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,v&&!!v.resumingFrom==!!this.resumingFrom&&!v.options.layoutScroll&&v.target&&this.animationProgress!==1?this.createRelativeTarget(v,this.target,v.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||kg(this.parent.latestValues)||Ok(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(l,u,h){this.relativeParent=l,this.linkedParentVersion=l.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ht(),this.relativeTargetOrigin=Ht(),Ef(this.relativeTargetOrigin,u,h),Ir(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var T;const l=this.getLead(),u=!!this.resumingFrom||this!==l;let h=!0;if((this.isProjectionDirty||(T=this.parent)!=null&&T.isProjectionDirty)&&(h=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(h=!1),this.resolvedRelativeTargetAt===rn.timestamp&&(h=!1),h)return;const{layout:f,layoutId:p}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||p))return;Ir(this.layoutCorrected,this.layout.layoutBox);const g=this.treeScale.x,v=this.treeScale.y;xN(this.layoutCorrected,this.treeScale,this.path,u),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=Ht());const{target:x}=l;if(!x){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(hx(this.prevProjectionDelta.x,this.projectionDelta.x),hx(this.prevProjectionDelta.y,this.projectionDelta.y)),Au(this.projectionDelta,this.layoutCorrected,x,this.latestValues),(this.treeScale.x!==g||this.treeScale.y!==v||!Ex(this.projectionDelta.x,this.prevProjectionDelta.x)||!Ex(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",x))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){var u;if((u=this.options.visualElement)==null||u.scheduleRender(),l){const h=this.getStack();h&&h.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=$a(),this.projectionDelta=$a(),this.projectionDeltaWithTransform=$a()}setAnimationOrigin(l,u=!1){const h=this.snapshot,f=h?h.latestValues:{},p={...this.latestValues},g=$a();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const v=Ht(),x=h?h.source:void 0,T=this.layout?this.layout.source:void 0,I=x!==T,b=this.getStack(),N=!b||b.members.length<=1,z=!!(I&&!N&&this.options.crossfade===!0&&!this.path.some(_3));this.animationProgress=0;let U;this.mixTargetDelta=J=>{const X=J/1e3;Ax(g.x,l.x,X),Ax(g.y,l.y,X),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Ef(v,this.layout.layoutBox,this.relativeParent.layout.layoutBox),w3(this.relativeTarget,this.relativeTargetOrigin,v,X),U&&YN(this.relativeTarget,U)&&(this.isProjectionDirty=!1),U||(U=Ht()),Ir(U,this.relativeTarget)),I&&(this.animationValues=p,ZN(p,f,this.latestValues,X,z,N)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=X},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){var u,h,f;this.notifyListeners("animationStart"),(u=this.currentAnimation)==null||u.stop(),(f=(h=this.resumingFrom)==null?void 0:h.currentAnimation)==null||f.stop(),this.pendingAnimation&&(Ds(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ht.update(()=>{sf.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=nl(0)),this.currentAnimation=n3(this.motionValue,[0,1e3],{...l,velocity:0,isSync:!0,onUpdate:p=>{this.mixTargetDelta(p),l.onUpdate&&l.onUpdate(p)},onStop:()=>{},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(a3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:u,target:h,layout:f,latestValues:p}=l;if(!(!u||!h||!f)){if(this!==l&&this.layout&&f&&nS(this.options.animationType,this.layout.layoutBox,f.layoutBox)){h=this.target||Ht();const g=Cn(this.layout.layoutBox.x);h.x.min=l.target.x.min,h.x.max=h.x.min+g;const v=Cn(this.layout.layoutBox.y);h.y.min=l.target.y.min,h.y.max=h.y.min+v}Ir(u,h),Ha(u,p),Au(this.projectionDeltaWithTransform,this.layoutCorrected,u,p)}}registerSharedNode(l,u){this.sharedNodes.has(l)||this.sharedNodes.set(l,new o3),this.sharedNodes.get(l).add(u);const f=u.options.initialPromotionConfig;u.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(u):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){var u;const{layoutId:l}=this.options;return l?((u=this.getStack())==null?void 0:u.lead)||this:this}getPrevLead(){var u;const{layoutId:l}=this.options;return l?(u=this.getStack())==null?void 0:u.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:u,preserveFollowOpacity:h}={}){const f=this.getStack();f&&f.promote(this,h),l&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let u=!1;const{latestValues:h}=l;if((h.z||h.rotate||h.rotateX||h.rotateY||h.rotateZ||h.skewX||h.skewY)&&(u=!0),!u)return;const f={};h.z&&gm("z",l,f,this.animationValues);for(let p=0;p<mm.length;p++)gm(`rotate${mm[p]}`,l,f,this.animationValues),gm(`skew${mm[p]}`,l,f,this.animationValues);l.render();for(const p in f)l.setStaticValue(p,f[p]),this.animationValues&&(this.animationValues[p]=f[p]);l.scheduleRender()}applyProjectionStyles(l,u){if(!this.instance||this.isSVG)return;if(!this.isVisible){l.visibility="hidden";return}const h=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,l.visibility="",l.opacity="",l.pointerEvents=rf(u==null?void 0:u.pointerEvents)||"",l.transform=h?h(this.latestValues,""):"none";return}const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){this.options.layoutId&&(l.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,l.pointerEvents=rf(u==null?void 0:u.pointerEvents)||""),this.hasProjected&&!ko(this.latestValues)&&(l.transform=h?h({},""):"none",this.hasProjected=!1);return}l.visibility="";const p=f.animationValues||f.latestValues;this.applyTransformsToTarget();let g=XN(this.projectionDeltaWithTransform,this.treeScale,p);h&&(g=h(p,g)),l.transform=g;const{x:v,y:x}=this.projectionDelta;l.transformOrigin=`${v.origin*100}% ${x.origin*100}% 0`,f.animationValues?l.opacity=f===this?p.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:l.opacity=f===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const T in Ig){if(p[T]===void 0)continue;const{correct:I,applyTo:b,isCSSVariable:N}=Ig[T],z=g==="none"?p[T]:I(p[T],f);if(b){const U=b.length;for(let J=0;J<U;J++)l[b[J]]=z}else N?this.options.visualElement.renderState.vars[T]=z:l[T]=z}this.options.layoutId&&(l.pointerEvents=f===this?rf(u==null?void 0:u.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>{var u;return(u=l.currentAnimation)==null?void 0:u.stop()}),this.root.nodes.forEach(Ix),this.root.sharedNodes.clear()}}}function u3(t){t.updateLayout()}function c3(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:o}=t.options,l=e.source!==t.layout.source;o==="size"?si(g=>{const v=l?e.measuredBox[g]:e.layoutBox[g],x=Cn(v);v.min=r[g].min,v.max=v.min+x}):nS(o,e.layoutBox,r)&&si(g=>{const v=l?e.measuredBox[g]:e.layoutBox[g],x=Cn(r[g]);v.max=v.min+x,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[g].max=t.relativeTarget[g].min+x)});const u=$a();Au(u,r,e.layoutBox);const h=$a();l?Au(h,t.applyTransform(i,!0),e.measuredBox):Au(h,r,e.layoutBox);const f=!Yk(u);let p=!1;if(!t.resumeFrom){const g=t.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:v,layout:x}=g;if(v&&x){const T=Ht();Ef(T,e.layoutBox,v.layoutBox);const I=Ht();Ef(I,r,x.layoutBox),Xk(T,I)||(p=!0),g.options.layoutRoot&&(t.relativeTarget=I,t.relativeTargetOrigin=T,t.relativeParent=g)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:h,layoutDelta:u,hasLayoutChanged:f,hasRelativeLayoutChanged:p})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function h3(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function f3(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function d3(t){t.clearSnapshot()}function Ix(t){t.clearMeasurements()}function Cx(t){t.isLayoutDirty=!1}function p3(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function bx(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function m3(t){t.resolveTargetDelta()}function g3(t){t.calcProjection()}function y3(t){t.resetSkewAndRotation()}function v3(t){t.removeLeadSnapshot()}function Ax(t,e,n){t.translate=kt(e.translate,0,n),t.scale=kt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function Px(t,e,n,r){t.min=kt(e.min,n.min,r),t.max=kt(e.max,n.max,r)}function w3(t,e,n,r){Px(t.x,e.x,n.x,r),Px(t.y,e.y,n.y,r)}function _3(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const x3={duration:.45,ease:[.4,0,.1,1]},Rx=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),Nx=Rx("applewebkit/")&&!Rx("chrome/")?Math.round:mr;function Dx(t){t.min=Nx(t.min),t.max=Nx(t.max)}function E3(t){Dx(t.x),Dx(t.y)}function nS(t,e,n){return t==="position"||t==="preserve-aspect"&&!HN(xx(e),xx(n),.2)}function T3(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const k3=tS({attachResizeListener:(t,e)=>Wu(t,"resize",e),measureScroll:()=>{var t,e;return{x:document.documentElement.scrollLeft||((t=document.body)==null?void 0:t.scrollLeft)||0,y:document.documentElement.scrollTop||((e=document.body)==null?void 0:e.scrollTop)||0}},checkIsScrollRoot:()=>!0}),ym={current:void 0},rS=tS({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!ym.current){const t=new k3({});t.mount(window),t.setOptions({layoutScroll:!0}),ym.current=t}return ym.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),iS=ee.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function S3(t=!0){const e=ee.useContext(dy);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,o=ee.useId();ee.useEffect(()=>{if(t)return i(o)},[t]);const l=ee.useCallback(()=>t&&r&&r(o),[o,r,t]);return!n&&r?[!1,l]:[!0]}const sS=ee.createContext({strict:!1}),Lx={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let Vx=!1;function I3(){if(Vx)return;const t={};for(const e in Lx)t[e]={isEnabled:n=>Lx[e].some(r=>!!n[r])};Lk(t),Vx=!0}function oS(){return I3(),yN()}function C3(t){const e=oS();for(const n in t)e[n]={...e[n],...t[n]};Lk(e)}const b3=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","propagate","ignoreStrict","viewport"]);function Tf(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||b3.has(t)}let aS=t=>!Tf(t);function A3(t){typeof t=="function"&&(aS=e=>e.startsWith("on")?!Tf(e):t(e))}try{A3(require("@emotion/is-prop-valid").default)}catch{}function P3(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(aS(i)||n===!0&&Tf(i)||!e&&!Tf(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}const Jf=ee.createContext({});function R3(t,e){if(Xf(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Hu(n)?n:void 0,animate:Hu(r)?r:void 0}}return t.inherit!==!1?e:{}}function N3(t){const{initial:e,animate:n}=R3(t,ee.useContext(Jf));return ee.useMemo(()=>({initial:e,animate:n}),[Mx(e),Mx(n)])}function Mx(t){return Array.isArray(t)?t.join(" "):t}const zy=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function lS(t,e,n){for(const r in e)!gn(e[r])&&!Bk(r,n)&&(t[r]=e[r])}function D3({transformTemplate:t},e){return ee.useMemo(()=>{const n=zy();return Uy(n,e,t),Object.assign({},n.vars,n.style)},[e])}function L3(t,e){const n=t.style||{},r={};return lS(r,n,t),Object.assign(r,D3(t,e)),r}function V3(t,e){const n={},r=L3(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const uS=()=>({...zy(),attrs:{}});function M3(t,e,n,r){const i=ee.useMemo(()=>{const o=uS();return zk(o,e,qk(r),t.transformTemplate,t.style),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};lS(o,t.style,t),i.style={...o,...i.style}}return i}const O3=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function $y(t){return typeof t!="string"||t.includes("-")?!1:!!(O3.indexOf(t)>-1||/[A-Z]/u.test(t))}function F3(t,e,n,{latestValues:r},i,o=!1,l){const h=(l??$y(t)?M3:V3)(e,r,i,t),f=P3(e,typeof t=="string",o),p=t!==ee.Fragment?{...f,...h,ref:n}:{},{children:g}=e,v=ee.useMemo(()=>gn(g)?g.get():g,[g]);return ee.createElement(t,{...p,children:v})}function j3({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,i){return{latestValues:U3(n,r,i,t),renderState:e()}}function U3(t,e,n,r){const i={},o=r(t,{});for(const v in o)i[v]=rf(o[v]);let{initial:l,animate:u}=t;const h=Xf(t),f=Dk(t);e&&f&&!h&&t.inherit!==!1&&(l===void 0&&(l=e.initial),u===void 0&&(u=e.animate));let p=n?n.initial===!1:!1;p=p||l===!1;const g=p?u:l;if(g&&typeof g!="boolean"&&!Yf(g)){const v=Array.isArray(g)?g:[g];for(let x=0;x<v.length;x++){const T=Ny(t,v[x]);if(T){const{transitionEnd:I,transition:b,...N}=T;for(const z in N){let U=N[z];if(Array.isArray(U)){const J=p?U.length-1:0;U=U[J]}U!==null&&(i[z]=U)}for(const z in I)i[z]=I[z]}}}return i}const cS=t=>(e,n)=>{const r=ee.useContext(Jf),i=ee.useContext(dy),o=()=>j3(t,e,r,i);return n?o():zP(o)},B3=cS({scrapeMotionValuesFromProps:By,createRenderState:zy}),z3=cS({scrapeMotionValuesFromProps:Hk,createRenderState:uS}),$3=Symbol.for("motionComponentSymbol");function q3(t,e,n){const r=ee.useRef(n);ee.useInsertionEffect(()=>{r.current=n});const i=ee.useRef(null);return ee.useCallback(o=>{var u;o&&((u=t.onMount)==null||u.call(t,o)),e&&(o?e.mount(o):e.unmount());const l=r.current;if(typeof l=="function")if(o){const h=l(o);typeof h=="function"&&(i.current=h)}else i.current?(i.current(),i.current=null):l(o);else l&&(l.current=o)},[e])}const hS=ee.createContext({});function Ma(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function H3(t,e,n,r,i,o){var U,J;const{visualElement:l}=ee.useContext(Jf),u=ee.useContext(sS),h=ee.useContext(dy),f=ee.useContext(iS),p=f.reducedMotion,g=f.skipAnimations,v=ee.useRef(null),x=ee.useRef(!1);r=r||u.renderer,!v.current&&r&&(v.current=r(t,{visualState:e,parent:l,props:n,presenceContext:h,blockInitialAnimation:h?h.initial===!1:!1,reducedMotionConfig:p,skipAnimations:g,isSVG:o}),x.current&&v.current&&(v.current.manuallyAnimateOnMount=!0));const T=v.current,I=ee.useContext(hS);T&&!T.projection&&i&&(T.type==="html"||T.type==="svg")&&W3(v.current,n,i,I);const b=ee.useRef(!1);ee.useInsertionEffect(()=>{T&&b.current&&T.update(n,h)});const N=n[wk],z=ee.useRef(!!N&&!((U=window.MotionHandoffIsComplete)!=null&&U.call(window,N))&&((J=window.MotionHasOptimisedAnimation)==null?void 0:J.call(window,N)));return $P(()=>{x.current=!0,T&&(b.current=!0,window.MotionIsMounted=!0,T.updateFeatures(),T.scheduleRenderMicrotask(),z.current&&T.animationState&&T.animationState.animateChanges())}),ee.useEffect(()=>{T&&(!z.current&&T.animationState&&T.animationState.animateChanges(),z.current&&(queueMicrotask(()=>{var X;(X=window.MotionHandoffMarkAsComplete)==null||X.call(window,N)}),z.current=!1),T.enteringChildren=void 0)}),T}function W3(t,e,n,r){const{layoutId:i,layout:o,drag:l,dragConstraints:u,layoutScroll:h,layoutRoot:f,layoutCrossfade:p}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:fS(t.parent)),t.projection.setOptions({layoutId:i,layout:o,alwaysMeasureLayout:!!l||u&&Ma(u),visualElement:t,animationType:typeof o=="string"?o:"both",initialPromotionConfig:r,crossfade:p,layoutScroll:h,layoutRoot:f})}function fS(t){if(t)return t.options.allowProjection!==!1?t.projection:fS(t.parent)}function vm(t,{forwardMotionProps:e=!1,type:n}={},r,i){r&&C3(r);const o=n?n==="svg":$y(t),l=o?z3:B3;function u(f,p){let g;const v={...ee.useContext(iS),...f,layoutId:G3(f)},{isStatic:x}=v,T=N3(f),I=l(f,x);if(!x&&VT){K3();const b=Q3(v);g=b.MeasureLayout,T.visualElement=H3(t,I,v,i,b.ProjectionNode,o)}return C.jsxs(Jf.Provider,{value:T,children:[g&&T.visualElement?C.jsx(g,{visualElement:T.visualElement,...v}):null,F3(t,f,q3(I,T.visualElement,p),I,x,e,o)]})}u.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const h=ee.forwardRef(u);return h[$3]=t,h}function G3({layoutId:t}){const e=ee.useContext(LT).id;return e&&t!==void 0?e+"-"+t:t}function K3(t,e){ee.useContext(sS).strict}function Q3(t){const e=oS(),{drag:n,layout:r}=e;if(!n&&!r)return{};const i={...n,...r};return{MeasureLayout:n!=null&&n.isEnabled(t)||r!=null&&r.isEnabled(t)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function Y3(t,e){if(typeof Proxy>"u")return vm;const n=new Map,r=(o,l)=>vm(o,l,t,e),i=(o,l)=>r(o,l);return new Proxy(i,{get:(o,l)=>l==="create"?r:(n.has(l)||n.set(l,vm(l,void 0,t,e)),n.get(l))})}const X3=(t,e)=>e.isSVG??$y(t)?new LN(e):new bN(e,{allowProjection:t!==ee.Fragment});class J3 extends zs{constructor(e){super(e),e.animationState||(e.animationState=jN(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Yf(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let Z3=0;class eD extends zs{constructor(){super(...arguments),this.id=Z3++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const tD={animation:{Feature:J3},exit:{Feature:eD}};function hc(t){return{point:{x:t.pageX,y:t.pageY}}}const nD=t=>e=>My(e)&&t(e,hc(e));function Pu(t,e,n,r){return Wu(t,e,nD(n),r)}const dS=({current:t})=>t?t.ownerDocument.defaultView:null,Ox=(t,e)=>Math.abs(t-e);function rD(t,e){const n=Ox(t.x,e.x),r=Ox(t.y,e.y);return Math.sqrt(n**2+r**2)}const Fx=new Set(["auto","scroll"]);class pS{constructor(e,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:o=!1,distanceThreshold:l=3,element:u}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=x=>{this.handleScroll(x.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=_m(this.lastMoveEventInfo,this.history),T=this.startEvent!==null,I=rD(x.offset,{x:0,y:0})>=this.distanceThreshold;if(!T&&!I)return;const{point:b}=x,{timestamp:N}=rn;this.history.push({...b,timestamp:N});const{onStart:z,onMove:U}=this.handlers;T||(z&&z(this.lastMoveEvent,x),this.startEvent=this.lastMoveEvent),U&&U(this.lastMoveEvent,x)},this.handlePointerMove=(x,T)=>{this.lastMoveEvent=x,this.lastMoveEventInfo=wm(T,this.transformPagePoint),ht.update(this.updatePoint,!0)},this.handlePointerUp=(x,T)=>{this.end();const{onEnd:I,onSessionEnd:b,resumeAnimation:N}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&N&&N(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const z=_m(x.type==="pointercancel"?this.lastMoveEventInfo:wm(T,this.transformPagePoint),this.history);this.startEvent&&I&&I(x,z),b&&b(x,z)},!My(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=l,this.contextWindow=i||window;const h=hc(e),f=wm(h,this.transformPagePoint),{point:p}=f,{timestamp:g}=rn;this.history=[{...p,timestamp:g}];const{onSessionStart:v}=n;v&&v(e,_m(f,this.history)),this.removeListeners=lc(Pu(this.contextWindow,"pointermove",this.handlePointerMove),Pu(this.contextWindow,"pointerup",this.handlePointerUp),Pu(this.contextWindow,"pointercancel",this.handlePointerUp)),u&&this.startScrollTracking(u)}startScrollTracking(e){let n=e.parentElement;for(;n;){const r=getComputedStyle(n);(Fx.has(r.overflowX)||Fx.has(r.overflowY))&&this.scrollPositions.set(n,{x:n.scrollLeft,y:n.scrollTop}),n=n.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(e){const n=this.scrollPositions.get(e);if(!n)return;const r=e===window,i=r?{x:window.scrollX,y:window.scrollY}:{x:e.scrollLeft,y:e.scrollTop},o={x:i.x-n.x,y:i.y-n.y};o.x===0&&o.y===0||(r?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=o.x,this.lastMoveEventInfo.point.y+=o.y):this.history.length>0&&(this.history[0].x-=o.x,this.history[0].y-=o.y),this.scrollPositions.set(e,i),ht.update(this.updatePoint,!0))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),Ds(this.updatePoint)}}function wm(t,e){return e?{point:e(t.point)}:t}function jx(t,e){return{x:t.x-e.x,y:t.y-e.y}}function _m({point:t},e){return{point:t,delta:jx(t,mS(e)),offset:jx(t,iD(e)),velocity:sD(e,.1)}}function iD(t){return t[0]}function mS(t){return t[t.length-1]}function sD(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=mS(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>li(e)));)n--;if(!r)return{x:0,y:0};r===t[0]&&t.length>2&&i.timestamp-r.timestamp>li(e)*2&&(r=t[1]);const o=pr(i.timestamp-r.timestamp);if(o===0)return{x:0,y:0};const l={x:(i.x-r.x)/o,y:(i.y-r.y)/o};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function oD(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?kt(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?kt(n,t,r.max):Math.min(t,n)),t}function Ux(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function aD(t,{top:e,left:n,bottom:r,right:i}){return{x:Ux(t.x,n,i),y:Ux(t.y,e,r)}}function Bx(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function lD(t,e){return{x:Bx(t.x,e.x),y:Bx(t.y,e.y)}}function uD(t,e){let n=.5;const r=Cn(t),i=Cn(e);return i>r?n=zu(e.min,e.max-r,t.min):r>i&&(n=zu(t.min,t.max-i,e.min)),mi(0,1,n)}function cD(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Cg=.35;function hD(t=Cg){return t===!1?t=0:t===!0&&(t=Cg),{x:zx(t,"left","right"),y:zx(t,"top","bottom")}}function zx(t,e,n){return{min:$x(t,e),max:$x(t,n)}}function $x(t,e){return typeof t=="number"?t:t[e]||0}const fD=new WeakMap;class dD{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ht(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const o=g=>{n&&this.snapToCursor(hc(g).point),this.stopAnimation()},l=(g,v)=>{const{drag:x,dragPropagation:T,onDragStart:I}=this.getProps();if(x&&!T&&(this.openDragLock&&this.openDragLock(),this.openDragLock=G2(x),!this.openDragLock))return;this.latestPointerEvent=g,this.latestPanInfo=v,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),si(N=>{let z=this.getAxisMotionValue(N).get()||0;if(ui.test(z)){const{projection:U}=this.visualElement;if(U&&U.layout){const J=U.layout.layoutBox[N];J&&(z=Cn(J)*(parseFloat(z)/100))}}this.originPoint[N]=z}),I&&ht.update(()=>I(g,v),!1,!0),_g(this.visualElement,"transform");const{animationState:b}=this.visualElement;b&&b.setActive("whileDrag",!0)},u=(g,v)=>{this.latestPointerEvent=g,this.latestPanInfo=v;const{dragPropagation:x,dragDirectionLock:T,onDirectionLock:I,onDrag:b}=this.getProps();if(!x&&!this.openDragLock)return;const{offset:N}=v;if(T&&this.currentDirection===null){this.currentDirection=mD(N),this.currentDirection!==null&&I&&I(this.currentDirection);return}this.updateAxis("x",v.point,N),this.updateAxis("y",v.point,N),this.visualElement.render(),b&&ht.update(()=>b(g,v),!1,!0)},h=(g,v)=>{this.latestPointerEvent=g,this.latestPanInfo=v,this.stop(g,v),this.latestPointerEvent=null,this.latestPanInfo=null},f=()=>{const{dragSnapToOrigin:g}=this.getProps();(g||this.constraints)&&this.startAnimation({x:0,y:0})},{dragSnapToOrigin:p}=this.getProps();this.panSession=new pS(e,{onSessionStart:o,onStart:l,onMove:u,onSessionEnd:h,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:p,distanceThreshold:r,contextWindow:dS(this.visualElement),element:this.visualElement.current})}stop(e,n){const r=e||this.latestPointerEvent,i=n||this.latestPanInfo,o=this.isDragging;if(this.cancel(),!o||!i||!r)return;const{velocity:l}=i;this.startAnimation(l);const{onDragEnd:u}=this.getProps();u&&ht.postRender(()=>u(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.endPanSession();const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}endPanSession(){this.panSession&&this.panSession.end(),this.panSession=void 0}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!Bh(e,i,this.currentDirection))return;const o=this.getAxisMotionValue(e);let l=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(l=oD(l,this.constraints[e],this.elastic[e])),o.set(l)}resolveConstraints(){var o;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(o=this.visualElement.projection)==null?void 0:o.layout,i=this.constraints;e&&Ma(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=aD(r.layoutBox,e):this.constraints=!1,this.elastic=hD(n),i!==this.constraints&&!Ma(e)&&r&&this.constraints&&!this.hasMutatedConstraints&&si(l=>{this.constraints!==!1&&this.getAxisMotionValue(l)&&(this.constraints[l]=cD(r.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Ma(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const o=EN(r,i.root,this.visualElement.getTransformPagePoint());let l=lD(i.layout.layoutBox,o);if(n){const u=n(wN(l));this.hasMutatedConstraints=!!u,u&&(l=Mk(u))}return l}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:o,dragSnapToOrigin:l,onDragTransitionEnd:u}=this.getProps(),h=this.constraints||{},f=si(p=>{if(!Bh(p,n,this.currentDirection))return;let g=h&&h[p]||{};l&&(g={min:0,max:0});const v=i?200:1e6,x=i?40:1e7,T={type:"inertia",velocity:r?e[p]:0,bounceStiffness:v,bounceDamping:x,timeConstant:750,restDelta:1,restSpeed:10,...o,...g};return this.startAxisValueAnimation(p,T)});return Promise.all(f).then(u)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return _g(this.visualElement,e),r.start(Ry(e,r,0,n,this.visualElement,!1))}stopAnimation(){si(e=>this.getAxisMotionValue(e).stop())}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){si(n=>{const{drag:r}=this.getProps();if(!Bh(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,o=this.getAxisMotionValue(n);if(i&&i.layout){const{min:l,max:u}=i.layout.layoutBox[n],h=o.get()||0;o.set(e[n]-kt(l,u,.5)+h)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Ma(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};si(l=>{const u=this.getAxisMotionValue(l);if(u&&this.constraints!==!1){const h=u.get();i[l]=uD({min:h,max:h},this.constraints[l])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.constraints=!1,this.resolveConstraints(),si(l=>{if(!Bh(l,e,null))return;const u=this.getAxisMotionValue(l),{min:h,max:f}=this.constraints[l];u.set(kt(h,f,i[l]))}),this.visualElement.render()}addListeners(){if(!this.visualElement.current)return;fD.set(this.visualElement,this);const e=this.visualElement.current,n=Pu(e,"pointerdown",f=>{const{drag:p,dragListener:g=!0}=this.getProps(),v=f.target,x=v!==e&&Z2(v);p&&g&&!x&&this.start(f)});let r;const i=()=>{const{dragConstraints:f}=this.getProps();Ma(f)&&f.current&&(this.constraints=this.resolveRefConstraints(),r||(r=pD(e,f.current,()=>this.scalePositionWithinConstraints())))},{projection:o}=this.visualElement,l=o.addEventListener("measure",i);o&&!o.layout&&(o.root&&o.root.updateScroll(),o.updateLayout()),ht.read(i);const u=Wu(window,"resize",()=>this.scalePositionWithinConstraints()),h=o.addEventListener("didUpdate",(({delta:f,hasLayoutChanged:p})=>{this.isDragging&&p&&(si(g=>{const v=this.getAxisMotionValue(g);v&&(this.originPoint[g]+=f[g].translate,v.set(v.get()+f[g].translate))}),this.visualElement.render())}));return()=>{u(),n(),l(),h&&h(),r&&r()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:o=!1,dragElastic:l=Cg,dragMomentum:u=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:o,dragElastic:l,dragMomentum:u}}}function qx(t){let e=!0;return()=>{if(e){e=!1;return}t()}}function pD(t,e,n){const r=Z_(t,qx(n)),i=Z_(e,qx(n));return()=>{r(),i()}}function Bh(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function mD(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class gD extends zs{constructor(e){super(e),this.removeGroupControls=mr,this.removeListeners=mr,this.controls=new dD(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||mr}update(){const{dragControls:e}=this.node.getProps(),{dragControls:n}=this.node.prevProps||{};e!==n&&(this.removeGroupControls(),e&&(this.removeGroupControls=e.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners(),this.controls.isDragging||this.controls.endPanSession()}}const xm=t=>(e,n)=>{t&&ht.update(()=>t(e,n),!1,!0)};class yD extends zs{constructor(){super(...arguments),this.removePointerDownListener=mr}onPointerDown(e){this.session=new pS(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:dS(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:xm(e),onStart:xm(n),onMove:xm(r),onEnd:(o,l)=>{delete this.session,i&&ht.postRender(()=>i(o,l))}}}mount(){this.removePointerDownListener=Pu(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let Em=!1;class vD extends ee.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:o}=e;o&&(n.group&&n.group.add(o),r&&r.register&&i&&r.register(o),Em&&o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,layoutDependency:this.props.layoutDependency,onExitComplete:()=>this.safeToRemove()})),sf.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:o}=this.props,{projection:l}=r;return l&&(l.isPresent=o,e.layoutDependency!==n&&l.setOptions({...l.options,layoutDependency:n}),Em=!0,i||e.layoutDependency!==n||n===void 0||e.isPresent!==o?l.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?l.promote():l.relegate()||ht.postRender(()=>{const u=l.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Vy.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;Em=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function gS(t){const[e,n]=S3(),r=ee.useContext(LT);return C.jsx(vD,{...t,layoutGroup:r,switchLayoutGroup:ee.useContext(hS),isPresent:e,safeToRemove:n})}const wD={pan:{Feature:yD},drag:{Feature:gD,ProjectionNode:rS,MeasureLayout:gS}};function Hx(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,o=r[i];o&&ht.postRender(()=>o(e,hc(e)))}class _D extends zs{mount(){const{current:e}=this.node;e&&(this.unmount=Q2(e,(n,r)=>(Hx(this.node,r,"Start"),i=>Hx(this.node,i,"End"))))}unmount(){}}class xD extends zs{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=lc(Wu(this.node.current,"focus",()=>this.onFocus()),Wu(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Wx(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),o=r[i];o&&ht.postRender(()=>o(e,hc(e)))}class ED extends zs{mount(){const{current:e}=this.node;if(!e)return;const{globalTapTarget:n,propagate:r}=this.node.props;this.unmount=tN(e,(i,o)=>(Wx(this.node,o,"Start"),(l,{success:u})=>Wx(this.node,l,u?"End":"Cancel")),{useGlobalTarget:n,stopPropagation:(r==null?void 0:r.tap)===!1})}unmount(){}}const bg=new WeakMap,Tm=new WeakMap,TD=t=>{const e=bg.get(t.target);e&&e(t)},kD=t=>{t.forEach(TD)};function SD({root:t,...e}){const n=t||document;Tm.has(n)||Tm.set(n,{});const r=Tm.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(kD,{root:t,...e})),r[i]}function ID(t,e,n){const r=SD(e);return bg.set(t,n),r.observe(t),()=>{bg.delete(t),r.unobserve(t)}}const CD={some:0,all:1};class bD extends zs{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:o}=e,l={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:CD[i]},u=h=>{const{isIntersecting:f}=h;if(this.isInView===f||(this.isInView=f,o&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:p,onViewportLeave:g}=this.node.getProps(),v=f?p:g;v&&v(h)};return ID(this.node.current,l,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(AD(e,n))&&this.startObserver()}unmount(){}}function AD({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const PD={inView:{Feature:bD},tap:{Feature:ED},focus:{Feature:xD},hover:{Feature:_D}},RD={layout:{ProjectionNode:rS,MeasureLayout:gS}},ND={...tD,...PD,...wD,...RD},Ka=Y3(ND,X3),DD=()=>{};var Gx={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yS=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},LD=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=t[n++],l=t[n++],u=t[n++],h=((i&7)<<18|(o&63)<<12|(l&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(h>>10)),e[r++]=String.fromCharCode(56320+(h&1023))}else{const o=t[n++],l=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|l&63)}}return e.join("")},vS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const o=t[i],l=i+1<t.length,u=l?t[i+1]:0,h=i+2<t.length,f=h?t[i+2]:0,p=o>>2,g=(o&3)<<4|u>>4;let v=(u&15)<<2|f>>6,x=f&63;h||(x=64,l||(v=64)),r.push(n[p],n[g],n[v],n[x])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(yS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):LD(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const o=n[t.charAt(i++)],u=i<t.length?n[t.charAt(i)]:0;++i;const f=i<t.length?n[t.charAt(i)]:64;++i;const g=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||u==null||f==null||g==null)throw new VD;const v=o<<2|u>>4;if(r.push(v),f!==64){const x=u<<4&240|f>>2;if(r.push(x),g!==64){const T=f<<6&192|g;r.push(T)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class VD extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const MD=function(t){const e=yS(t);return vS.encodeByteArray(e,!0)},kf=function(t){return MD(t).replace(/\./g,"")},wS=function(t){try{return vS.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OD(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FD=()=>OD().__FIREBASE_DEFAULTS__,jD=()=>{if(typeof process>"u"||typeof Gx>"u")return;const t=Gx.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},UD=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&wS(t[1]);return e&&JSON.parse(e)},Zf=()=>{try{return DD()||FD()||jD()||UD()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},_S=t=>{var e,n;return(n=(e=Zf())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},BD=t=>{const e=_S(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},xS=()=>{var t;return(t=Zf())==null?void 0:t.config},ES=t=>{var e;return(e=Zf())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zD{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gl(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function TS(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $D(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...t};return[kf(JSON.stringify(n)),kf(JSON.stringify(l)),""].join(".")}const Ru={};function qD(){const t={prod:[],emulator:[]};for(const e of Object.keys(Ru))Ru[e]?t.emulator.push(e):t.prod.push(e);return t}function HD(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Kx=!1;function kS(t,e){if(typeof window>"u"||typeof document>"u"||!gl(window.location.host)||Ru[t]===e||Ru[t]||Kx)return;Ru[t]=e;function n(v){return`__firebase__banner__${v}`}const r="__firebase__banner",o=qD().prod.length>0;function l(){const v=document.getElementById(r);v&&v.remove()}function u(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function h(v,x){v.setAttribute("width","24"),v.setAttribute("id",x),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function f(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{Kx=!0,l()},v}function p(v,x){v.setAttribute("id",x),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function g(){const v=HD(r),x=n("text"),T=document.getElementById(x)||document.createElement("span"),I=n("learnmore"),b=document.getElementById(I)||document.createElement("a"),N=n("preprendIcon"),z=document.getElementById(N)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const U=v.element;u(U),p(b,I);const J=f();h(z,N),U.append(z,T,b,J),document.body.appendChild(U)}o?(T.innerText="Preview backend disconnected.",z.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(z.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,T.innerText="Preview backend running in this workspace."),T.setAttribute("id",x)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _n(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function WD(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_n())}function GD(){var e;const t=(e=Zf())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function KD(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function SS(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function QD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function YD(){const t=_n();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function XD(){return!GD()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function IS(){try{return typeof indexedDB=="object"}catch{return!1}}function CS(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)==null?void 0:o.message)||"")}}catch(n){e(n)}})}function JD(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZD="FirebaseError";class Or extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=ZD,Object.setPrototypeOf(this,Or.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$o.prototype.create)}}class $o{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],l=o?eL(o,r):"Error",u=`${this.serviceName}: ${l} (${i}).`;return new Or(i,u,r)}}function eL(t,e){return t.replace(tL,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const tL=/\{\$([^}]+)}/g;function nL(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Vs(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const o=t[i],l=e[i];if(Qx(o)&&Qx(l)){if(!Vs(o,l))return!1}else if(o!==l)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Qx(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fc(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function rL(t,e){const n=new iL(t,e);return n.subscribe.bind(n)}class iL{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");sL(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=km),i.error===void 0&&(i.error=km),i.complete===void 0&&(i.complete=km);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function sL(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function km(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oL=1e3,aL=2,lL=14400*1e3,uL=.5;function Yx(t,e=oL,n=aL){const r=e*Math.pow(n,t),i=Math.round(uL*r*(Math.random()-.5)*2);return Math.min(lL,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function St(t){return t&&t._delegate?t._delegate:t}class Dr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const So="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cL{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new zD;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(fL(e))try{this.getOrInitializeService({instanceIdentifier:So})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=So){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=So){return this.instances.has(e)}getOptions(e=So){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,l]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);r===u&&l.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:hL(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=So){return this.component?this.component.multipleInstances?e:So:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function hL(t){return t===So?void 0:t}function fL(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dL{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new cL(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ge;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ge||(Ge={}));const pL={debug:Ge.DEBUG,verbose:Ge.VERBOSE,info:Ge.INFO,warn:Ge.WARN,error:Ge.ERROR,silent:Ge.SILENT},mL=Ge.INFO,gL={[Ge.DEBUG]:"log",[Ge.VERBOSE]:"log",[Ge.INFO]:"info",[Ge.WARN]:"warn",[Ge.ERROR]:"error"},yL=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=gL[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ed{constructor(e){this.name=e,this._logLevel=mL,this._logHandler=yL,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ge))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?pL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ge.DEBUG,...e),this._logHandler(this,Ge.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ge.VERBOSE,...e),this._logHandler(this,Ge.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ge.INFO,...e),this._logHandler(this,Ge.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ge.WARN,...e),this._logHandler(this,Ge.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ge.ERROR,...e),this._logHandler(this,Ge.ERROR,...e)}}const vL=(t,e)=>e.some(n=>t instanceof n);let Xx,Jx;function wL(){return Xx||(Xx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function _L(){return Jx||(Jx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const bS=new WeakMap,Ag=new WeakMap,AS=new WeakMap,Sm=new WeakMap,qy=new WeakMap;function xL(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",l)},o=()=>{n(As(t.result)),i()},l=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&bS.set(n,t)}).catch(()=>{}),qy.set(e,t),e}function EL(t){if(Ag.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",l),t.removeEventListener("abort",l)},o=()=>{n(),i()},l=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",l),t.addEventListener("abort",l)});Ag.set(t,e)}let Pg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Ag.get(t);if(e==="objectStoreNames")return t.objectStoreNames||AS.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return As(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function TL(t){Pg=t(Pg)}function kL(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Im(this),e,...n);return AS.set(r,e.sort?e.sort():[e]),As(r)}:_L().includes(t)?function(...e){return t.apply(Im(this),e),As(bS.get(this))}:function(...e){return As(t.apply(Im(this),e))}}function SL(t){return typeof t=="function"?kL(t):(t instanceof IDBTransaction&&EL(t),vL(t,wL())?new Proxy(t,Pg):t)}function As(t){if(t instanceof IDBRequest)return xL(t);if(Sm.has(t))return Sm.get(t);const e=SL(t);return e!==t&&(Sm.set(t,e),qy.set(e,t)),e}const Im=t=>qy.get(t);function PS(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const l=indexedDB.open(t,e),u=As(l);return r&&l.addEventListener("upgradeneeded",h=>{r(As(l.result),h.oldVersion,h.newVersion,As(l.transaction),h)}),n&&l.addEventListener("blocked",h=>n(h.oldVersion,h.newVersion,h)),u.then(h=>{o&&h.addEventListener("close",()=>o()),i&&h.addEventListener("versionchange",f=>i(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}const IL=["get","getKey","getAll","getAllKeys","count"],CL=["put","add","delete","clear"],Cm=new Map;function Zx(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Cm.get(e))return Cm.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=CL.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||IL.includes(n)))return;const o=async function(l,...u){const h=this.transaction(l,i?"readwrite":"readonly");let f=h.store;return r&&(f=f.index(u.shift())),(await Promise.all([f[n](...u),i&&h.done]))[0]};return Cm.set(e,o),o}TL(t=>({...t,get:(e,n,r)=>Zx(e,n)||t.get(e,n,r),has:(e,n)=>!!Zx(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bL{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(AL(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function AL(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Rg="@firebase/app",e1="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $i=new ed("@firebase/app"),PL="@firebase/app-compat",RL="@firebase/analytics-compat",NL="@firebase/analytics",DL="@firebase/app-check-compat",LL="@firebase/app-check",VL="@firebase/auth",ML="@firebase/auth-compat",OL="@firebase/database",FL="@firebase/data-connect",jL="@firebase/database-compat",UL="@firebase/functions",BL="@firebase/functions-compat",zL="@firebase/installations",$L="@firebase/installations-compat",qL="@firebase/messaging",HL="@firebase/messaging-compat",WL="@firebase/performance",GL="@firebase/performance-compat",KL="@firebase/remote-config",QL="@firebase/remote-config-compat",YL="@firebase/storage",XL="@firebase/storage-compat",JL="@firebase/firestore",ZL="@firebase/ai",eV="@firebase/firestore-compat",tV="firebase",nV="12.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ng="[DEFAULT]",rV={[Rg]:"fire-core",[PL]:"fire-core-compat",[NL]:"fire-analytics",[RL]:"fire-analytics-compat",[LL]:"fire-app-check",[DL]:"fire-app-check-compat",[VL]:"fire-auth",[ML]:"fire-auth-compat",[OL]:"fire-rtdb",[FL]:"fire-data-connect",[jL]:"fire-rtdb-compat",[UL]:"fire-fn",[BL]:"fire-fn-compat",[zL]:"fire-iid",[$L]:"fire-iid-compat",[qL]:"fire-fcm",[HL]:"fire-fcm-compat",[WL]:"fire-perf",[GL]:"fire-perf-compat",[KL]:"fire-rc",[QL]:"fire-rc-compat",[YL]:"fire-gcs",[XL]:"fire-gcs-compat",[JL]:"fire-fst",[eV]:"fire-fst-compat",[ZL]:"fire-vertex","fire-js":"fire-js",[tV]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gu=new Map,iV=new Map,Dg=new Map;function t1(t,e){try{t.container.addComponent(e)}catch(n){$i.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function gi(t){const e=t.name;if(Dg.has(e))return $i.debug(`There were multiple attempts to register component ${e}.`),!1;Dg.set(e,t);for(const n of Gu.values())t1(n,t);for(const n of iV.values())t1(n,t);return!0}function qo(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function br(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ps=new $o("app","Firebase",sV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oV{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Dr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ps.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yl=nV;function RS(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Ng,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Ps.create("bad-app-name",{appName:String(i)});if(n||(n=xS()),!n)throw Ps.create("no-options");const o=Gu.get(i);if(o){if(Vs(n,o.options)&&Vs(r,o.config))return o;throw Ps.create("duplicate-app",{appName:i})}const l=new dL(i);for(const h of Dg.values())l.addComponent(h);const u=new oV(n,r,l);return Gu.set(i,u),u}function td(t=Ng){const e=Gu.get(t);if(!e&&t===Ng&&xS())return RS();if(!e)throw Ps.create("no-app",{appName:t});return e}function aV(){return Array.from(Gu.values())}function gr(t,e,n){let r=rV[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const l=[`Unable to register library "${r}" with version "${e}":`];i&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),$i.warn(l.join(" "));return}gi(new Dr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lV="firebase-heartbeat-database",uV=1,Ku="firebase-heartbeat-store";let bm=null;function NS(){return bm||(bm=PS(lV,uV,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ku)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ps.create("idb-open",{originalErrorMessage:t.message})})),bm}async function cV(t){try{const n=(await NS()).transaction(Ku),r=await n.objectStore(Ku).get(DS(t));return await n.done,r}catch(e){if(e instanceof Or)$i.warn(e.message);else{const n=Ps.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});$i.warn(n.message)}}}async function n1(t,e){try{const r=(await NS()).transaction(Ku,"readwrite");await r.objectStore(Ku).put(e,DS(t)),await r.done}catch(n){if(n instanceof Or)$i.warn(n.message);else{const r=Ps.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});$i.warn(r.message)}}}function DS(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hV=1024,fV=30;class dV{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new mV(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=r1();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>fV){const l=gV(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){$i.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=r1(),{heartbeatsToSend:r,unsentEntries:i}=pV(this._heartbeatsCache.heartbeats),o=kf(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return $i.warn(n),""}}}function r1(){return new Date().toISOString().substring(0,10)}function pV(t,e=hV){const n=[];let r=t.slice();for(const i of t){const o=n.find(l=>l.agent===i.agent);if(o){if(o.dates.push(i.date),i1(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),i1(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class mV{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return IS()?CS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await cV(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return n1(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return n1(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function i1(t){return kf(JSON.stringify({version:2,heartbeats:t})).length}function gV(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yV(t){gi(new Dr("platform-logger",e=>new bL(e),"PRIVATE")),gi(new Dr("heartbeat",e=>new dV(e),"PRIVATE")),gr(Rg,e1,t),gr(Rg,e1,"esm2020"),gr("fire-js","")}yV("");var s1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Rs,LS;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(O,A){function V(){}V.prototype=A.prototype,O.F=A.prototype,O.prototype=new V,O.prototype.constructor=O,O.D=function(S,M,F){for(var D=Array(arguments.length-2),ce=2;ce<arguments.length;ce++)D[ce-2]=arguments[ce];return A.prototype[M].apply(S,D)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(O,A,V){V||(V=0);const S=Array(16);if(typeof A=="string")for(var M=0;M<16;++M)S[M]=A.charCodeAt(V++)|A.charCodeAt(V++)<<8|A.charCodeAt(V++)<<16|A.charCodeAt(V++)<<24;else for(M=0;M<16;++M)S[M]=A[V++]|A[V++]<<8|A[V++]<<16|A[V++]<<24;A=O.g[0],V=O.g[1],M=O.g[2];let F=O.g[3],D;D=A+(F^V&(M^F))+S[0]+3614090360&4294967295,A=V+(D<<7&4294967295|D>>>25),D=F+(M^A&(V^M))+S[1]+3905402710&4294967295,F=A+(D<<12&4294967295|D>>>20),D=M+(V^F&(A^V))+S[2]+606105819&4294967295,M=F+(D<<17&4294967295|D>>>15),D=V+(A^M&(F^A))+S[3]+3250441966&4294967295,V=M+(D<<22&4294967295|D>>>10),D=A+(F^V&(M^F))+S[4]+4118548399&4294967295,A=V+(D<<7&4294967295|D>>>25),D=F+(M^A&(V^M))+S[5]+1200080426&4294967295,F=A+(D<<12&4294967295|D>>>20),D=M+(V^F&(A^V))+S[6]+2821735955&4294967295,M=F+(D<<17&4294967295|D>>>15),D=V+(A^M&(F^A))+S[7]+4249261313&4294967295,V=M+(D<<22&4294967295|D>>>10),D=A+(F^V&(M^F))+S[8]+1770035416&4294967295,A=V+(D<<7&4294967295|D>>>25),D=F+(M^A&(V^M))+S[9]+2336552879&4294967295,F=A+(D<<12&4294967295|D>>>20),D=M+(V^F&(A^V))+S[10]+4294925233&4294967295,M=F+(D<<17&4294967295|D>>>15),D=V+(A^M&(F^A))+S[11]+2304563134&4294967295,V=M+(D<<22&4294967295|D>>>10),D=A+(F^V&(M^F))+S[12]+1804603682&4294967295,A=V+(D<<7&4294967295|D>>>25),D=F+(M^A&(V^M))+S[13]+4254626195&4294967295,F=A+(D<<12&4294967295|D>>>20),D=M+(V^F&(A^V))+S[14]+2792965006&4294967295,M=F+(D<<17&4294967295|D>>>15),D=V+(A^M&(F^A))+S[15]+1236535329&4294967295,V=M+(D<<22&4294967295|D>>>10),D=A+(M^F&(V^M))+S[1]+4129170786&4294967295,A=V+(D<<5&4294967295|D>>>27),D=F+(V^M&(A^V))+S[6]+3225465664&4294967295,F=A+(D<<9&4294967295|D>>>23),D=M+(A^V&(F^A))+S[11]+643717713&4294967295,M=F+(D<<14&4294967295|D>>>18),D=V+(F^A&(M^F))+S[0]+3921069994&4294967295,V=M+(D<<20&4294967295|D>>>12),D=A+(M^F&(V^M))+S[5]+3593408605&4294967295,A=V+(D<<5&4294967295|D>>>27),D=F+(V^M&(A^V))+S[10]+38016083&4294967295,F=A+(D<<9&4294967295|D>>>23),D=M+(A^V&(F^A))+S[15]+3634488961&4294967295,M=F+(D<<14&4294967295|D>>>18),D=V+(F^A&(M^F))+S[4]+3889429448&4294967295,V=M+(D<<20&4294967295|D>>>12),D=A+(M^F&(V^M))+S[9]+568446438&4294967295,A=V+(D<<5&4294967295|D>>>27),D=F+(V^M&(A^V))+S[14]+3275163606&4294967295,F=A+(D<<9&4294967295|D>>>23),D=M+(A^V&(F^A))+S[3]+4107603335&4294967295,M=F+(D<<14&4294967295|D>>>18),D=V+(F^A&(M^F))+S[8]+1163531501&4294967295,V=M+(D<<20&4294967295|D>>>12),D=A+(M^F&(V^M))+S[13]+2850285829&4294967295,A=V+(D<<5&4294967295|D>>>27),D=F+(V^M&(A^V))+S[2]+4243563512&4294967295,F=A+(D<<9&4294967295|D>>>23),D=M+(A^V&(F^A))+S[7]+1735328473&4294967295,M=F+(D<<14&4294967295|D>>>18),D=V+(F^A&(M^F))+S[12]+2368359562&4294967295,V=M+(D<<20&4294967295|D>>>12),D=A+(V^M^F)+S[5]+4294588738&4294967295,A=V+(D<<4&4294967295|D>>>28),D=F+(A^V^M)+S[8]+2272392833&4294967295,F=A+(D<<11&4294967295|D>>>21),D=M+(F^A^V)+S[11]+1839030562&4294967295,M=F+(D<<16&4294967295|D>>>16),D=V+(M^F^A)+S[14]+4259657740&4294967295,V=M+(D<<23&4294967295|D>>>9),D=A+(V^M^F)+S[1]+2763975236&4294967295,A=V+(D<<4&4294967295|D>>>28),D=F+(A^V^M)+S[4]+1272893353&4294967295,F=A+(D<<11&4294967295|D>>>21),D=M+(F^A^V)+S[7]+4139469664&4294967295,M=F+(D<<16&4294967295|D>>>16),D=V+(M^F^A)+S[10]+3200236656&4294967295,V=M+(D<<23&4294967295|D>>>9),D=A+(V^M^F)+S[13]+681279174&4294967295,A=V+(D<<4&4294967295|D>>>28),D=F+(A^V^M)+S[0]+3936430074&4294967295,F=A+(D<<11&4294967295|D>>>21),D=M+(F^A^V)+S[3]+3572445317&4294967295,M=F+(D<<16&4294967295|D>>>16),D=V+(M^F^A)+S[6]+76029189&4294967295,V=M+(D<<23&4294967295|D>>>9),D=A+(V^M^F)+S[9]+3654602809&4294967295,A=V+(D<<4&4294967295|D>>>28),D=F+(A^V^M)+S[12]+3873151461&4294967295,F=A+(D<<11&4294967295|D>>>21),D=M+(F^A^V)+S[15]+530742520&4294967295,M=F+(D<<16&4294967295|D>>>16),D=V+(M^F^A)+S[2]+3299628645&4294967295,V=M+(D<<23&4294967295|D>>>9),D=A+(M^(V|~F))+S[0]+4096336452&4294967295,A=V+(D<<6&4294967295|D>>>26),D=F+(V^(A|~M))+S[7]+1126891415&4294967295,F=A+(D<<10&4294967295|D>>>22),D=M+(A^(F|~V))+S[14]+2878612391&4294967295,M=F+(D<<15&4294967295|D>>>17),D=V+(F^(M|~A))+S[5]+4237533241&4294967295,V=M+(D<<21&4294967295|D>>>11),D=A+(M^(V|~F))+S[12]+1700485571&4294967295,A=V+(D<<6&4294967295|D>>>26),D=F+(V^(A|~M))+S[3]+2399980690&4294967295,F=A+(D<<10&4294967295|D>>>22),D=M+(A^(F|~V))+S[10]+4293915773&4294967295,M=F+(D<<15&4294967295|D>>>17),D=V+(F^(M|~A))+S[1]+2240044497&4294967295,V=M+(D<<21&4294967295|D>>>11),D=A+(M^(V|~F))+S[8]+1873313359&4294967295,A=V+(D<<6&4294967295|D>>>26),D=F+(V^(A|~M))+S[15]+4264355552&4294967295,F=A+(D<<10&4294967295|D>>>22),D=M+(A^(F|~V))+S[6]+2734768916&4294967295,M=F+(D<<15&4294967295|D>>>17),D=V+(F^(M|~A))+S[13]+1309151649&4294967295,V=M+(D<<21&4294967295|D>>>11),D=A+(M^(V|~F))+S[4]+4149444226&4294967295,A=V+(D<<6&4294967295|D>>>26),D=F+(V^(A|~M))+S[11]+3174756917&4294967295,F=A+(D<<10&4294967295|D>>>22),D=M+(A^(F|~V))+S[2]+718787259&4294967295,M=F+(D<<15&4294967295|D>>>17),D=V+(F^(M|~A))+S[9]+3951481745&4294967295,O.g[0]=O.g[0]+A&4294967295,O.g[1]=O.g[1]+(M+(D<<21&4294967295|D>>>11))&4294967295,O.g[2]=O.g[2]+M&4294967295,O.g[3]=O.g[3]+F&4294967295}r.prototype.v=function(O,A){A===void 0&&(A=O.length);const V=A-this.blockSize,S=this.C;let M=this.h,F=0;for(;F<A;){if(M==0)for(;F<=V;)i(this,O,F),F+=this.blockSize;if(typeof O=="string"){for(;F<A;)if(S[M++]=O.charCodeAt(F++),M==this.blockSize){i(this,S),M=0;break}}else for(;F<A;)if(S[M++]=O[F++],M==this.blockSize){i(this,S),M=0;break}}this.h=M,this.o+=A},r.prototype.A=function(){var O=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);O[0]=128;for(var A=1;A<O.length-8;++A)O[A]=0;A=this.o*8;for(var V=O.length-8;V<O.length;++V)O[V]=A&255,A/=256;for(this.v(O),O=Array(16),A=0,V=0;V<4;++V)for(let S=0;S<32;S+=8)O[A++]=this.g[V]>>>S&255;return O};function o(O,A){var V=u;return Object.prototype.hasOwnProperty.call(V,O)?V[O]:V[O]=A(O)}function l(O,A){this.h=A;const V=[];let S=!0;for(let M=O.length-1;M>=0;M--){const F=O[M]|0;S&&F==A||(V[M]=F,S=!1)}this.g=V}var u={};function h(O){return-128<=O&&O<128?o(O,function(A){return new l([A|0],A<0?-1:0)}):new l([O|0],O<0?-1:0)}function f(O){if(isNaN(O)||!isFinite(O))return g;if(O<0)return b(f(-O));const A=[];let V=1;for(let S=0;O>=V;S++)A[S]=O/V|0,V*=4294967296;return new l(A,0)}function p(O,A){if(O.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(O.charAt(0)=="-")return b(p(O.substring(1),A));if(O.indexOf("-")>=0)throw Error('number format error: interior "-" character');const V=f(Math.pow(A,8));let S=g;for(let F=0;F<O.length;F+=8){var M=Math.min(8,O.length-F);const D=parseInt(O.substring(F,F+M),A);M<8?(M=f(Math.pow(A,M)),S=S.j(M).add(f(D))):(S=S.j(V),S=S.add(f(D)))}return S}var g=h(0),v=h(1),x=h(16777216);t=l.prototype,t.m=function(){if(I(this))return-b(this).m();let O=0,A=1;for(let V=0;V<this.g.length;V++){const S=this.i(V);O+=(S>=0?S:4294967296+S)*A,A*=4294967296}return O},t.toString=function(O){if(O=O||10,O<2||36<O)throw Error("radix out of range: "+O);if(T(this))return"0";if(I(this))return"-"+b(this).toString(O);const A=f(Math.pow(O,6));var V=this;let S="";for(;;){const M=J(V,A).g;V=N(V,M.j(A));let F=((V.g.length>0?V.g[0]:V.h)>>>0).toString(O);if(V=M,T(V))return F+S;for(;F.length<6;)F="0"+F;S=F+S}},t.i=function(O){return O<0?0:O<this.g.length?this.g[O]:this.h};function T(O){if(O.h!=0)return!1;for(let A=0;A<O.g.length;A++)if(O.g[A]!=0)return!1;return!0}function I(O){return O.h==-1}t.l=function(O){return O=N(this,O),I(O)?-1:T(O)?0:1};function b(O){const A=O.g.length,V=[];for(let S=0;S<A;S++)V[S]=~O.g[S];return new l(V,~O.h).add(v)}t.abs=function(){return I(this)?b(this):this},t.add=function(O){const A=Math.max(this.g.length,O.g.length),V=[];let S=0;for(let M=0;M<=A;M++){let F=S+(this.i(M)&65535)+(O.i(M)&65535),D=(F>>>16)+(this.i(M)>>>16)+(O.i(M)>>>16);S=D>>>16,F&=65535,D&=65535,V[M]=D<<16|F}return new l(V,V[V.length-1]&-2147483648?-1:0)};function N(O,A){return O.add(b(A))}t.j=function(O){if(T(this)||T(O))return g;if(I(this))return I(O)?b(this).j(b(O)):b(b(this).j(O));if(I(O))return b(this.j(b(O)));if(this.l(x)<0&&O.l(x)<0)return f(this.m()*O.m());const A=this.g.length+O.g.length,V=[];for(var S=0;S<2*A;S++)V[S]=0;for(S=0;S<this.g.length;S++)for(let M=0;M<O.g.length;M++){const F=this.i(S)>>>16,D=this.i(S)&65535,ce=O.i(M)>>>16,ae=O.i(M)&65535;V[2*S+2*M]+=D*ae,z(V,2*S+2*M),V[2*S+2*M+1]+=F*ae,z(V,2*S+2*M+1),V[2*S+2*M+1]+=D*ce,z(V,2*S+2*M+1),V[2*S+2*M+2]+=F*ce,z(V,2*S+2*M+2)}for(O=0;O<A;O++)V[O]=V[2*O+1]<<16|V[2*O];for(O=A;O<2*A;O++)V[O]=0;return new l(V,0)};function z(O,A){for(;(O[A]&65535)!=O[A];)O[A+1]+=O[A]>>>16,O[A]&=65535,A++}function U(O,A){this.g=O,this.h=A}function J(O,A){if(T(A))throw Error("division by zero");if(T(O))return new U(g,g);if(I(O))return A=J(b(O),A),new U(b(A.g),b(A.h));if(I(A))return A=J(O,b(A)),new U(b(A.g),A.h);if(O.g.length>30){if(I(O)||I(A))throw Error("slowDivide_ only works with positive integers.");for(var V=v,S=A;S.l(O)<=0;)V=X(V),S=X(S);var M=H(V,1),F=H(S,1);for(S=H(S,2),V=H(V,2);!T(S);){var D=F.add(S);D.l(O)<=0&&(M=M.add(V),F=D),S=H(S,1),V=H(V,1)}return A=N(O,M.j(A)),new U(M,A)}for(M=g;O.l(A)>=0;){for(V=Math.max(1,Math.floor(O.m()/A.m())),S=Math.ceil(Math.log(V)/Math.LN2),S=S<=48?1:Math.pow(2,S-48),F=f(V),D=F.j(A);I(D)||D.l(O)>0;)V-=S,F=f(V),D=F.j(A);T(F)&&(F=v),M=M.add(F),O=N(O,D)}return new U(M,O)}t.B=function(O){return J(this,O).h},t.and=function(O){const A=Math.max(this.g.length,O.g.length),V=[];for(let S=0;S<A;S++)V[S]=this.i(S)&O.i(S);return new l(V,this.h&O.h)},t.or=function(O){const A=Math.max(this.g.length,O.g.length),V=[];for(let S=0;S<A;S++)V[S]=this.i(S)|O.i(S);return new l(V,this.h|O.h)},t.xor=function(O){const A=Math.max(this.g.length,O.g.length),V=[];for(let S=0;S<A;S++)V[S]=this.i(S)^O.i(S);return new l(V,this.h^O.h)};function X(O){const A=O.g.length+1,V=[];for(let S=0;S<A;S++)V[S]=O.i(S)<<1|O.i(S-1)>>>31;return new l(V,O.h)}function H(O,A){const V=A>>5;A%=32;const S=O.g.length-V,M=[];for(let F=0;F<S;F++)M[F]=A>0?O.i(F+V)>>>A|O.i(F+V+1)<<32-A:O.i(F+V);return new l(M,O.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,LS=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.B,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=f,l.fromString=p,Rs=l}).apply(typeof s1<"u"?s1:typeof self<"u"?self:typeof window<"u"?window:{});var zh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var VS,Tu,MS,of,Lg,OS,FS,jS;(function(){var t,e=Object.defineProperty;function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof zh=="object"&&zh];for(var _=0;_<d.length;++_){var E=d[_];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var r=n(this);function i(d,_){if(_)e:{var E=r;d=d.split(".");for(var P=0;P<d.length-1;P++){var G=d[P];if(!(G in E))break e;E=E[G]}d=d[d.length-1],P=E[d],_=_(P),_!=P&&_!=null&&e(E,d,{configurable:!0,writable:!0,value:_})}}i("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(d){return d||function(_){var E=[],P;for(P in _)Object.prototype.hasOwnProperty.call(_,P)&&E.push([P,_[P]]);return E}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(d){var _=typeof d;return _=="object"&&d!=null||_=="function"}function h(d,_,E){return d.call.apply(d.bind,arguments)}function f(d,_,E){return f=h,f.apply(null,arguments)}function p(d,_){var E=Array.prototype.slice.call(arguments,1);return function(){var P=E.slice();return P.push.apply(P,arguments),d.apply(this,P)}}function g(d,_){function E(){}E.prototype=_.prototype,d.Z=_.prototype,d.prototype=new E,d.prototype.constructor=d,d.Ob=function(P,G,Y){for(var pe=Array(arguments.length-2),ze=2;ze<arguments.length;ze++)pe[ze-2]=arguments[ze];return _.prototype[G].apply(P,pe)}}var v=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function x(d){const _=d.length;if(_>0){const E=Array(_);for(let P=0;P<_;P++)E[P]=d[P];return E}return[]}function T(d,_){for(let P=1;P<arguments.length;P++){const G=arguments[P];var E=typeof G;if(E=E!="object"?E:G?Array.isArray(G)?"array":E:"null",E=="array"||E=="object"&&typeof G.length=="number"){E=d.length||0;const Y=G.length||0;d.length=E+Y;for(let pe=0;pe<Y;pe++)d[E+pe]=G[pe]}else d.push(G)}}class I{constructor(_,E){this.i=_,this.j=E,this.h=0,this.g=null}get(){let _;return this.h>0?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function b(d){l.setTimeout(()=>{throw d},0)}function N(){var d=O;let _=null;return d.g&&(_=d.g,d.g=d.g.next,d.g||(d.h=null),_.next=null),_}class z{constructor(){this.h=this.g=null}add(_,E){const P=U.get();P.set(_,E),this.h?this.h.next=P:this.g=P,this.h=P}}var U=new I(()=>new J,d=>d.reset());class J{constructor(){this.next=this.g=this.h=null}set(_,E){this.h=_,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let X,H=!1,O=new z,A=()=>{const d=Promise.resolve(void 0);X=()=>{d.then(V)}};function V(){for(var d;d=N();){try{d.h.call(d.g)}catch(E){b(E)}var _=U;_.j(d),_.h<100&&(_.h++,d.next=_.g,_.g=d)}H=!1}function S(){this.u=this.u,this.C=this.C}S.prototype.u=!1,S.prototype.dispose=function(){this.u||(this.u=!0,this.N())},S.prototype[Symbol.dispose]=function(){this.dispose()},S.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function M(d,_){this.type=d,this.g=this.target=_,this.defaultPrevented=!1}M.prototype.h=function(){this.defaultPrevented=!0};var F=(function(){if(!l.addEventListener||!Object.defineProperty)return!1;var d=!1,_=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const E=()=>{};l.addEventListener("test",E,_),l.removeEventListener("test",E,_)}catch{}return d})();function D(d){return/^[\s\xa0]*$/.test(d)}function ce(d,_){M.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,_)}g(ce,M),ce.prototype.init=function(d,_){const E=this.type=d.type,P=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=_,_=d.relatedTarget,_||(E=="mouseover"?_=d.fromElement:E=="mouseout"&&(_=d.toElement)),this.relatedTarget=_,P?(this.clientX=P.clientX!==void 0?P.clientX:P.pageX,this.clientY=P.clientY!==void 0?P.clientY:P.pageY,this.screenX=P.screenX||0,this.screenY=P.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&ce.Z.h.call(this)},ce.prototype.h=function(){ce.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var ae="closure_listenable_"+(Math.random()*1e6|0),Me=0;function _e(d,_,E,P,G){this.listener=d,this.proxy=null,this.src=_,this.type=E,this.capture=!!P,this.ha=G,this.key=++Me,this.da=this.fa=!1}function ie(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function me(d,_,E){for(const P in d)_.call(E,d[P],P,d)}function L(d,_){for(const E in d)_.call(void 0,d[E],E,d)}function q(d){const _={};for(const E in d)_[E]=d[E];return _}const ne="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(d,_){let E,P;for(let G=1;G<arguments.length;G++){P=arguments[G];for(E in P)d[E]=P[E];for(let Y=0;Y<ne.length;Y++)E=ne[Y],Object.prototype.hasOwnProperty.call(P,E)&&(d[E]=P[E])}}function ue(d){this.src=d,this.g={},this.h=0}ue.prototype.add=function(d,_,E,P,G){const Y=d.toString();d=this.g[Y],d||(d=this.g[Y]=[],this.h++);const pe=we(d,_,P,G);return pe>-1?(_=d[pe],E||(_.fa=!1)):(_=new _e(_,this.src,Y,!!P,G),_.fa=E,d.push(_)),_};function xe(d,_){const E=_.type;if(E in d.g){var P=d.g[E],G=Array.prototype.indexOf.call(P,_,void 0),Y;(Y=G>=0)&&Array.prototype.splice.call(P,G,1),Y&&(ie(_),d.g[E].length==0&&(delete d.g[E],d.h--))}}function we(d,_,E,P){for(let G=0;G<d.length;++G){const Y=d[G];if(!Y.da&&Y.listener==_&&Y.capture==!!E&&Y.ha==P)return G}return-1}var Be="closure_lm_"+(Math.random()*1e6|0),Ce={};function be(d,_,E,P,G){if(Array.isArray(_)){for(let Y=0;Y<_.length;Y++)be(d,_[Y],E,P,G);return null}return E=Ws(E),d&&d[ae]?d.J(_,E,u(P)?!!P.capture:!1,G):Pe(d,_,E,!1,P,G)}function Pe(d,_,E,P,G,Y){if(!_)throw Error("Invalid event type");const pe=u(G)?!!G.capture:!!G;let ze=yt(d);if(ze||(d[Be]=ze=new ue(d)),E=ze.add(_,E,P,pe,Y),E.proxy)return E;if(P=Lt(),E.proxy=P,P.src=d,P.listener=E,d.addEventListener)F||(G=pe),G===void 0&&(G=!1),d.addEventListener(_.toString(),P,G);else if(d.attachEvent)d.attachEvent(tr(_.toString()),P);else if(d.addListener&&d.removeListener)d.addListener(P);else throw Error("addEventListener and attachEvent are unavailable.");return E}function Lt(){function d(E){return _.call(d.src,d.listener,E)}const _=Fr;return d}function _t(d,_,E,P,G){if(Array.isArray(_))for(var Y=0;Y<_.length;Y++)_t(d,_[Y],E,P,G);else P=u(P)?!!P.capture:!!P,E=Ws(E),d&&d[ae]?(d=d.i,Y=String(_).toString(),Y in d.g&&(_=d.g[Y],E=we(_,E,P,G),E>-1&&(ie(_[E]),Array.prototype.splice.call(_,E,1),_.length==0&&(delete d.g[Y],d.h--)))):d&&(d=yt(d))&&(_=d.g[_.toString()],d=-1,_&&(d=we(_,E,P,G)),(E=d>-1?_[d]:null)&&st(E))}function st(d){if(typeof d!="number"&&d&&!d.da){var _=d.src;if(_&&_[ae])xe(_.i,d);else{var E=d.type,P=d.proxy;_.removeEventListener?_.removeEventListener(E,P,d.capture):_.detachEvent?_.detachEvent(tr(E),P):_.addListener&&_.removeListener&&_.removeListener(P),(E=yt(_))?(xe(E,d),E.h==0&&(E.src=null,_[Be]=null)):ie(d)}}}function tr(d){return d in Ce?Ce[d]:Ce[d]="on"+d}function Fr(d,_){if(d.da)d=!0;else{_=new ce(_,this);const E=d.listener,P=d.ha||d.src;d.fa&&st(d),d=E.call(P,_)}return d}function yt(d){return d=d[Be],d instanceof ue?d:null}var jr="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ws(d){return typeof d=="function"?d:(d[jr]||(d[jr]=function(_){return d.handleEvent(_)}),d[jr])}function xt(){S.call(this),this.i=new ue(this),this.M=this,this.G=null}g(xt,S),xt.prototype[ae]=!0,xt.prototype.removeEventListener=function(d,_,E,P){_t(this,d,_,E,P)};function vt(d,_){var E,P=d.G;if(P)for(E=[];P;P=P.G)E.push(P);if(d=d.M,P=_.type||_,typeof _=="string")_=new M(_,d);else if(_ instanceof M)_.target=_.target||d;else{var G=_;_=new M(P,d),R(_,G)}G=!0;let Y,pe;if(E)for(pe=E.length-1;pe>=0;pe--)Y=_.g=E[pe],G=jn(Y,P,!0,_)&&G;if(Y=_.g=d,G=jn(Y,P,!0,_)&&G,G=jn(Y,P,!1,_)&&G,E)for(pe=0;pe<E.length;pe++)Y=_.g=E[pe],G=jn(Y,P,!1,_)&&G}xt.prototype.N=function(){if(xt.Z.N.call(this),this.i){var d=this.i;for(const _ in d.g){const E=d.g[_];for(let P=0;P<E.length;P++)ie(E[P]);delete d.g[_],d.h--}}this.G=null},xt.prototype.J=function(d,_,E,P){return this.i.add(String(d),_,!1,E,P)},xt.prototype.K=function(d,_,E,P){return this.i.add(String(d),_,!0,E,P)};function jn(d,_,E,P){if(_=d.i.g[String(_)],!_)return!0;_=_.concat();let G=!0;for(let Y=0;Y<_.length;++Y){const pe=_[Y];if(pe&&!pe.da&&pe.capture==E){const ze=pe.listener,Rt=pe.ha||pe.src;pe.fa&&xe(d.i,pe),G=ze.call(Rt,P)!==!1&&G}}return G&&!P.defaultPrevented}function Gs(d,_){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=f(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(_)>2147483647?-1:l.setTimeout(d,_||0)}function Ks(d){d.g=Gs(()=>{d.g=null,d.i&&(d.i=!1,Ks(d))},d.l);const _=d.h;d.h=null,d.m.apply(null,_)}class Qo extends S{constructor(_,E){super(),this.m=_,this.l=E,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:Ks(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ur(d){S.call(this),this.h=d,this.g={}}g(Ur,S);var Z=[];function de(d){me(d.g,function(_,E){this.g.hasOwnProperty(E)&&st(_)},d),d.g={}}Ur.prototype.N=function(){Ur.Z.N.call(this),de(this)},Ur.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Re=l.JSON.stringify,qe=l.JSON.parse,Ye=class{stringify(d){return l.JSON.stringify(d,void 0)}parse(d){return l.JSON.parse(d,void 0)}};function Vt(){}function nr(){}var Gt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function rr(){M.call(this,"d")}g(rr,M);function yr(){M.call(this,"c")}g(yr,M);var ft={},Un=null;function Kt(){return Un=Un||new xt}ft.Ia="serverreachability";function Yo(d){M.call(this,ft.Ia,d)}g(Yo,M);function xi(d){const _=Kt();vt(_,new Yo(_))}ft.STAT_EVENT="statevent";function Ei(d,_){M.call(this,ft.STAT_EVENT,d),this.stat=_}g(Ei,M);function Ct(d){const _=Kt();vt(_,new Ei(_,d))}ft.Ja="timingevent";function Cl(d,_){M.call(this,ft.Ja,d),this.size=_}g(Cl,M);function Qi(d,_){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){d()},_)}function Yi(){this.g=!0}Yi.prototype.ua=function(){this.g=!1};function Cc(d,_,E,P,G,Y){d.info(function(){if(d.g)if(Y){var pe="",ze=Y.split("&");for(let it=0;it<ze.length;it++){var Rt=ze[it].split("=");if(Rt.length>1){const Mt=Rt[0];Rt=Rt[1];const Wn=Mt.split("_");pe=Wn.length>=2&&Wn[1]=="type"?pe+(Mt+"="+Rt+"&"):pe+(Mt+"=redacted&")}}}else pe=null;else pe=Y;return"XMLHTTP REQ ("+P+") [attempt "+G+"]: "+_+`
`+E+`
`+pe})}function bc(d,_,E,P,G,Y,pe){d.info(function(){return"XMLHTTP RESP ("+P+") [ attempt "+G+"]: "+_+`
`+E+`
`+Y+" "+pe})}function Br(d,_,E,P){d.info(function(){return"XMLHTTP TEXT ("+_+"): "+Qs(d,E)+(P?" "+P:"")})}function Ac(d,_){d.info(function(){return"TIMEOUT: "+_})}Yi.prototype.info=function(){};function Qs(d,_){if(!d.g)return _;if(!_)return null;try{const Y=JSON.parse(_);if(Y){for(d=0;d<Y.length;d++)if(Array.isArray(Y[d])){var E=Y[d];if(!(E.length<2)){var P=E[1];if(Array.isArray(P)&&!(P.length<1)){var G=P[0];if(G!="noop"&&G!="stop"&&G!="close")for(let pe=1;pe<P.length;pe++)P[pe]=""}}}}return Re(Y)}catch{return _}}var Xi={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ji={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Pc;function Ti(){}g(Ti,Vt),Ti.prototype.g=function(){return new XMLHttpRequest},Pc=new Ti;function zr(d){return encodeURIComponent(String(d))}function Xo(d){var _=1;d=d.split(":");const E=[];for(;_>0&&d.length;)E.push(d.shift()),_--;return d.length&&E.push(d.join(":")),E}function ir(d,_,E,P){this.j=d,this.i=_,this.l=E,this.S=P||1,this.V=new Ur(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Rc}function Rc(){this.i=null,this.g="",this.h=!1}var Nc={},bl={};function vr(d,_,E){d.M=1,d.A=Si(sr(_)),d.u=E,d.R=!0,Al(d,null)}function Al(d,_){d.F=Date.now(),Ys(d),d.B=sr(d.A);var E=d.B,P=d.S;Array.isArray(P)||(P=[String(P)]),jl(E.i,"t",P),d.C=0,E=d.j.L,d.h=new Rc,d.g=zc(d.j,E?_:null,!d.u),d.P>0&&(d.O=new Qo(f(d.Y,d,d.g),d.P)),_=d.V,E=d.g,P=d.ba;var G="readystatechange";Array.isArray(G)||(G&&(Z[0]=G.toString()),G=Z);for(let Y=0;Y<G.length;Y++){const pe=be(E,G[Y],P||_.handleEvent,!1,_.h||_);if(!pe)break;_.g[pe.key]=pe}_=d.J?q(d.J):{},d.u?(d.v||(d.v="POST"),_["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,_)):(d.v="GET",d.g.ea(d.B,d.v,null,_)),xi(),Cc(d.i,d.v,d.B,d.l,d.S,d.u)}ir.prototype.ba=function(d){d=d.target;const _=this.O;_&&Qr(d)==3?_.j():this.Y(d)},ir.prototype.Y=function(d){try{if(d==this.g)e:{const ze=Qr(this.g),Rt=this.g.ya(),it=this.g.ca();if(!(ze<3)&&(ze!=3||this.g&&(this.h.h||this.g.la()||Uc(this.g)))){this.K||ze!=4||Rt==7||(Rt==8||it<=0?xi(3):xi(2)),Jo(this);var _=this.g.ca();this.X=_;var E=Dc(this);if(this.o=_==200,bc(this.i,this.v,this.B,this.l,this.S,ze,_),this.o){if(this.U&&!this.L){t:{if(this.g){var P,G=this.g;if((P=G.g?G.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(P)){var Y=P;break t}}Y=null}if(d=Y)Br(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,dt(this,d);else{this.o=!1,this.m=3,Ct(12),ki(this),Xs(this);break e}}if(this.R){d=!0;let Mt;for(;!this.K&&this.C<E.length;)if(Mt=Vc(this,E),Mt==bl){ze==4&&(this.m=4,Ct(14),d=!1),Br(this.i,this.l,null,"[Incomplete Response]");break}else if(Mt==Nc){this.m=4,Ct(15),Br(this.i,this.l,E,"[Invalid Chunk]"),d=!1;break}else Br(this.i,this.l,Mt,null),dt(this,Mt);if(Lc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ze!=4||E.length!=0||this.h.h||(this.m=1,Ct(16),d=!1),this.o=this.o&&d,!d)Br(this.i,this.l,E,"[Invalid Chunked Response]"),ki(this),Xs(this);else if(E.length>0&&!this.W){this.W=!0;var pe=this.j;pe.g==this&&pe.aa&&!pe.P&&(pe.j.info("Great, no buffering proxy detected. Bytes received: "+E.length),oo(pe),pe.P=!0,Ct(11))}}else Br(this.i,this.l,E,null),dt(this,E);ze==4&&ki(this),this.o&&!this.K&&(ze==4?la(this.j,this):(this.o=!1,Ys(this)))}else Bl(this.g),_==400&&E.indexOf("Unknown SID")>0?(this.m=3,Ct(12)):(this.m=0,Ct(13)),ki(this),Xs(this)}}}catch{}finally{}};function Dc(d){if(!Lc(d))return d.g.la();const _=Uc(d.g);if(_==="")return"";let E="";const P=_.length,G=Qr(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return ki(d),Xs(d),"";d.h.i=new l.TextDecoder}for(let Y=0;Y<P;Y++)d.h.h=!0,E+=d.h.i.decode(_[Y],{stream:!(G&&Y==P-1)});return _.length=0,d.h.g+=E,d.C=0,d.h.g}function Lc(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function Vc(d,_){var E=d.C,P=_.indexOf(`
`,E);return P==-1?bl:(E=Number(_.substring(E,P)),isNaN(E)?Nc:(P+=1,P+E>_.length?bl:(_=_.slice(P,P+E),d.C=P+E,_)))}ir.prototype.cancel=function(){this.K=!0,ki(this)};function Ys(d){d.T=Date.now()+d.H,Pl(d,d.H)}function Pl(d,_){if(d.D!=null)throw Error("WatchDog timer not null");d.D=Qi(f(d.aa,d),_)}function Jo(d){d.D&&(l.clearTimeout(d.D),d.D=null)}ir.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(Ac(this.i,this.B),this.M!=2&&(xi(),Ct(17)),ki(this),this.m=2,Xs(this)):Pl(this,this.T-d)};function Xs(d){d.j.I==0||d.K||la(d.j,d)}function ki(d){Jo(d);var _=d.O;_&&typeof _.dispose=="function"&&_.dispose(),d.O=null,de(d.V),d.g&&(_=d.g,d.g=null,_.abort(),_.dispose())}function dt(d,_){try{var E=d.j;if(E.I!=0&&(E.g==d||Nl(E.h,d))){if(!d.L&&Nl(E.h,d)&&E.I==3){try{var P=E.Ba.g.parse(_)}catch{P=null}if(Array.isArray(P)&&P.length==3){var G=P;if(G[0]==0){e:if(!E.v){if(E.g)if(E.g.F+3e3<d.F)aa(E),qn(E);else break e;Jr(E),Ct(18)}}else E.xa=G[1],0<E.xa-E.K&&G[2]<37500&&E.F&&E.A==0&&!E.C&&(E.C=Qi(f(E.Va,E),6e3));Js(E.h)<=1&&E.ta&&(E.ta=void 0)}else Hn(E,11)}else if((d.L||E.g==d)&&aa(E),!D(_))for(G=E.Ba.g.parse(_),_=0;_<G.length;_++){let it=G[_];const Mt=it[0];if(!(Mt<=E.K))if(E.K=Mt,it=it[1],E.I==2)if(it[0]=="c"){E.M=it[1],E.ba=it[2];const Wn=it[3];Wn!=null&&(E.ka=Wn,E.j.info("VER="+E.ka));const Pi=it[4];Pi!=null&&(E.za=Pi,E.j.info("SVER="+E.za));const Zr=it[5];Zr!=null&&typeof Zr=="number"&&Zr>0&&(P=1.5*Zr,E.O=P,E.j.info("backChannelRequestTimeoutMs_="+P)),P=E;const ei=d.g;if(ei){const ha=ei.g?ei.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ha){var Y=P.h;Y.g||ha.indexOf("spdy")==-1&&ha.indexOf("quic")==-1&&ha.indexOf("h2")==-1||(Y.j=Y.l,Y.g=new Set,Y.h&&(ea(Y,Y.h),Y.h=null))}if(P.G){const ql=ei.g?ei.g.getResponseHeader("X-HTTP-Session-Id"):null;ql&&(P.wa=ql,nt(P.J,P.G,ql))}}E.I=3,E.l&&E.l.ra(),E.aa&&(E.T=Date.now()-d.F,E.j.info("Handshake RTT: "+E.T+"ms")),P=E;var pe=d;if(P.na=$l(P,P.L?P.ba:null,P.W),pe.L){Zs(P.h,pe);var ze=pe,Rt=P.O;Rt&&(ze.H=Rt),ze.D&&(Jo(ze),Ys(ze)),P.g=pe}else ln(P);E.i.length>0&&Ai(E)}else it[0]!="stop"&&it[0]!="close"||Hn(E,7);else E.I==3&&(it[0]=="stop"||it[0]=="close"?it[0]=="stop"?Hn(E,7):sa(E):it[0]!="noop"&&E.l&&E.l.qa(it),E.A=0)}}xi(4)}catch{}}var Dd=class{constructor(d,_){this.g=d,this.map=_}};function Zo(d){this.l=d||10,l.PerformanceNavigationTiming?(d=l.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Rl(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Js(d){return d.h?1:d.g?d.g.size:0}function Nl(d,_){return d.h?d.h==_:d.g?d.g.has(_):!1}function ea(d,_){d.g?d.g.add(_):d.h=_}function Zs(d,_){d.h&&d.h==_?d.h=null:d.g&&d.g.has(_)&&d.g.delete(_)}Zo.prototype.cancel=function(){if(this.i=Bn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function Bn(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let _=d.i;for(const E of d.g.values())_=_.concat(E.G);return _}return x(d.i)}var Mc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function zn(d,_){if(d){d=d.split("&");for(let E=0;E<d.length;E++){const P=d[E].indexOf("=");let G,Y=null;P>=0?(G=d[E].substring(0,P),Y=d[E].substring(P+1)):G=d[E],_(G,Y?decodeURIComponent(Y.replace(/\+/g," ")):"")}}}function $r(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let _;d instanceof $r?(this.l=d.l,eo(this,d.j),this.o=d.o,this.g=d.g,qr(this,d.u),this.h=d.h,Zi(this,Ul(d.i)),this.m=d.m):d&&(_=String(d).match(Mc))?(this.l=!1,eo(this,_[1]||"",!0),this.o=to(_[2]||""),this.g=to(_[3]||"",!0),qr(this,_[4]),this.h=to(_[5]||"",!0),Zi(this,_[6]||"",!0),this.m=to(_[7]||"")):(this.l=!1,this.i=new Xe(null,this.l))}$r.prototype.toString=function(){const d=[];var _=this.j;_&&d.push(no(_,Ll,!0),":");var E=this.g;return(E||_=="file")&&(d.push("//"),(_=this.o)&&d.push(no(_,Ll,!0),"@"),d.push(zr(E).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.u,E!=null&&d.push(":",String(E))),(E=this.h)&&(this.g&&E.charAt(0)!="/"&&d.push("/"),d.push(no(E,E.charAt(0)=="/"?ro:Vl,!0))),(E=this.i.toString())&&d.push("?",E),(E=this.m)&&d.push("#",no(E,Ml)),d.join("")},$r.prototype.resolve=function(d){const _=sr(this);let E=!!d.j;E?eo(_,d.j):E=!!d.o,E?_.o=d.o:E=!!d.g,E?_.g=d.g:E=d.u!=null;var P=d.h;if(E)qr(_,d.u);else if(E=!!d.h){if(P.charAt(0)!="/")if(this.g&&!this.h)P="/"+P;else{var G=_.h.lastIndexOf("/");G!=-1&&(P=_.h.slice(0,G+1)+P)}if(G=P,G==".."||G==".")P="";else if(G.indexOf("./")!=-1||G.indexOf("/.")!=-1){P=G.lastIndexOf("/",0)==0,G=G.split("/");const Y=[];for(let pe=0;pe<G.length;){const ze=G[pe++];ze=="."?P&&pe==G.length&&Y.push(""):ze==".."?((Y.length>1||Y.length==1&&Y[0]!="")&&Y.pop(),P&&pe==G.length&&Y.push("")):(Y.push(ze),P=!0)}P=Y.join("/")}else P=G}return E?_.h=P:E=d.i.toString()!=="",E?Zi(_,Ul(d.i)):E=!!d.m,E&&(_.m=d.m),_};function sr(d){return new $r(d)}function eo(d,_,E){d.j=E?to(_,!0):_,d.j&&(d.j=d.j.replace(/:$/,""))}function qr(d,_){if(_){if(_=Number(_),isNaN(_)||_<0)throw Error("Bad port number "+_);d.u=_}else d.u=null}function Zi(d,_,E){_ instanceof Xe?(d.i=_,na(d.i,d.l)):(E||(_=no(_,Ld)),d.i=new Xe(_,d.l))}function nt(d,_,E){d.i.set(_,E)}function Si(d){return nt(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function to(d,_){return d?_?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function no(d,_,E){return typeof d=="string"?(d=encodeURI(d).replace(_,Dl),E&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function Dl(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Ll=/[#\/\?@]/g,Vl=/[#\?:]/g,ro=/[#\?]/g,Ld=/[#\?@]/g,Ml=/#/g;function Xe(d,_){this.h=this.g=null,this.i=d||null,this.j=!!_}function Hr(d){d.g||(d.g=new Map,d.h=0,d.i&&zn(d.i,function(_,E){d.add(decodeURIComponent(_.replace(/\+/g," ")),E)}))}t=Xe.prototype,t.add=function(d,_){Hr(this),this.i=null,d=Wr(this,d);let E=this.g.get(d);return E||this.g.set(d,E=[]),E.push(_),this.h+=1,this};function Ol(d,_){Hr(d),_=Wr(d,_),d.g.has(_)&&(d.i=null,d.h-=d.g.get(_).length,d.g.delete(_))}function ta(d,_){return Hr(d),_=Wr(d,_),d.g.has(_)}t.forEach=function(d,_){Hr(this),this.g.forEach(function(E,P){E.forEach(function(G){d.call(_,G,P,this)},this)},this)};function Fl(d,_){Hr(d);let E=[];if(typeof _=="string")ta(d,_)&&(E=E.concat(d.g.get(Wr(d,_))));else for(d=Array.from(d.g.values()),_=0;_<d.length;_++)E=E.concat(d[_]);return E}t.set=function(d,_){return Hr(this),this.i=null,d=Wr(this,d),ta(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[_]),this.h+=1,this},t.get=function(d,_){return d?(d=Fl(this,d),d.length>0?String(d[0]):_):_};function jl(d,_,E){Ol(d,_),E.length>0&&(d.i=null,d.g.set(Wr(d,_),x(E)),d.h+=E.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],_=Array.from(this.g.keys());for(let P=0;P<_.length;P++){var E=_[P];const G=zr(E);E=Fl(this,E);for(let Y=0;Y<E.length;Y++){let pe=G;E[Y]!==""&&(pe+="="+zr(E[Y])),d.push(pe)}}return this.i=d.join("&")};function Ul(d){const _=new Xe;return _.i=d.i,d.g&&(_.g=new Map(d.g),_.h=d.h),_}function Wr(d,_){return _=String(_),d.j&&(_=_.toLowerCase()),_}function na(d,_){_&&!d.j&&(Hr(d),d.i=null,d.g.forEach(function(E,P){const G=P.toLowerCase();P!=G&&(Ol(this,P),jl(this,G,E))},d)),d.j=_}function Gr(d,_){const E=new Yi;if(l.Image){const P=new Image;P.onload=p(Zt,E,"TestLoadImage: loaded",!0,_,P),P.onerror=p(Zt,E,"TestLoadImage: error",!1,_,P),P.onabort=p(Zt,E,"TestLoadImage: abort",!1,_,P),P.ontimeout=p(Zt,E,"TestLoadImage: timeout",!1,_,P),l.setTimeout(function(){P.ontimeout&&P.ontimeout()},1e4),P.src=d}else _(!1)}function Kr(d,_){const E=new Yi,P=new AbortController,G=setTimeout(()=>{P.abort(),Zt(E,"TestPingServer: timeout",!1,_)},1e4);fetch(d,{signal:P.signal}).then(Y=>{clearTimeout(G),Y.ok?Zt(E,"TestPingServer: ok",!0,_):Zt(E,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(G),Zt(E,"TestPingServer: error",!1,_)})}function Zt(d,_,E,P,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),P(E)}catch{}}function io(){this.g=new Ye}function Ii(d){this.i=d.Sb||null,this.h=d.ab||!1}g(Ii,Vt),Ii.prototype.g=function(){return new $n(this.i,this.h)};function $n(d,_){xt.call(this),this.H=d,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}g($n,xt),t=$n.prototype,t.open=function(d,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=_,this.readyState=1,wr(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const _={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(_.body=d),(this.H||l).fetch(new Request(this.D,_)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,es(this)),this.readyState=0},t.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,wr(this)),this.g&&(this.readyState=3,wr(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Oc(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function Oc(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}t.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var _=d.value?d.value:new Uint8Array(0);(_=this.B.decode(_,{stream:!d.done}))&&(this.response=this.responseText+=_)}d.done?es(this):wr(this),this.readyState==3&&Oc(this)}},t.Oa=function(d){this.g&&(this.response=this.responseText=d,es(this))},t.Na=function(d){this.g&&(this.response=d,es(this))},t.ga=function(){this.g&&es(this)};function es(d){d.readyState=4,d.l=null,d.j=null,d.B=null,wr(d)}t.setRequestHeader=function(d,_){this.A.append(d,_)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],_=this.h.entries();for(var E=_.next();!E.done;)E=E.value,d.push(E[0]+": "+E[1]),E=_.next();return d.join(`\r
`)};function wr(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty($n.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Fc(d){let _="";return me(d,function(E,P){_+=P,_+=":",_+=E,_+=`\r
`}),_}function ra(d,_,E){e:{for(P in E){var P=!1;break e}P=!0}P||(E=Fc(E),typeof d=="string"?E!=null&&zr(E):nt(d,_,E))}function ot(d){xt.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}g(ot,xt);var jc=/^https?$/i,Vd=["POST","PUT"];t=ot.prototype,t.Fa=function(d){this.H=d},t.ea=function(d,_,E,P){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);_=_?_.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Pc.g(),this.g.onreadystatechange=v(f(this.Ca,this));try{this.B=!0,this.g.open(_,String(d),!0),this.B=!1}catch(Y){ts(this,Y);return}if(d=E||"",E=new Map(this.headers),P)if(Object.getPrototypeOf(P)===Object.prototype)for(var G in P)E.set(G,P[G]);else if(typeof P.keys=="function"&&typeof P.get=="function")for(const Y of P.keys())E.set(Y,P.get(Y));else throw Error("Unknown input type for opt_headers: "+String(P));P=Array.from(E.keys()).find(Y=>Y.toLowerCase()=="content-type"),G=l.FormData&&d instanceof l.FormData,!(Array.prototype.indexOf.call(Vd,_,void 0)>=0)||P||G||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Y,pe]of E)this.g.setRequestHeader(Y,pe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(Y){ts(this,Y)}};function ts(d,_){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=_,d.o=5,ns(d),bi(d)}function ns(d){d.A||(d.A=!0,vt(d,"complete"),vt(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,vt(this,"complete"),vt(this,"abort"),bi(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),bi(this,!0)),ot.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Ci(this):this.Xa())},t.Xa=function(){Ci(this)};function Ci(d){if(d.h&&typeof o<"u"){if(d.v&&Qr(d)==4)setTimeout(d.Ca.bind(d),0);else if(vt(d,"readystatechange"),Qr(d)==4){d.h=!1;try{const Y=d.ca();e:switch(Y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var E;if(!(E=_)){var P;if(P=Y===0){let pe=String(d.D).match(Mc)[1]||null;!pe&&l.self&&l.self.location&&(pe=l.self.location.protocol.slice(0,-1)),P=!jc.test(pe?pe.toLowerCase():"")}E=P}if(E)vt(d,"complete"),vt(d,"success");else{d.o=6;try{var G=Qr(d)>2?d.g.statusText:""}catch{G=""}d.l=G+" ["+d.ca()+"]",ns(d)}}finally{bi(d)}}}}function bi(d,_){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const E=d.g;d.g=null,_||vt(d,"ready");try{E.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Qr(d){return d.g?d.g.readyState:0}t.ca=function(){try{return Qr(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(d){if(this.g){var _=this.g.responseText;return d&&_.indexOf(d)==0&&(_=_.substring(d.length)),qe(_)}};function Uc(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function Bl(d){const _={};d=(d.g&&Qr(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let P=0;P<d.length;P++){if(D(d[P]))continue;var E=Xo(d[P]);const G=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const Y=_[G]||[];_[G]=Y,Y.push(E)}L(_,function(P){return P.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Yr(d,_,E){return E&&E.internalChannelParams&&E.internalChannelParams[d]||_}function ia(d){this.za=0,this.i=[],this.j=new Yi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Yr("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Yr("baseRetryDelayMs",5e3,d),this.Za=Yr("retryDelaySeedMs",1e4,d),this.Ta=Yr("forwardChannelMaxRetries",2,d),this.va=Yr("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new Zo(d&&d.concurrentRequestLimit),this.Ba=new io,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=ia.prototype,t.ka=8,t.I=1,t.connect=function(d,_,E,P){Ct(0),this.W=d,this.H=_||{},E&&P!==void 0&&(this.H.OSID=E,this.H.OAID=P),this.F=this.X,this.J=$l(this,null,this.W),Ai(this)};function sa(d){if(oa(d),d.I==3){var _=d.V++,E=sr(d.J);if(nt(E,"SID",d.M),nt(E,"RID",_),nt(E,"TYPE","terminate"),Xr(d,E),_=new ir(d,d.j,_),_.M=2,_.A=Si(sr(E)),E=!1,l.navigator&&l.navigator.sendBeacon)try{E=l.navigator.sendBeacon(_.A.toString(),"")}catch{}!E&&l.Image&&(new Image().src=_.A,E=!0),E||(_.g=zc(_.j,null),_.g.ea(_.A)),_.F=Date.now(),Ys(_)}ao(d)}function qn(d){d.g&&(oo(d),d.g.cancel(),d.g=null)}function oa(d){qn(d),d.v&&(l.clearTimeout(d.v),d.v=null),aa(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&l.clearTimeout(d.m),d.m=null)}function Ai(d){if(!Rl(d.h)&&!d.m){d.m=!0;var _=d.Ea;X||A(),H||(X(),H=!0),O.add(_,d),d.D=0}}function Bc(d,_){return Js(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=_.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=Qi(f(d.Ea,d,_),ua(d,d.D)),d.D++,!0)}t.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const G=new ir(this,this.j,d);let Y=this.o;if(this.U&&(Y?(Y=q(Y),R(Y,this.U)):Y=this.U),this.u!==null||this.R||(G.J=Y,Y=null),this.S)e:{for(var _=0,E=0;E<this.i.length;E++){t:{var P=this.i[E];if("__data__"in P.map&&(P=P.map.__data__,typeof P=="string")){P=P.length;break t}P=void 0}if(P===void 0)break;if(_+=P,_>4096){_=E;break e}if(_===4096||E===this.i.length-1){_=E+1;break e}}_=1e3}else _=1e3;_=zl(this,G,_),E=sr(this.J),nt(E,"RID",d),nt(E,"CVER",22),this.G&&nt(E,"X-HTTP-Session-Id",this.G),Xr(this,E),Y&&(this.R?_="headers="+zr(Fc(Y))+"&"+_:this.u&&ra(E,this.u,Y)),ea(this.h,G),this.Ra&&nt(E,"TYPE","init"),this.S?(nt(E,"$req",_),nt(E,"SID","null"),G.U=!0,vr(G,E,null)):vr(G,E,_),this.I=2}}else this.I==3&&(d?so(this,d):this.i.length==0||Rl(this.h)||so(this))};function so(d,_){var E;_?E=_.l:E=d.V++;const P=sr(d.J);nt(P,"SID",d.M),nt(P,"RID",E),nt(P,"AID",d.K),Xr(d,P),d.u&&d.o&&ra(P,d.u,d.o),E=new ir(d,d.j,E,d.D+1),d.u===null&&(E.J=d.o),_&&(d.i=_.G.concat(d.i)),_=zl(d,E,1e3),E.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),ea(d.h,E),vr(E,P,_)}function Xr(d,_){d.H&&me(d.H,function(E,P){nt(_,P,E)}),d.l&&me({},function(E,P){nt(_,P,E)})}function zl(d,_,E){E=Math.min(d.i.length,E);const P=d.l?f(d.l.Ka,d.l,d):null;e:{var G=d.i;let ze=-1;for(;;){const Rt=["count="+E];ze==-1?E>0?(ze=G[0].g,Rt.push("ofs="+ze)):ze=0:Rt.push("ofs="+ze);let it=!0;for(let Mt=0;Mt<E;Mt++){var Y=G[Mt].g;const Wn=G[Mt].map;if(Y-=ze,Y<0)ze=Math.max(0,G[Mt].g-100),it=!1;else try{Y="req"+Y+"_"||"";try{var pe=Wn instanceof Map?Wn:Object.entries(Wn);for(const[Pi,Zr]of pe){let ei=Zr;u(Zr)&&(ei=Re(Zr)),Rt.push(Y+Pi+"="+encodeURIComponent(ei))}}catch(Pi){throw Rt.push(Y+"type="+encodeURIComponent("_badmap")),Pi}}catch{P&&P(Wn)}}if(it){pe=Rt.join("&");break e}}pe=void 0}return d=d.i.splice(0,E),_.G=d,pe}function ln(d){if(!d.g&&!d.v){d.Y=1;var _=d.Da;X||A(),H||(X(),H=!0),O.add(_,d),d.A=0}}function Jr(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=Qi(f(d.Da,d),ua(d,d.A)),d.A++,!0)}t.Da=function(){if(this.v=null,rs(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=Qi(f(this.Wa,this),d)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ct(10),qn(this),rs(this))};function oo(d){d.B!=null&&(l.clearTimeout(d.B),d.B=null)}function rs(d){d.g=new ir(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var _=sr(d.na);nt(_,"RID","rpc"),nt(_,"SID",d.M),nt(_,"AID",d.K),nt(_,"CI",d.F?"0":"1"),!d.F&&d.ia&&nt(_,"TO",d.ia),nt(_,"TYPE","xmlhttp"),Xr(d,_),d.u&&d.o&&ra(_,d.u,d.o),d.O&&(d.g.H=d.O);var E=d.g;d=d.ba,E.M=1,E.A=Si(sr(_)),E.u=null,E.R=!0,Al(E,d)}t.Va=function(){this.C!=null&&(this.C=null,qn(this),Jr(this),Ct(19))};function aa(d){d.C!=null&&(l.clearTimeout(d.C),d.C=null)}function la(d,_){var E=null;if(d.g==_){aa(d),oo(d),d.g=null;var P=2}else if(Nl(d.h,_))E=_.G,Zs(d.h,_),P=1;else return;if(d.I!=0){if(_.o)if(P==1){E=_.u?_.u.length:0,_=Date.now()-_.F;var G=d.D;P=Kt(),vt(P,new Cl(P,E)),Ai(d)}else ln(d);else if(G=_.m,G==3||G==0&&_.X>0||!(P==1&&Bc(d,_)||P==2&&Jr(d)))switch(E&&E.length>0&&(_=d.h,_.i=_.i.concat(E)),G){case 1:Hn(d,5);break;case 4:Hn(d,10);break;case 3:Hn(d,6);break;default:Hn(d,2)}}}function ua(d,_){let E=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(E*=2),E*_}function Hn(d,_){if(d.j.info("Error code "+_),_==2){var E=f(d.bb,d),P=d.Ua;const G=!P;P=new $r(P||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||eo(P,"https"),Si(P),G?Gr(P.toString(),E):Kr(P.toString(),E)}else Ct(2);d.I=0,d.l&&d.l.pa(_),ao(d),oa(d)}t.bb=function(d){d?(this.j.info("Successfully pinged google.com"),Ct(2)):(this.j.info("Failed to ping google.com"),Ct(1))};function ao(d){if(d.I=0,d.ja=[],d.l){const _=Bn(d.h);(_.length!=0||d.i.length!=0)&&(T(d.ja,_),T(d.ja,d.i),d.h.i.length=0,x(d.i),d.i.length=0),d.l.oa()}}function $l(d,_,E){var P=E instanceof $r?sr(E):new $r(E);if(P.g!="")_&&(P.g=_+"."+P.g),qr(P,P.u);else{var G=l.location;P=G.protocol,_=_?_+"."+G.hostname:G.hostname,G=+G.port;const Y=new $r(null);P&&eo(Y,P),_&&(Y.g=_),G&&qr(Y,G),E&&(Y.h=E),P=Y}return E=d.G,_=d.wa,E&&_&&nt(P,E,_),nt(P,"VER",d.ka),Xr(d,P),P}function zc(d,_,E){if(_&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return _=d.Aa&&!d.ma?new ot(new Ii({ab:E})):new ot(d.ma),_.Fa(d.L),_}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function $c(){}t=$c.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function ca(){}ca.prototype.g=function(d,_){return new en(d,_)};function en(d,_){xt.call(this),this.g=new ia(_),this.l=d,this.h=_&&_.messageUrlParams||null,d=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(d?d["X-WebChannel-Content-Type"]=_.messageContentType:d={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.sa&&(d?d["X-WebChannel-Client-Profile"]=_.sa:d={"X-WebChannel-Client-Profile":_.sa}),this.g.U=d,(d=_&&_.Qb)&&!D(d)&&(this.g.u=d),this.A=_&&_.supportsCrossDomainXhr||!1,this.v=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!D(_)&&(this.g.G=_,d=this.h,d!==null&&_ in d&&(d=this.h,_ in d&&delete d[_])),this.j=new is(this)}g(en,xt),en.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},en.prototype.close=function(){sa(this.g)},en.prototype.o=function(d){var _=this.g;if(typeof d=="string"){var E={};E.__data__=d,d=E}else this.v&&(E={},E.__data__=Re(d),d=E);_.i.push(new Dd(_.Ya++,d)),_.I==3&&Ai(_)},en.prototype.N=function(){this.g.l=null,delete this.j,sa(this.g),delete this.g,en.Z.N.call(this)};function qc(d){rr.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var _=d.__sm__;if(_){e:{for(const E in _){d=E;break e}d=void 0}(this.i=d)&&(d=this.i,_=_!==null&&d in _?_[d]:void 0),this.data=_}else this.data=d}g(qc,rr);function Hc(){yr.call(this),this.status=1}g(Hc,yr);function is(d){this.g=d}g(is,$c),is.prototype.ra=function(){vt(this.g,"a")},is.prototype.qa=function(d){vt(this.g,new qc(d))},is.prototype.pa=function(d){vt(this.g,new Hc)},is.prototype.oa=function(){vt(this.g,"b")},ca.prototype.createWebChannel=ca.prototype.g,en.prototype.send=en.prototype.o,en.prototype.open=en.prototype.m,en.prototype.close=en.prototype.close,jS=function(){return new ca},FS=function(){return Kt()},OS=ft,Lg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Xi.NO_ERROR=0,Xi.TIMEOUT=8,Xi.HTTP_ERROR=6,of=Xi,Ji.COMPLETE="complete",MS=Ji,nr.EventType=Gt,Gt.OPEN="a",Gt.CLOSE="b",Gt.ERROR="c",Gt.MESSAGE="d",xt.prototype.listen=xt.prototype.J,Tu=nr,ot.prototype.listenOnce=ot.prototype.K,ot.prototype.getLastError=ot.prototype.Ha,ot.prototype.getLastErrorCode=ot.prototype.ya,ot.prototype.getStatus=ot.prototype.ca,ot.prototype.getResponseJson=ot.prototype.La,ot.prototype.getResponseText=ot.prototype.la,ot.prototype.send=ot.prototype.ea,ot.prototype.setWithCredentials=ot.prototype.Fa,VS=ot}).apply(typeof zh<"u"?zh:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}pn.UNAUTHENTICATED=new pn(null),pn.GOOGLE_CREDENTIALS=new pn("google-credentials-uid"),pn.FIRST_PARTY=new pn("first-party-uid"),pn.MOCK_USER=new pn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vl="12.9.0";function vV(t){vl=t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mo=new ed("@firebase/firestore");function Oa(){return Mo.logLevel}function ve(t,...e){if(Mo.logLevel<=Ge.DEBUG){const n=e.map(Hy);Mo.debug(`Firestore (${vl}): ${t}`,...n)}}function qi(t,...e){if(Mo.logLevel<=Ge.ERROR){const n=e.map(Hy);Mo.error(`Firestore (${vl}): ${t}`,...n)}}function Oo(t,...e){if(Mo.logLevel<=Ge.WARN){const n=e.map(Hy);Mo.warn(`Firestore (${vl}): ${t}`,...n)}}function Hy(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ve(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,US(t,r,n)}function US(t,e,n){let r=`FIRESTORE (${vl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw qi(r),new Error(r)}function rt(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||US(e,i,r)}function je(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ge extends Or{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class wV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(pn.UNAUTHENTICATED)))}shutdown(){}}class _V{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class xV{constructor(e){this.t=e,this.currentUser=pn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){rt(this.o===void 0,42304);let r=this.i;const i=h=>this.i!==r?(r=this.i,n(h)):Promise.resolve();let o=new ci;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new ci,e.enqueueRetryable((()=>i(this.currentUser)))};const l=()=>{const h=o;e.enqueueRetryable((async()=>{await h.promise,await i(this.currentUser)}))},u=h=>{ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((h=>u(h))),setTimeout((()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?u(h):(ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ci)}}),0),l()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(rt(typeof r.accessToken=="string",31837,{l:r}),new BS(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return rt(e===null||typeof e=="string",2055,{h:e}),new pn(e)}}class EV{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=pn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class TV{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new EV(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(pn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class o1{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class kV{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,br(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){rt(this.o===void 0,3512);const r=o=>{o.error!=null&&ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.m;return this.m=o.token,ve("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>r(o)))};const i=o=>{ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>i(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?i(o):ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new o1(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(rt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new o1(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SV(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wy{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=SV(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%62))}return r}}function Ke(t,e){return t<e?-1:t>e?1:0}function Vg(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),o=e.charAt(r);if(i!==o)return Am(i)===Am(o)?Ke(i,o):Am(i)?1:-1}return Ke(t.length,e.length)}const IV=55296,CV=57343;function Am(t){const e=t.charCodeAt(0);return e>=IV&&e<=CV}function rl(t,e,n){return t.length===e.length&&t.every(((r,i)=>n(r,e[i])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a1="__name__";class ai{constructor(e,n,r){n===void 0?n=0:n>e.length&&Ve(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Ve(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ai.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ai?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const o=ai.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return Ke(e.length,n.length)}static compareSegments(e,n){const r=ai.isNumericId(e),i=ai.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?ai.extractNumericId(e).compare(ai.extractNumericId(n)):Vg(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Rs.fromString(e.substring(4,e.length-2))}}class ct extends ai{construct(e,n,r){return new ct(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ge(te.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((i=>i.length>0)))}return new ct(n)}static emptyPath(){return new ct([])}}const bV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class on extends ai{construct(e,n,r){return new on(e,n,r)}static isValidIdentifier(e){return bV.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),on.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===a1}static keyField(){return new on([a1])}static fromServerFormat(e){const n=[];let r="",i=0;const o=()=>{if(r.length===0)throw new ge(te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let l=!1;for(;i<e.length;){const u=e[i];if(u==="\\"){if(i+1===e.length)throw new ge(te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[i+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new ge(te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=h,i+=2}else u==="`"?(l=!l,i++):u!=="."||l?(r+=u,i++):(o(),i++)}if(o(),l)throw new ge(te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new on(n)}static emptyPath(){return new on([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e){this.path=e}static fromPath(e){return new Ae(ct.fromString(e))}static fromName(e){return new Ae(ct.fromString(e).popFirst(5))}static empty(){return new Ae(ct.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ct.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ct.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ae(new ct(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zS(t,e,n){if(!n)throw new ge(te.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function AV(t,e,n,r){if(e===!0&&r===!0)throw new ge(te.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function l1(t){if(!Ae.isDocumentKey(t))throw new ge(te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function u1(t){if(Ae.isDocumentKey(t))throw new ge(te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function $S(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function nd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ve(12329,{type:typeof t})}function wn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ge(te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=nd(t);throw new ge(te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zt(t,e){const n={typeString:t};return e&&(n.value=e),n}function dc(t,e){if(!$S(t))throw new ge(te.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const l=t[r];if(i&&typeof l!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&l!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new ge(te.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c1=-62135596800,h1=1e6;class gt{static now(){return gt.fromMillis(Date.now())}static fromDate(e){return gt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*h1);return new gt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ge(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ge(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<c1)throw new ge(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ge(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/h1}_compareTo(e){return this.seconds===e.seconds?Ke(this.nanoseconds,e.nanoseconds):Ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:gt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(dc(e,gt._jsonSchema))return new gt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-c1;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}gt._jsonSchemaVersion="firestore/timestamp/1.0",gt._jsonSchema={type:zt("string",gt._jsonSchemaVersion),seconds:zt("number"),nanoseconds:zt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{static fromTimestamp(e){return new Ue(e)}static min(){return new Ue(new gt(0,0))}static max(){return new Ue(new gt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qu=-1;function PV(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Ue.fromTimestamp(r===1e9?new gt(n+1,0):new gt(n,r));return new Ms(i,Ae.empty(),e)}function RV(t){return new Ms(t.readTime,t.key,Qu)}class Ms{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ms(Ue.min(),Ae.empty(),Qu)}static max(){return new Ms(Ue.max(),Ae.empty(),Qu)}}function NV(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Ae.comparator(t.documentKey,e.documentKey),n!==0?n:Ke(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class LV{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wl(t){if(t.code!==te.FAILED_PRECONDITION||t.message!==DV)throw t;ve("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ve(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new re(((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof re?n:re.resolve(n)}catch(n){return re.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):re.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):re.reject(n)}static resolve(e){return new re(((n,r)=>{n(e)}))}static reject(e){return new re(((n,r)=>{r(e)}))}static waitFor(e){return new re(((n,r)=>{let i=0,o=0,l=!1;e.forEach((u=>{++i,u.next((()=>{++o,l&&o===i&&n()}),(h=>r(h)))})),l=!0,o===i&&n()}))}static or(e){let n=re.resolve(!1);for(const r of e)n=n.next((i=>i?re.resolve(i):r()));return n}static forEach(e,n){const r=[];return e.forEach(((i,o)=>{r.push(n.call(this,i,o))})),this.waitFor(r)}static mapArray(e,n){return new re(((r,i)=>{const o=e.length,l=new Array(o);let u=0;for(let h=0;h<o;h++){const f=h;n(e[f]).next((p=>{l[f]=p,++u,u===o&&r(l)}),(p=>i(p)))}}))}static doWhile(e,n){return new re(((r,i)=>{const o=()=>{e()===!0?n().next((()=>{o()}),i):r()};o()}))}}function VV(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function _l(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}rd.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gy=-1;function id(t){return t==null}function Sf(t){return t===0&&1/t==-1/0}function MV(t){return typeof t=="number"&&Number.isInteger(t)&&!Sf(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qS="";function OV(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=f1(e)),e=FV(t.get(n),e);return f1(e)}function FV(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const o=t.charAt(i);switch(o){case"\0":n+="";break;case qS:n+="";break;default:n+=o}}return n}function f1(t){return t+qS+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d1(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function $s(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function jV(t,e){const n=[];for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.push(e(t[r],r,t));return n}function HS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e,n){this.comparator=e,this.root=n||sn.EMPTY}insert(e,n){return new It(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,sn.BLACK,null,null))}remove(e){return new It(this.comparator,this.root.remove(e,this.comparator).copy(null,null,sn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new $h(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new $h(this.root,e,this.comparator,!1)}getReverseIterator(){return new $h(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new $h(this.root,e,this.comparator,!0)}}class $h{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class sn{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??sn.RED,this.left=i??sn.EMPTY,this.right=o??sn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new sn(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return sn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return sn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,sn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,sn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ve(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ve(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ve(27949);return e+(this.isRed()?0:1)}}sn.EMPTY=null,sn.RED=!0,sn.BLACK=!1;sn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ve(57766)}get value(){throw Ve(16141)}get color(){throw Ve(16727)}get left(){throw Ve(29726)}get right(){throw Ve(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new sn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e){this.comparator=e,this.data=new It(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new p1(this.data.getIterator())}getIteratorFrom(e){return new p1(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof Wt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Wt(this.comparator);return n.data=e,n}}class p1{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e){this.fields=e,e.sort(on.comparator)}static empty(){return new Jn([])}unionWith(e){let n=new Wt(on.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Jn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return rl(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new WS("Invalid base64 string: "+o):o}})(e);return new an(n)}static fromUint8Array(e){const n=(function(i){let o="";for(let l=0;l<i.length;++l)o+=String.fromCharCode(i[l]);return o})(e);return new an(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}an.EMPTY_BYTE_STRING=new an("");const UV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Os(t){if(rt(!!t,39018),typeof t=="string"){let e=0;const n=UV.exec(t);if(rt(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Dt(t.seconds),nanos:Dt(t.nanos)}}function Dt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Fs(t){return typeof t=="string"?an.fromBase64String(t):an.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GS="server_timestamp",KS="__type__",QS="__previous_value__",YS="__local_write_time__";function Ky(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[KS])==null?void 0:r.stringValue)===GS}function sd(t){const e=t.mapValue.fields[QS];return Ky(e)?sd(e):e}function Yu(t){const e=Os(t.mapValue.fields[YS].timestampValue);return new gt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BV{constructor(e,n,r,i,o,l,u,h,f,p,g){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=u,this.longPollingOptions=h,this.useFetchStreams=f,this.isUsingEmulator=p,this.apiKey=g}}const If="(default)";class Xu{constructor(e,n){this.projectId=e,this.database=n||If}static empty(){return new Xu("","")}get isDefaultDatabase(){return this.database===If}isEqual(e){return e instanceof Xu&&e.projectId===this.projectId&&e.database===this.database}}function zV(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new ge(te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xu(t.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XS="__type__",$V="__max__",qh={mapValue:{}},JS="__vector__",Cf="value";function js(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ky(t)?4:HV(t)?9007199254740991:qV(t)?10:11:Ve(28295,{value:t})}function yi(t,e){if(t===e)return!0;const n=js(t);if(n!==js(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Yu(t).isEqual(Yu(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const l=Os(i.timestampValue),u=Os(o.timestampValue);return l.seconds===u.seconds&&l.nanos===u.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,o){return Fs(i.bytesValue).isEqual(Fs(o.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,o){return Dt(i.geoPointValue.latitude)===Dt(o.geoPointValue.latitude)&&Dt(i.geoPointValue.longitude)===Dt(o.geoPointValue.longitude)})(t,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return Dt(i.integerValue)===Dt(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const l=Dt(i.doubleValue),u=Dt(o.doubleValue);return l===u?Sf(l)===Sf(u):isNaN(l)&&isNaN(u)}return!1})(t,e);case 9:return rl(t.arrayValue.values||[],e.arrayValue.values||[],yi);case 10:case 11:return(function(i,o){const l=i.mapValue.fields||{},u=o.mapValue.fields||{};if(d1(l)!==d1(u))return!1;for(const h in l)if(l.hasOwnProperty(h)&&(u[h]===void 0||!yi(l[h],u[h])))return!1;return!0})(t,e);default:return Ve(52216,{left:t})}}function Ju(t,e){return(t.values||[]).find((n=>yi(n,e)))!==void 0}function il(t,e){if(t===e)return 0;const n=js(t),r=js(e);if(n!==r)return Ke(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ke(t.booleanValue,e.booleanValue);case 2:return(function(o,l){const u=Dt(o.integerValue||o.doubleValue),h=Dt(l.integerValue||l.doubleValue);return u<h?-1:u>h?1:u===h?0:isNaN(u)?isNaN(h)?0:-1:1})(t,e);case 3:return m1(t.timestampValue,e.timestampValue);case 4:return m1(Yu(t),Yu(e));case 5:return Vg(t.stringValue,e.stringValue);case 6:return(function(o,l){const u=Fs(o),h=Fs(l);return u.compareTo(h)})(t.bytesValue,e.bytesValue);case 7:return(function(o,l){const u=o.split("/"),h=l.split("/");for(let f=0;f<u.length&&f<h.length;f++){const p=Ke(u[f],h[f]);if(p!==0)return p}return Ke(u.length,h.length)})(t.referenceValue,e.referenceValue);case 8:return(function(o,l){const u=Ke(Dt(o.latitude),Dt(l.latitude));return u!==0?u:Ke(Dt(o.longitude),Dt(l.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return g1(t.arrayValue,e.arrayValue);case 10:return(function(o,l){var v,x,T,I;const u=o.fields||{},h=l.fields||{},f=(v=u[Cf])==null?void 0:v.arrayValue,p=(x=h[Cf])==null?void 0:x.arrayValue,g=Ke(((T=f==null?void 0:f.values)==null?void 0:T.length)||0,((I=p==null?void 0:p.values)==null?void 0:I.length)||0);return g!==0?g:g1(f,p)})(t.mapValue,e.mapValue);case 11:return(function(o,l){if(o===qh.mapValue&&l===qh.mapValue)return 0;if(o===qh.mapValue)return 1;if(l===qh.mapValue)return-1;const u=o.fields||{},h=Object.keys(u),f=l.fields||{},p=Object.keys(f);h.sort(),p.sort();for(let g=0;g<h.length&&g<p.length;++g){const v=Vg(h[g],p[g]);if(v!==0)return v;const x=il(u[h[g]],f[p[g]]);if(x!==0)return x}return Ke(h.length,p.length)})(t.mapValue,e.mapValue);default:throw Ve(23264,{he:n})}}function m1(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ke(t,e);const n=Os(t),r=Os(e),i=Ke(n.seconds,r.seconds);return i!==0?i:Ke(n.nanos,r.nanos)}function g1(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const o=il(n[i],r[i]);if(o)return o}return Ke(n.length,r.length)}function sl(t){return Mg(t)}function Mg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=Os(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Fs(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return Ae.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(const o of n.values||[])i?i=!1:r+=",",r+=Mg(o);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const l of r)o?o=!1:i+=",",i+=`${l}:${Mg(n.fields[l])}`;return i+"}"})(t.mapValue):Ve(61005,{value:t})}function af(t){switch(js(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=sd(t);return e?16+af(e):16;case 5:return 2*t.stringValue.length;case 6:return Fs(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,o)=>i+af(o)),0)})(t.arrayValue);case 10:case 11:return(function(r){let i=0;return $s(r.fields,((o,l)=>{i+=o.length+af(l)})),i})(t.mapValue);default:throw Ve(13486,{value:t})}}function y1(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Og(t){return!!t&&"integerValue"in t}function Qy(t){return!!t&&"arrayValue"in t}function v1(t){return!!t&&"nullValue"in t}function w1(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function lf(t){return!!t&&"mapValue"in t}function qV(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[XS])==null?void 0:r.stringValue)===JS}function Nu(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return $s(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=Nu(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Nu(t.arrayValue.values[n]);return e}return{...t}}function HV(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===$V}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e){this.value=e}static empty(){return new kn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!lf(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Nu(n)}setAll(e){let n=on.emptyPath(),r={},i=[];e.forEach(((l,u)=>{if(!n.isImmediateParentOf(u)){const h=this.getFieldsMap(n);this.applyChanges(h,r,i),r={},i=[],n=u.popLast()}l?r[u.lastSegment()]=Nu(l):i.push(u.lastSegment())}));const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){const n=this.field(e.popLast());lf(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return yi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];lf(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){$s(n,((i,o)=>e[i]=o));for(const i of r)delete e[i]}clone(){return new kn(Nu(this.value))}}function ZS(t){const e=[];return $s(t.fields,((n,r)=>{const i=new on([n]);if(lf(r)){const o=ZS(r.mapValue).fields;if(o.length===0)e.push(i);else for(const l of o)e.push(i.child(l))}else e.push(i)})),new Jn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e,n,r,i,o,l,u){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=l,this.documentState=u}static newInvalidDocument(e){return new mn(e,0,Ue.min(),Ue.min(),Ue.min(),kn.empty(),0)}static newFoundDocument(e,n,r,i){return new mn(e,1,n,Ue.min(),r,i,0)}static newNoDocument(e,n){return new mn(e,2,n,Ue.min(),Ue.min(),kn.empty(),0)}static newUnknownDocument(e,n){return new mn(e,3,n,Ue.min(),Ue.min(),kn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=kn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=kn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ue.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof mn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new mn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf{constructor(e,n){this.position=e,this.inclusive=n}}function _1(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const o=e[i],l=t.position[i];if(o.field.isKeyField()?r=Ae.comparator(Ae.fromName(l.referenceValue),n.key):r=il(l,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function x1(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!yi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu{constructor(e,n="asc"){this.field=e,this.dir=n}}function WV(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{}class Bt extends eI{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new KV(e,n,r):n==="array-contains"?new XV(e,r):n==="in"?new JV(e,r):n==="not-in"?new ZV(e,r):n==="array-contains-any"?new eM(e,r):new Bt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new QV(e,r):new YV(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(il(n,this.value)):n!==null&&js(this.value)===js(n)&&this.matchesComparison(il(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ve(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Lr extends eI{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Lr(e,n)}matches(e){return tI(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function tI(t){return t.op==="and"}function nI(t){return GV(t)&&tI(t)}function GV(t){for(const e of t.filters)if(e instanceof Lr)return!1;return!0}function Fg(t){if(t instanceof Bt)return t.field.canonicalString()+t.op.toString()+sl(t.value);if(nI(t))return t.filters.map((e=>Fg(e))).join(",");{const e=t.filters.map((n=>Fg(n))).join(",");return`${t.op}(${e})`}}function rI(t,e){return t instanceof Bt?(function(r,i){return i instanceof Bt&&r.op===i.op&&r.field.isEqual(i.field)&&yi(r.value,i.value)})(t,e):t instanceof Lr?(function(r,i){return i instanceof Lr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((o,l,u)=>o&&rI(l,i.filters[u])),!0):!1})(t,e):void Ve(19439)}function iI(t){return t instanceof Bt?(function(n){return`${n.field.canonicalString()} ${n.op} ${sl(n.value)}`})(t):t instanceof Lr?(function(n){return n.op.toString()+" {"+n.getFilters().map(iI).join(" ,")+"}"})(t):"Filter"}class KV extends Bt{constructor(e,n,r){super(e,n,r),this.key=Ae.fromName(r.referenceValue)}matches(e){const n=Ae.comparator(e.key,this.key);return this.matchesComparison(n)}}class QV extends Bt{constructor(e,n){super(e,"in",n),this.keys=sI("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class YV extends Bt{constructor(e,n){super(e,"not-in",n),this.keys=sI("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function sI(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map((r=>Ae.fromName(r.referenceValue)))}class XV extends Bt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Qy(n)&&Ju(n.arrayValue,this.value)}}class JV extends Bt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ju(this.value.arrayValue,n)}}class ZV extends Bt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ju(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ju(this.value.arrayValue,n)}}class eM extends Bt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Qy(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>Ju(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tM{constructor(e,n=null,r=[],i=[],o=null,l=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=l,this.endAt=u,this.Te=null}}function E1(t,e=null,n=[],r=[],i=null,o=null,l=null){return new tM(t,e,n,r,i,o,l)}function Yy(t){const e=je(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>Fg(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(o){return o.field.canonicalString()+o.dir})(r))).join(","),id(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>sl(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>sl(r))).join(",")),e.Te=n}return e.Te}function Xy(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!WV(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!rI(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!x1(t.startAt,e.startAt)&&x1(t.endAt,e.endAt)}function jg(t){return Ae.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(e,n=null,r=[],i=[],o=null,l="F",u=null,h=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=l,this.startAt=u,this.endAt=h,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function nM(t,e,n,r,i,o,l,u){return new xl(t,e,n,r,i,o,l,u)}function od(t){return new xl(t)}function T1(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function rM(t){return Ae.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function oI(t){return t.collectionGroup!==null}function Du(t){const e=je(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let u=new Wt(on.comparator);return l.filters.forEach((h=>{h.getFlattenedFilters().forEach((f=>{f.isInequality()&&(u=u.add(f.field))}))})),u})(e).forEach((o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Zu(o,r))})),n.has(on.keyField().canonicalString())||e.Ie.push(new Zu(on.keyField(),r))}return e.Ie}function hi(t){const e=je(t);return e.Ee||(e.Ee=aI(e,Du(t))),e.Ee}function iM(t){const e=je(t);return e.Re||(e.Re=aI(e,t.explicitOrderBy)),e.Re}function aI(t,e){if(t.limitType==="F")return E1(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((i=>{const o=i.dir==="desc"?"asc":"desc";return new Zu(i.field,o)}));const n=t.endAt?new bf(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new bf(t.startAt.position,t.startAt.inclusive):null;return E1(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Ug(t,e){const n=t.filters.concat([e]);return new xl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function sM(t,e){const n=t.explicitOrderBy.concat([e]);return new xl(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}function Af(t,e,n){return new xl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ad(t,e){return Xy(hi(t),hi(e))&&t.limitType===e.limitType}function lI(t){return`${Yy(hi(t))}|lt:${t.limitType}`}function Fa(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((i=>iI(i))).join(", ")}]`),id(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((i=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(i))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((i=>sl(i))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((i=>sl(i))).join(",")),`Target(${r})`})(hi(t))}; limitType=${t.limitType})`}function ld(t,e){return e.isFoundDocument()&&(function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Ae.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(t,e)&&(function(r,i){for(const o of Du(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(l,u,h){const f=_1(l,u,h);return l.inclusive?f<=0:f<0})(r.startAt,Du(r),i)||r.endAt&&!(function(l,u,h){const f=_1(l,u,h);return l.inclusive?f>=0:f>0})(r.endAt,Du(r),i))})(t,e)}function oM(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function uI(t){return(e,n)=>{let r=!1;for(const i of Du(t)){const o=aM(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function aM(t,e,n){const r=t.field.isKeyField()?Ae.comparator(e.key,n.key):(function(o,l,u){const h=l.data.field(o),f=u.data.field(o);return h!==null&&f!==null?il(h,f):Ve(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ve(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){$s(this.inner,((n,r)=>{for(const[i,o]of r)e(i,o)}))}isEmpty(){return HS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lM=new It(Ae.comparator);function Hi(){return lM}const cI=new It(Ae.comparator);function ku(...t){let e=cI;for(const n of t)e=e.insert(n.key,n);return e}function hI(t){let e=cI;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function bo(){return Lu()}function fI(){return Lu()}function Lu(){return new Ho((t=>t.toString()),((t,e)=>t.isEqual(e)))}const uM=new It(Ae.comparator),cM=new Wt(Ae.comparator);function Qe(...t){let e=cM;for(const n of t)e=e.add(n);return e}const hM=new Wt(Ke);function fM(){return hM}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jy(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Sf(e)?"-0":e}}function dI(t){return{integerValue:""+t}}function dM(t,e){return MV(e)?dI(e):Jy(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(){this._=void 0}}function pM(t,e,n){return t instanceof ec?(function(i,o){const l={fields:{[KS]:{stringValue:GS},[YS]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Ky(o)&&(o=sd(o)),o&&(l.fields[QS]=o),{mapValue:l}})(n,e):t instanceof tc?mI(t,e):t instanceof nc?gI(t,e):(function(i,o){const l=pI(i,o),u=k1(l)+k1(i.Ae);return Og(l)&&Og(i.Ae)?dI(u):Jy(i.serializer,u)})(t,e)}function mM(t,e,n){return t instanceof tc?mI(t,e):t instanceof nc?gI(t,e):n}function pI(t,e){return t instanceof Pf?(function(r){return Og(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}class ec extends ud{}class tc extends ud{constructor(e){super(),this.elements=e}}function mI(t,e){const n=yI(e);for(const r of t.elements)n.some((i=>yi(i,r)))||n.push(r);return{arrayValue:{values:n}}}class nc extends ud{constructor(e){super(),this.elements=e}}function gI(t,e){let n=yI(e);for(const r of t.elements)n=n.filter((i=>!yi(i,r)));return{arrayValue:{values:n}}}class Pf extends ud{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function k1(t){return Dt(t.integerValue||t.doubleValue)}function yI(t){return Qy(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gM{constructor(e,n){this.field=e,this.transform=n}}function yM(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof tc&&i instanceof tc||r instanceof nc&&i instanceof nc?rl(r.elements,i.elements,yi):r instanceof Pf&&i instanceof Pf?yi(r.Ae,i.Ae):r instanceof ec&&i instanceof ec})(t.transform,e.transform)}class vM{constructor(e,n){this.version=e,this.transformResults=n}}class bn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new bn}static exists(e){return new bn(void 0,e)}static updateTime(e){return new bn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function uf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class cd{}function vI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new hd(t.key,bn.none()):new pc(t.key,t.data,bn.none());{const n=t.data,r=kn.empty();let i=new Wt(on.comparator);for(let o of e.fields)if(!i.has(o)){let l=n.field(o);l===null&&o.length>1&&(o=o.popLast(),l=n.field(o)),l===null?r.delete(o):r.set(o,l),i=i.add(o)}return new qs(t.key,r,new Jn(i.toArray()),bn.none())}}function wM(t,e,n){t instanceof pc?(function(i,o,l){const u=i.value.clone(),h=I1(i.fieldTransforms,o,l.transformResults);u.setAll(h),o.convertToFoundDocument(l.version,u).setHasCommittedMutations()})(t,e,n):t instanceof qs?(function(i,o,l){if(!uf(i.precondition,o))return void o.convertToUnknownDocument(l.version);const u=I1(i.fieldTransforms,o,l.transformResults),h=o.data;h.setAll(wI(i)),h.setAll(u),o.convertToFoundDocument(l.version,h).setHasCommittedMutations()})(t,e,n):(function(i,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,n)}function Vu(t,e,n,r){return t instanceof pc?(function(o,l,u,h){if(!uf(o.precondition,l))return u;const f=o.value.clone(),p=C1(o.fieldTransforms,h,l);return f.setAll(p),l.convertToFoundDocument(l.version,f).setHasLocalMutations(),null})(t,e,n,r):t instanceof qs?(function(o,l,u,h){if(!uf(o.precondition,l))return u;const f=C1(o.fieldTransforms,h,l),p=l.data;return p.setAll(wI(o)),p.setAll(f),l.convertToFoundDocument(l.version,p).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((g=>g.field)))})(t,e,n,r):(function(o,l,u){return uf(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):u})(t,e,n)}function _M(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),o=pI(r.transform,i||null);o!=null&&(n===null&&(n=kn.empty()),n.set(r.field,o))}return n||null}function S1(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&rl(r,i,((o,l)=>yM(o,l)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class pc extends cd{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class qs extends cd{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function wI(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function I1(t,e,n){const r=new Map;rt(t.length===n.length,32656,{Ve:n.length,de:t.length});for(let i=0;i<n.length;i++){const o=t[i],l=o.transform,u=e.data.field(o.field);r.set(o.field,mM(l,u,n[i]))}return r}function C1(t,e,n){const r=new Map;for(const i of t){const o=i.transform,l=n.data.field(i.field);r.set(i.field,pM(o,l,e))}return r}class hd extends cd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class xM extends cd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EM{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&wM(o,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Vu(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Vu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=fI();return this.mutations.forEach((i=>{const o=e.get(i.key),l=o.overlayedDocument;let u=this.applyToLocalView(l,o.mutatedFields);u=n.has(i.key)?null:u;const h=vI(l,u);h!==null&&r.set(i.key,h),l.isValidDocument()||l.convertToNoDocument(Ue.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Qe())}isEqual(e){return this.batchId===e.batchId&&rl(this.mutations,e.mutations,((n,r)=>S1(n,r)))&&rl(this.baseMutations,e.baseMutations,((n,r)=>S1(n,r)))}}class Zy{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){rt(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return uM})();const o=e.mutations;for(let l=0;l<o.length;l++)i=i.insert(o[l].key,r[l].version);return new Zy(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TM{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kM{constructor(e,n,r){this.alias=e,this.aggregateType=n,this.fieldPath=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SM{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ft,Je;function IM(t){switch(t){case te.OK:return Ve(64938);case te.CANCELLED:case te.UNKNOWN:case te.DEADLINE_EXCEEDED:case te.RESOURCE_EXHAUSTED:case te.INTERNAL:case te.UNAVAILABLE:case te.UNAUTHENTICATED:return!1;case te.INVALID_ARGUMENT:case te.NOT_FOUND:case te.ALREADY_EXISTS:case te.PERMISSION_DENIED:case te.FAILED_PRECONDITION:case te.ABORTED:case te.OUT_OF_RANGE:case te.UNIMPLEMENTED:case te.DATA_LOSS:return!0;default:return Ve(15467,{code:t})}}function _I(t){if(t===void 0)return qi("GRPC error has no .code"),te.UNKNOWN;switch(t){case Ft.OK:return te.OK;case Ft.CANCELLED:return te.CANCELLED;case Ft.UNKNOWN:return te.UNKNOWN;case Ft.DEADLINE_EXCEEDED:return te.DEADLINE_EXCEEDED;case Ft.RESOURCE_EXHAUSTED:return te.RESOURCE_EXHAUSTED;case Ft.INTERNAL:return te.INTERNAL;case Ft.UNAVAILABLE:return te.UNAVAILABLE;case Ft.UNAUTHENTICATED:return te.UNAUTHENTICATED;case Ft.INVALID_ARGUMENT:return te.INVALID_ARGUMENT;case Ft.NOT_FOUND:return te.NOT_FOUND;case Ft.ALREADY_EXISTS:return te.ALREADY_EXISTS;case Ft.PERMISSION_DENIED:return te.PERMISSION_DENIED;case Ft.FAILED_PRECONDITION:return te.FAILED_PRECONDITION;case Ft.ABORTED:return te.ABORTED;case Ft.OUT_OF_RANGE:return te.OUT_OF_RANGE;case Ft.UNIMPLEMENTED:return te.UNIMPLEMENTED;case Ft.DATA_LOSS:return te.DATA_LOSS;default:return Ve(39323,{code:t})}}(Je=Ft||(Ft={}))[Je.OK=0]="OK",Je[Je.CANCELLED=1]="CANCELLED",Je[Je.UNKNOWN=2]="UNKNOWN",Je[Je.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Je[Je.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Je[Je.NOT_FOUND=5]="NOT_FOUND",Je[Je.ALREADY_EXISTS=6]="ALREADY_EXISTS",Je[Je.PERMISSION_DENIED=7]="PERMISSION_DENIED",Je[Je.UNAUTHENTICATED=16]="UNAUTHENTICATED",Je[Je.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Je[Je.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Je[Je.ABORTED=10]="ABORTED",Je[Je.OUT_OF_RANGE=11]="OUT_OF_RANGE",Je[Je.UNIMPLEMENTED=12]="UNIMPLEMENTED",Je[Je.INTERNAL=13]="INTERNAL",Je[Je.UNAVAILABLE=14]="UNAVAILABLE",Je[Je.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CM(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bM=new Rs([4294967295,4294967295],0);function b1(t){const e=CM().encode(t),n=new LS;return n.update(e),new Uint8Array(n.digest())}function A1(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Rs([n,r],0),new Rs([i,o],0)]}class ev{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Su(`Invalid padding: ${n}`);if(r<0)throw new Su(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Su(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Su(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Rs.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(Rs.fromNumber(r)));return i.compare(bM)===1&&(i=new Rs([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=b1(e),[r,i]=A1(n);for(let o=0;o<this.hashCount;o++){const l=this.ye(r,i,o);if(!this.we(l))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new ev(o,i,n);return r.forEach((u=>l.insert(u))),l}insert(e){if(this.ge===0)return;const n=b1(e),[r,i]=A1(n);for(let o=0;o<this.hashCount;o++){const l=this.ye(r,i,o);this.be(l)}}be(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Su extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,mc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new fd(Ue.min(),i,new It(Ke),Hi(),Qe())}}class mc{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new mc(r,n,Qe(),Qe(),Qe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.De=i}}class xI{constructor(e,n){this.targetId=e,this.Ce=n}}class EI{constructor(e,n,r=an.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class P1{constructor(){this.ve=0,this.Fe=R1(),this.Me=an.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Qe(),n=Qe(),r=Qe();return this.Fe.forEach(((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Ve(38017,{changeType:o})}})),new mc(this.Me,this.xe,e,n,r)}Ke(){this.Oe=!1,this.Fe=R1()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,rt(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class AM{constructor(e){this.Ge=e,this.ze=new Map,this.je=Hi(),this.He=Hh(),this.Je=Hh(),this.Ze=new It(Ke)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Ve(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,i)=>{this.rt(i)&&n(i)}))}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const o=i.target;if(jg(o))if(r===0){const l=new Ae(o.path);this.et(n,l,mn.newNoDocument(l,Ue.min()))}else rt(r===1,20013,{expectedCount:r});else{const l=this._t(n);if(l!==r){const u=this.ut(e),h=u?this.ct(u,e,l):1;if(h!==0){this.it(n);const f=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,f)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n;let l,u;try{l=Fs(r).toUint8Array()}catch(h){if(h instanceof WS)return Oo("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{u=new ev(l,i,o)}catch(h){return Oo(h instanceof Su?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return u.ge===0?null:u}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach((o=>{const l=this.Ge.ht(),u=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.et(n,o,null),i++)})),i}Tt(e){const n=new Map;this.ze.forEach(((o,l)=>{const u=this.ot(l);if(u){if(o.current&&jg(u.target)){const h=new Ae(u.target.path);this.It(h).has(l)||this.Et(l,h)||this.et(l,h,mn.newNoDocument(h,e))}o.Be&&(n.set(l,o.ke()),o.Ke())}}));let r=Qe();this.Je.forEach(((o,l)=>{let u=!0;l.forEachWhile((h=>{const f=this.ot(h);return!f||f.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)})),u&&(r=r.add(o))})),this.je.forEach(((o,l)=>l.setReadTime(e)));const i=new fd(e,n,this.Ze,this.je,r);return this.je=Hi(),this.He=Hh(),this.Je=Hh(),this.Ze=new It(Ke),i}Ye(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,r),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.qe(n,1):i.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new P1,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new Wt(Ke),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new Wt(Ke),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ve("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new P1),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Hh(){return new It(Ae.comparator)}function R1(){return new It(Ae.comparator)}const PM={asc:"ASCENDING",desc:"DESCENDING"},RM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},NM={and:"AND",or:"OR"};class DM{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Bg(t,e){return t.useProto3Json||id(e)?e:{value:e}}function Rf(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function TI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function LM(t,e){return Rf(t,e.toTimestamp())}function fi(t){return rt(!!t,49232),Ue.fromTimestamp((function(n){const r=Os(n);return new gt(r.seconds,r.nanos)})(t))}function tv(t,e){return zg(t,e).canonicalString()}function zg(t,e){const n=(function(i){return new ct(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function kI(t){const e=ct.fromString(t);return rt(PI(e),10190,{key:e.toString()}),e}function $g(t,e){return tv(t.databaseId,e.path)}function Pm(t,e){const n=kI(e);if(n.get(1)!==t.databaseId.projectId)throw new ge(te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ge(te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ae(II(n))}function SI(t,e){return tv(t.databaseId,e)}function VM(t){const e=kI(t);return e.length===4?ct.emptyPath():II(e)}function qg(t){return new ct(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function II(t){return rt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function N1(t,e,n){return{name:$g(t,e),fields:n.value.mapValue.fields}}function MM(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Ve(39313,{state:f})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(f,p){return f.useProto3Json?(rt(p===void 0||typeof p=="string",58123),an.fromBase64String(p||"")):(rt(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),an.fromUint8Array(p||new Uint8Array))})(t,e.targetChange.resumeToken),l=e.targetChange.cause,u=l&&(function(f){const p=f.code===void 0?te.UNKNOWN:_I(f.code);return new ge(p,f.message||"")})(l);n=new EI(r,i,o,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Pm(t,r.document.name),o=fi(r.document.updateTime),l=r.document.createTime?fi(r.document.createTime):Ue.min(),u=new kn({mapValue:{fields:r.document.fields}}),h=mn.newFoundDocument(i,o,l,u),f=r.targetIds||[],p=r.removedTargetIds||[];n=new cf(f,p,h.key,h)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Pm(t,r.document),o=r.readTime?fi(r.readTime):Ue.min(),l=mn.newNoDocument(i,o),u=r.removedTargetIds||[];n=new cf([],u,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Pm(t,r.document),o=r.removedTargetIds||[];n=new cf([],o,i,null)}else{if(!("filter"in e))return Ve(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,l=new SM(i,o),u=r.targetId;n=new xI(u,l)}}return n}function OM(t,e){let n;if(e instanceof pc)n={update:N1(t,e.key,e.value)};else if(e instanceof hd)n={delete:$g(t,e.key)};else if(e instanceof qs)n={update:N1(t,e.key,e.data),updateMask:WM(e.fieldMask)};else{if(!(e instanceof xM))return Ve(16599,{dt:e.type});n={verify:$g(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(o,l){const u=l.transform;if(u instanceof ec)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof tc)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof nc)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Pf)return{fieldPath:l.field.canonicalString(),increment:u.Ae};throw Ve(20930,{transform:l.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:LM(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Ve(27497)})(t,e.precondition)),n}function FM(t,e){return t&&t.length>0?(rt(e!==void 0,14353),t.map((n=>(function(i,o){let l=i.updateTime?fi(i.updateTime):fi(o);return l.isEqual(Ue.min())&&(l=fi(o)),new vM(l,i.transformResults||[])})(n,e)))):[]}function jM(t,e){return{documents:[SI(t,e.path)]}}function CI(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=SI(t,i);const o=(function(f){if(f.length!==0)return AI(Lr.create(f,"and"))})(e.filters);o&&(n.structuredQuery.where=o);const l=(function(f){if(f.length!==0)return f.map((p=>(function(v){return{field:Ts(v.field),direction:$M(v.dir)}})(p)))})(e.orderBy);l&&(n.structuredQuery.orderBy=l);const u=Bg(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{ft:n,parent:i}}function UM(t,e,n,r){const{ft:i,parent:o}=CI(t,e),l={},u=[];let h=0;return n.forEach((f=>{const p="aggregate_"+h++;l[p]=f.alias,f.aggregateType==="count"?u.push({alias:p,count:{}}):f.aggregateType==="avg"?u.push({alias:p,avg:{field:Ts(f.fieldPath)}}):f.aggregateType==="sum"&&u.push({alias:p,sum:{field:Ts(f.fieldPath)}})})),{request:{structuredAggregationQuery:{aggregations:u,structuredQuery:i.structuredQuery},parent:i.parent},gt:l,parent:o}}function BM(t){let e=VM(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){rt(r===1,65062);const p=n.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let o=[];n.where&&(o=(function(g){const v=bI(g);return v instanceof Lr&&nI(v)?v.getFilters():[v]})(n.where));let l=[];n.orderBy&&(l=(function(g){return g.map((v=>(function(T){return new Zu(ja(T.field),(function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(T.direction))})(v)))})(n.orderBy));let u=null;n.limit&&(u=(function(g){let v;return v=typeof g=="object"?g.value:g,id(v)?null:v})(n.limit));let h=null;n.startAt&&(h=(function(g){const v=!!g.before,x=g.values||[];return new bf(x,v)})(n.startAt));let f=null;return n.endAt&&(f=(function(g){const v=!g.before,x=g.values||[];return new bf(x,v)})(n.endAt)),nM(e,i,l,o,u,"F",h,f)}function zM(t,e){const n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ve(28987,{purpose:i})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function bI(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ja(n.unaryFilter.field);return Bt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=ja(n.unaryFilter.field);return Bt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=ja(n.unaryFilter.field);return Bt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=ja(n.unaryFilter.field);return Bt.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ve(61313);default:return Ve(60726)}})(t):t.fieldFilter!==void 0?(function(n){return Bt.create(ja(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ve(58110);default:return Ve(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Lr.create(n.compositeFilter.filters.map((r=>bI(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ve(1026)}})(n.compositeFilter.op))})(t):Ve(30097,{filter:t})}function $M(t){return PM[t]}function qM(t){return RM[t]}function HM(t){return NM[t]}function Ts(t){return{fieldPath:t.canonicalString()}}function ja(t){return on.fromServerFormat(t.fieldPath)}function AI(t){return t instanceof Bt?(function(n){if(n.op==="=="){if(w1(n.value))return{unaryFilter:{field:Ts(n.field),op:"IS_NAN"}};if(v1(n.value))return{unaryFilter:{field:Ts(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(w1(n.value))return{unaryFilter:{field:Ts(n.field),op:"IS_NOT_NAN"}};if(v1(n.value))return{unaryFilter:{field:Ts(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ts(n.field),op:qM(n.op),value:n.value}}})(t):t instanceof Lr?(function(n){const r=n.getFilters().map((i=>AI(i)));return r.length===1?r[0]:{compositeFilter:{op:HM(n.op),filters:r}}})(t):Ve(54877,{filter:t})}function WM(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function PI(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}function RI(t){return!!t&&typeof t._toProto=="function"&&t._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(e,n,r,i,o=Ue.min(),l=Ue.min(),u=an.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=u,this.expectedCount=h}withSequenceNumber(e){return new bs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new bs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new bs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new bs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GM{constructor(e){this.yt=e}}function KM(t){const e=BM({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Af(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QM{constructor(){this.Sn=new YM}addToCollectionParentIndex(e,n){return this.Sn.add(n),re.resolve()}getCollectionParents(e,n){return re.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return re.resolve()}deleteFieldIndex(e,n){return re.resolve()}deleteAllFieldIndexes(e){return re.resolve()}createTargetIndexes(e,n){return re.resolve()}getDocumentsMatchingTarget(e,n){return re.resolve(null)}getIndexType(e,n){return re.resolve(0)}getFieldIndexes(e,n){return re.resolve([])}getNextCollectionGroupToUpdate(e){return re.resolve(null)}getMinOffset(e,n){return re.resolve(Ms.min())}getMinOffsetFromCollectionGroup(e,n){return re.resolve(Ms.min())}updateCollectionGroup(e,n,r){return re.resolve()}updateIndexEntries(e,n){return re.resolve()}}class YM{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Wt(ct.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Wt(ct.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},NI=41943040;class On{static withCacheSize(e){return new On(e,On.DEFAULT_COLLECTION_PERCENTILE,On.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */On.DEFAULT_COLLECTION_PERCENTILE=10,On.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,On.DEFAULT=new On(NI,On.DEFAULT_COLLECTION_PERCENTILE,On.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),On.DISABLED=new On(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new ol(0)}static ar(){return new ol(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L1="LruGarbageCollector",XM=1048576;function V1([t,e],[n,r]){const i=Ke(t,n);return i===0?Ke(e,r):i}class JM{constructor(e){this.Pr=e,this.buffer=new Wt(V1),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();V1(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class ZM{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){ve(L1,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){_l(n)?ve(L1,"Ignoring IndexedDB error during garbage collection: ",n):await wl(n)}await this.Ar(3e5)}))}}class eO{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return re.resolve(rd.ce);const r=new JM(n);return this.Vr.forEachTarget(e,(i=>r.Er(i.sequenceNumber))).next((()=>this.Vr.mr(e,(i=>r.Er(i))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ve("LruGarbageCollector","Garbage collection skipped; disabled"),re.resolve(D1)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),D1):this.gr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let r,i,o,l,u,h,f;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((g=>(g>this.params.maximumSequenceNumbersToCollect?(ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,l=Date.now(),this.nthSequenceNumber(e,i)))).next((g=>(r=g,u=Date.now(),this.removeTargets(e,r,n)))).next((g=>(o=g,h=Date.now(),this.removeOrphanedDocuments(e,r)))).next((g=>(f=Date.now(),Oa()<=Ge.DEBUG&&ve("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-p}ms
	Determined least recently used ${i} in `+(u-l)+`ms
	Removed ${o} targets in `+(h-u)+`ms
	Removed ${g} documents in `+(f-h)+`ms
Total Duration: ${f-p}ms`),re.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:g}))))}}function tO(t,e){return new eO(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nO{constructor(){this.changes=new Ho((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,mn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?re.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rO{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iO{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,n)))).next((i=>(r!==null&&Vu(r.mutation,i,Jn.empty(),gt.now()),i)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,Qe()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=Qe()){const i=bo();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,r).next((o=>{let l=ku();return o.forEach(((u,h)=>{l=l.insert(u,h.overlayedDocument)})),l}))))}getOverlayedDocuments(e,n){const r=bo();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,Qe())))}populateOverlays(e,n,r){const i=[];return r.forEach((o=>{n.has(o)||i.push(o)})),this.documentOverlayCache.getOverlays(e,i).next((o=>{o.forEach(((l,u)=>{n.set(l,u)}))}))}computeViews(e,n,r,i){let o=Hi();const l=Lu(),u=(function(){return Lu()})();return n.forEach(((h,f)=>{const p=r.get(f.key);i.has(f.key)&&(p===void 0||p.mutation instanceof qs)?o=o.insert(f.key,f):p!==void 0?(l.set(f.key,p.mutation.getFieldMask()),Vu(p.mutation,f,p.mutation.getFieldMask(),gt.now())):l.set(f.key,Jn.empty())})),this.recalculateAndSaveOverlays(e,o).next((h=>(h.forEach(((f,p)=>l.set(f,p))),n.forEach(((f,p)=>u.set(f,new rO(p,l.get(f)??null)))),u)))}recalculateAndSaveOverlays(e,n){const r=Lu();let i=new It(((l,u)=>l-u)),o=Qe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((l=>{for(const u of l)u.keys().forEach((h=>{const f=n.get(h);if(f===null)return;let p=r.get(h)||Jn.empty();p=u.applyToLocalView(f,p),r.set(h,p);const g=(i.get(u.batchId)||Qe()).add(h);i=i.insert(u.batchId,g)}))})).next((()=>{const l=[],u=i.getReverseIterator();for(;u.hasNext();){const h=u.getNext(),f=h.key,p=h.value,g=fI();p.forEach((v=>{if(!o.has(v)){const x=vI(n.get(v),r.get(v));x!==null&&g.set(v,x),o=o.add(v)}})),l.push(this.documentOverlayCache.saveOverlays(e,f,g))}return re.waitFor(l)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,i){return rM(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):oI(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next((o=>{const l=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):re.resolve(bo());let u=Qu,h=o;return l.next((f=>re.forEach(f,((p,g)=>(u<g.largestBatchId&&(u=g.largestBatchId),o.get(p)?re.resolve():this.remoteDocumentCache.getEntry(e,p).next((v=>{h=h.insert(p,v)}))))).next((()=>this.populateOverlays(e,f,o))).next((()=>this.computeViews(e,h,f,Qe()))).next((p=>({batchId:u,changes:hI(p)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ae(n)).next((r=>{let i=ku();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const o=n.collectionGroup;let l=ku();return this.indexManager.getCollectionParents(e,o).next((u=>re.forEach(u,(h=>{const f=(function(g,v){return new xl(v,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)})(n,h.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,r,i).next((p=>{p.forEach(((g,v)=>{l=l.insert(g,v)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i)))).next((l=>{o.forEach(((h,f)=>{const p=f.getKey();l.get(p)===null&&(l=l.insert(p,mn.newInvalidDocument(p)))}));let u=ku();return l.forEach(((h,f)=>{const p=o.get(h);p!==void 0&&Vu(p.mutation,f,Jn.empty(),gt.now()),ld(n,f)&&(u=u.insert(h,f))})),u}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sO{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return re.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:fi(i.createTime)}})(n)),re.resolve()}getNamedQuery(e,n){return re.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,(function(i){return{name:i.name,query:KM(i.bundledQuery),readTime:fi(i.readTime)}})(n)),re.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oO{constructor(){this.overlays=new It(Ae.comparator),this.Lr=new Map}getOverlay(e,n){return re.resolve(this.overlays.get(n))}getOverlays(e,n){const r=bo();return re.forEach(n,(i=>this.getOverlay(e,i).next((o=>{o!==null&&r.set(i,o)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((i,o)=>{this.bt(e,n,o)})),re.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Lr.get(r);return i!==void 0&&(i.forEach((o=>this.overlays=this.overlays.remove(o))),this.Lr.delete(r)),re.resolve()}getOverlaysForCollection(e,n,r){const i=bo(),o=n.length+1,l=new Ae(n.child("")),u=this.overlays.getIteratorFrom(l);for(;u.hasNext();){const h=u.getNext().value,f=h.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===o&&h.largestBatchId>r&&i.set(h.getKey(),h)}return re.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new It(((f,p)=>f-p));const l=this.overlays.getIterator();for(;l.hasNext();){const f=l.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>r){let p=o.get(f.largestBatchId);p===null&&(p=bo(),o=o.insert(f.largestBatchId,p)),p.set(f.getKey(),f)}}const u=bo(),h=o.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach(((f,p)=>u.set(f,p))),!(u.size()>=i)););return re.resolve(u)}bt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const l=this.Lr.get(i.largestBatchId).delete(r.key);this.Lr.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new TM(n,r));let o=this.Lr.get(n);o===void 0&&(o=Qe(),this.Lr.set(n,o)),this.Lr.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aO{constructor(){this.sessionToken=an.EMPTY_BYTE_STRING}getSessionToken(e){return re.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,re.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nv{constructor(){this.kr=new Wt(Jt.Kr),this.qr=new Wt(Jt.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const r=new Jt(e,n);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Wr(new Jt(e,n))}Qr(e,n){e.forEach((r=>this.removeReference(r,n)))}Gr(e){const n=new Ae(new ct([])),r=new Jt(n,e),i=new Jt(n,e+1),o=[];return this.qr.forEachInRange([r,i],(l=>{this.Wr(l),o.push(l.key)})),o}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new Ae(new ct([])),r=new Jt(n,e),i=new Jt(n,e+1);let o=Qe();return this.qr.forEachInRange([r,i],(l=>{o=o.add(l.key)})),o}containsKey(e){const n=new Jt(e,0),r=this.kr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Jt{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return Ae.comparator(e.key,n.key)||Ke(e.Hr,n.Hr)}static Ur(e,n){return Ke(e.Hr,n.Hr)||Ae.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lO{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new Wt(Jt.Kr)}checkEmpty(e){return re.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const o=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new EM(o,n,r,i);this.mutationQueue.push(l);for(const u of i)this.Jr=this.Jr.add(new Jt(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return re.resolve(l)}lookupMutationBatch(e,n){return re.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Xr(r),o=i<0?0:i;return re.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return re.resolve(this.mutationQueue.length===0?Gy:this.Yn-1)}getAllMutationBatches(e){return re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Jt(n,0),i=new Jt(n,Number.POSITIVE_INFINITY),o=[];return this.Jr.forEachInRange([r,i],(l=>{const u=this.Zr(l.Hr);o.push(u)})),re.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Wt(Ke);return n.forEach((i=>{const o=new Jt(i,0),l=new Jt(i,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([o,l],(u=>{r=r.add(u.Hr)}))})),re.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let o=r;Ae.isDocumentKey(o)||(o=o.child(""));const l=new Jt(new Ae(o),0);let u=new Wt(Ke);return this.Jr.forEachWhile((h=>{const f=h.key.path;return!!r.isPrefixOf(f)&&(f.length===i&&(u=u.add(h.Hr)),!0)}),l),re.resolve(this.Yr(u))}Yr(e){const n=[];return e.forEach((r=>{const i=this.Zr(r);i!==null&&n.push(i)})),n}removeMutationBatch(e,n){rt(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return re.forEach(n.mutations,(i=>{const o=new Jt(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Jr=r}))}nr(e){}containsKey(e,n){const r=new Jt(n,0),i=this.Jr.firstAfterOrEqual(r);return re.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,re.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uO{constructor(e){this.ti=e,this.docs=(function(){return new It(Ae.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,l=this.ti(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return re.resolve(r?r.document.mutableCopy():mn.newInvalidDocument(n))}getEntries(e,n){let r=Hi();return n.forEach((i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():mn.newInvalidDocument(i))})),re.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=Hi();const l=n.path,u=new Ae(l.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(u);for(;h.hasNext();){const{key:f,value:{document:p}}=h.getNext();if(!l.isPrefixOf(f.path))break;f.path.length>l.length+1||NV(RV(p),r)<=0||(i.has(p.key)||ld(n,p))&&(o=o.insert(p.key,p.mutableCopy()))}return re.resolve(o)}getAllFromCollectionGroup(e,n,r,i){Ve(9500)}ni(e,n){return re.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new cO(this)}getSize(e){return re.resolve(this.size)}}class cO extends nO{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?n.push(this.Mr.addEntry(e,i)):this.Mr.removeEntry(r)})),re.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hO{constructor(e){this.persistence=e,this.ri=new Ho((n=>Yy(n)),Xy),this.lastRemoteSnapshotVersion=Ue.min(),this.highestTargetId=0,this.ii=0,this.si=new nv,this.targetCount=0,this.oi=ol._r()}forEachTarget(e,n){return this.ri.forEach(((r,i)=>n(i))),re.resolve()}getLastRemoteSnapshotVersion(e){return re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return re.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),re.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ii&&(this.ii=n),re.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new ol(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,re.resolve()}updateTargetData(e,n){return this.lr(n),re.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,re.resolve()}removeTargets(e,n,r){let i=0;const o=[];return this.ri.forEach(((l,u)=>{u.sequenceNumber<=n&&r.get(u.targetId)===null&&(this.ri.delete(l),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),re.waitFor(o).next((()=>i))}getTargetCount(e){return re.resolve(this.targetCount)}getTargetData(e,n){const r=this.ri.get(n)||null;return re.resolve(r)}addMatchingKeys(e,n,r){return this.si.$r(n,r),re.resolve()}removeMatchingKeys(e,n,r){this.si.Qr(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach((l=>{o.push(i.markPotentiallyOrphaned(e,l))})),re.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),re.resolve()}getMatchingKeysForTargetId(e,n){const r=this.si.jr(n);return re.resolve(r)}containsKey(e,n){return re.resolve(this.si.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(e,n){this._i={},this.overlays={},this.ai=new rd(0),this.ui=!1,this.ui=!0,this.ci=new aO,this.referenceDelegate=e(this),this.li=new hO(this),this.indexManager=new QM,this.remoteDocumentCache=(function(i){return new uO(i)})((r=>this.referenceDelegate.hi(r))),this.serializer=new GM(n),this.Pi=new sO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new oO,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this._i[e.toKey()];return r||(r=new lO(n,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,r){ve("MemoryPersistence","Starting transaction:",e);const i=new fO(this.ai.next());return this.referenceDelegate.Ti(),r(i).next((o=>this.referenceDelegate.Ii(i).next((()=>o)))).toPromise().then((o=>(i.raiseOnCommittedEvent(),o)))}Ei(e,n){return re.or(Object.values(this._i).map((r=>()=>r.containsKey(e,n))))}}class fO extends LV{constructor(e){super(),this.currentSequenceNumber=e}}class rv{constructor(e){this.persistence=e,this.Ri=new nv,this.Ai=null}static Vi(e){return new rv(e)}get di(){if(this.Ai)return this.Ai;throw Ve(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.di.delete(r.toString()),re.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.di.add(r.toString()),re.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),re.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach((i=>this.di.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((i=>{i.forEach((o=>this.di.add(o.toString())))})).next((()=>r.removeTargetData(e,n)))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return re.forEach(this.di,(r=>{const i=Ae.fromPath(r);return this.mi(e,i).next((o=>{o||n.removeEntry(i,Ue.min())}))})).next((()=>(this.Ai=null,n.apply(e))))}updateLimboDocument(e,n){return this.mi(e,n).next((r=>{r?this.di.delete(n.toString()):this.di.add(n.toString())}))}hi(e){return 0}mi(e,n){return re.or([()=>re.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Nf{constructor(e,n){this.persistence=e,this.fi=new Ho((r=>OV(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=tO(this,n)}static Vi(e,n){return new Nf(e,n)}Ti(){}Ii(e){return re.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((i=>r+i))))}pr(e){let n=0;return this.mr(e,(r=>{n++})).next((()=>n))}mr(e,n){return re.forEach(this.fi,((r,i)=>this.wr(e,r,i).next((o=>o?re.resolve():n(i)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ni(e,(l=>this.wr(e,l,n).next((u=>{u||(r++,o.removeEntry(l,Ue.min()))})))).next((()=>o.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),re.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),re.resolve()}removeReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),re.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),re.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=af(e.data.value)),n}wr(e,n,r){return re.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.fi.get(n);return re.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Ts=r,this.Is=i}static Es(e,n){let r=Qe(),i=Qe();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new iv(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pO{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return XD()?8:VV(_n())>0?6:4})()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const o={result:null};return this.gs(e,n).next((l=>{o.result=l})).next((()=>{if(!o.result)return this.ps(e,n,i,r).next((l=>{o.result=l}))})).next((()=>{if(o.result)return;const l=new dO;return this.ys(e,n,l).next((u=>{if(o.result=u,this.As)return this.ws(e,n,l,u.size)}))})).next((()=>o.result))}ws(e,n,r,i){return r.documentReadCount<this.Vs?(Oa()<=Ge.DEBUG&&ve("QueryEngine","SDK will not create cache indexes for query:",Fa(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),re.resolve()):(Oa()<=Ge.DEBUG&&ve("QueryEngine","Query:",Fa(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ds*i?(Oa()<=Ge.DEBUG&&ve("QueryEngine","The SDK decides to create cache indexes for query:",Fa(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,hi(n))):re.resolve())}gs(e,n){if(T1(n))return re.resolve(null);let r=hi(n);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(n.limit!==null&&i===1&&(n=Af(n,null,"F"),r=hi(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((o=>{const l=Qe(...o);return this.fs.getDocuments(e,l).next((u=>this.indexManager.getMinOffset(e,r).next((h=>{const f=this.bs(n,u);return this.Ss(n,f,l,h.readTime)?this.gs(e,Af(n,null,"F")):this.Ds(e,f,n,h)}))))})))))}ps(e,n,r,i){return T1(n)||i.isEqual(Ue.min())?re.resolve(null):this.fs.getDocuments(e,r).next((o=>{const l=this.bs(n,o);return this.Ss(n,l,r,i)?re.resolve(null):(Oa()<=Ge.DEBUG&&ve("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Fa(n)),this.Ds(e,l,n,PV(i,Qu)).next((u=>u)))}))}bs(e,n){let r=new Wt(uI(e));return n.forEach(((i,o)=>{ld(e,o)&&(r=r.add(o))})),r}Ss(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ys(e,n,r){return Oa()<=Ge.DEBUG&&ve("QueryEngine","Using full collection scan to execute query:",Fa(n)),this.fs.getDocumentsMatchingQuery(e,n,Ms.min(),r)}Ds(e,n,r,i){return this.fs.getDocumentsMatchingQuery(e,r,i).next((o=>(n.forEach((l=>{o=o.insert(l.key,l)})),o)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sv="LocalStore",mO=3e8;class gO{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.vs=new It(Ke),this.Fs=new Ho((o=>Yy(o)),Xy),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new iO(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.vs)))}}function yO(t,e,n,r){return new gO(t,e,n,r)}async function LI(t,e){const n=je(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next((o=>(i=o,n.Os(e),n.mutationQueue.getAllMutationBatches(r)))).next((o=>{const l=[],u=[];let h=Qe();for(const f of i){l.push(f.batchId);for(const p of f.mutations)h=h.add(p.key)}for(const f of o){u.push(f.batchId);for(const p of f.mutations)h=h.add(p.key)}return n.localDocuments.getDocuments(r,h).next((f=>({Ns:f,removedBatchIds:l,addedBatchIds:u})))}))}))}function vO(t,e){const n=je(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),o=n.xs.newChangeBuffer({trackRemovals:!0});return(function(u,h,f,p){const g=f.batch,v=g.keys();let x=re.resolve();return v.forEach((T=>{x=x.next((()=>p.getEntry(h,T))).next((I=>{const b=f.docVersions.get(T);rt(b!==null,48541),I.version.compareTo(b)<0&&(g.applyToRemoteDocument(I,f),I.isValidDocument()&&(I.setReadTime(f.commitVersion),p.addEntry(I)))}))})),x.next((()=>u.mutationQueue.removeMutationBatch(h,g)))})(n,r,e,o).next((()=>o.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(u){let h=Qe();for(let f=0;f<u.mutationResults.length;++f)u.mutationResults[f].transformResults.length>0&&(h=h.add(u.batch.mutations[f].key));return h})(e)))).next((()=>n.localDocuments.getDocuments(r,i)))}))}function VI(t){const e=je(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.li.getLastRemoteSnapshotVersion(n)))}function wO(t,e){const n=je(t),r=e.snapshotVersion;let i=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const l=n.xs.newChangeBuffer({trackRemovals:!0});i=n.vs;const u=[];e.targetChanges.forEach(((p,g)=>{const v=i.get(g);if(!v)return;u.push(n.li.removeMatchingKeys(o,p.removedDocuments,g).next((()=>n.li.addMatchingKeys(o,p.addedDocuments,g))));let x=v.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(g)!==null?x=x.withResumeToken(an.EMPTY_BYTE_STRING,Ue.min()).withLastLimboFreeSnapshotVersion(Ue.min()):p.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(p.resumeToken,r)),i=i.insert(g,x),(function(I,b,N){return I.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-I.snapshotVersion.toMicroseconds()>=mO?!0:N.addedDocuments.size+N.modifiedDocuments.size+N.removedDocuments.size>0})(v,x,p)&&u.push(n.li.updateTargetData(o,x))}));let h=Hi(),f=Qe();if(e.documentUpdates.forEach((p=>{e.resolvedLimboDocuments.has(p)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(o,p))})),u.push(_O(o,l,e.documentUpdates).next((p=>{h=p.Bs,f=p.Ls}))),!r.isEqual(Ue.min())){const p=n.li.getLastRemoteSnapshotVersion(o).next((g=>n.li.setTargetsMetadata(o,o.currentSequenceNumber,r)));u.push(p)}return re.waitFor(u).next((()=>l.apply(o))).next((()=>n.localDocuments.getLocalViewOfDocuments(o,h,f))).next((()=>h))})).then((o=>(n.vs=i,o)))}function _O(t,e,n){let r=Qe(),i=Qe();return n.forEach((o=>r=r.add(o))),e.getEntries(t,r).next((o=>{let l=Hi();return n.forEach(((u,h)=>{const f=o.get(u);h.isFoundDocument()!==f.isFoundDocument()&&(i=i.add(u)),h.isNoDocument()&&h.version.isEqual(Ue.min())?(e.removeEntry(u,h.readTime),l=l.insert(u,h)):!f.isValidDocument()||h.version.compareTo(f.version)>0||h.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(h),l=l.insert(u,h)):ve(sv,"Ignoring outdated watch update for ",u,". Current version:",f.version," Watch version:",h.version)})),{Bs:l,Ls:i}}))}function xO(t,e){const n=je(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Gy),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function EO(t,e){const n=je(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return n.li.getTargetData(r,e).next((o=>o?(i=o,re.resolve(i)):n.li.allocateTargetId(r).next((l=>(i=new bs(e,l,"TargetPurposeListen",r.currentSequenceNumber),n.li.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=n.vs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.vs=n.vs.insert(r.targetId,r),n.Fs.set(e,r.targetId)),r}))}async function Hg(t,e,n){const r=je(t),i=r.vs.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,(l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!_l(l))throw l;ve(sv,`Failed to update sequence numbers for target ${e}: ${l}`)}r.vs=r.vs.remove(e),r.Fs.delete(i.target)}function M1(t,e,n){const r=je(t);let i=Ue.min(),o=Qe();return r.persistence.runTransaction("Execute query","readwrite",(l=>(function(h,f,p){const g=je(h),v=g.Fs.get(p);return v!==void 0?re.resolve(g.vs.get(v)):g.li.getTargetData(f,p)})(r,l,hi(e)).next((u=>{if(u)return i=u.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(l,u.targetId).next((h=>{o=h}))})).next((()=>r.Cs.getDocumentsMatchingQuery(l,e,n?i:Ue.min(),n?o:Qe()))).next((u=>(TO(r,oM(e),u),{documents:u,ks:o})))))}function TO(t,e,n){let r=t.Ms.get(e)||Ue.min();n.forEach(((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)})),t.Ms.set(e,r)}class O1{constructor(){this.activeTargetIds=fM()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class kO{constructor(){this.vo=new O1,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,r){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new O1,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SO{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F1="ConnectivityMonitor";class j1{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){ve(F1,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){ve(F1,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wh=null;function Wg(){return Wh===null?Wh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Wh++,"0x"+Wh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rm="RestConnection",IO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class CO{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.$o=this.databaseId.database===If?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,o){const l=Wg(),u=this.Qo(e,n.toUriEncodedString());ve(Rm,`Sending RPC '${e}' ${l}:`,u,r);const h={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(h,i,o);const{host:f}=new URL(u),p=gl(f);return this.zo(e,u,h,r,p).then((g=>(ve(Rm,`Received RPC '${e}' ${l}: `,g),g)),(g=>{throw Oo(Rm,`RPC '${e}' ${l} failed with error: `,g,"url: ",u,"request:",r),g}))}jo(e,n,r,i,o,l){return this.Wo(e,n,r,i,o)}Go(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+vl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((i,o)=>e[o]=i)),r&&r.headers.forEach(((i,o)=>e[o]=i))}Qo(e,n){const r=IO[e];let i=`${this.qo}/v1/${n}:${r}`;return this.databaseInfo.apiKey&&(i=`${i}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),i}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bO{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dn="WebChannelConnection",yu=(t,e,n)=>{t.listen(e,(r=>{try{n(r)}catch(i){setTimeout((()=>{throw i}),0)}}))};class Qa extends CO{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Qa.c_){const e=FS();yu(e,OS.STAT_EVENT,(n=>{n.stat===Lg.PROXY?ve(dn,"STAT_EVENT: detected buffering proxy"):n.stat===Lg.NOPROXY&&ve(dn,"STAT_EVENT: detected no buffering proxy")})),Qa.c_=!0}}zo(e,n,r,i,o){const l=Wg();return new Promise(((u,h)=>{const f=new VS;f.setWithCredentials(!0),f.listenOnce(MS.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case of.NO_ERROR:const g=f.getResponseJson();ve(dn,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(g)),u(g);break;case of.TIMEOUT:ve(dn,`RPC '${e}' ${l} timed out`),h(new ge(te.DEADLINE_EXCEEDED,"Request time out"));break;case of.HTTP_ERROR:const v=f.getStatus();if(ve(dn,`RPC '${e}' ${l} failed with status:`,v,"response text:",f.getResponseText()),v>0){let x=f.getResponseJson();Array.isArray(x)&&(x=x[0]);const T=x==null?void 0:x.error;if(T&&T.status&&T.message){const I=(function(N){const z=N.toLowerCase().replace(/_/g,"-");return Object.values(te).indexOf(z)>=0?z:te.UNKNOWN})(T.status);h(new ge(I,T.message))}else h(new ge(te.UNKNOWN,"Server responded with status "+f.getStatus()))}else h(new ge(te.UNAVAILABLE,"Connection failed."));break;default:Ve(9055,{l_:e,streamId:l,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{ve(dn,`RPC '${e}' ${l} completed.`)}}));const p=JSON.stringify(i);ve(dn,`RPC '${e}' ${l} sending request:`,i),f.send(n,"POST",p,r,15)}))}T_(e,n,r){const i=Wg(),o=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=this.createWebChannelTransport(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Go(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=o.join("");ve(dn,`Creating RPC '${e}' stream ${i}: ${f}`,u);const p=l.createWebChannel(f,u);this.I_(p);let g=!1,v=!1;const x=new bO({Ho:T=>{v?ve(dn,`Not sending because RPC '${e}' stream ${i} is closed:`,T):(g||(ve(dn,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),ve(dn,`RPC '${e}' stream ${i} sending:`,T),p.send(T))},Jo:()=>p.close()});return yu(p,Tu.EventType.OPEN,(()=>{v||(ve(dn,`RPC '${e}' stream ${i} transport opened.`),x.i_())})),yu(p,Tu.EventType.CLOSE,(()=>{v||(v=!0,ve(dn,`RPC '${e}' stream ${i} transport closed`),x.o_(),this.E_(p))})),yu(p,Tu.EventType.ERROR,(T=>{v||(v=!0,Oo(dn,`RPC '${e}' stream ${i} transport errored. Name:`,T.name,"Message:",T.message),x.o_(new ge(te.UNAVAILABLE,"The operation could not be completed")))})),yu(p,Tu.EventType.MESSAGE,(T=>{var I;if(!v){const b=T.data[0];rt(!!b,16349);const N=b,z=(N==null?void 0:N.error)||((I=N[0])==null?void 0:I.error);if(z){ve(dn,`RPC '${e}' stream ${i} received error:`,z);const U=z.status;let J=(function(O){const A=Ft[O];if(A!==void 0)return _I(A)})(U),X=z.message;U==="NOT_FOUND"&&X.includes("database")&&X.includes("does not exist")&&X.includes(this.databaseId.database)&&Oo(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),J===void 0&&(J=te.INTERNAL,X="Unknown error status: "+U+" with message "+z.message),v=!0,x.o_(new ge(J,X)),p.close()}else ve(dn,`RPC '${e}' stream ${i} received:`,b),x.__(b)}})),Qa.u_(),setTimeout((()=>{x.s_()}),0),x}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((n=>n===e))}Go(e,n,r){super.Go(e,n,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return jS()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AO(t){return new Qa(t)}function Nm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dd(t){return new DM(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qa.c_=!1;class MI{constructor(e,n,r=1e3,i=1.5,o=6e4){this.Ci=e,this.timerId=n,this.R_=r,this.A_=i,this.V_=o,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&ve("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U1="PersistentStream";class OI{constructor(e,n,r,i,o,l,u,h){this.Ci=e,this.b_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=u,this.listener=h,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new MI(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===te.RESOURCE_EXHAUSTED?(qi(n.toString()),qi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===n&&this.G_(r,i)}),(r=>{e((()=>{const i=new ge(te.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,n){const r=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.Yo((()=>{r((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.H_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ve(U1,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget((()=>this.D_===e?n():(ve(U1,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class PO extends OI{constructor(e,n,r,i,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,l),this.serializer=o}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=MM(this.serializer,e),r=(function(o){if(!("targetChange"in o))return Ue.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?Ue.min():l.readTime?fi(l.readTime):Ue.min()})(e);return this.listener.J_(n,r)}Z_(e){const n={};n.database=qg(this.serializer),n.addTarget=(function(o,l){let u;const h=l.target;if(u=jg(h)?{documents:jM(o,h)}:{query:CI(o,h).ft},u.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){u.resumeToken=TI(o,l.resumeToken);const f=Bg(o,l.expectedCount);f!==null&&(u.expectedCount=f)}else if(l.snapshotVersion.compareTo(Ue.min())>0){u.readTime=Rf(o,l.snapshotVersion.toTimestamp());const f=Bg(o,l.expectedCount);f!==null&&(u.expectedCount=f)}return u})(this.serializer,e);const r=zM(this.serializer,e);r&&(n.labels=r),this.K_(n)}X_(e){const n={};n.database=qg(this.serializer),n.removeTarget=e,this.K_(n)}}class RO extends OI{constructor(e,n,r,i,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,l),this.serializer=o}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return rt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,rt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){rt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=FM(e.writeResults,e.commitTime),r=fi(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=qg(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>OM(this.serializer,r)))};this.K_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NO{}class DO extends NO{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new ge(te.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,l])=>this.connection.Wo(e,zg(n,r),i,o,l))).catch((o=>{throw o.name==="FirebaseError"?(o.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ge(te.UNKNOWN,o.toString())}))}jo(e,n,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,u])=>this.connection.jo(e,zg(n,r),i,l,u,o))).catch((l=>{throw l.name==="FirebaseError"?(l.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ge(te.UNKNOWN,l.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function LO(t,e,n,r){return new DO(t,e,n,r)}class VO{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(qi(n),this.aa=!1):ve("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fo="RemoteStore";class MO{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=o,this.Aa.Mo((l=>{r.enqueueAndForget((async()=>{Wo(this)&&(ve(Fo,"Restarting streams for network reachability change."),await(async function(h){const f=je(h);f.Ea.add(4),await gc(f),f.Va.set("Unknown"),f.Ea.delete(4),await pd(f)})(this))}))})),this.Va=new VO(r,i)}}async function pd(t){if(Wo(t))for(const e of t.Ra)await e(!0)}async function gc(t){for(const e of t.Ra)await e(!1)}function FI(t,e){const n=je(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),uv(n)?lv(n):El(n).O_()&&av(n,e))}function ov(t,e){const n=je(t),r=El(n);n.Ia.delete(e),r.O_()&&jI(n,e),n.Ia.size===0&&(r.O_()?r.L_():Wo(n)&&n.Va.set("Unknown"))}function av(t,e){if(t.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ue.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}El(t).Z_(e)}function jI(t,e){t.da.$e(e),El(t).X_(e)}function lv(t){t.da=new AM({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),El(t).start(),t.Va.ua()}function uv(t){return Wo(t)&&!El(t).x_()&&t.Ia.size>0}function Wo(t){return je(t).Ea.size===0}function UI(t){t.da=void 0}async function OO(t){t.Va.set("Online")}async function FO(t){t.Ia.forEach(((e,n)=>{av(t,e)}))}async function jO(t,e){UI(t),uv(t)?(t.Va.ha(e),lv(t)):t.Va.set("Unknown")}async function UO(t,e,n){if(t.Va.set("Online"),e instanceof EI&&e.state===2&&e.cause)try{await(async function(i,o){const l=o.cause;for(const u of o.targetIds)i.Ia.has(u)&&(await i.remoteSyncer.rejectListen(u,l),i.Ia.delete(u),i.da.removeTarget(u))})(t,e)}catch(r){ve(Fo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Df(t,r)}else if(e instanceof cf?t.da.Xe(e):e instanceof xI?t.da.st(e):t.da.tt(e),!n.isEqual(Ue.min()))try{const r=await VI(t.localStore);n.compareTo(r)>=0&&await(function(o,l){const u=o.da.Tt(l);return u.targetChanges.forEach(((h,f)=>{if(h.resumeToken.approximateByteSize()>0){const p=o.Ia.get(f);p&&o.Ia.set(f,p.withResumeToken(h.resumeToken,l))}})),u.targetMismatches.forEach(((h,f)=>{const p=o.Ia.get(h);if(!p)return;o.Ia.set(h,p.withResumeToken(an.EMPTY_BYTE_STRING,p.snapshotVersion)),jI(o,h);const g=new bs(p.target,h,f,p.sequenceNumber);av(o,g)})),o.remoteSyncer.applyRemoteEvent(u)})(t,n)}catch(r){ve(Fo,"Failed to raise snapshot:",r),await Df(t,r)}}async function Df(t,e,n){if(!_l(e))throw e;t.Ea.add(1),await gc(t),t.Va.set("Offline"),n||(n=()=>VI(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{ve(Fo,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await pd(t)}))}function BI(t,e){return e().catch((n=>Df(t,n,e)))}async function md(t){const e=je(t),n=Us(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Gy;for(;BO(e);)try{const i=await xO(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,zO(e,i)}catch(i){await Df(e,i)}zI(e)&&$I(e)}function BO(t){return Wo(t)&&t.Ta.length<10}function zO(t,e){t.Ta.push(e);const n=Us(t);n.O_()&&n.Y_&&n.ea(e.mutations)}function zI(t){return Wo(t)&&!Us(t).x_()&&t.Ta.length>0}function $I(t){Us(t).start()}async function $O(t){Us(t).ra()}async function qO(t){const e=Us(t);for(const n of t.Ta)e.ea(n.mutations)}async function HO(t,e,n){const r=t.Ta.shift(),i=Zy.from(r,e,n);await BI(t,(()=>t.remoteSyncer.applySuccessfulWrite(i))),await md(t)}async function WO(t,e){e&&Us(t).Y_&&await(async function(r,i){if((function(l){return IM(l)&&l!==te.ABORTED})(i.code)){const o=r.Ta.shift();Us(r).B_(),await BI(r,(()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i))),await md(r)}})(t,e),zI(t)&&$I(t)}async function B1(t,e){const n=je(t);n.asyncQueue.verifyOperationInProgress(),ve(Fo,"RemoteStore received new credentials");const r=Wo(n);n.Ea.add(3),await gc(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await pd(n)}async function GO(t,e){const n=je(t);e?(n.Ea.delete(2),await pd(n)):e||(n.Ea.add(2),await gc(n),n.Va.set("Unknown"))}function El(t){return t.ma||(t.ma=(function(n,r,i){const o=je(n);return o.sa(),new PO(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Zo:OO.bind(null,t),Yo:FO.bind(null,t),t_:jO.bind(null,t),J_:UO.bind(null,t)}),t.Ra.push((async e=>{e?(t.ma.B_(),uv(t)?lv(t):t.Va.set("Unknown")):(await t.ma.stop(),UI(t))}))),t.ma}function Us(t){return t.fa||(t.fa=(function(n,r,i){const o=je(n);return o.sa(),new RO(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),Yo:$O.bind(null,t),t_:WO.bind(null,t),ta:qO.bind(null,t),na:HO.bind(null,t)}),t.Ra.push((async e=>{e?(t.fa.B_(),await md(t)):(await t.fa.stop(),t.Ta.length>0&&(ve(Fo,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cv{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new ci,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){const l=Date.now()+r,u=new cv(e,n,l,i,o);return u.start(r),u}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ge(te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function hv(t,e){if(qi("AsyncQueue",`${e}: ${t}`),_l(t))return new ge(te.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{static emptySet(e){return new Ya(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Ae.comparator(n.key,r.key):(n,r)=>Ae.comparator(n.key,r.key),this.keyedMap=ku(),this.sortedSet=new It(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ya)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ya;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z1{constructor(){this.ga=new It(Ae.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ve(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class al{constructor(e,n,r,i,o,l,u,h,f){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=u,this.excludesMetadataChanges=h,this.hasCachedResults=f}static fromInitialDocuments(e,n,r,i,o){const l=[];return n.forEach((u=>{l.push({type:0,doc:u})})),new al(e,n,Ya.emptySet(n),l,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ad(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KO{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class QO{constructor(){this.queries=$1(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=je(n),o=i.queries;i.queries=$1(),o.forEach(((l,u)=>{for(const h of u.ba)h.onError(r)}))})(this,new ge(te.ABORTED,"Firestore shutting down"))}}function $1(){return new Ho((t=>lI(t)),ad)}async function fv(t,e){const n=je(t);let r=3;const i=e.query;let o=n.queries.get(i);o?!o.Sa()&&e.Da()&&(r=2):(o=new KO,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await n.onListen(i,!0);break;case 1:o.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(l){const u=hv(l,`Initialization of query '${Fa(e.query)}' failed`);return void e.onError(u)}n.queries.set(i,o),o.ba.push(e),e.va(n.onlineState),o.wa&&e.Fa(o.wa)&&pv(n)}async function dv(t,e){const n=je(t),r=e.query;let i=3;const o=n.queries.get(r);if(o){const l=o.ba.indexOf(e);l>=0&&(o.ba.splice(l,1),o.ba.length===0?i=e.Da()?0:1:!o.Sa()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function YO(t,e){const n=je(t);let r=!1;for(const i of e){const o=i.query,l=n.queries.get(o);if(l){for(const u of l.ba)u.Fa(i)&&(r=!0);l.wa=i}}r&&pv(n)}function XO(t,e,n){const r=je(t),i=r.queries.get(e);if(i)for(const o of i.ba)o.onError(n);r.queries.delete(e)}function pv(t){t.Ca.forEach((e=>{e.next()}))}var Gg,q1;(q1=Gg||(Gg={})).Ma="default",q1.Cache="cache";class mv{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new al(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=al.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Gg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(e){this.key=e}}class HI{constructor(e){this.key=e}}class JO{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Qe(),this.mutatedKeys=Qe(),this.eu=uI(e),this.tu=new Ya(this.eu)}get nu(){return this.Za}ru(e,n){const r=n?n.iu:new z1,i=n?n.tu:this.tu;let o=n?n.mutatedKeys:this.mutatedKeys,l=i,u=!1;const h=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,f=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((p,g)=>{const v=i.get(p),x=ld(this.query,g)?g:null,T=!!v&&this.mutatedKeys.has(v.key),I=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let b=!1;v&&x?v.data.isEqual(x.data)?T!==I&&(r.track({type:3,doc:x}),b=!0):this.su(v,x)||(r.track({type:2,doc:x}),b=!0,(h&&this.eu(x,h)>0||f&&this.eu(x,f)<0)&&(u=!0)):!v&&x?(r.track({type:0,doc:x}),b=!0):v&&!x&&(r.track({type:1,doc:v}),b=!0,(h||f)&&(u=!0)),b&&(x?(l=l.add(x),o=I?o.add(p):o.delete(p)):(l=l.delete(p),o=o.delete(p)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const p=this.query.limitType==="F"?l.last():l.first();l=l.delete(p.key),o=o.delete(p.key),r.track({type:1,doc:p})}return{tu:l,iu:r,Ss:u,mutatedKeys:o}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const l=e.iu.ya();l.sort(((p,g)=>(function(x,T){const I=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ve(20277,{Vt:b})}};return I(x)-I(T)})(p.type,g.type)||this.eu(p.doc,g.doc))),this.ou(r),i=i??!1;const u=n&&!i?this._u():[],h=this.Ya.size===0&&this.current&&!i?1:0,f=h!==this.Xa;return this.Xa=h,l.length!==0||f?{snapshot:new al(this.query,e.tu,o,l,e.mutatedKeys,h===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new z1,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Za=this.Za.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Za=this.Za.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Qe(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))}));const n=[];return e.forEach((r=>{this.Ya.has(r)||n.push(new HI(r))})),this.Ya.forEach((r=>{e.has(r)||n.push(new qI(r))})),n}cu(e){this.Za=e.ks,this.Ya=Qe();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return al.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const gv="SyncEngine";class ZO{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class e4{constructor(e){this.key=e,this.hu=!1}}class t4{constructor(e,n,r,i,o,l){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new Ho((u=>lI(u)),ad),this.Iu=new Map,this.Eu=new Set,this.Ru=new It(Ae.comparator),this.Au=new Map,this.Vu=new nv,this.du={},this.mu=new Map,this.fu=ol.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function n4(t,e,n=!0){const r=XI(t);let i;const o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=await WI(r,e,n,!0),i}async function r4(t,e){const n=XI(t);await WI(n,e,!0,!1)}async function WI(t,e,n,r){const i=await EO(t.localStore,hi(e)),o=i.targetId,l=t.sharedClientState.addLocalQueryTarget(o,n);let u;return r&&(u=await i4(t,e,o,l==="current",i.resumeToken)),t.isPrimaryClient&&n&&FI(t.remoteStore,i),u}async function i4(t,e,n,r,i){t.pu=(g,v,x)=>(async function(I,b,N,z){let U=b.view.ru(N);U.Ss&&(U=await M1(I.localStore,b.query,!1).then((({documents:O})=>b.view.ru(O,U))));const J=z&&z.targetChanges.get(b.targetId),X=z&&z.targetMismatches.get(b.targetId)!=null,H=b.view.applyChanges(U,I.isPrimaryClient,J,X);return W1(I,b.targetId,H.au),H.snapshot})(t,g,v,x);const o=await M1(t.localStore,e,!0),l=new JO(e,o.ks),u=l.ru(o.documents),h=mc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),f=l.applyChanges(u,t.isPrimaryClient,h);W1(t,n,f.au);const p=new ZO(e,n,l);return t.Tu.set(e,p),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),f.snapshot}async function s4(t,e,n){const r=je(t),i=r.Tu.get(e),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter((l=>!ad(l,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Hg(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&ov(r.remoteStore,i.targetId),Kg(r,i.targetId)})).catch(wl)):(Kg(r,i.targetId),await Hg(r.localStore,i.targetId,!0))}async function o4(t,e){const n=je(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),ov(n.remoteStore,r.targetId))}async function a4(t,e,n){const r=p4(t);try{const i=await(function(l,u){const h=je(l),f=gt.now(),p=u.reduce(((x,T)=>x.add(T.key)),Qe());let g,v;return h.persistence.runTransaction("Locally write mutations","readwrite",(x=>{let T=Hi(),I=Qe();return h.xs.getEntries(x,p).next((b=>{T=b,T.forEach(((N,z)=>{z.isValidDocument()||(I=I.add(N))}))})).next((()=>h.localDocuments.getOverlayedDocuments(x,T))).next((b=>{g=b;const N=[];for(const z of u){const U=_M(z,g.get(z.key).overlayedDocument);U!=null&&N.push(new qs(z.key,U,ZS(U.value.mapValue),bn.exists(!0)))}return h.mutationQueue.addMutationBatch(x,f,N,u)})).next((b=>{v=b;const N=b.applyToLocalDocumentSet(g,I);return h.documentOverlayCache.saveOverlays(x,b.batchId,N)}))})).then((()=>({batchId:v.batchId,changes:hI(g)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(l,u,h){let f=l.du[l.currentUser.toKey()];f||(f=new It(Ke)),f=f.insert(u,h),l.du[l.currentUser.toKey()]=f})(r,i.batchId,n),await yc(r,i.changes),await md(r.remoteStore)}catch(i){const o=hv(i,"Failed to persist write");n.reject(o)}}async function GI(t,e){const n=je(t);try{const r=await wO(n.localStore,e);e.targetChanges.forEach(((i,o)=>{const l=n.Au.get(o);l&&(rt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?l.hu=!0:i.modifiedDocuments.size>0?rt(l.hu,14607):i.removedDocuments.size>0&&(rt(l.hu,42227),l.hu=!1))})),await yc(n,r,e)}catch(r){await wl(r)}}function H1(t,e,n){const r=je(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach(((o,l)=>{const u=l.view.va(e);u.snapshot&&i.push(u.snapshot)})),(function(l,u){const h=je(l);h.onlineState=u;let f=!1;h.queries.forEach(((p,g)=>{for(const v of g.ba)v.va(u)&&(f=!0)})),f&&pv(h)})(r.eventManager,e),i.length&&r.Pu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function l4(t,e,n){const r=je(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),o=i&&i.key;if(o){let l=new It(Ae.comparator);l=l.insert(o,mn.newNoDocument(o,Ue.min()));const u=Qe().add(o),h=new fd(Ue.min(),new Map,new It(Ke),l,u);await GI(r,h),r.Ru=r.Ru.remove(o),r.Au.delete(e),yv(r)}else await Hg(r.localStore,e,!1).then((()=>Kg(r,e,n))).catch(wl)}async function u4(t,e){const n=je(t),r=e.batch.batchId;try{const i=await vO(n.localStore,e);QI(n,r,null),KI(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await yc(n,i)}catch(i){await wl(i)}}async function c4(t,e,n){const r=je(t);try{const i=await(function(l,u){const h=je(l);return h.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let p;return h.mutationQueue.lookupMutationBatch(f,u).next((g=>(rt(g!==null,37113),p=g.keys(),h.mutationQueue.removeMutationBatch(f,g)))).next((()=>h.mutationQueue.performConsistencyCheck(f))).next((()=>h.documentOverlayCache.removeOverlaysForBatchId(f,p,u))).next((()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,p))).next((()=>h.localDocuments.getDocuments(f,p)))}))})(r.localStore,e);QI(r,e,n),KI(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await yc(r,i)}catch(i){await wl(i)}}function KI(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function QI(t,e,n){const r=je(t);let i=r.du[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.du[r.currentUser.toKey()]=i}}function Kg(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Vu.Gr(e).forEach((r=>{t.Vu.containsKey(r)||YI(t,r)}))}function YI(t,e){t.Eu.delete(e.path.canonicalString());const n=t.Ru.get(e);n!==null&&(ov(t.remoteStore,n),t.Ru=t.Ru.remove(e),t.Au.delete(n),yv(t))}function W1(t,e,n){for(const r of n)r instanceof qI?(t.Vu.addReference(r.key,e),h4(t,r)):r instanceof HI?(ve(gv,"Document no longer in limbo: "+r.key),t.Vu.removeReference(r.key,e),t.Vu.containsKey(r.key)||YI(t,r.key)):Ve(19791,{wu:r})}function h4(t,e){const n=e.key,r=n.path.canonicalString();t.Ru.get(n)||t.Eu.has(r)||(ve(gv,"New document in limbo: "+n),t.Eu.add(r),yv(t))}function yv(t){for(;t.Eu.size>0&&t.Ru.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Ae(ct.fromString(e)),r=t.fu.next();t.Au.set(r,new e4(n)),t.Ru=t.Ru.insert(n,r),FI(t.remoteStore,new bs(hi(od(n.path)),r,"TargetPurposeLimboResolution",rd.ce))}}async function yc(t,e,n){const r=je(t),i=[],o=[],l=[];r.Tu.isEmpty()||(r.Tu.forEach(((u,h)=>{l.push(r.pu(h,e,n).then((f=>{var p;if((f||n)&&r.isPrimaryClient){const g=f?!f.fromCache:(p=n==null?void 0:n.targetChanges.get(h.targetId))==null?void 0:p.current;r.sharedClientState.updateQueryState(h.targetId,g?"current":"not-current")}if(f){i.push(f);const g=iv.Es(h.targetId,f);o.push(g)}})))})),await Promise.all(l),r.Pu.J_(i),await(async function(h,f){const p=je(h);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",(g=>re.forEach(f,(v=>re.forEach(v.Ts,(x=>p.persistence.referenceDelegate.addReference(g,v.targetId,x))).next((()=>re.forEach(v.Is,(x=>p.persistence.referenceDelegate.removeReference(g,v.targetId,x)))))))))}catch(g){if(!_l(g))throw g;ve(sv,"Failed to update sequence numbers: "+g)}for(const g of f){const v=g.targetId;if(!g.fromCache){const x=p.vs.get(v),T=x.snapshotVersion,I=x.withLastLimboFreeSnapshotVersion(T);p.vs=p.vs.insert(v,I)}}})(r.localStore,o))}async function f4(t,e){const n=je(t);if(!n.currentUser.isEqual(e)){ve(gv,"User change. New user:",e.toKey());const r=await LI(n.localStore,e);n.currentUser=e,(function(o,l){o.mu.forEach((u=>{u.forEach((h=>{h.reject(new ge(te.CANCELLED,l))}))})),o.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await yc(n,r.Ns)}}function d4(t,e){const n=je(t),r=n.Au.get(e);if(r&&r.hu)return Qe().add(r.key);{let i=Qe();const o=n.Iu.get(e);if(!o)return i;for(const l of o){const u=n.Tu.get(l);i=i.unionWith(u.view.nu)}return i}}function XI(t){const e=je(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=GI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=d4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=l4.bind(null,e),e.Pu.J_=YO.bind(null,e.eventManager),e.Pu.yu=XO.bind(null,e.eventManager),e}function p4(t){const e=je(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=u4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=c4.bind(null,e),e}class Lf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=dd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return yO(this.persistence,new pO,e.initialUser,this.serializer)}Cu(e){return new DI(rv.Vi,this.serializer)}Du(e){return new kO}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Lf.provider={build:()=>new Lf};class m4 extends Lf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){rt(this.persistence.referenceDelegate instanceof Nf,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new ZM(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?On.withCacheSize(this.cacheSizeBytes):On.DEFAULT;return new DI((r=>Nf.Vi(r,n)),this.serializer)}}class Qg{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>H1(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=f4.bind(null,this.syncEngine),await GO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new QO})()}createDatastore(e){const n=dd(e.databaseInfo.databaseId),r=AO(e.databaseInfo);return LO(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,i,o,l,u){return new MO(r,i,o,l,u)})(this.localStore,this.datastore,e.asyncQueue,(n=>H1(this.syncEngine,n,0)),(function(){return j1.v()?new j1:new SO})())}createSyncEngine(e,n){return(function(i,o,l,u,h,f,p){const g=new t4(i,o,l,u,h,f);return p&&(g.gu=!0),g})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(i){const o=je(i);ve(Fo,"RemoteStore shutting down."),o.Ea.add(5),await gc(o),o.Aa.shutdown(),o.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Qg.provider={build:()=>new Qg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vv{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):qi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bs="FirestoreClient";class g4{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this._databaseInfo=i,this.user=pn.UNAUTHENTICATED,this.clientId=Wy.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,(async l=>{ve(Bs,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(r,(l=>(ve(Bs,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ci;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=hv(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Dm(t,e){t.asyncQueue.verifyOperationInProgress(),ve(Bs,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async i=>{r.isEqual(i)||(await LI(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function G1(t,e){t.asyncQueue.verifyOperationInProgress();const n=await y4(t);ve(Bs,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>B1(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,i)=>B1(e.remoteStore,i))),t._onlineComponents=e}async function y4(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ve(Bs,"Using user provided OfflineComponentProvider");try{await Dm(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===te.FAILED_PRECONDITION||i.code===te.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;Oo("Error using user provided cache. Falling back to memory cache: "+n),await Dm(t,new Lf)}}else ve(Bs,"Using default OfflineComponentProvider"),await Dm(t,new m4(void 0));return t._offlineComponents}async function wv(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ve(Bs,"Using user provided OnlineComponentProvider"),await G1(t,t._uninitializedComponentsProvider._online)):(ve(Bs,"Using default OnlineComponentProvider"),await G1(t,new Qg))),t._onlineComponents}function v4(t){return wv(t).then((e=>e.syncEngine))}function w4(t){return wv(t).then((e=>e.datastore))}async function Vf(t){const e=await wv(t),n=e.eventManager;return n.onListen=n4.bind(null,e.syncEngine),n.onUnlisten=s4.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=r4.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=o4.bind(null,e.syncEngine),n}function _4(t,e,n,r){const i=new vv(r),o=new mv(e,i,n);return t.asyncQueue.enqueueAndForget((async()=>fv(await Vf(t),o))),()=>{i.Nu(),t.asyncQueue.enqueueAndForget((async()=>dv(await Vf(t),o)))}}function x4(t,e,n={}){const r=new ci;return t.asyncQueue.enqueueAndForget((async()=>(function(o,l,u,h,f){const p=new vv({next:v=>{p.Nu(),l.enqueueAndForget((()=>dv(o,g)));const x=v.docs.has(u);!x&&v.fromCache?f.reject(new ge(te.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&v.fromCache&&h&&h.source==="server"?f.reject(new ge(te.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(v)},error:v=>f.reject(v)}),g=new mv(od(u.path),p,{includeMetadataChanges:!0,Ka:!0});return fv(o,g)})(await Vf(t),t.asyncQueue,e,n,r))),r.promise}function E4(t,e,n={}){const r=new ci;return t.asyncQueue.enqueueAndForget((async()=>(function(o,l,u,h,f){const p=new vv({next:v=>{p.Nu(),l.enqueueAndForget((()=>dv(o,g))),v.fromCache&&h.source==="server"?f.reject(new ge(te.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(v)},error:v=>f.reject(v)}),g=new mv(u,p,{includeMetadataChanges:!0,Ka:!0});return fv(o,g)})(await Vf(t),t.asyncQueue,e,n,r))),r.promise}function T4(t,e,n){const r=new ci;return t.asyncQueue.enqueueAndForget((async()=>{try{const i=await w4(t);r.resolve((async function(l,u,h){var I;const f=je(l),{request:p,gt:g,parent:v}=UM(f.serializer,iM(u),h);f.connection.Ko||delete p.parent;const x=(await f.jo("RunAggregationQuery",f.serializer.databaseId,v,p,1)).filter((b=>!!b.result));rt(x.length===1,64727);const T=(I=x[0].result)==null?void 0:I.aggregateFields;return Object.keys(T).reduce(((b,N)=>(b[g[N]]=T[N],b)),{})})(i,e,n))}catch(i){r.reject(i)}})),r.promise}function k4(t,e){const n=new ci;return t.asyncQueue.enqueueAndForget((async()=>a4(await v4(t),e,n))),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JI(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S4="ComponentProvider",K1=new Map;function I4(t,e,n,r,i){return new BV(t,e,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,JI(i.experimentalLongPollingOptions),i.useFetchStreams,i.isUsingEmulator,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZI="firestore.googleapis.com",Q1=!0;class Y1{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ge(te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ZI,this.ssl=Q1}else this.host=e.host,this.ssl=e.ssl??Q1;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=NI;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<XM)throw new ge(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}AV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=JI(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ge(te.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ge(te.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ge(te.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class gd{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Y1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ge(te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ge(te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Y1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new wV;switch(r.type){case"firstParty":return new TV(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ge(te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=K1.get(n);r&&(ve(S4,"Removing Datastore"),K1.delete(n),r.terminate())})(this),Promise.resolve()}}function C4(t,e,n,r={}){var f;t=wn(t,gd);const i=gl(e),o=t._getSettings(),l={...o,emulatorOptions:t._getEmulatorOptions()},u=`${e}:${n}`;i&&(TS(`https://${u}`),kS("Firestore",!0)),o.host!==ZI&&o.host!==u&&Oo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h={...o,host:u,ssl:i,emulatorOptions:r};if(!Vs(h,l)&&(t._setSettings(h),r.mockUserToken)){let p,g;if(typeof r.mockUserToken=="string")p=r.mockUserToken,g=pn.MOCK_USER;else{p=$D(r.mockUserToken,(f=t._app)==null?void 0:f.options.projectId);const v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new ge(te.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new pn(v)}t._authCredentials=new _V(new BS(p,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Gi(this.firestore,e,this._query)}}class Pt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ns(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Pt(this.firestore,e,this._key)}toJSON(){return{type:Pt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(dc(n,Pt._jsonSchema))return new Pt(e,r||null,new Ae(ct.fromString(n.referencePath)))}}Pt._jsonSchemaVersion="firestore/documentReference/1.0",Pt._jsonSchema={type:zt("string",Pt._jsonSchemaVersion),referencePath:zt("string")};class Ns extends Gi{constructor(e,n,r){super(e,n,od(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Pt(this.firestore,null,new Ae(e))}withConverter(e){return new Ns(this.firestore,e,this._path)}}function ll(t,e,...n){if(t=St(t),zS("collection","path",e),t instanceof gd){const r=ct.fromString(e,...n);return u1(r),new Ns(t,null,r)}{if(!(t instanceof Pt||t instanceof Ns))throw new ge(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ct.fromString(e,...n));return u1(r),new Ns(t.firestore,null,r)}}function vi(t,e,...n){if(t=St(t),arguments.length===1&&(e=Wy.newId()),zS("doc","path",e),t instanceof gd){const r=ct.fromString(e,...n);return l1(r),new Pt(t,null,new Ae(r))}{if(!(t instanceof Pt||t instanceof Ns))throw new ge(te.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ct.fromString(e,...n));return l1(r),new Pt(t.firestore,t instanceof Ns?t.converter:null,new Ae(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X1="AsyncQueue";class J1{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new MI(this,"async_queue_retry"),this._c=()=>{const r=Nm();r&&ve(X1,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Nm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Nm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new ci;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!_l(e))throw e;ve(X1,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,qi("INTERNAL UNHANDLED ERROR: ",Z1(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=cv.createAndSchedule(this,e,n,r,(o=>this.hc(o)));return this.tc.push(i),i}uc(){this.nc&&Ve(47125,{Pc:Z1(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Z1(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Vr extends gd{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new J1,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new J1(e),this._firestoreClient=void 0,await e}}}function b4(t,e){const n=typeof t=="object"?t:td(),r=typeof t=="string"?t:If,i=qo(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=BD("firestore");o&&C4(i,...o)}return i}function Tl(t){if(t._terminated)throw new ge(te.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||A4(t),t._firestoreClient}function A4(t){var r,i,o,l;const e=t._freezeSettings(),n=I4(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,(i=t._app)==null?void 0:i.options.apiKey,e);t._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((l=e.localCache)!=null&&l._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new g4(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(h){const f=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(f),_online:f}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new dr(an.fromBase64String(e))}catch(n){throw new ge(te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new dr(an.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:dr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(dc(e,dr._jsonSchema))return dr.fromBase64String(e.bytes)}}dr._jsonSchemaVersion="firestore/bytes/1.0",dr._jsonSchema={type:zt("string",dr._jsonSchemaVersion),bytes:zt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ge(te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new on(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ge(te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ge(te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ke(this._lat,e._lat)||Ke(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:di._jsonSchemaVersion}}static fromJSON(e){if(dc(e,di._jsonSchema))return new di(e.latitude,e.longitude)}}di._jsonSchemaVersion="firestore/geoPoint/1.0",di._jsonSchema={type:zt("string",di._jsonSchemaVersion),latitude:zt("number"),longitude:zt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Pr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(dc(e,Pr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Pr(e.vectorValues);throw new ge(te.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Pr._jsonSchemaVersion="firestore/vectorValue/1.0",Pr._jsonSchema={type:zt("string",Pr._jsonSchemaVersion),vectorValues:zt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P4=/^__.*__$/;class R4{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new qs(e,this.data,this.fieldMask,n,this.fieldTransforms):new pc(e,this.data,n,this.fieldTransforms)}}class eC{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new qs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function tC(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ve(40011,{dataSource:t})}}class _v{constructor(e,n,r,i,o,l){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.validatePath(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new _v({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Mf(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(tC(this.dataSource)&&P4.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class N4{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||dd(e)}createContext(e,n,r,i=!1){return new _v({dataSource:e,methodName:n,targetDoc:r,path:on.emptyPath(),arrayElement:!1,hasConverter:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function vc(t){const e=t._freezeSettings(),n=dd(t._databaseId);return new N4(t._databaseId,!!e.ignoreUndefinedProperties,n)}function xv(t,e,n,r,i,o={}){const l=t.createContext(o.merge||o.mergeFields?2:0,e,n,i);Tv("Data must be an object, but it was:",l,r);const u=iC(r,l);let h,f;if(o.merge)h=new Jn(l.fieldMask),f=l.fieldTransforms;else if(o.mergeFields){const p=[];for(const g of o.mergeFields){const v=ul(e,g,n);if(!l.contains(v))throw new ge(te.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);aC(p,v)||p.push(v)}h=new Jn(p),f=l.fieldTransforms.filter((g=>h.covers(g.field)))}else h=null,f=l.fieldTransforms;return new R4(new kn(u),h,f)}class wd extends vd{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof wd}}class Ev extends vd{_toFieldTransform(e){return new gM(e.path,new ec)}isEqual(e){return e instanceof Ev}}function nC(t,e,n,r){const i=t.createContext(1,e,n);Tv("Data must be an object, but it was:",i,r);const o=[],l=kn.empty();$s(r,((h,f)=>{const p=oC(e,h,n);f=St(f);const g=i.childContextForFieldPath(p);if(f instanceof wd)o.push(p);else{const v=wc(f,g);v!=null&&(o.push(p),l.set(p,v))}}));const u=new Jn(o);return new eC(l,u,i.fieldTransforms)}function rC(t,e,n,r,i,o){const l=t.createContext(1,e,n),u=[ul(e,r,n)],h=[i];if(o.length%2!=0)throw new ge(te.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<o.length;v+=2)u.push(ul(e,o[v])),h.push(o[v+1]);const f=[],p=kn.empty();for(let v=u.length-1;v>=0;--v)if(!aC(f,u[v])){const x=u[v];let T=h[v];T=St(T);const I=l.childContextForFieldPath(x);if(T instanceof wd)f.push(x);else{const b=wc(T,I);b!=null&&(f.push(x),p.set(x,b))}}const g=new Jn(f);return new eC(p,g,l.fieldTransforms)}function D4(t,e,n,r=!1){return wc(n,t.createContext(r?4:3,e))}function wc(t,e){if(sC(t=St(t)))return Tv("Unsupported field value:",e,t),iC(t,e);if(t instanceof vd)return(function(r,i){if(!tC(i.dataSource))throw i.createError(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.createError(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(r,i){const o=[];let l=0;for(const u of r){let h=wc(u,i.childContextForArray(l));h==null&&(h={nullValue:"NULL_VALUE"}),o.push(h),l++}return{arrayValue:{values:o}}})(t,e)}return(function(r,i){if((r=St(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return dM(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=gt.fromDate(r);return{timestampValue:Rf(i.serializer,o)}}if(r instanceof gt){const o=new gt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Rf(i.serializer,o)}}if(r instanceof di)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof dr)return{bytesValue:TI(i.serializer,r._byteString)};if(r instanceof Pt){const o=i.databaseId,l=r.firestore._databaseId;if(!l.isEqual(o))throw i.createError(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:tv(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Pr)return(function(l,u){const h=l instanceof Pr?l.toArray():l;return{mapValue:{fields:{[XS]:{stringValue:JS},[Cf]:{arrayValue:{values:h.map((p=>{if(typeof p!="number")throw u.createError("VectorValues must only contain numeric values.");return Jy(u.serializer,p)}))}}}}}})(r,i);if(RI(r))return r._toProto(i.serializer);throw i.createError(`Unsupported field value: ${nd(r)}`)})(t,e)}function iC(t,e){const n={};return HS(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):$s(t,((r,i)=>{const o=wc(i,e.childContextForField(r));o!=null&&(n[r]=o)})),{mapValue:{fields:n}}}function sC(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof gt||t instanceof di||t instanceof dr||t instanceof Pt||t instanceof vd||t instanceof Pr||RI(t))}function Tv(t,e,n){if(!sC(n)||!$S(n)){const r=nd(n);throw r==="an object"?e.createError(t+" a custom object"):e.createError(t+" "+r)}}function ul(t,e,n){if((e=St(e))instanceof yd)return e._internalPath;if(typeof e=="string")return oC(t,e);throw Mf("Field path arguments must be of type string or ",t,!1,void 0,n)}const L4=new RegExp("[~\\*/\\[\\]]");function oC(t,e,n){if(e.search(L4)>=0)throw Mf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new yd(...e.split("."))._internalPath}catch{throw Mf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Mf(t,e,n,r,i){const o=r&&!r.isEmpty(),l=i!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let h="";return(o||l)&&(h+=" (found",o&&(h+=` in field ${r}`),l&&(h+=` in document ${i}`),h+=")"),new ge(te.INVALID_ARGUMENT,u+t+h)}function aC(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V4{convertValue(e,n="none"){switch(js(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Dt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Fs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ve(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return $s(e,((i,o)=>{r[i]=this.convertValue(o,n)})),r}convertVectorValue(e){var r,i,o;const n=(o=(i=(r=e.fields)==null?void 0:r[Cf].arrayValue)==null?void 0:i.values)==null?void 0:o.map((l=>Dt(l.doubleValue)));return new Pr(n)}convertGeoPoint(e){return new di(Dt(e.latitude),Dt(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=sd(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Yu(e));default:return null}}convertTimestamp(e){const n=Os(e);return new gt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ct.fromString(e);rt(PI(r),9688,{name:e});const i=new Xu(r.get(1),r.get(3)),o=new Ae(r.popFirst(5));return i.isEqual(n)||qi(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d extends V4{constructor(e){super(),this.firestore=e}convertBytes(e){return new dr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Pt(this.firestore,null,n)}}function eE(){return new Ev("serverTimestamp")}const tE="@firebase/firestore",nE="4.11.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rE(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const o of r)if(o in i&&typeof i[o]=="function")return!0;return!1})(t,["next","error","complete"])}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M4{constructor(e="count",n){this._internalFieldPath=n,this.type="AggregateField",this.aggregateType=e}}class O4{constructor(e,n,r){this._userDataWriter=n,this._data=r,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}_fieldsProto(){return new kn({mapValue:{fields:this._data}}).clone().value.mapValue.fields}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Pt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new F4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const n=this._document.data.field(ul("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class F4 extends lC{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uC(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ge(te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class kv{}class Sv extends kv{}function Iv(t,e,...n){let r=[];e instanceof kv&&r.push(e),r=r.concat(n),(function(o){const l=o.filter((h=>h instanceof bv)).length,u=o.filter((h=>h instanceof Cv)).length;if(l>1||l>0&&u>0)throw new ge(te.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)t=i._apply(t);return t}class Cv extends Sv{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Cv(e,n,r)}_apply(e){const n=this._parse(e);return cC(e._query,n),new Gi(e.firestore,e.converter,Ug(e._query,n))}_parse(e){const n=vc(e.firestore);return(function(o,l,u,h,f,p,g){let v;if(f.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new ge(te.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){sE(g,p);const T=[];for(const I of g)T.push(iE(h,o,I));v={arrayValue:{values:T}}}else v=iE(h,o,g)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||sE(g,p),v=D4(u,l,g,p==="in"||p==="not-in");return Bt.create(f,p,v)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class bv extends kv{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new bv(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:Lr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(i,o){let l=i;const u=o.getFlattenedFilters();for(const h of u)cC(l,h),l=Ug(l,h)})(e._query,n),new Gi(e.firestore,e.converter,Ug(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Av extends Sv{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Av(e,n)}_apply(e){const n=(function(i,o,l){if(i.startAt!==null)throw new ge(te.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new ge(te.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Zu(o,l)})(e._query,this._field,this._direction);return new Gi(e.firestore,e.converter,sM(e._query,n))}}function Pv(t,e="asc"){const n=e,r=ul("orderBy",t);return Av._create(r,n)}class Rv extends Sv{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Rv(e,n,r)}_apply(e){return new Gi(e.firestore,e.converter,Af(e._query,this._limit,this._limitType))}}function j4(t){return Rv._create("limit",t,"F")}function iE(t,e,n){if(typeof(n=St(n))=="string"){if(n==="")throw new ge(te.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!oI(e)&&n.indexOf("/")!==-1)throw new ge(te.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ct.fromString(n));if(!Ae.isDocumentKey(r))throw new ge(te.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return y1(t,new Ae(r))}if(n instanceof Pt)return y1(t,n._key);throw new ge(te.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${nd(n)}.`)}function sE(t,e){if(!Array.isArray(t)||t.length===0)throw new ge(te.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function cC(t,e){const n=(function(i,o){for(const l of i)for(const u of l.getFlattenedFilters())if(o.indexOf(u.op)>=0)return u.op;return null})(t.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new ge(te.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ge(te.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function Nv(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}function U4(){return new M4("count")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B4(t){return z4(t,{count:U4()})}function z4(t,e){const n=wn(t.firestore,Vr),r=Tl(n),i=jV(e,((o,l)=>new kM(l,o.aggregateType,o._internalFieldPath)));return T4(r,t._query,i).then((o=>(function(u,h,f){const p=new _d(u);return new O4(h,p,f)})(n,t,o)))}class Iu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class No extends lC{constructor(e,n,r,i,o,l){super(e,n,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new hf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(ul("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(te.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=No._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}No._jsonSchemaVersion="firestore/documentSnapshot/1.0",No._jsonSchema={type:zt("string",No._jsonSchemaVersion),bundleSource:zt("string","DocumentSnapshot"),bundleName:zt("string"),bundle:zt("string")};class hf extends No{data(e={}){return super.data(e)}}class Do{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Iu(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new hf(this._firestore,this._userDataWriter,r.key,r,new Iu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ge(te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let l=0;return i._snapshot.docChanges.map((u=>{const h=new hf(i._firestore,i._userDataWriter,u.doc.key,u.doc,new Iu(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);return u.doc,{type:"added",doc:h,oldIndex:-1,newIndex:l++}}))}{let l=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((u=>o||u.type!==3)).map((u=>{const h=new hf(i._firestore,i._userDataWriter,u.doc.key,u.doc,new Iu(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);let f=-1,p=-1;return u.type!==0&&(f=l.indexOf(u.doc.key),l=l.delete(u.doc.key)),u.type!==1&&(l=l.add(u.doc),p=l.indexOf(u.doc.key)),{type:$4(u.type),doc:h,oldIndex:f,newIndex:p}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(te.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Do._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Wy.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach((o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function $4(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ve(61501,{type:t})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Do._jsonSchemaVersion="firestore/querySnapshot/1.0",Do._jsonSchema={type:zt("string",Do._jsonSchemaVersion),bundleSource:zt("string","QuerySnapshot"),bundleName:zt("string"),bundle:zt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q4{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=vc(e)}set(e,n,r){this._verifyNotCommitted();const i=Lm(e,this._firestore),o=Nv(i.converter,n,r),l=xv(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(l.toMutation(i._key,bn.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const o=Lm(e,this._firestore);let l;return l=typeof(n=St(n))=="string"||n instanceof yd?rC(this._dataReader,"WriteBatch.update",o._key,n,r,i):nC(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(l.toMutation(o._key,bn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Lm(e,this._firestore);return this._mutations=this._mutations.concat(new hd(n._key,bn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ge(te.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Lm(t,e){if((t=St(t)).firestore!==e)throw new ge(te.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hC(t){t=wn(t,Pt);const e=wn(t.firestore,Vr),n=Tl(e);return x4(n,t._key).then((r=>dC(e,t,r)))}function H4(t){t=wn(t,Gi);const e=wn(t.firestore,Vr),n=Tl(e),r=new _d(e);return uC(t._query),E4(n,t._query).then((i=>new Do(e,r,t,i)))}function Of(t,e,n){t=wn(t,Pt);const r=wn(t.firestore,Vr),i=Nv(t.converter,e,n),o=vc(r);return _c(r,[xv(o,"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,bn.none())])}function W4(t,e,n,...r){t=wn(t,Pt);const i=wn(t.firestore,Vr),o=vc(i);let l;return l=typeof(e=St(e))=="string"||e instanceof yd?rC(o,"updateDoc",t._key,e,n,r):nC(o,"updateDoc",t._key,e),_c(i,[l.toMutation(t._key,bn.exists(!0))])}function fC(t){return _c(wn(t.firestore,Vr),[new hd(t._key,bn.none())])}function oE(t,e){const n=wn(t.firestore,Vr),r=vi(t),i=Nv(t.converter,e),o=vc(t.firestore);return _c(n,[xv(o,"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,bn.exists(!1))]).then((()=>r))}function Dv(t,...e){var f,p,g;t=St(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||rE(e[r])||(n=e[r++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(rE(e[r])){const v=e[r];e[r]=(f=v.next)==null?void 0:f.bind(v),e[r+1]=(p=v.error)==null?void 0:p.bind(v),e[r+2]=(g=v.complete)==null?void 0:g.bind(v)}let o,l,u;if(t instanceof Pt)l=wn(t.firestore,Vr),u=od(t._key.path),o={next:v=>{e[r]&&e[r](dC(l,t,v))},error:e[r+1],complete:e[r+2]};else{const v=wn(t,Gi);l=wn(v.firestore,Vr),u=v._query;const x=new _d(l);o={next:T=>{e[r]&&e[r](new Do(l,x,v,T))},error:e[r+1],complete:e[r+2]},uC(t._query)}const h=Tl(l);return _4(h,u,i,o)}function _c(t,e){const n=Tl(t);return k4(n,e)}function dC(t,e,n){const r=n.docs.get(e._key),i=new _d(t);return new No(t,i,e._key,r,new Iu(n.hasPendingWrites,n.fromCache),e.converter)}function G4(t){return t=wn(t,Vr),Tl(t),new q4(t,(e=>_c(t,e)))}(function(e,n=!0){vV(yl),gi(new Dr("firestore",((r,{instanceIdentifier:i,options:o})=>{const l=r.getProvider("app").getImmediate(),u=new Vr(new xV(r.getProvider("auth-internal")),new kV(l,r.getProvider("app-check-internal")),zV(l,i),l);return o={useFetchStreams:n,...o},u._setSettings(o),u}),"PUBLIC").setMultipleInstances(!0)),gr(tE,nE,e),gr(tE,nE,"esm2020")})();function pC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const K4=pC,mC=new $o("auth","Firebase",pC());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ff=new ed("@firebase/auth");function Q4(t,...e){Ff.logLevel<=Ge.WARN&&Ff.warn(`Auth (${yl}): ${t}`,...e)}function ff(t,...e){Ff.logLevel<=Ge.ERROR&&Ff.error(`Auth (${yl}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wi(t,...e){throw Vv(t,...e)}function Rr(t,...e){return Vv(t,...e)}function Lv(t,e,n){const r={...K4(),[e]:n};return new $o("auth","Firebase",r).create(e,{appName:t.name})}function Lo(t){return Lv(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Y4(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&wi(t,"argument-error"),Lv(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Vv(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return mC.create(t,...e)}function Fe(t,e,...n){if(!t)throw Vv(e,...n)}function Ui(t){const e="INTERNAL ASSERTION FAILED: "+t;throw ff(e),new Error(e)}function Wi(t,e){t||Ui(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yg(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function X4(){return aE()==="http:"||aE()==="https:"}function aE(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J4(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(X4()||SS()||"connection"in navigator)?navigator.onLine:!0}function Z4(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Wi(n>e,"Short delay should be less than long delay!"),this.isMobile=WD()||QD()}get(){return J4()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mv(t,e){Wi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ui("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ui("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ui("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eF={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tF=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],nF=new xc(3e4,6e4);function Ov(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function kl(t,e,n,r,i={}){return yC(t,i,async()=>{let o={},l={};r&&(e==="GET"?l=r:o={body:JSON.stringify(r)});const u=fc({key:t.config.apiKey,...l}).slice(1),h=await t._getAdditionalHeaders();h["Content-Type"]="application/json",t.languageCode&&(h["X-Firebase-Locale"]=t.languageCode);const f={method:e,headers:h,...o};return KD()||(f.referrerPolicy="no-referrer"),t.emulatorConfig&&gl(t.emulatorConfig.host)&&(f.credentials="include"),gC.fetch()(await vC(t,t.config.apiHost,n,u),f)})}async function yC(t,e,n){t._canInitEmulator=!1;const r={...eF,...e};try{const i=new iF(t),o=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw Gh(t,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const u=o.ok?l.errorMessage:l.error.message,[h,f]=u.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw Gh(t,"credential-already-in-use",l);if(h==="EMAIL_EXISTS")throw Gh(t,"email-already-in-use",l);if(h==="USER_DISABLED")throw Gh(t,"user-disabled",l);const p=r[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw Lv(t,p,f);wi(t,p)}}catch(i){if(i instanceof Or)throw i;wi(t,"network-request-failed",{message:String(i)})}}async function rF(t,e,n,r,i={}){const o=await kl(t,e,n,r,i);return"mfaPendingCredential"in o&&wi(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function vC(t,e,n,r){const i=`${e}${n}?${r}`,o=t,l=o.config.emulator?Mv(t.config,i):`${t.config.apiScheme}://${i}`;return tF.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(l).toString():l}class iF{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Rr(this.auth,"network-request-failed")),nF.get())})}}function Gh(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Rr(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sF(t,e){return kl(t,"POST","/v1/accounts:delete",e)}async function jf(t,e){return kl(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function oF(t,e=!1){const n=St(t),r=await n.getIdToken(e),i=Fv(r);Fe(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,l=o==null?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:Mu(Vm(i.auth_time)),issuedAtTime:Mu(Vm(i.iat)),expirationTime:Mu(Vm(i.exp)),signInProvider:l||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Vm(t){return Number(t)*1e3}function Fv(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return ff("JWT malformed, contained fewer than 3 sections"),null;try{const i=wS(n);return i?JSON.parse(i):(ff("Failed to decode base64 JWT payload"),null)}catch(i){return ff("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function lE(t){const e=Fv(t);return Fe(e,"internal-error"),Fe(typeof e.exp<"u","internal-error"),Fe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rc(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Or&&aF(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function aF({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lF{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xg{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Mu(this.lastLoginAt),this.creationTime=Mu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uf(t){var g;const e=t.auth,n=await t.getIdToken(),r=await rc(t,jf(e,{idToken:n}));Fe(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const o=(g=i.providerUserInfo)!=null&&g.length?wC(i.providerUserInfo):[],l=cF(t.providerData,o),u=t.isAnonymous,h=!(t.email&&i.passwordHash)&&!(l!=null&&l.length),f=u?h:!1,p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new Xg(i.createdAt,i.lastLoginAt),isAnonymous:f};Object.assign(t,p)}async function uF(t){const e=St(t);await Uf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function cF(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function wC(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hF(t,e){const n=await yC(t,{},async()=>{const r=fc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,l=await vC(t,i,"/v1/token",`key=${o}`),u=await t._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const h={method:"POST",headers:u,body:r};return t.emulatorConfig&&gl(t.emulatorConfig.host)&&(h.credentials="include"),gC.fetch()(l,h)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function fF(t,e){return kl(t,"POST","/v2/accounts:revokeToken",Ov(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Fe(e.idToken,"internal-error"),Fe(typeof e.idToken<"u","internal-error"),Fe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):lE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Fe(e.length!==0,"internal-error");const n=lE(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Fe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:o}=await hF(e,n);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:o}=n,l=new Xa;return r&&(Fe(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),i&&(Fe(typeof i=="string","internal-error",{appName:e}),l.accessToken=i),o&&(Fe(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Xa,this.toJSON())}_performRefresh(){return Ui("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ws(t,e){Fe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ar{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new lF(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Xg(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await rc(this,this.stsTokenManager.getToken(this.auth,e));return Fe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return oF(this,e)}reload(){return uF(this)}_assign(e){this!==e&&(Fe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ar({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Fe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Uf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(br(this.auth.app))return Promise.reject(Lo(this.auth));const e=await this.getIdToken();return await rc(this,sF(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,o=n.phoneNumber??void 0,l=n.photoURL??void 0,u=n.tenantId??void 0,h=n._redirectEventId??void 0,f=n.createdAt??void 0,p=n.lastLoginAt??void 0,{uid:g,emailVerified:v,isAnonymous:x,providerData:T,stsTokenManager:I}=n;Fe(g&&I,e,"internal-error");const b=Xa.fromJSON(this.name,I);Fe(typeof g=="string",e,"internal-error"),ws(r,e.name),ws(i,e.name),Fe(typeof v=="boolean",e,"internal-error"),Fe(typeof x=="boolean",e,"internal-error"),ws(o,e.name),ws(l,e.name),ws(u,e.name),ws(h,e.name),ws(f,e.name),ws(p,e.name);const N=new Ar({uid:g,auth:e,email:i,emailVerified:v,displayName:r,isAnonymous:x,photoURL:l,phoneNumber:o,tenantId:u,stsTokenManager:b,createdAt:f,lastLoginAt:p});return T&&Array.isArray(T)&&(N.providerData=T.map(z=>({...z}))),h&&(N._redirectEventId=h),N}static async _fromIdTokenResponse(e,n,r=!1){const i=new Xa;i.updateFromServerResponse(n);const o=new Ar({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Uf(o),o}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];Fe(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?wC(i.providerUserInfo):[],l=!(i.email&&i.passwordHash)&&!(o!=null&&o.length),u=new Xa;u.updateFromIdToken(r);const h=new Ar({uid:i.localId,auth:e,stsTokenManager:u,isAnonymous:l}),f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Xg(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(o!=null&&o.length)};return Object.assign(h,f),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uE=new Map;function Bi(t){Wi(t instanceof Function,"Expected a class definition");let e=uE.get(t);return e?(Wi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,uE.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}_C.type="NONE";const cE=_C;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function df(t,e,n){return`firebase:${t}:${e}:${n}`}class Ja{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=df(this.userKey,i.apiKey,o),this.fullPersistenceKey=df("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await jf(this.auth,{idToken:e}).catch(()=>{});return n?Ar._fromGetAccountInfoResponse(this.auth,n,e):null}return Ar._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ja(Bi(cE),e,r);const i=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=i[0]||Bi(cE);const l=df(r,e.config.apiKey,e.name);let u=null;for(const f of n)try{const p=await f._get(l);if(p){let g;if(typeof p=="string"){const v=await jf(e,{idToken:p}).catch(()=>{});if(!v)break;g=await Ar._fromGetAccountInfoResponse(e,v,p)}else g=Ar._fromJSON(e,p);f!==o&&(u=g),o=f;break}}catch{}const h=i.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!h.length?new Ja(o,e,r):(o=h[0],u&&await o._set(l,u.toJSON()),await Promise.all(n.map(async f=>{if(f!==o)try{await f._remove(l)}catch{}})),new Ja(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hE(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(kC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(xC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(IC(e))return"Blackberry";if(CC(e))return"Webos";if(EC(e))return"Safari";if((e.includes("chrome/")||TC(e))&&!e.includes("edge/"))return"Chrome";if(SC(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function xC(t=_n()){return/firefox\//i.test(t)}function EC(t=_n()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function TC(t=_n()){return/crios\//i.test(t)}function kC(t=_n()){return/iemobile/i.test(t)}function SC(t=_n()){return/android/i.test(t)}function IC(t=_n()){return/blackberry/i.test(t)}function CC(t=_n()){return/webos/i.test(t)}function jv(t=_n()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function dF(t=_n()){var e;return jv(t)&&!!((e=window.navigator)!=null&&e.standalone)}function pF(){return YD()&&document.documentMode===10}function bC(t=_n()){return jv(t)||SC(t)||CC(t)||IC(t)||/windows phone/i.test(t)||kC(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AC(t,e=[]){let n;switch(t){case"Browser":n=hE(_n());break;case"Worker":n=`${hE(_n())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${yl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mF{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((l,u)=>{try{const h=e(o);l(h)}catch(h){u(h)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gF(t,e={}){return kl(t,"GET","/v2/passwordPolicy",Ov(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yF=6;class vF{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??yF,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wF{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new fE(this),this.idTokenSubscription=new fE(this),this.beforeStateQueue=new mF(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=mC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Bi(n)),this._initializationPromise=this.queue(async()=>{var r,i,o;if(!this._deleted&&(this.persistenceManager=await Ja.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)==null?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await jf(this,{idToken:e}),r=await Ar._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var o;if(br(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(u,u))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(o=this.redirectUser)==null?void 0:o._redirectEventId,u=r==null?void 0:r._redirectEventId,h=await this.tryRedirectSignIn(e);(!l||l===u)&&(h!=null&&h.user)&&(r=h.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(l){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Fe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Uf(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Z4()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(br(this.app))return Promise.reject(Lo(this));const n=e?St(e):null;return n&&Fe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Fe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return br(this.app)?Promise.reject(Lo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return br(this.app)?Promise.reject(Lo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Bi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await gF(this),n=new vF(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new $o("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await fF(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Bi(e)||this._popupRedirectResolver;Fe(n,this,"argument-error"),this.redirectPersistenceManager=await Ja.create(this,[Bi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let l=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(Fe(u,this,"internal-error"),u.then(()=>{l||o(this.currentUser)}),typeof n=="function"){const h=e.addObserver(n,r,i);return()=>{l=!0,h()}}else{const h=e.addObserver(n);return()=>{l=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Fe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=AC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(br(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&Q4(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function xd(t){return St(t)}class fE{constructor(e){this.auth=e,this.observer=null,this.addObserver=rL(n=>this.observer=n)}get next(){return Fe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uv={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function _F(t){Uv=t}function xF(t){return Uv.loadJS(t)}function EF(){return Uv.gapiScript}function TF(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kF(t,e){const n=qo(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),o=n.getOptions();if(Vs(o,e??{}))return i;wi(i,"already-initialized")}return n.initialize({options:e})}function SF(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Bi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function IF(t,e,n){const r=xd(t);Fe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,o=PC(e),{host:l,port:u}=CF(e),h=u===null?"":`:${u}`,f={url:`${o}//${l}${h}/`},p=Object.freeze({host:l,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Fe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Fe(Vs(f,r.config.emulator)&&Vs(p,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=f,r.emulatorConfig=p,r.settings.appVerificationDisabledForTesting=!0,gl(l)?(TS(`${o}//${l}${h}`),kS("Auth",!0)):bF()}function PC(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function CF(t){const e=PC(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:dE(r.substr(o.length+1))}}else{const[o,l]=r.split(":");return{host:o,port:dE(l)}}}function dE(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function bF(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ui("not implemented")}_getIdTokenResponse(e){return Ui("not implemented")}_linkToIdToken(e,n){return Ui("not implemented")}_getReauthenticationResolver(e){return Ui("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Za(t,e){return rF(t,"POST","/v1/accounts:signInWithIdp",Ov(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AF="http://localhost";class jo extends RC{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new jo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):wi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...o}=n;if(!r||!i)return null;const l=new jo(r,i);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return Za(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Za(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Za(e,n)}buildRequest(){const e={requestUri:AF,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=fc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec extends Bv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks extends Ec{constructor(){super("facebook.com")}static credential(e){return jo._fromParams({providerId:ks.PROVIDER_ID,signInMethod:ks.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ks.credentialFromTaggedObject(e)}static credentialFromError(e){return ks.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ks.credential(e.oauthAccessToken)}catch{return null}}}ks.FACEBOOK_SIGN_IN_METHOD="facebook.com";ks.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji extends Ec{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return jo._fromParams({providerId:ji.PROVIDER_ID,signInMethod:ji.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ji.credentialFromTaggedObject(e)}static credentialFromError(e){return ji.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return ji.credential(n,r)}catch{return null}}}ji.GOOGLE_SIGN_IN_METHOD="google.com";ji.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss extends Ec{constructor(){super("github.com")}static credential(e){return jo._fromParams({providerId:Ss.PROVIDER_ID,signInMethod:Ss.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ss.credentialFromTaggedObject(e)}static credentialFromError(e){return Ss.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ss.credential(e.oauthAccessToken)}catch{return null}}}Ss.GITHUB_SIGN_IN_METHOD="github.com";Ss.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is extends Ec{constructor(){super("twitter.com")}static credential(e,n){return jo._fromParams({providerId:Is.PROVIDER_ID,signInMethod:Is.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Is.credentialFromTaggedObject(e)}static credentialFromError(e){return Is.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Is.credential(n,r)}catch{return null}}}Is.TWITTER_SIGN_IN_METHOD="twitter.com";Is.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const o=await Ar._fromIdTokenResponse(e,r,i),l=pE(r);return new cl({user:o,providerId:l,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=pE(r);return new cl({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function pE(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf extends Or{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Bf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Bf(e,n,r,i)}}function NC(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Bf._fromErrorAndOperation(t,o,e,r):o})}async function PF(t,e,n=!1){const r=await rc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return cl._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RF(t,e,n=!1){const{auth:r}=t;if(br(r.app))return Promise.reject(Lo(r));const i="reauthenticate";try{const o=await rc(t,NC(r,i,e,t),n);Fe(o.idToken,r,"internal-error");const l=Fv(o.idToken);Fe(l,r,"internal-error");const{sub:u}=l;return Fe(t.uid===u,r,"user-mismatch"),cl._forOperation(t,i,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&wi(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NF(t,e,n=!1){if(br(t.app))return Promise.reject(Lo(t));const r="signIn",i=await NC(t,r,e),o=await cl._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(o.user),o}function DF(t,e,n,r){return St(t).onIdTokenChanged(e,n,r)}function LF(t,e,n){return St(t).beforeAuthStateChanged(e,n)}function DC(t,e,n,r){return St(t).onAuthStateChanged(e,n,r)}function VF(t){return St(t).signOut()}const zf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(zf,"1"),this.storage.removeItem(zf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MF=1e3,OF=10;class VC extends LC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=bC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,u,h)=>{this.notifyListeners(l,h)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const l=this.storage.getItem(r);!n&&this.localCache[r]===l||this.notifyListeners(r,l)},o=this.storage.getItem(r);pF()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,OF):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},MF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}VC.type="LOCAL";const FF=VC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MC extends LC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}MC.type="SESSION";const OC=MC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jF(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Ed(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:o}=n.data,l=this.handlersMap[i];if(!(l!=null&&l.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const u=Array.from(l).map(async f=>f(n.origin,o)),h=await jF(u);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:h})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ed.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zv(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UF{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,l;return new Promise((u,h)=>{const f=zv("",20);i.port1.start();const p=setTimeout(()=>{h(new Error("unsupported_event"))},r);l={messageChannel:i,onMessage(g){const v=g;if(v.data.eventId===f)switch(v.data.status){case"ack":clearTimeout(p),o=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(v.data.response);break;default:clearTimeout(p),clearTimeout(o),h(new Error("invalid_response"));break}}},this.handlers.add(l),i.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:f,data:n},[i.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pi(){return window}function BF(t){pi().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FC(){return typeof pi().WorkerGlobalScope<"u"&&typeof pi().importScripts=="function"}async function zF(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function $F(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function qF(){return FC()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jC="firebaseLocalStorageDb",HF=1,$f="firebaseLocalStorage",UC="fbase_key";class Tc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Td(t,e){return t.transaction([$f],e?"readwrite":"readonly").objectStore($f)}function WF(){const t=indexedDB.deleteDatabase(jC);return new Tc(t).toPromise()}function Jg(){const t=indexedDB.open(jC,HF);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore($f,{keyPath:UC})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains($f)?e(r):(r.close(),await WF(),e(await Jg()))})})}async function mE(t,e,n){const r=Td(t,!0).put({[UC]:e,value:n});return new Tc(r).toPromise()}async function GF(t,e){const n=Td(t,!1).get(e),r=await new Tc(n).toPromise();return r===void 0?null:r.value}function gE(t,e){const n=Td(t,!0).delete(e);return new Tc(n).toPromise()}const KF=800,QF=3;class BC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Jg(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>QF)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return FC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ed._getInstance(qF()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await zF(),!this.activeServiceWorker)return;this.sender=new UF(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||$F()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Jg();return await mE(e,zf,"1"),await gE(e,zf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>mE(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>GF(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>gE(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=Td(i,!1).getAll();return new Tc(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),KF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}BC.type="LOCAL";const YF=BC;new xc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zC(t,e){return e?Bi(e):(Fe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v extends RC{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Za(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Za(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Za(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function XF(t){return NF(t.auth,new $v(t),t.bypassAuthState)}function JF(t){const{auth:e,user:n}=t;return Fe(n,e,"internal-error"),RF(n,new $v(t),t.bypassAuthState)}async function ZF(t){const{auth:e,user:n}=t;return Fe(n,e,"internal-error"),PF(n,new $v(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:l,type:u}=e;if(l){this.reject(l);return}const h={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(h))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return XF;case"linkViaPopup":case"linkViaRedirect":return ZF;case"reauthViaPopup":case"reauthViaRedirect":return JF;default:wi(this.auth,"internal-error")}}resolve(e){Wi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Wi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ej=new xc(2e3,1e4);async function tj(t,e,n){if(br(t.app))return Promise.reject(Rr(t,"operation-not-supported-in-this-environment"));const r=xd(t);Y4(t,e,Bv);const i=zC(r,n);return new Ao(r,"signInViaPopup",e,i).executeNotNull()}class Ao extends $C{constructor(e,n,r,i,o){super(e,n,i,o),this.provider=r,this.authWindow=null,this.pollId=null,Ao.currentPopupAction&&Ao.currentPopupAction.cancel(),Ao.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Fe(e,this.auth,"internal-error"),e}async onExecution(){Wi(this.filter.length===1,"Popup operations only handle one event");const e=zv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Rr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Rr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ao.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Rr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,ej.get())};e()}}Ao.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nj="pendingRedirect",pf=new Map;class rj extends $C{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=pf.get(this.auth._key());if(!e){try{const r=await ij(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}pf.set(this.auth._key(),e)}return this.bypassAuthState||pf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function ij(t,e){const n=aj(e),r=oj(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function sj(t,e){pf.set(t._key(),e)}function oj(t){return Bi(t._redirectPersistence)}function aj(t){return df(nj,t.config.apiKey,t.name)}async function lj(t,e,n=!1){if(br(t.app))return Promise.reject(Lo(t));const r=xd(t),i=zC(r,e),l=await new rj(r,i,n).execute();return l&&!n&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uj=600*1e3;class cj{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!hj(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!qC(e)){const i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(Rr(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=uj&&this.cachedEventUids.clear(),this.cachedEventUids.has(yE(e))}saveEventToCache(e){this.cachedEventUids.add(yE(e)),this.lastProcessedEventTime=Date.now()}}function yE(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function qC({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function hj(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return qC(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fj(t,e={}){return kl(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dj=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,pj=/^https?/;async function mj(t){if(t.config.emulator)return;const{authorizedDomains:e}=await fj(t);for(const n of e)try{if(gj(n))return}catch{}wi(t,"unauthorized-domain")}function gj(t){const e=Yg(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===r}if(!pj.test(n))return!1;if(dj.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yj=new xc(3e4,6e4);function vE(){const t=pi().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function vj(t){return new Promise((e,n)=>{var i,o,l;function r(){vE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{vE(),n(Rr(t,"network-request-failed"))},timeout:yj.get()})}if((o=(i=pi().gapi)==null?void 0:i.iframes)!=null&&o.Iframe)e(gapi.iframes.getContext());else if((l=pi().gapi)!=null&&l.load)r();else{const u=TF("iframefcb");return pi()[u]=()=>{gapi.load?r():n(Rr(t,"network-request-failed"))},xF(`${EF()}?onload=${u}`).catch(h=>n(h))}}).catch(e=>{throw mf=null,e})}let mf=null;function wj(t){return mf=mf||vj(t),mf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _j=new xc(5e3,15e3),xj="__/auth/iframe",Ej="emulator/auth/iframe",Tj={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},kj=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Sj(t){const e=t.config;Fe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Mv(e,Ej):`https://${t.config.authDomain}/${xj}`,r={apiKey:e.apiKey,appName:t.name,v:yl},i=kj.get(t.config.apiHost);i&&(r.eid=i);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${fc(r).slice(1)}`}async function Ij(t){const e=await wj(t),n=pi().gapi;return Fe(n,t,"internal-error"),e.open({where:document.body,url:Sj(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Tj,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});const l=Rr(t,"network-request-failed"),u=pi().setTimeout(()=>{o(l)},_j.get());function h(){pi().clearTimeout(u),i(r)}r.ping(h).then(h,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cj={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},bj=500,Aj=600,Pj="_blank",Rj="http://localhost";class wE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Nj(t,e,n,r=bj,i=Aj){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const h={...Cj,width:r.toString(),height:i.toString(),top:o,left:l},f=_n().toLowerCase();n&&(u=TC(f)?Pj:n),xC(f)&&(e=e||Rj,h.scrollbars="yes");const p=Object.entries(h).reduce((v,[x,T])=>`${v}${x}=${T},`,"");if(dF(f)&&u!=="_self")return Dj(e||"",u),new wE(null);const g=window.open(e||"",u,p);Fe(g,t,"popup-blocked");try{g.focus()}catch{}return new wE(g)}function Dj(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lj="__/auth/handler",Vj="emulator/auth/handler",Mj=encodeURIComponent("fac");async function _E(t,e,n,r,i,o){Fe(t.config.authDomain,t,"auth-domain-config-required"),Fe(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:yl,eventId:i};if(e instanceof Bv){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",nL(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,g]of Object.entries({}))l[p]=g}if(e instanceof Ec){const p=e.getScopes().filter(g=>g!=="");p.length>0&&(l.scopes=p.join(","))}t.tenantId&&(l.tid=t.tenantId);const u=l;for(const p of Object.keys(u))u[p]===void 0&&delete u[p];const h=await t._getAppCheckToken(),f=h?`#${Mj}=${encodeURIComponent(h)}`:"";return`${Oj(t)}?${fc(u).slice(1)}${f}`}function Oj({config:t}){return t.emulator?Mv(t,Vj):`https://${t.authDomain}/${Lj}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mm="webStorageSupport";class Fj{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=OC,this._completeRedirectFn=lj,this._overrideRedirectResult=sj}async _openPopup(e,n,r,i){var l;Wi((l=this.eventManagers[e._key()])==null?void 0:l.manager,"_initialize() not called before _openPopup()");const o=await _E(e,n,r,Yg(),i);return Nj(e,o,zv())}async _openRedirect(e,n,r,i){await this._originValidation(e);const o=await _E(e,n,r,Yg(),i);return BF(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(Wi(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await Ij(e),r=new cj(e);return n.register("authEvent",i=>(Fe(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Mm,{type:Mm},i=>{var l;const o=(l=i==null?void 0:i[0])==null?void 0:l[Mm];o!==void 0&&n(!!o),wi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=mj(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return bC()||EC()||jv()}}const jj=Fj;var xE="@firebase/auth",EE="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uj{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Fe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bj(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function zj(t){gi(new Dr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:u}=r.options;Fe(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const h={apiKey:l,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:AC(t)},f=new wF(r,i,o,h);return SF(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),gi(new Dr("auth-internal",e=>{const n=xd(e.getProvider("auth").getImmediate());return(r=>new Uj(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),gr(xE,EE,Bj(t)),gr(xE,EE,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $j=300,qj=ES("authIdTokenMaxAge")||$j;let TE=null;const Hj=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>qj)return;const i=n==null?void 0:n.token;TE!==i&&(TE=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Wj(t=td()){const e=qo(t,"auth");if(e.isInitialized())return e.getImmediate();const n=kF(t,{popupRedirectResolver:jj,persistence:[YF,FF,OC]}),r=ES("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const l=Hj(o.toString());LF(n,l,()=>l(n.currentUser)),DF(n,u=>l(u))}}const i=_S("auth");return i&&IF(n,`http://${i}`),n}function Gj(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}_F({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const o=Rr("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",Gj().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});zj("Browser");var Kj="firebase",Qj="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gr(Kj,Qj,"app");const HC="@firebase/installations",qv="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WC=1e4,GC=`w:${qv}`,KC="FIS_v2",Yj="https://firebaseinstallations.googleapis.com/v1",Xj=3600*1e3,Jj="installations",Zj="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e5={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Uo=new $o(Jj,Zj,e5);function QC(t){return t instanceof Or&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YC({projectId:t}){return`${Yj}/projects/${t}/installations`}function XC(t){return{token:t.token,requestStatus:2,expiresIn:n5(t.expiresIn),creationTime:Date.now()}}async function JC(t,e){const r=(await e.json()).error;return Uo.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function ZC({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function t5(t,{refreshToken:e}){const n=ZC(t);return n.append("Authorization",r5(e)),n}async function eb(t){const e=await t();return e.status>=500&&e.status<600?t():e}function n5(t){return Number(t.replace("s","000"))}function r5(t){return`${KC} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i5({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=YC(t),i=ZC(t),o=e.getImmediate({optional:!0});if(o){const f=await o.getHeartbeatsHeader();f&&i.append("x-firebase-client",f)}const l={fid:n,authVersion:KC,appId:t.appId,sdkVersion:GC},u={method:"POST",headers:i,body:JSON.stringify(l)},h=await eb(()=>fetch(r,u));if(h.ok){const f=await h.json();return{fid:f.fid||n,registrationStatus:2,refreshToken:f.refreshToken,authToken:XC(f.authToken)}}else throw await JC("Create Installation",h)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tb(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s5(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o5=/^[cdef][\w-]{21}$/,Zg="";function a5(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=l5(t);return o5.test(n)?n:Zg}catch{return Zg}}function l5(t){return s5(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kd(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nb=new Map;function rb(t,e){const n=kd(t);ib(n,e),u5(n,e)}function ib(t,e){const n=nb.get(t);if(n)for(const r of n)r(e)}function u5(t,e){const n=c5();n&&n.postMessage({key:t,fid:e}),h5()}let Po=null;function c5(){return!Po&&"BroadcastChannel"in self&&(Po=new BroadcastChannel("[Firebase] FID Change"),Po.onmessage=t=>{ib(t.data.key,t.data.fid)}),Po}function h5(){nb.size===0&&Po&&(Po.close(),Po=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f5="firebase-installations-database",d5=1,Bo="firebase-installations-store";let Om=null;function Hv(){return Om||(Om=PS(f5,d5,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Bo)}}})),Om}async function qf(t,e){const n=kd(t),i=(await Hv()).transaction(Bo,"readwrite"),o=i.objectStore(Bo),l=await o.get(n);return await o.put(e,n),await i.done,(!l||l.fid!==e.fid)&&rb(t,e.fid),e}async function sb(t){const e=kd(t),r=(await Hv()).transaction(Bo,"readwrite");await r.objectStore(Bo).delete(e),await r.done}async function Sd(t,e){const n=kd(t),i=(await Hv()).transaction(Bo,"readwrite"),o=i.objectStore(Bo),l=await o.get(n),u=e(l);return u===void 0?await o.delete(n):await o.put(u,n),await i.done,u&&(!l||l.fid!==u.fid)&&rb(t,u.fid),u}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wv(t){let e;const n=await Sd(t.appConfig,r=>{const i=p5(r),o=m5(t,i);return e=o.registrationPromise,o.installationEntry});return n.fid===Zg?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function p5(t){const e=t||{fid:a5(),registrationStatus:0};return ob(e)}function m5(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(Uo.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=g5(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:y5(t)}:{installationEntry:e}}async function g5(t,e){try{const n=await i5(t,e);return qf(t.appConfig,n)}catch(n){throw QC(n)&&n.customData.serverCode===409?await sb(t.appConfig):await qf(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function y5(t){let e=await kE(t.appConfig);for(;e.registrationStatus===1;)await tb(100),e=await kE(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await Wv(t);return r||n}return e}function kE(t){return Sd(t,e=>{if(!e)throw Uo.create("installation-not-found");return ob(e)})}function ob(t){return v5(t)?{fid:t.fid,registrationStatus:0}:t}function v5(t){return t.registrationStatus===1&&t.registrationTime+WC<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w5({appConfig:t,heartbeatServiceProvider:e},n){const r=_5(t,n),i=t5(t,n),o=e.getImmediate({optional:!0});if(o){const f=await o.getHeartbeatsHeader();f&&i.append("x-firebase-client",f)}const l={installation:{sdkVersion:GC,appId:t.appId}},u={method:"POST",headers:i,body:JSON.stringify(l)},h=await eb(()=>fetch(r,u));if(h.ok){const f=await h.json();return XC(f)}else throw await JC("Generate Auth Token",h)}function _5(t,{fid:e}){return`${YC(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gv(t,e=!1){let n;const r=await Sd(t.appConfig,o=>{if(!ab(o))throw Uo.create("not-registered");const l=o.authToken;if(!e&&T5(l))return o;if(l.requestStatus===1)return n=x5(t,e),o;{if(!navigator.onLine)throw Uo.create("app-offline");const u=S5(o);return n=E5(t,u),u}});return n?await n:r.authToken}async function x5(t,e){let n=await SE(t.appConfig);for(;n.authToken.requestStatus===1;)await tb(100),n=await SE(t.appConfig);const r=n.authToken;return r.requestStatus===0?Gv(t,e):r}function SE(t){return Sd(t,e=>{if(!ab(e))throw Uo.create("not-registered");const n=e.authToken;return I5(n)?{...e,authToken:{requestStatus:0}}:e})}async function E5(t,e){try{const n=await w5(t,e),r={...e,authToken:n};return await qf(t.appConfig,r),n}catch(n){if(QC(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await sb(t.appConfig);else{const r={...e,authToken:{requestStatus:0}};await qf(t.appConfig,r)}throw n}}function ab(t){return t!==void 0&&t.registrationStatus===2}function T5(t){return t.requestStatus===2&&!k5(t)}function k5(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+Xj}function S5(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function I5(t){return t.requestStatus===1&&t.requestTime+WC<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C5(t){const e=t,{installationEntry:n,registrationPromise:r}=await Wv(e);return r?r.catch(console.error):Gv(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function b5(t,e=!1){const n=t;return await A5(n),(await Gv(n,e)).token}async function A5(t){const{registrationPromise:e}=await Wv(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P5(t){if(!t||!t.options)throw Fm("App Configuration");if(!t.name)throw Fm("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Fm(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Fm(t){return Uo.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lb="installations",R5="installations-internal",N5=t=>{const e=t.getProvider("app").getImmediate(),n=P5(e),r=qo(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},D5=t=>{const e=t.getProvider("app").getImmediate(),n=qo(e,lb).getImmediate();return{getId:()=>C5(n),getToken:i=>b5(n,i)}};function L5(){gi(new Dr(lb,N5,"PUBLIC")),gi(new Dr(R5,D5,"PRIVATE"))}L5();gr(HC,qv);gr(HC,qv,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hf="analytics",V5="firebase_id",M5="origin",O5=60*1e3,F5="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Kv="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const An=new ed("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j5={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Zn=new $o("analytics","Analytics",j5);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U5(t){if(!t.startsWith(Kv)){const e=Zn.create("invalid-gtag-resource",{gtagURL:t});return An.warn(e.message),""}return t}function ub(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function B5(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function z5(t,e){const n=B5("firebase-js-sdk-policy",{createScriptURL:U5}),r=document.createElement("script"),i=`${Kv}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function $5(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function q5(t,e,n,r,i,o){const l=r[i];try{if(l)await e[l];else{const h=(await ub(n)).find(f=>f.measurementId===i);h&&await e[h.appId]}}catch(u){An.error(u)}t("config",i,o)}async function H5(t,e,n,r,i){try{let o=[];if(i&&i.send_to){let l=i.send_to;Array.isArray(l)||(l=[l]);const u=await ub(n);for(const h of l){const f=u.find(g=>g.measurementId===h),p=f&&e[f.appId];if(p)o.push(p);else{o=[];break}}}o.length===0&&(o=Object.values(e)),await Promise.all(o),t("event",r,i||{})}catch(o){An.error(o)}}function W5(t,e,n,r){async function i(o,...l){try{if(o==="event"){const[u,h]=l;await H5(t,e,n,u,h)}else if(o==="config"){const[u,h]=l;await q5(t,e,n,r,u,h)}else if(o==="consent"){const[u,h]=l;t("consent",u,h)}else if(o==="get"){const[u,h,f]=l;t("get",u,h,f)}else if(o==="set"){const[u]=l;t("set",u)}else t(o,...l)}catch(u){An.error(u)}}return i}function G5(t,e,n,r,i){let o=function(...l){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(o=window[i]),window[i]=W5(o,t,e,n),{gtagCore:o,wrappedGtag:window[i]}}function K5(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Kv)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q5=30,Y5=1e3;class X5{constructor(e={},n=Y5){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const cb=new X5;function J5(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function Z5(t){var l;const{appId:e,apiKey:n}=t,r={method:"GET",headers:J5(n)},i=F5.replace("{app-id}",e),o=await fetch(i,r);if(o.status!==200&&o.status!==304){let u="";try{const h=await o.json();(l=h.error)!=null&&l.message&&(u=h.error.message)}catch{}throw Zn.create("config-fetch-failed",{httpStatus:o.status,responseMessage:u})}return o.json()}async function e6(t,e=cb,n){const{appId:r,apiKey:i,measurementId:o}=t.options;if(!r)throw Zn.create("no-app-id");if(!i){if(o)return{measurementId:o,appId:r};throw Zn.create("no-api-key")}const l=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},u=new r6;return setTimeout(async()=>{u.abort()},O5),hb({appId:r,apiKey:i,measurementId:o},l,u,e)}async function hb(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=cb){var u;const{appId:o,measurementId:l}=t;try{await t6(r,e)}catch(h){if(l)return An.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${h==null?void 0:h.message}]`),{appId:o,measurementId:l};throw h}try{const h=await Z5(t);return i.deleteThrottleMetadata(o),h}catch(h){const f=h;if(!n6(f)){if(i.deleteThrottleMetadata(o),l)return An.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${f==null?void 0:f.message}]`),{appId:o,measurementId:l};throw h}const p=Number((u=f==null?void 0:f.customData)==null?void 0:u.httpStatus)===503?Yx(n,i.intervalMillis,Q5):Yx(n,i.intervalMillis),g={throttleEndTimeMillis:Date.now()+p,backoffCount:n+1};return i.setThrottleMetadata(o,g),An.debug(`Calling attemptFetch again in ${p} millis`),hb(t,g,r,i)}}function t6(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(o),r(Zn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function n6(t){if(!(t instanceof Or)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class r6{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function i6(t,e,n,r,i){if(i&&i.global){t("event",n,r);return}else{const o=await e,l={...r,send_to:o};t("event",n,l)}}async function s6(t,e,n,r){if(r&&r.global){const i={};for(const o of Object.keys(n))i[`user_properties.${o}`]=n[o];return t("set",i),Promise.resolve()}else{const i=await e;t("config",i,{update:!0,user_properties:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o6(){if(IS())try{await CS()}catch(t){return An.warn(Zn.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return An.warn(Zn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function a6(t,e,n,r,i,o,l){const u=e6(t);u.then(v=>{n[v.measurementId]=v.appId,t.options.measurementId&&v.measurementId!==t.options.measurementId&&An.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${v.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(v=>An.error(v)),e.push(u);const h=o6().then(v=>{if(v)return r.getId()}),[f,p]=await Promise.all([u,h]);K5(o)||z5(o,f.measurementId),i("js",new Date);const g=(l==null?void 0:l.config)??{};return g[M5]="firebase",g.update=!0,p!=null&&(g[V5]=p),i("config",f.measurementId,g),f.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l6{constructor(e){this.app=e}_delete(){return delete el[this.app.options.appId],Promise.resolve()}}let el={},IE=[];const CE={};let jm="dataLayer",u6="gtag",bE,Qv,AE=!1;function c6(){const t=[];if(SS()&&t.push("This is a browser extension environment."),JD()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=Zn.create("invalid-analytics-context",{errorInfo:e});An.warn(n.message)}}function h6(t,e,n){c6();const r=t.options.appId;if(!r)throw Zn.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)An.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Zn.create("no-api-key");if(el[r]!=null)throw Zn.create("already-exists",{id:r});if(!AE){$5(jm);const{wrappedGtag:o,gtagCore:l}=G5(el,IE,CE,jm,u6);Qv=o,bE=l,AE=!0}return el[r]=a6(t,IE,CE,e,bE,jm,n),new l6(t)}function f6(t=td()){t=St(t);const e=qo(t,Hf);return e.isInitialized()?e.getImmediate():d6(t)}function d6(t,e={}){const n=qo(t,Hf);if(n.isInitialized()){const i=n.getImmediate();if(Vs(e,n.getOptions()))return i;throw Zn.create("already-initialized")}return n.initialize({options:e})}function p6(t,e,n){t=St(t),s6(Qv,el[t.app.options.appId],e,n).catch(r=>An.error(r))}function m6(t,e,n,r){t=St(t),i6(Qv,el[t.app.options.appId],e,n,r).catch(i=>An.error(i))}const PE="@firebase/analytics",RE="0.10.19";function g6(){gi(new Dr(Hf,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return h6(r,i,n)},"PUBLIC")),gi(new Dr("analytics-internal",t,"PRIVATE")),gr(PE,RE),gr(PE,RE,"esm2020");function t(e){try{const n=e.getProvider(Hf).getImmediate();return{logEvent:(r,i,o)=>m6(n,r,i,o),setUserProperties:(r,i)=>p6(n,r,i)}}catch(n){throw Zn.create("interop-component-reg-failed",{reason:n})}}}g6();const y6={apiKey:"AIzaSyCh2WTlWm8-d_JCqEEYkGt0l3Lt1ALtlzw",authDomain:"nerdvana-project-firebase.firebaseapp.com",projectId:"nerdvana-project-firebase",storageBucket:"nerdvana-project-firebase.firebasestorage.app",messagingSenderId:"850212669821",appId:"1:850212669821:web:24579c0e85303c835a2414",measurementId:"G-P7WZXLBBP5"},Yv=aV().length?td():RS(y6);typeof window<"u"&&f6(Yv);const Vo=Wj(Yv),yn=b4(Yv),v6=new ji,NE="no-dp",Ou="/avatars/no-dp.png";function w6(t){return typeof t!="string"?Ou:t.trim()||Ou}function DE(t,e){return typeof t!="string"?e:t.trim()||e}async function _6(t){const e=vi(yn,"users",t.uid),n=await hC(e),r=n.data(),i=(t.displayName||"Explorer").trim()||"Explorer";if(!n.exists())return await Of(e,{displayName:i,username:i,avatar:Ou,avatarSeed:NE},{merge:!0}),{avatar:Ou,username:i};const o={},l=DE(r==null?void 0:r.username,DE(r==null?void 0:r.displayName,i)),u=w6(r==null?void 0:r.avatar);return(!(r!=null&&r.displayName)||typeof r.displayName!="string"||!r.displayName.trim())&&(o.displayName=i),(!(r!=null&&r.username)||typeof r.username!="string"||!r.username.trim())&&(o.username=l),(!(r!=null&&r.avatar)||typeof r.avatar!="string"||!r.avatar.trim())&&(o.avatar=Ou),(!(r!=null&&r.avatarSeed)||typeof r.avatarSeed!="string"||!r.avatarSeed.trim())&&(o.avatarSeed=NE),Object.keys(o).length>0?(await Of(e,o,{merge:!0}),{avatar:o.avatar??u,username:o.username??l}):{avatar:u,username:l}}function Go(){const[t,e]=ee.useState(null),[n,r]=ee.useState(!0);return ee.useEffect(()=>{const l=DC(Vo,u=>{e(u),r(!1),u&&_6(u).catch(()=>{})});return()=>l()},[]),{user:t,loading:n,login:async()=>{typeof window<"u"&&window.sessionStorage.setItem("nerdvana-auth-intent","signin");try{await tj(Vo,v6)}catch(l){throw typeof window<"u"&&window.sessionStorage.removeItem("nerdvana-auth-intent"),l}},logout:()=>VF(Vo)}}function x6({onNavigate:t,onLogout:e}){return C.jsxs(Ka.div,{className:"absolute right-0 top-full mt-2 z-50 min-w-[220px] border-[2px] p-1",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.15},style:{borderColor:"var(--nerdvana-border)",backgroundColor:"var(--nerdvana-surface)"},onMouseDown:n=>n.stopPropagation(),children:[C.jsx("button",{className:"nerdvana-clickable block w-full text-left px-3 py-2 text-[0.72rem] uppercase tracking-[0.12em] border-[1px] border-transparent hover:border-[var(--nerdvana-border)]",style:{fontFamily:'"Courier New", monospace',color:"var(--nerdvana-text)"},onClick:()=>t("/profile"),children:"Profile"}),C.jsx("button",{className:"nerdvana-clickable block w-full text-left px-3 py-2 text-[0.72rem] uppercase tracking-[0.12em] border-[1px] border-transparent hover:border-[var(--nerdvana-border)]",style:{fontFamily:'"Courier New", monospace',color:"var(--nerdvana-text)"},onClick:()=>t("/saved"),children:"Saved Lorebooks"}),C.jsx("button",{className:"nerdvana-clickable block w-full text-left px-3 py-2 text-[0.72rem] uppercase tracking-[0.12em] border-[1px] border-transparent hover:border-[var(--nerdvana-border)]",style:{fontFamily:'"Courier New", monospace',color:"var(--nerdvana-text)"},onClick:()=>t("/history"),children:"History"}),C.jsx("button",{onClick:e,className:"nerdvana-clickable block w-full text-left px-3 py-2 text-[0.72rem] uppercase tracking-[0.12em] border-[1px] border-transparent hover:border-[var(--nerdvana-border)]",style:{fontFamily:'"Courier New", monospace',color:"var(--nerdvana-text)"},children:"Logout"})]})}const E6=ee.memo(x6);function T6({onNavigate:t}){const[e,n]=ee.useState("light"),[r,i]=ee.useState(!1),[o,l]=ee.useState("Explorer"),{user:u,login:h,logout:f}=Go(),p=["Explore","Debates","Community","About"],g=ee.useRef(null);ee.useEffect(()=>{const b=localStorage.getItem("nerdvana-theme")||"light";n(b),b==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[]);const v=()=>{const I=e==="light"?"dark":"light";n(I),localStorage.setItem("nerdvana-theme",I),I==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")};ee.useEffect(()=>{if(!u){l("Explorer");return}const I=vi(yn,"users",u.uid),b=Dv(I,N=>{const z=N.data(),U=typeof(z==null?void 0:z.username)=="string"&&z.username.trim()?z.username.trim():u.displayName||"Explorer";l(U)},()=>{});return()=>b()},[u]),ee.useEffect(()=>{if(!r)return;const I=b=>{const N=b.target;N&&g.current&&!g.current.contains(N)&&i(!1)};return document.addEventListener("mousedown",I),()=>document.removeEventListener("mousedown",I)},[r]);const x=()=>{i(!1),f().catch(()=>{})},T=I=>{i(!1),window.history.pushState({},"",I),window.dispatchEvent(new PopStateEvent("popstate"))};return C.jsxs(Ka.header,{initial:{y:-100,opacity:0},animate:{y:0,opacity:1},transition:{duration:.6,ease:"easeOut"},className:"relative z-50 w-full border-b-[3px] overflow-visible transition-colors duration-300",style:{backgroundColor:"var(--nerdvana-header-bg)",borderColor:"var(--nerdvana-border)",boxShadow:"0 6px 0 var(--nerdvana-shadow)"},children:[C.jsx("div",{className:"absolute top-0 left-0 right-0 h-[6px] transition-colors duration-300",style:{background:"repeating-linear-gradient(90deg, var(--nerdvana-accent) 0px, var(--nerdvana-accent) 22px, var(--nerdvana-border) 22px, var(--nerdvana-border) 30px)"}}),C.jsx("div",{className:"absolute inset-0 pointer-events-none paper-texture opacity-70"}),C.jsx("div",{className:"absolute inset-0 pointer-events-none header-vignette"}),C.jsxs("div",{className:"relative max-w-7xl mx-auto px-6 md:px-8 pt-7 pb-5 flex items-center justify-between gap-4",children:[C.jsxs("div",{className:"flex items-center gap-3 md:gap-4",children:[C.jsx(Ka.button,{onClick:()=>t==null?void 0:t("home"),whileHover:{scale:1.04},whileTap:{scale:.98},className:"text-2xl md:text-[2rem] tracking-[-0.04em] uppercase transition-all duration-300 leading-none",style:{fontFamily:'Impact, "Arial Black", sans-serif',color:"var(--nerdvana-text)"},onMouseEnter:I=>I.currentTarget.style.color="var(--nerdvana-accent)",onMouseLeave:I=>I.currentTarget.style.color="var(--nerdvana-text)",children:"NERDVANA"}),C.jsx("span",{className:"hidden sm:inline-block px-2.5 py-1 text-[0.62rem] uppercase tracking-[0.18em] border-[2px] transition-colors duration-300",style:{fontFamily:'"Courier New", monospace',borderColor:"var(--nerdvana-border)",backgroundColor:"var(--nerdvana-surface)",color:"var(--nerdvana-text)"},children:"Issue 2026"})]}),C.jsx("nav",{className:"hidden md:flex items-center gap-2 p-1 border-[2px] transition-colors duration-300",style:{borderColor:"var(--nerdvana-border)",backgroundColor:"var(--nerdvana-surface)"},children:p.map(I=>C.jsx("button",{onClick:()=>t==null?void 0:t(I.toLowerCase()),className:"px-3 py-1.5 text-[0.75rem] uppercase tracking-[0.14em] border-[1.5px] border-transparent transition-all duration-300",style:{fontFamily:'"Courier New", monospace',color:"var(--nerdvana-text)"},onMouseEnter:b=>{b.currentTarget.style.borderColor="var(--nerdvana-border)",b.currentTarget.style.backgroundColor="var(--nerdvana-bg)",b.currentTarget.style.color="var(--nerdvana-text)"},onMouseLeave:b=>{b.currentTarget.style.borderColor="transparent",b.currentTarget.style.backgroundColor="transparent",b.currentTarget.style.color="var(--nerdvana-text)"},children:I},I))}),C.jsxs("div",{className:"flex items-center gap-2",children:[C.jsx("button",{onClick:v,className:"text-[0.7rem] uppercase tracking-[0.15em] transition-all duration-300 px-3 py-1.5 border-[2px] hover:-translate-y-0.5",style:{fontFamily:'"Courier New", monospace',color:"var(--nerdvana-text)",borderColor:"var(--nerdvana-border)",backgroundColor:"var(--nerdvana-surface)"},onMouseEnter:I=>{I.currentTarget.style.color="var(--nerdvana-accent)",I.currentTarget.style.borderColor="var(--nerdvana-accent)",I.currentTarget.style.boxShadow="1px 1px 0 var(--nerdvana-border)"},onMouseLeave:I=>{I.currentTarget.style.color="var(--nerdvana-text)",I.currentTarget.style.borderColor="var(--nerdvana-border)",I.currentTarget.style.boxShadow="none"},"aria-label":"Toggle theme",children:e==="light"?"Dark":"Light"}),u?C.jsx(C.Fragment,{children:C.jsxs("div",{ref:g,className:"relative",children:[C.jsx("button",{onClick:I=>{I.stopPropagation(),i(b=>!b)},className:"nerdvana-clickable flex items-center gap-2 px-2 py-1 border-[2px] transition-all duration-200 hover:-translate-y-0.5",style:{borderColor:"var(--nerdvana-border)",backgroundColor:"var(--nerdvana-surface)",color:"var(--nerdvana-text)",fontFamily:'"Courier New", monospace'},children:C.jsx("span",{className:"text-[0.72rem] uppercase tracking-[0.08em]",children:`Hi, ${o} !`})}),r&&C.jsx(E6,{onNavigate:T,onLogout:x})]})}):C.jsx("button",{onClick:()=>{h().then(()=>{t==null||t("home")}).catch(()=>{})},className:"text-[0.7rem] uppercase tracking-[0.15em] transition-all duration-300 px-4 py-1.5 border-[2px] auth-button",style:{fontFamily:'"Courier New", monospace',color:"var(--nerdvana-surface)",boxShadow:"2px 2px 0 var(--nerdvana-accent)"},children:"Sign In"})]})]}),C.jsx("style",{children:`
        .paper-texture {
          background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 600 600' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='6.5' numOctaves='5' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
          background-repeat: repeat;
        }

        .header-vignette {
          background: linear-gradient(90deg, rgba(235,232,223,0.28) 0%, rgba(235,232,223,0) 40%, rgba(235,232,223,0.28) 100%);
          transition: background 0.3s ease, opacity 0.3s ease;
        }

        .dark .header-vignette {
          background: linear-gradient(90deg, rgba(37,34,32,0.3) 0%, rgba(37,34,32,0) 40%, rgba(37,34,32,0.3) 100%);
        }

        .paper-texture {
          transition: opacity 0.3s ease;
        }

        .auth-button {
          background-color: var(--nerdvana-border);
          border-color: var(--nerdvana-border);
          color: var(--nerdvana-surface);
          transition: background-color 0.3s ease, border-color 0.3s ease, transform 0.2s ease;
        }

        .auth-button:hover {
          background-color: var(--nerdvana-accent);
          border-color: var(--nerdvana-accent);
          transform: translateY(-1px);
        }

        .auth-button:active {
          transform: translateY(0);
        }

        .dark .auth-button {
          background-color: var(--nerdvana-accent);
          border-color: var(--nerdvana-accent);
          color: var(--nerdvana-surface);
        }

        .dark .auth-button:hover {
          background-color: var(--nerdvana-accent-hover);
          border-color: var(--nerdvana-accent-hover);
        }

        #nerdvana-user-menu img {
          border-color: var(--nerdvana-border);
        }
      `})]})}const Mr=ee.memo(T6);function hl({variant:t="default"}){const e=t==="signature";return C.jsx("footer",{className:`footer mt-10 px-6 md:px-8 ${e?"footer--signature pt-1 pb-6 md:pb-8":"py-5 border-t"}`,style:{borderColor:e?"transparent":"var(--nerdvana-border)"},children:C.jsx("p",{className:`uppercase ${e?"text-center text-[0.64rem] md:text-[0.68rem] tracking-[0.16em]":"text-center text-[0.72rem] md:text-xs tracking-[0.12em]"}`,style:{fontFamily:'"Courier New", monospace',color:"var(--nerdvana-text)",opacity:e?.44:.62},children:"Made with love for nerds by a nerd"})})}function k6(t,e){const n=t.toLowerCase(),r=[];return(n.includes("canon")||n.includes("official")||n.includes("manga")||n.includes("book"))&&(r.push("Are there any contradictions?"),r.push("What do other sources say?")),(n.includes("theory")||n.includes("fan")||n.includes("speculation")||n.includes("reddit"))&&(r.push("Is this confirmed by the creator?"),r.push("What is the most popular theory?")),(n.includes("character")||n.includes("who is")||n.includes("strongest")||n.includes("powers"))&&(r.push("Who is stronger than them?"),r.push("What are their key weaknesses?"),r.push("List their major appearances")),(n.includes("ending")||n.includes("death")||n.includes("plot")||n.includes("story"))&&(r.push("Explain the timeline order"),r.push("What happens after this?"),r.push("Did I miss any easter eggs?")),r.length<2&&(r.push("Give a deeper explanation"),r.push("Summarize this quickly")),r.length<3&&r.push("Any spoilers I should know?"),Array.from(new Set(r)).slice(0,4)}function S6(t,e){const n={};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const I6=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,C6=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,b6={};function LE(t,e){return(b6.jsx?C6:I6).test(t)}const A6=/[ \t\n\f\r]/g;function P6(t){return typeof t=="object"?t.type==="text"?VE(t.value):!1:VE(t)}function VE(t){return t.replace(A6,"")===""}class kc{constructor(e,n,r){this.normal=n,this.property=e,r&&(this.space=r)}}kc.prototype.normal={};kc.prototype.property={};kc.prototype.space=void 0;function fb(t,e){const n={},r={};for(const i of t)Object.assign(n,i.property),Object.assign(r,i.normal);return new kc(n,r,e)}function ey(t){return t.toLowerCase()}class Fn{constructor(e,n){this.attribute=n,this.property=e}}Fn.prototype.attribute="";Fn.prototype.booleanish=!1;Fn.prototype.boolean=!1;Fn.prototype.commaOrSpaceSeparated=!1;Fn.prototype.commaSeparated=!1;Fn.prototype.defined=!1;Fn.prototype.mustUseProperty=!1;Fn.prototype.number=!1;Fn.prototype.overloadedBoolean=!1;Fn.prototype.property="";Fn.prototype.spaceSeparated=!1;Fn.prototype.space=void 0;let R6=0;const $e=Ko(),jt=Ko(),ty=Ko(),he=Ko(),ut=Ko(),tl=Ko(),Yn=Ko();function Ko(){return 2**++R6}const ny=Object.freeze(Object.defineProperty({__proto__:null,boolean:$e,booleanish:jt,commaOrSpaceSeparated:Yn,commaSeparated:tl,number:he,overloadedBoolean:ty,spaceSeparated:ut},Symbol.toStringTag,{value:"Module"})),Um=Object.keys(ny);class Xv extends Fn{constructor(e,n,r,i){let o=-1;if(super(e,n),ME(this,"space",i),typeof r=="number")for(;++o<Um.length;){const l=Um[o];ME(this,Um[o],(r&ny[l])===ny[l])}}}Xv.prototype.defined=!0;function ME(t,e,n){n&&(t[e]=n)}function Sl(t){const e={},n={};for(const[r,i]of Object.entries(t.properties)){const o=new Xv(r,t.transform(t.attributes||{},r),i,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(o.mustUseProperty=!0),e[r]=o,n[ey(r)]=r,n[ey(o.attribute)]=r}return new kc(e,n,t.space)}const db=Sl({properties:{ariaActiveDescendant:null,ariaAtomic:jt,ariaAutoComplete:null,ariaBusy:jt,ariaChecked:jt,ariaColCount:he,ariaColIndex:he,ariaColSpan:he,ariaControls:ut,ariaCurrent:null,ariaDescribedBy:ut,ariaDetails:null,ariaDisabled:jt,ariaDropEffect:ut,ariaErrorMessage:null,ariaExpanded:jt,ariaFlowTo:ut,ariaGrabbed:jt,ariaHasPopup:null,ariaHidden:jt,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:ut,ariaLevel:he,ariaLive:null,ariaModal:jt,ariaMultiLine:jt,ariaMultiSelectable:jt,ariaOrientation:null,ariaOwns:ut,ariaPlaceholder:null,ariaPosInSet:he,ariaPressed:jt,ariaReadOnly:jt,ariaRelevant:null,ariaRequired:jt,ariaRoleDescription:ut,ariaRowCount:he,ariaRowIndex:he,ariaRowSpan:he,ariaSelected:jt,ariaSetSize:he,ariaSort:null,ariaValueMax:he,ariaValueMin:he,ariaValueNow:he,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function pb(t,e){return e in t?t[e]:e}function mb(t,e){return pb(t,e.toLowerCase())}const N6=Sl({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:tl,acceptCharset:ut,accessKey:ut,action:null,allow:null,allowFullScreen:$e,allowPaymentRequest:$e,allowUserMedia:$e,alt:null,as:null,async:$e,autoCapitalize:null,autoComplete:ut,autoFocus:$e,autoPlay:$e,blocking:ut,capture:null,charSet:null,checked:$e,cite:null,className:ut,cols:he,colSpan:null,content:null,contentEditable:jt,controls:$e,controlsList:ut,coords:he|tl,crossOrigin:null,data:null,dateTime:null,decoding:null,default:$e,defer:$e,dir:null,dirName:null,disabled:$e,download:ty,draggable:jt,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:$e,formTarget:null,headers:ut,height:he,hidden:ty,high:he,href:null,hrefLang:null,htmlFor:ut,httpEquiv:ut,id:null,imageSizes:null,imageSrcSet:null,inert:$e,inputMode:null,integrity:null,is:null,isMap:$e,itemId:null,itemProp:ut,itemRef:ut,itemScope:$e,itemType:ut,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:$e,low:he,manifest:null,max:null,maxLength:he,media:null,method:null,min:null,minLength:he,multiple:$e,muted:$e,name:null,nonce:null,noModule:$e,noValidate:$e,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:$e,optimum:he,pattern:null,ping:ut,placeholder:null,playsInline:$e,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:$e,referrerPolicy:null,rel:ut,required:$e,reversed:$e,rows:he,rowSpan:he,sandbox:ut,scope:null,scoped:$e,seamless:$e,selected:$e,shadowRootClonable:$e,shadowRootDelegatesFocus:$e,shadowRootMode:null,shape:null,size:he,sizes:null,slot:null,span:he,spellCheck:jt,src:null,srcDoc:null,srcLang:null,srcSet:null,start:he,step:null,style:null,tabIndex:he,target:null,title:null,translate:null,type:null,typeMustMatch:$e,useMap:null,value:jt,width:he,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:ut,axis:null,background:null,bgColor:null,border:he,borderColor:null,bottomMargin:he,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:$e,declare:$e,event:null,face:null,frame:null,frameBorder:null,hSpace:he,leftMargin:he,link:null,longDesc:null,lowSrc:null,marginHeight:he,marginWidth:he,noResize:$e,noHref:$e,noShade:$e,noWrap:$e,object:null,profile:null,prompt:null,rev:null,rightMargin:he,rules:null,scheme:null,scrolling:jt,standby:null,summary:null,text:null,topMargin:he,valueType:null,version:null,vAlign:null,vLink:null,vSpace:he,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:$e,disableRemotePlayback:$e,prefix:null,property:null,results:he,security:null,unselectable:null},space:"html",transform:mb}),D6=Sl({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Yn,accentHeight:he,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:he,amplitude:he,arabicForm:null,ascent:he,attributeName:null,attributeType:null,azimuth:he,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:he,by:null,calcMode:null,capHeight:he,className:ut,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:he,diffuseConstant:he,direction:null,display:null,dur:null,divisor:he,dominantBaseline:null,download:$e,dx:null,dy:null,edgeMode:null,editable:null,elevation:he,enableBackground:null,end:null,event:null,exponent:he,externalResourcesRequired:null,fill:null,fillOpacity:he,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:tl,g2:tl,glyphName:tl,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:he,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:he,horizOriginX:he,horizOriginY:he,id:null,ideographic:he,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:he,k:he,k1:he,k2:he,k3:he,k4:he,kernelMatrix:Yn,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:he,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:he,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:he,overlineThickness:he,paintOrder:null,panose1:null,path:null,pathLength:he,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:ut,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:he,pointsAtY:he,pointsAtZ:he,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Yn,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Yn,rev:Yn,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Yn,requiredFeatures:Yn,requiredFonts:Yn,requiredFormats:Yn,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:he,specularExponent:he,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:he,strikethroughThickness:he,string:null,stroke:null,strokeDashArray:Yn,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:he,strokeOpacity:he,strokeWidth:null,style:null,surfaceScale:he,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Yn,tabIndex:he,tableValues:null,target:null,targetX:he,targetY:he,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Yn,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:he,underlineThickness:he,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:he,values:null,vAlphabetic:he,vMathematical:he,vectorEffect:null,vHanging:he,vIdeographic:he,version:null,vertAdvY:he,vertOriginX:he,vertOriginY:he,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:he,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:pb}),gb=Sl({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),yb=Sl({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:mb}),vb=Sl({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),L6={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},V6=/[A-Z]/g,OE=/-[a-z]/g,M6=/^data[-\w.:]+$/i;function O6(t,e){const n=ey(e);let r=e,i=Fn;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&M6.test(e)){if(e.charAt(4)==="-"){const o=e.slice(5).replace(OE,j6);r="data"+o.charAt(0).toUpperCase()+o.slice(1)}else{const o=e.slice(4);if(!OE.test(o)){let l=o.replace(V6,F6);l.charAt(0)!=="-"&&(l="-"+l),e="data"+l}}i=Xv}return new i(r,e)}function F6(t){return"-"+t.toLowerCase()}function j6(t){return t.charAt(1).toUpperCase()}const U6=fb([db,N6,gb,yb,vb],"html"),Jv=fb([db,D6,gb,yb,vb],"svg");function B6(t){return t.join(" ").trim()}var Na={},Bm,FE;function z6(){if(FE)return Bm;FE=1;var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,i=/^:\s*/,o=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,l=/^[;\s]*/,u=/^\s+|\s+$/g,h=`
`,f="/",p="*",g="",v="comment",x="declaration";function T(b,N){if(typeof b!="string")throw new TypeError("First argument must be a string");if(!b)return[];N=N||{};var z=1,U=1;function J(ce){var ae=ce.match(e);ae&&(z+=ae.length);var Me=ce.lastIndexOf(h);U=~Me?ce.length-Me:U+ce.length}function X(){var ce={line:z,column:U};return function(ae){return ae.position=new H(ce),V(),ae}}function H(ce){this.start=ce,this.end={line:z,column:U},this.source=N.source}H.prototype.content=b;function O(ce){var ae=new Error(N.source+":"+z+":"+U+": "+ce);if(ae.reason=ce,ae.filename=N.source,ae.line=z,ae.column=U,ae.source=b,!N.silent)throw ae}function A(ce){var ae=ce.exec(b);if(ae){var Me=ae[0];return J(Me),b=b.slice(Me.length),ae}}function V(){A(n)}function S(ce){var ae;for(ce=ce||[];ae=M();)ae!==!1&&ce.push(ae);return ce}function M(){var ce=X();if(!(f!=b.charAt(0)||p!=b.charAt(1))){for(var ae=2;g!=b.charAt(ae)&&(p!=b.charAt(ae)||f!=b.charAt(ae+1));)++ae;if(ae+=2,g===b.charAt(ae-1))return O("End of comment missing");var Me=b.slice(2,ae-2);return U+=2,J(Me),b=b.slice(ae),U+=2,ce({type:v,comment:Me})}}function F(){var ce=X(),ae=A(r);if(ae){if(M(),!A(i))return O("property missing ':'");var Me=A(o),_e=ce({type:x,property:I(ae[0].replace(t,g)),value:Me?I(Me[0].replace(t,g)):g});return A(l),_e}}function D(){var ce=[];S(ce);for(var ae;ae=F();)ae!==!1&&(ce.push(ae),S(ce));return ce}return V(),D()}function I(b){return b?b.replace(u,g):g}return Bm=T,Bm}var jE;function $6(){if(jE)return Na;jE=1;var t=Na&&Na.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Na,"__esModule",{value:!0}),Na.default=n;const e=t(z6());function n(r,i){let o=null;if(!r||typeof r!="string")return o;const l=(0,e.default)(r),u=typeof i=="function";return l.forEach(h=>{if(h.type!=="declaration")return;const{property:f,value:p}=h;u?i(f,p,h):p&&(o=o||{},o[f]=p)}),o}return Na}var vu={},UE;function q6(){if(UE)return vu;UE=1,Object.defineProperty(vu,"__esModule",{value:!0}),vu.camelCase=void 0;var t=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,n=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,i=/^-(ms)-/,o=function(f){return!f||n.test(f)||t.test(f)},l=function(f,p){return p.toUpperCase()},u=function(f,p){return"".concat(p,"-")},h=function(f,p){return p===void 0&&(p={}),o(f)?f:(f=f.toLowerCase(),p.reactCompat?f=f.replace(i,u):f=f.replace(r,u),f.replace(e,l))};return vu.camelCase=h,vu}var wu,BE;function H6(){if(BE)return wu;BE=1;var t=wu&&wu.__importDefault||function(i){return i&&i.__esModule?i:{default:i}},e=t($6()),n=q6();function r(i,o){var l={};return!i||typeof i!="string"||(0,e.default)(i,function(u,h){u&&h&&(l[(0,n.camelCase)(u,o)]=h)}),l}return r.default=r,wu=r,wu}var W6=H6();const G6=DT(W6),wb=_b("end"),Zv=_b("start");function _b(t){return e;function e(n){const r=n&&n.position&&n.position[t]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function K6(t){const e=Zv(t),n=wb(t);if(e&&n)return{start:e,end:n}}function Fu(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?zE(t.position):"start"in t||"end"in t?zE(t):"line"in t||"column"in t?ry(t):""}function ry(t){return $E(t&&t.line)+":"+$E(t&&t.column)}function zE(t){return ry(t&&t.start)+"-"+ry(t&&t.end)}function $E(t){return t&&typeof t=="number"?t:1}class xn extends Error{constructor(e,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",o={},l=!1;if(n&&("line"in n&&"column"in n?o={place:n}:"start"in n&&"end"in n?o={place:n}:"type"in n?o={ancestors:[n],place:n.position}:o={...n}),typeof e=="string"?i=e:!o.cause&&e&&(l=!0,i=e.message,o.cause=e),!o.ruleId&&!o.source&&typeof r=="string"){const h=r.indexOf(":");h===-1?o.ruleId=r:(o.source=r.slice(0,h),o.ruleId=r.slice(h+1))}if(!o.place&&o.ancestors&&o.ancestors){const h=o.ancestors[o.ancestors.length-1];h&&(o.place=h.position)}const u=o.place&&"start"in o.place?o.place.start:o.place;this.ancestors=o.ancestors||void 0,this.cause=o.cause||void 0,this.column=u?u.column:void 0,this.fatal=void 0,this.file="",this.message=i,this.line=u?u.line:void 0,this.name=Fu(o.place)||"1:1",this.place=o.place||void 0,this.reason=this.message,this.ruleId=o.ruleId||void 0,this.source=o.source||void 0,this.stack=l&&o.cause&&typeof o.cause.stack=="string"?o.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}xn.prototype.file="";xn.prototype.name="";xn.prototype.reason="";xn.prototype.message="";xn.prototype.stack="";xn.prototype.column=void 0;xn.prototype.line=void 0;xn.prototype.ancestors=void 0;xn.prototype.cause=void 0;xn.prototype.fatal=void 0;xn.prototype.place=void 0;xn.prototype.ruleId=void 0;xn.prototype.source=void 0;const ew={}.hasOwnProperty,Q6=new Map,Y6=/[A-Z]/g,X6=new Set(["table","tbody","thead","tfoot","tr"]),J6=new Set(["td","th"]),xb="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function Z6(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let r;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=a9(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=o9(n,e.jsx,e.jsxs)}const i={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:r,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?Jv:U6,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},o=Eb(i,t,void 0);return o&&typeof o!="string"?o:i.create(t,i.Fragment,{children:o||void 0},void 0)}function Eb(t,e,n){if(e.type==="element")return e9(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return t9(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return r9(t,e,n);if(e.type==="mdxjsEsm")return n9(t,e);if(e.type==="root")return i9(t,e,n);if(e.type==="text")return s9(t,e)}function e9(t,e,n){const r=t.schema;let i=r;e.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=Jv,t.schema=i),t.ancestors.push(e);const o=kb(t,e.tagName,!1),l=l9(t,e);let u=nw(t,e);return X6.has(e.tagName)&&(u=u.filter(function(h){return typeof h=="string"?!P6(h):!0})),Tb(t,l,o,e),tw(l,u),t.ancestors.pop(),t.schema=r,t.create(e,o,l,n)}function t9(t,e){if(e.data&&e.data.estree&&t.evaluater){const r=e.data.estree.body[0];return r.type,t.evaluater.evaluateExpression(r.expression)}ic(t,e.position)}function n9(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);ic(t,e.position)}function r9(t,e,n){const r=t.schema;let i=r;e.name==="svg"&&r.space==="html"&&(i=Jv,t.schema=i),t.ancestors.push(e);const o=e.name===null?t.Fragment:kb(t,e.name,!0),l=u9(t,e),u=nw(t,e);return Tb(t,l,o,e),tw(l,u),t.ancestors.pop(),t.schema=r,t.create(e,o,l,n)}function i9(t,e,n){const r={};return tw(r,nw(t,e)),t.create(e,t.Fragment,r,n)}function s9(t,e){return e.value}function Tb(t,e,n,r){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=r)}function tw(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function o9(t,e,n){return r;function r(i,o,l,u){const f=Array.isArray(l.children)?n:e;return u?f(o,l,u):f(o,l)}}function a9(t,e){return n;function n(r,i,o,l){const u=Array.isArray(o.children),h=Zv(r);return e(i,o,l,u,{columnNumber:h?h.column-1:void 0,fileName:t,lineNumber:h?h.line:void 0},void 0)}}function l9(t,e){const n={};let r,i;for(i in e.properties)if(i!=="children"&&ew.call(e.properties,i)){const o=c9(t,i,e.properties[i]);if(o){const[l,u]=o;t.tableCellAlignToStyle&&l==="align"&&typeof u=="string"&&J6.has(e.tagName)?r=u:n[l]=u}}if(r){const o=n.style||(n.style={});o[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function u9(t,e){const n={};for(const r of e.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&t.evaluater){const o=r.data.estree.body[0];o.type;const l=o.expression;l.type;const u=l.properties[0];u.type,Object.assign(n,t.evaluater.evaluateExpression(u.argument))}else ic(t,e.position);else{const i=r.name;let o;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&t.evaluater){const u=r.value.data.estree.body[0];u.type,o=t.evaluater.evaluateExpression(u.expression)}else ic(t,e.position);else o=r.value===null?!0:r.value;n[i]=o}return n}function nw(t,e){const n=[];let r=-1;const i=t.passKeys?new Map:Q6;for(;++r<e.children.length;){const o=e.children[r];let l;if(t.passKeys){const h=o.type==="element"?o.tagName:o.type==="mdxJsxFlowElement"||o.type==="mdxJsxTextElement"?o.name:void 0;if(h){const f=i.get(h)||0;l=h+"-"+f,i.set(h,f+1)}}const u=Eb(t,o,l);u!==void 0&&n.push(u)}return n}function c9(t,e,n){const r=O6(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?S6(n):B6(n)),r.property==="style"){let i=typeof n=="object"?n:h9(t,String(n));return t.stylePropertyNameCase==="css"&&(i=f9(i)),["style",i]}return[t.elementAttributeNameCase==="react"&&r.space?L6[r.property]||r.property:r.attribute,n]}}function h9(t,e){try{return G6(e,{reactCompat:!0})}catch(n){if(t.ignoreInvalidStyle)return{};const r=n,i=new xn("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=t.filePath||void 0,i.url=xb+"#cannot-parse-style-attribute",i}}function kb(t,e,n){let r;if(!n)r={type:"Literal",value:e};else if(e.includes(".")){const i=e.split(".");let o=-1,l;for(;++o<i.length;){const u=LE(i[o])?{type:"Identifier",name:i[o]}:{type:"Literal",value:i[o]};l=l?{type:"MemberExpression",object:l,property:u,computed:!!(o&&u.type==="Literal"),optional:!1}:u}r=l}else r=LE(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(r.type==="Literal"){const i=r.value;return ew.call(t.components,i)?t.components[i]:i}if(t.evaluater)return t.evaluater.evaluateExpression(r);ic(t)}function ic(t,e){const n=new xn("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=xb+"#cannot-handle-mdx-estrees-without-createevaluater",n}function f9(t){const e={};let n;for(n in t)ew.call(t,n)&&(e[d9(n)]=t[n]);return e}function d9(t){let e=t.replace(Y6,p9);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function p9(t){return"-"+t.toLowerCase()}const zm={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},m9={};function rw(t,e){const n=m9,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return Sb(t,r,i)}function Sb(t,e,n){if(g9(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return qE(t.children,e,n)}return Array.isArray(t)?qE(t,e,n):""}function qE(t,e,n){const r=[];let i=-1;for(;++i<t.length;)r[i]=Sb(t[i],e,n);return r.join("")}function g9(t){return!!(t&&typeof t=="object")}const HE=document.createElement("i");function iw(t){const e="&"+t+";";HE.innerHTML=e;const n=HE.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function er(t,e,n,r){const i=t.length;let o=0,l;if(e<0?e=-e>i?0:i+e:e=e>i?i:e,n=n>0?n:0,r.length<1e4)l=Array.from(r),l.unshift(e,n),t.splice(...l);else for(n&&t.splice(e,n);o<r.length;)l=r.slice(o,o+1e4),l.unshift(e,0),t.splice(...l),o+=1e4,e+=1e4}function fr(t,e){return t.length>0?(er(t,t.length,0,e),t):e}const WE={}.hasOwnProperty;function Ib(t){const e={};let n=-1;for(;++n<t.length;)y9(e,t[n]);return e}function y9(t,e){let n;for(n in e){const i=(WE.call(t,n)?t[n]:void 0)||(t[n]={}),o=e[n];let l;if(o)for(l in o){WE.call(i,l)||(i[l]=[]);const u=o[l];v9(i[l],Array.isArray(u)?u:u?[u]:[])}}}function v9(t,e){let n=-1;const r=[];for(;++n<e.length;)(e[n].add==="after"?t:r).push(e[n]);er(t,0,0,r)}function Cb(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function Nr(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Sn=Hs(/[A-Za-z]/),vn=Hs(/[\dA-Za-z]/),w9=Hs(/[#-'*+\--9=?A-Z^-~]/);function Wf(t){return t!==null&&(t<32||t===127)}const iy=Hs(/\d/),_9=Hs(/[\dA-Fa-f]/),x9=Hs(/[!-/:-@[-`{-~]/);function Le(t){return t!==null&&t<-2}function at(t){return t!==null&&(t<0||t===32)}function We(t){return t===-2||t===-1||t===32}const Id=Hs(new RegExp("\\p{P}|\\p{S}","u")),zo=Hs(/\s/);function Hs(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function Il(t){const e=[];let n=-1,r=0,i=0;for(;++n<t.length;){const o=t.charCodeAt(n);let l="";if(o===37&&vn(t.charCodeAt(n+1))&&vn(t.charCodeAt(n+2)))i=2;else if(o<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(o))||(l=String.fromCharCode(o));else if(o>55295&&o<57344){const u=t.charCodeAt(n+1);o<56320&&u>56319&&u<57344?(l=String.fromCharCode(o,u),i=1):l=""}else l=String.fromCharCode(o);l&&(e.push(t.slice(r,n),encodeURIComponent(l)),r=n+i+1,l=""),i&&(n+=i,i=0)}return e.join("")+t.slice(r)}function Ze(t,e,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let o=0;return l;function l(h){return We(h)?(t.enter(n),u(h)):e(h)}function u(h){return We(h)&&o++<i?(t.consume(h),u):(t.exit(n),e(h))}}const E9={tokenize:T9};function T9(t){const e=t.attempt(this.parser.constructs.contentInitial,r,i);let n;return e;function r(u){if(u===null){t.consume(u);return}return t.enter("lineEnding"),t.consume(u),t.exit("lineEnding"),Ze(t,e,"linePrefix")}function i(u){return t.enter("paragraph"),o(u)}function o(u){const h=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=h),n=h,l(u)}function l(u){if(u===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(u);return}return Le(u)?(t.consume(u),t.exit("chunkText"),o):(t.consume(u),l)}}const k9={tokenize:S9},GE={tokenize:I9};function S9(t){const e=this,n=[];let r=0,i,o,l;return u;function u(U){if(r<n.length){const J=n[r];return e.containerState=J[1],t.attempt(J[0].continuation,h,f)(U)}return f(U)}function h(U){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,i&&z();const J=e.events.length;let X=J,H;for(;X--;)if(e.events[X][0]==="exit"&&e.events[X][1].type==="chunkFlow"){H=e.events[X][1].end;break}N(r);let O=J;for(;O<e.events.length;)e.events[O][1].end={...H},O++;return er(e.events,X+1,0,e.events.slice(J)),e.events.length=O,f(U)}return u(U)}function f(U){if(r===n.length){if(!i)return v(U);if(i.currentConstruct&&i.currentConstruct.concrete)return T(U);e.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(GE,p,g)(U)}function p(U){return i&&z(),N(r),v(U)}function g(U){return e.parser.lazy[e.now().line]=r!==n.length,l=e.now().offset,T(U)}function v(U){return e.containerState={},t.attempt(GE,x,T)(U)}function x(U){return r++,n.push([e.currentConstruct,e.containerState]),v(U)}function T(U){if(U===null){i&&z(),N(0),t.consume(U);return}return i=i||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:o}),I(U)}function I(U){if(U===null){b(t.exit("chunkFlow"),!0),N(0),t.consume(U);return}return Le(U)?(t.consume(U),b(t.exit("chunkFlow")),r=0,e.interrupt=void 0,u):(t.consume(U),I)}function b(U,J){const X=e.sliceStream(U);if(J&&X.push(null),U.previous=o,o&&(o.next=U),o=U,i.defineSkip(U.start),i.write(X),e.parser.lazy[U.start.line]){let H=i.events.length;for(;H--;)if(i.events[H][1].start.offset<l&&(!i.events[H][1].end||i.events[H][1].end.offset>l))return;const O=e.events.length;let A=O,V,S;for(;A--;)if(e.events[A][0]==="exit"&&e.events[A][1].type==="chunkFlow"){if(V){S=e.events[A][1].end;break}V=!0}for(N(r),H=O;H<e.events.length;)e.events[H][1].end={...S},H++;er(e.events,A+1,0,e.events.slice(O)),e.events.length=H}}function N(U){let J=n.length;for(;J-- >U;){const X=n[J];e.containerState=X[1],X[0].exit.call(e,t)}n.length=U}function z(){i.write([null]),o=void 0,i=void 0,e.containerState._closeFlow=void 0}}function I9(t,e,n){return Ze(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function fl(t){if(t===null||at(t)||zo(t))return 1;if(Id(t))return 2}function Cd(t,e,n){const r=[];let i=-1;for(;++i<t.length;){const o=t[i].resolveAll;o&&!r.includes(o)&&(e=o(e,n),r.push(o))}return e}const sy={name:"attention",resolveAll:C9,tokenize:b9};function C9(t,e){let n=-1,r,i,o,l,u,h,f,p;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(r=n;r--;)if(t[r][0]==="exit"&&t[r][1].type==="attentionSequence"&&t[r][1]._open&&e.sliceSerialize(t[r][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[r][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[r][1].end.offset-t[r][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;h=t[r][1].end.offset-t[r][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const g={...t[r][1].end},v={...t[n][1].start};KE(g,-h),KE(v,h),l={type:h>1?"strongSequence":"emphasisSequence",start:g,end:{...t[r][1].end}},u={type:h>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:v},o={type:h>1?"strongText":"emphasisText",start:{...t[r][1].end},end:{...t[n][1].start}},i={type:h>1?"strong":"emphasis",start:{...l.start},end:{...u.end}},t[r][1].end={...l.start},t[n][1].start={...u.end},f=[],t[r][1].end.offset-t[r][1].start.offset&&(f=fr(f,[["enter",t[r][1],e],["exit",t[r][1],e]])),f=fr(f,[["enter",i,e],["enter",l,e],["exit",l,e],["enter",o,e]]),f=fr(f,Cd(e.parser.constructs.insideSpan.null,t.slice(r+1,n),e)),f=fr(f,[["exit",o,e],["enter",u,e],["exit",u,e],["exit",i,e]]),t[n][1].end.offset-t[n][1].start.offset?(p=2,f=fr(f,[["enter",t[n][1],e],["exit",t[n][1],e]])):p=0,er(t,r-1,n-r+3,f),n=r+f.length-p-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function b9(t,e){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=fl(r);let o;return l;function l(h){return o=h,t.enter("attentionSequence"),u(h)}function u(h){if(h===o)return t.consume(h),u;const f=t.exit("attentionSequence"),p=fl(h),g=!p||p===2&&i||n.includes(h),v=!i||i===2&&p||n.includes(r);return f._open=!!(o===42?g:g&&(i||!v)),f._close=!!(o===42?v:v&&(p||!g)),e(h)}}function KE(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const A9={name:"autolink",tokenize:P9};function P9(t,e,n){let r=0;return i;function i(x){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(x),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),o}function o(x){return Sn(x)?(t.consume(x),l):x===64?n(x):f(x)}function l(x){return x===43||x===45||x===46||vn(x)?(r=1,u(x)):f(x)}function u(x){return x===58?(t.consume(x),r=0,h):(x===43||x===45||x===46||vn(x))&&r++<32?(t.consume(x),u):(r=0,f(x))}function h(x){return x===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(x),t.exit("autolinkMarker"),t.exit("autolink"),e):x===null||x===32||x===60||Wf(x)?n(x):(t.consume(x),h)}function f(x){return x===64?(t.consume(x),p):w9(x)?(t.consume(x),f):n(x)}function p(x){return vn(x)?g(x):n(x)}function g(x){return x===46?(t.consume(x),r=0,p):x===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(x),t.exit("autolinkMarker"),t.exit("autolink"),e):v(x)}function v(x){if((x===45||vn(x))&&r++<63){const T=x===45?v:g;return t.consume(x),T}return n(x)}}const Sc={partial:!0,tokenize:R9};function R9(t,e,n){return r;function r(o){return We(o)?Ze(t,i,"linePrefix")(o):i(o)}function i(o){return o===null||Le(o)?e(o):n(o)}}const bb={continuation:{tokenize:D9},exit:L9,name:"blockQuote",tokenize:N9};function N9(t,e,n){const r=this;return i;function i(l){if(l===62){const u=r.containerState;return u.open||(t.enter("blockQuote",{_container:!0}),u.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(l),t.exit("blockQuoteMarker"),o}return n(l)}function o(l){return We(l)?(t.enter("blockQuotePrefixWhitespace"),t.consume(l),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(l))}}function D9(t,e,n){const r=this;return i;function i(l){return We(l)?Ze(t,o,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l):o(l)}function o(l){return t.attempt(bb,e,n)(l)}}function L9(t){t.exit("blockQuote")}const Ab={name:"characterEscape",tokenize:V9};function V9(t,e,n){return r;function r(o){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(o),t.exit("escapeMarker"),i}function i(o){return x9(o)?(t.enter("characterEscapeValue"),t.consume(o),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(o)}}const Pb={name:"characterReference",tokenize:M9};function M9(t,e,n){const r=this;let i=0,o,l;return u;function u(g){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(g),t.exit("characterReferenceMarker"),h}function h(g){return g===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(g),t.exit("characterReferenceMarkerNumeric"),f):(t.enter("characterReferenceValue"),o=31,l=vn,p(g))}function f(g){return g===88||g===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(g),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),o=6,l=_9,p):(t.enter("characterReferenceValue"),o=7,l=iy,p(g))}function p(g){if(g===59&&i){const v=t.exit("characterReferenceValue");return l===vn&&!iw(r.sliceSerialize(v))?n(g):(t.enter("characterReferenceMarker"),t.consume(g),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return l(g)&&i++<o?(t.consume(g),p):n(g)}}const QE={partial:!0,tokenize:F9},YE={concrete:!0,name:"codeFenced",tokenize:O9};function O9(t,e,n){const r=this,i={partial:!0,tokenize:X};let o=0,l=0,u;return h;function h(H){return f(H)}function f(H){const O=r.events[r.events.length-1];return o=O&&O[1].type==="linePrefix"?O[2].sliceSerialize(O[1],!0).length:0,u=H,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),p(H)}function p(H){return H===u?(l++,t.consume(H),p):l<3?n(H):(t.exit("codeFencedFenceSequence"),We(H)?Ze(t,g,"whitespace")(H):g(H))}function g(H){return H===null||Le(H)?(t.exit("codeFencedFence"),r.interrupt?e(H):t.check(QE,I,J)(H)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),v(H))}function v(H){return H===null||Le(H)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),g(H)):We(H)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),Ze(t,x,"whitespace")(H)):H===96&&H===u?n(H):(t.consume(H),v)}function x(H){return H===null||Le(H)?g(H):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),T(H))}function T(H){return H===null||Le(H)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),g(H)):H===96&&H===u?n(H):(t.consume(H),T)}function I(H){return t.attempt(i,J,b)(H)}function b(H){return t.enter("lineEnding"),t.consume(H),t.exit("lineEnding"),N}function N(H){return o>0&&We(H)?Ze(t,z,"linePrefix",o+1)(H):z(H)}function z(H){return H===null||Le(H)?t.check(QE,I,J)(H):(t.enter("codeFlowValue"),U(H))}function U(H){return H===null||Le(H)?(t.exit("codeFlowValue"),z(H)):(t.consume(H),U)}function J(H){return t.exit("codeFenced"),e(H)}function X(H,O,A){let V=0;return S;function S(ae){return H.enter("lineEnding"),H.consume(ae),H.exit("lineEnding"),M}function M(ae){return H.enter("codeFencedFence"),We(ae)?Ze(H,F,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(ae):F(ae)}function F(ae){return ae===u?(H.enter("codeFencedFenceSequence"),D(ae)):A(ae)}function D(ae){return ae===u?(V++,H.consume(ae),D):V>=l?(H.exit("codeFencedFenceSequence"),We(ae)?Ze(H,ce,"whitespace")(ae):ce(ae)):A(ae)}function ce(ae){return ae===null||Le(ae)?(H.exit("codeFencedFence"),O(ae)):A(ae)}}}function F9(t,e,n){const r=this;return i;function i(l){return l===null?n(l):(t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),o)}function o(l){return r.parser.lazy[r.now().line]?n(l):e(l)}}const $m={name:"codeIndented",tokenize:U9},j9={partial:!0,tokenize:B9};function U9(t,e,n){const r=this;return i;function i(f){return t.enter("codeIndented"),Ze(t,o,"linePrefix",5)(f)}function o(f){const p=r.events[r.events.length-1];return p&&p[1].type==="linePrefix"&&p[2].sliceSerialize(p[1],!0).length>=4?l(f):n(f)}function l(f){return f===null?h(f):Le(f)?t.attempt(j9,l,h)(f):(t.enter("codeFlowValue"),u(f))}function u(f){return f===null||Le(f)?(t.exit("codeFlowValue"),l(f)):(t.consume(f),u)}function h(f){return t.exit("codeIndented"),e(f)}}function B9(t,e,n){const r=this;return i;function i(l){return r.parser.lazy[r.now().line]?n(l):Le(l)?(t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),i):Ze(t,o,"linePrefix",5)(l)}function o(l){const u=r.events[r.events.length-1];return u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?e(l):Le(l)?i(l):n(l)}}const z9={name:"codeText",previous:q9,resolve:$9,tokenize:H9};function $9(t){let e=t.length-4,n=3,r,i;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(r=n;++r<e;)if(t[r][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(r=n-1,e++;++r<=e;)i===void 0?r!==e&&t[r][1].type!=="lineEnding"&&(i=r):(r===e||t[r][1].type==="lineEnding")&&(t[i][1].type="codeTextData",r!==i+2&&(t[i][1].end=t[r-1][1].end,t.splice(i+2,r-i-2),e-=r-i-2,r=i+2),i=void 0);return t}function q9(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function H9(t,e,n){let r=0,i,o;return l;function l(g){return t.enter("codeText"),t.enter("codeTextSequence"),u(g)}function u(g){return g===96?(t.consume(g),r++,u):(t.exit("codeTextSequence"),h(g))}function h(g){return g===null?n(g):g===32?(t.enter("space"),t.consume(g),t.exit("space"),h):g===96?(o=t.enter("codeTextSequence"),i=0,p(g)):Le(g)?(t.enter("lineEnding"),t.consume(g),t.exit("lineEnding"),h):(t.enter("codeTextData"),f(g))}function f(g){return g===null||g===32||g===96||Le(g)?(t.exit("codeTextData"),h(g)):(t.consume(g),f)}function p(g){return g===96?(t.consume(g),i++,p):i===r?(t.exit("codeTextSequence"),t.exit("codeText"),e(g)):(o.type="codeTextData",f(g))}}class W9{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,n,r){const i=n||0;this.setCursor(Math.trunc(e));const o=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&_u(this.left,r),o.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),_u(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),_u(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);_u(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);_u(this.left,n.reverse())}}}function _u(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function Rb(t){const e={};let n=-1,r,i,o,l,u,h,f;const p=new W9(t);for(;++n<p.length;){for(;n in e;)n=e[n];if(r=p.get(n),n&&r[1].type==="chunkFlow"&&p.get(n-1)[1].type==="listItemPrefix"&&(h=r[1]._tokenizer.events,o=0,o<h.length&&h[o][1].type==="lineEndingBlank"&&(o+=2),o<h.length&&h[o][1].type==="content"))for(;++o<h.length&&h[o][1].type!=="content";)h[o][1].type==="chunkText"&&(h[o][1]._isInFirstContentOfListItem=!0,o++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,G9(p,n)),n=e[n],f=!0);else if(r[1]._container){for(o=n,i=void 0;o--;)if(l=p.get(o),l[1].type==="lineEnding"||l[1].type==="lineEndingBlank")l[0]==="enter"&&(i&&(p.get(i)[1].type="lineEndingBlank"),l[1].type="lineEnding",i=o);else if(!(l[1].type==="linePrefix"||l[1].type==="listItemIndent"))break;i&&(r[1].end={...p.get(i)[1].start},u=p.slice(i,n),u.unshift(r),p.splice(i,n-i+1,u))}}return er(t,0,Number.POSITIVE_INFINITY,p.slice(0)),!f}function G9(t,e){const n=t.get(e)[1],r=t.get(e)[2];let i=e-1;const o=[];let l=n._tokenizer;l||(l=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(l._contentTypeTextTrailing=!0));const u=l.events,h=[],f={};let p,g,v=-1,x=n,T=0,I=0;const b=[I];for(;x;){for(;t.get(++i)[1]!==x;);o.push(i),x._tokenizer||(p=r.sliceStream(x),x.next||p.push(null),g&&l.defineSkip(x.start),x._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=!0),l.write(p),x._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=void 0)),g=x,x=x.next}for(x=n;++v<u.length;)u[v][0]==="exit"&&u[v-1][0]==="enter"&&u[v][1].type===u[v-1][1].type&&u[v][1].start.line!==u[v][1].end.line&&(I=v+1,b.push(I),x._tokenizer=void 0,x.previous=void 0,x=x.next);for(l.events=[],x?(x._tokenizer=void 0,x.previous=void 0):b.pop(),v=b.length;v--;){const N=u.slice(b[v],b[v+1]),z=o.pop();h.push([z,z+N.length-1]),t.splice(z,2,N)}for(h.reverse(),v=-1;++v<h.length;)f[T+h[v][0]]=T+h[v][1],T+=h[v][1]-h[v][0]-1;return f}const K9={resolve:Y9,tokenize:X9},Q9={partial:!0,tokenize:J9};function Y9(t){return Rb(t),t}function X9(t,e){let n;return r;function r(u){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),i(u)}function i(u){return u===null?o(u):Le(u)?t.check(Q9,l,o)(u):(t.consume(u),i)}function o(u){return t.exit("chunkContent"),t.exit("content"),e(u)}function l(u){return t.consume(u),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function J9(t,e,n){const r=this;return i;function i(l){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),Ze(t,o,"linePrefix")}function o(l){if(l===null||Le(l))return n(l);const u=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?e(l):t.interrupt(r.parser.constructs.flow,n,e)(l)}}function Nb(t,e,n,r,i,o,l,u,h){const f=h||Number.POSITIVE_INFINITY;let p=0;return g;function g(N){return N===60?(t.enter(r),t.enter(i),t.enter(o),t.consume(N),t.exit(o),v):N===null||N===32||N===41||Wf(N)?n(N):(t.enter(r),t.enter(l),t.enter(u),t.enter("chunkString",{contentType:"string"}),I(N))}function v(N){return N===62?(t.enter(o),t.consume(N),t.exit(o),t.exit(i),t.exit(r),e):(t.enter(u),t.enter("chunkString",{contentType:"string"}),x(N))}function x(N){return N===62?(t.exit("chunkString"),t.exit(u),v(N)):N===null||N===60||Le(N)?n(N):(t.consume(N),N===92?T:x)}function T(N){return N===60||N===62||N===92?(t.consume(N),x):x(N)}function I(N){return!p&&(N===null||N===41||at(N))?(t.exit("chunkString"),t.exit(u),t.exit(l),t.exit(r),e(N)):p<f&&N===40?(t.consume(N),p++,I):N===41?(t.consume(N),p--,I):N===null||N===32||N===40||Wf(N)?n(N):(t.consume(N),N===92?b:I)}function b(N){return N===40||N===41||N===92?(t.consume(N),I):I(N)}}function Db(t,e,n,r,i,o){const l=this;let u=0,h;return f;function f(x){return t.enter(r),t.enter(i),t.consume(x),t.exit(i),t.enter(o),p}function p(x){return u>999||x===null||x===91||x===93&&!h||x===94&&!u&&"_hiddenFootnoteSupport"in l.parser.constructs?n(x):x===93?(t.exit(o),t.enter(i),t.consume(x),t.exit(i),t.exit(r),e):Le(x)?(t.enter("lineEnding"),t.consume(x),t.exit("lineEnding"),p):(t.enter("chunkString",{contentType:"string"}),g(x))}function g(x){return x===null||x===91||x===93||Le(x)||u++>999?(t.exit("chunkString"),p(x)):(t.consume(x),h||(h=!We(x)),x===92?v:g)}function v(x){return x===91||x===92||x===93?(t.consume(x),u++,g):g(x)}}function Lb(t,e,n,r,i,o){let l;return u;function u(v){return v===34||v===39||v===40?(t.enter(r),t.enter(i),t.consume(v),t.exit(i),l=v===40?41:v,h):n(v)}function h(v){return v===l?(t.enter(i),t.consume(v),t.exit(i),t.exit(r),e):(t.enter(o),f(v))}function f(v){return v===l?(t.exit(o),h(l)):v===null?n(v):Le(v)?(t.enter("lineEnding"),t.consume(v),t.exit("lineEnding"),Ze(t,f,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),p(v))}function p(v){return v===l||v===null||Le(v)?(t.exit("chunkString"),f(v)):(t.consume(v),v===92?g:p)}function g(v){return v===l||v===92?(t.consume(v),p):p(v)}}function ju(t,e){let n;return r;function r(i){return Le(i)?(t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),n=!0,r):We(i)?Ze(t,r,n?"linePrefix":"lineSuffix")(i):e(i)}}const Z9={name:"definition",tokenize:tU},eU={partial:!0,tokenize:nU};function tU(t,e,n){const r=this;let i;return o;function o(x){return t.enter("definition"),l(x)}function l(x){return Db.call(r,t,u,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(x)}function u(x){return i=Nr(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),x===58?(t.enter("definitionMarker"),t.consume(x),t.exit("definitionMarker"),h):n(x)}function h(x){return at(x)?ju(t,f)(x):f(x)}function f(x){return Nb(t,p,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(x)}function p(x){return t.attempt(eU,g,g)(x)}function g(x){return We(x)?Ze(t,v,"whitespace")(x):v(x)}function v(x){return x===null||Le(x)?(t.exit("definition"),r.parser.defined.push(i),e(x)):n(x)}}function nU(t,e,n){return r;function r(u){return at(u)?ju(t,i)(u):n(u)}function i(u){return Lb(t,o,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(u)}function o(u){return We(u)?Ze(t,l,"whitespace")(u):l(u)}function l(u){return u===null||Le(u)?e(u):n(u)}}const rU={name:"hardBreakEscape",tokenize:iU};function iU(t,e,n){return r;function r(o){return t.enter("hardBreakEscape"),t.consume(o),i}function i(o){return Le(o)?(t.exit("hardBreakEscape"),e(o)):n(o)}}const sU={name:"headingAtx",resolve:oU,tokenize:aU};function oU(t,e){let n=t.length-2,r=3,i,o;return t[r][1].type==="whitespace"&&(r+=2),n-2>r&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&t[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:t[r][1].start,end:t[n][1].end},o={type:"chunkText",start:t[r][1].start,end:t[n][1].end,contentType:"text"},er(t,r,n-r+1,[["enter",i,e],["enter",o,e],["exit",o,e],["exit",i,e]])),t}function aU(t,e,n){let r=0;return i;function i(p){return t.enter("atxHeading"),o(p)}function o(p){return t.enter("atxHeadingSequence"),l(p)}function l(p){return p===35&&r++<6?(t.consume(p),l):p===null||at(p)?(t.exit("atxHeadingSequence"),u(p)):n(p)}function u(p){return p===35?(t.enter("atxHeadingSequence"),h(p)):p===null||Le(p)?(t.exit("atxHeading"),e(p)):We(p)?Ze(t,u,"whitespace")(p):(t.enter("atxHeadingText"),f(p))}function h(p){return p===35?(t.consume(p),h):(t.exit("atxHeadingSequence"),u(p))}function f(p){return p===null||p===35||at(p)?(t.exit("atxHeadingText"),u(p)):(t.consume(p),f)}}const lU=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],XE=["pre","script","style","textarea"],uU={concrete:!0,name:"htmlFlow",resolveTo:fU,tokenize:dU},cU={partial:!0,tokenize:mU},hU={partial:!0,tokenize:pU};function fU(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function dU(t,e,n){const r=this;let i,o,l,u,h;return f;function f(R){return p(R)}function p(R){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(R),g}function g(R){return R===33?(t.consume(R),v):R===47?(t.consume(R),o=!0,I):R===63?(t.consume(R),i=3,r.interrupt?e:L):Sn(R)?(t.consume(R),l=String.fromCharCode(R),b):n(R)}function v(R){return R===45?(t.consume(R),i=2,x):R===91?(t.consume(R),i=5,u=0,T):Sn(R)?(t.consume(R),i=4,r.interrupt?e:L):n(R)}function x(R){return R===45?(t.consume(R),r.interrupt?e:L):n(R)}function T(R){const ue="CDATA[";return R===ue.charCodeAt(u++)?(t.consume(R),u===ue.length?r.interrupt?e:F:T):n(R)}function I(R){return Sn(R)?(t.consume(R),l=String.fromCharCode(R),b):n(R)}function b(R){if(R===null||R===47||R===62||at(R)){const ue=R===47,xe=l.toLowerCase();return!ue&&!o&&XE.includes(xe)?(i=1,r.interrupt?e(R):F(R)):lU.includes(l.toLowerCase())?(i=6,ue?(t.consume(R),N):r.interrupt?e(R):F(R)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(R):o?z(R):U(R))}return R===45||vn(R)?(t.consume(R),l+=String.fromCharCode(R),b):n(R)}function N(R){return R===62?(t.consume(R),r.interrupt?e:F):n(R)}function z(R){return We(R)?(t.consume(R),z):S(R)}function U(R){return R===47?(t.consume(R),S):R===58||R===95||Sn(R)?(t.consume(R),J):We(R)?(t.consume(R),U):S(R)}function J(R){return R===45||R===46||R===58||R===95||vn(R)?(t.consume(R),J):X(R)}function X(R){return R===61?(t.consume(R),H):We(R)?(t.consume(R),X):U(R)}function H(R){return R===null||R===60||R===61||R===62||R===96?n(R):R===34||R===39?(t.consume(R),h=R,O):We(R)?(t.consume(R),H):A(R)}function O(R){return R===h?(t.consume(R),h=null,V):R===null||Le(R)?n(R):(t.consume(R),O)}function A(R){return R===null||R===34||R===39||R===47||R===60||R===61||R===62||R===96||at(R)?X(R):(t.consume(R),A)}function V(R){return R===47||R===62||We(R)?U(R):n(R)}function S(R){return R===62?(t.consume(R),M):n(R)}function M(R){return R===null||Le(R)?F(R):We(R)?(t.consume(R),M):n(R)}function F(R){return R===45&&i===2?(t.consume(R),Me):R===60&&i===1?(t.consume(R),_e):R===62&&i===4?(t.consume(R),q):R===63&&i===3?(t.consume(R),L):R===93&&i===5?(t.consume(R),me):Le(R)&&(i===6||i===7)?(t.exit("htmlFlowData"),t.check(cU,ne,D)(R)):R===null||Le(R)?(t.exit("htmlFlowData"),D(R)):(t.consume(R),F)}function D(R){return t.check(hU,ce,ne)(R)}function ce(R){return t.enter("lineEnding"),t.consume(R),t.exit("lineEnding"),ae}function ae(R){return R===null||Le(R)?D(R):(t.enter("htmlFlowData"),F(R))}function Me(R){return R===45?(t.consume(R),L):F(R)}function _e(R){return R===47?(t.consume(R),l="",ie):F(R)}function ie(R){if(R===62){const ue=l.toLowerCase();return XE.includes(ue)?(t.consume(R),q):F(R)}return Sn(R)&&l.length<8?(t.consume(R),l+=String.fromCharCode(R),ie):F(R)}function me(R){return R===93?(t.consume(R),L):F(R)}function L(R){return R===62?(t.consume(R),q):R===45&&i===2?(t.consume(R),L):F(R)}function q(R){return R===null||Le(R)?(t.exit("htmlFlowData"),ne(R)):(t.consume(R),q)}function ne(R){return t.exit("htmlFlow"),e(R)}}function pU(t,e,n){const r=this;return i;function i(l){return Le(l)?(t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),o):n(l)}function o(l){return r.parser.lazy[r.now().line]?n(l):e(l)}}function mU(t,e,n){return r;function r(i){return t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),t.attempt(Sc,e,n)}}const gU={name:"htmlText",tokenize:yU};function yU(t,e,n){const r=this;let i,o,l;return u;function u(L){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(L),h}function h(L){return L===33?(t.consume(L),f):L===47?(t.consume(L),X):L===63?(t.consume(L),U):Sn(L)?(t.consume(L),A):n(L)}function f(L){return L===45?(t.consume(L),p):L===91?(t.consume(L),o=0,T):Sn(L)?(t.consume(L),z):n(L)}function p(L){return L===45?(t.consume(L),x):n(L)}function g(L){return L===null?n(L):L===45?(t.consume(L),v):Le(L)?(l=g,_e(L)):(t.consume(L),g)}function v(L){return L===45?(t.consume(L),x):g(L)}function x(L){return L===62?Me(L):L===45?v(L):g(L)}function T(L){const q="CDATA[";return L===q.charCodeAt(o++)?(t.consume(L),o===q.length?I:T):n(L)}function I(L){return L===null?n(L):L===93?(t.consume(L),b):Le(L)?(l=I,_e(L)):(t.consume(L),I)}function b(L){return L===93?(t.consume(L),N):I(L)}function N(L){return L===62?Me(L):L===93?(t.consume(L),N):I(L)}function z(L){return L===null||L===62?Me(L):Le(L)?(l=z,_e(L)):(t.consume(L),z)}function U(L){return L===null?n(L):L===63?(t.consume(L),J):Le(L)?(l=U,_e(L)):(t.consume(L),U)}function J(L){return L===62?Me(L):U(L)}function X(L){return Sn(L)?(t.consume(L),H):n(L)}function H(L){return L===45||vn(L)?(t.consume(L),H):O(L)}function O(L){return Le(L)?(l=O,_e(L)):We(L)?(t.consume(L),O):Me(L)}function A(L){return L===45||vn(L)?(t.consume(L),A):L===47||L===62||at(L)?V(L):n(L)}function V(L){return L===47?(t.consume(L),Me):L===58||L===95||Sn(L)?(t.consume(L),S):Le(L)?(l=V,_e(L)):We(L)?(t.consume(L),V):Me(L)}function S(L){return L===45||L===46||L===58||L===95||vn(L)?(t.consume(L),S):M(L)}function M(L){return L===61?(t.consume(L),F):Le(L)?(l=M,_e(L)):We(L)?(t.consume(L),M):V(L)}function F(L){return L===null||L===60||L===61||L===62||L===96?n(L):L===34||L===39?(t.consume(L),i=L,D):Le(L)?(l=F,_e(L)):We(L)?(t.consume(L),F):(t.consume(L),ce)}function D(L){return L===i?(t.consume(L),i=void 0,ae):L===null?n(L):Le(L)?(l=D,_e(L)):(t.consume(L),D)}function ce(L){return L===null||L===34||L===39||L===60||L===61||L===96?n(L):L===47||L===62||at(L)?V(L):(t.consume(L),ce)}function ae(L){return L===47||L===62||at(L)?V(L):n(L)}function Me(L){return L===62?(t.consume(L),t.exit("htmlTextData"),t.exit("htmlText"),e):n(L)}function _e(L){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(L),t.exit("lineEnding"),ie}function ie(L){return We(L)?Ze(t,me,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(L):me(L)}function me(L){return t.enter("htmlTextData"),l(L)}}const sw={name:"labelEnd",resolveAll:xU,resolveTo:EU,tokenize:TU},vU={tokenize:kU},wU={tokenize:SU},_U={tokenize:IU};function xU(t){let e=-1;const n=[];for(;++e<t.length;){const r=t[e][1];if(n.push(t[e]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",e+=i}}return t.length!==n.length&&er(t,0,t.length,n),t}function EU(t,e){let n=t.length,r=0,i,o,l,u;for(;n--;)if(i=t[n][1],o){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;t[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(l){if(t[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(o=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(l=n);const h={type:t[o][1].type==="labelLink"?"link":"image",start:{...t[o][1].start},end:{...t[t.length-1][1].end}},f={type:"label",start:{...t[o][1].start},end:{...t[l][1].end}},p={type:"labelText",start:{...t[o+r+2][1].end},end:{...t[l-2][1].start}};return u=[["enter",h,e],["enter",f,e]],u=fr(u,t.slice(o+1,o+r+3)),u=fr(u,[["enter",p,e]]),u=fr(u,Cd(e.parser.constructs.insideSpan.null,t.slice(o+r+4,l-3),e)),u=fr(u,[["exit",p,e],t[l-2],t[l-1],["exit",f,e]]),u=fr(u,t.slice(l+1)),u=fr(u,[["exit",h,e]]),er(t,o,t.length,u),t}function TU(t,e,n){const r=this;let i=r.events.length,o,l;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){o=r.events[i][1];break}return u;function u(v){return o?o._inactive?g(v):(l=r.parser.defined.includes(Nr(r.sliceSerialize({start:o.end,end:r.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(v),t.exit("labelMarker"),t.exit("labelEnd"),h):n(v)}function h(v){return v===40?t.attempt(vU,p,l?p:g)(v):v===91?t.attempt(wU,p,l?f:g)(v):l?p(v):g(v)}function f(v){return t.attempt(_U,p,g)(v)}function p(v){return e(v)}function g(v){return o._balanced=!0,n(v)}}function kU(t,e,n){return r;function r(g){return t.enter("resource"),t.enter("resourceMarker"),t.consume(g),t.exit("resourceMarker"),i}function i(g){return at(g)?ju(t,o)(g):o(g)}function o(g){return g===41?p(g):Nb(t,l,u,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(g)}function l(g){return at(g)?ju(t,h)(g):p(g)}function u(g){return n(g)}function h(g){return g===34||g===39||g===40?Lb(t,f,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(g):p(g)}function f(g){return at(g)?ju(t,p)(g):p(g)}function p(g){return g===41?(t.enter("resourceMarker"),t.consume(g),t.exit("resourceMarker"),t.exit("resource"),e):n(g)}}function SU(t,e,n){const r=this;return i;function i(u){return Db.call(r,t,o,l,"reference","referenceMarker","referenceString")(u)}function o(u){return r.parser.defined.includes(Nr(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(u):n(u)}function l(u){return n(u)}}function IU(t,e,n){return r;function r(o){return t.enter("reference"),t.enter("referenceMarker"),t.consume(o),t.exit("referenceMarker"),i}function i(o){return o===93?(t.enter("referenceMarker"),t.consume(o),t.exit("referenceMarker"),t.exit("reference"),e):n(o)}}const CU={name:"labelStartImage",resolveAll:sw.resolveAll,tokenize:bU};function bU(t,e,n){const r=this;return i;function i(u){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(u),t.exit("labelImageMarker"),o}function o(u){return u===91?(t.enter("labelMarker"),t.consume(u),t.exit("labelMarker"),t.exit("labelImage"),l):n(u)}function l(u){return u===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(u):e(u)}}const AU={name:"labelStartLink",resolveAll:sw.resolveAll,tokenize:PU};function PU(t,e,n){const r=this;return i;function i(l){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(l),t.exit("labelMarker"),t.exit("labelLink"),o}function o(l){return l===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(l):e(l)}}const qm={name:"lineEnding",tokenize:RU};function RU(t,e){return n;function n(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),Ze(t,e,"linePrefix")}}const gf={name:"thematicBreak",tokenize:NU};function NU(t,e,n){let r=0,i;return o;function o(f){return t.enter("thematicBreak"),l(f)}function l(f){return i=f,u(f)}function u(f){return f===i?(t.enter("thematicBreakSequence"),h(f)):r>=3&&(f===null||Le(f))?(t.exit("thematicBreak"),e(f)):n(f)}function h(f){return f===i?(t.consume(f),r++,h):(t.exit("thematicBreakSequence"),We(f)?Ze(t,u,"whitespace")(f):u(f))}}const Mn={continuation:{tokenize:MU},exit:FU,name:"list",tokenize:VU},DU={partial:!0,tokenize:jU},LU={partial:!0,tokenize:OU};function VU(t,e,n){const r=this,i=r.events[r.events.length-1];let o=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,l=0;return u;function u(x){const T=r.containerState.type||(x===42||x===43||x===45?"listUnordered":"listOrdered");if(T==="listUnordered"?!r.containerState.marker||x===r.containerState.marker:iy(x)){if(r.containerState.type||(r.containerState.type=T,t.enter(T,{_container:!0})),T==="listUnordered")return t.enter("listItemPrefix"),x===42||x===45?t.check(gf,n,f)(x):f(x);if(!r.interrupt||x===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),h(x)}return n(x)}function h(x){return iy(x)&&++l<10?(t.consume(x),h):(!r.interrupt||l<2)&&(r.containerState.marker?x===r.containerState.marker:x===41||x===46)?(t.exit("listItemValue"),f(x)):n(x)}function f(x){return t.enter("listItemMarker"),t.consume(x),t.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||x,t.check(Sc,r.interrupt?n:p,t.attempt(DU,v,g))}function p(x){return r.containerState.initialBlankLine=!0,o++,v(x)}function g(x){return We(x)?(t.enter("listItemPrefixWhitespace"),t.consume(x),t.exit("listItemPrefixWhitespace"),v):n(x)}function v(x){return r.containerState.size=o+r.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(x)}}function MU(t,e,n){const r=this;return r.containerState._closeFlow=void 0,t.check(Sc,i,o);function i(u){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Ze(t,e,"listItemIndent",r.containerState.size+1)(u)}function o(u){return r.containerState.furtherBlankLines||!We(u)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,l(u)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,t.attempt(LU,e,l)(u))}function l(u){return r.containerState._closeFlow=!0,r.interrupt=void 0,Ze(t,t.attempt(Mn,e,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(u)}}function OU(t,e,n){const r=this;return Ze(t,i,"listItemIndent",r.containerState.size+1);function i(o){const l=r.events[r.events.length-1];return l&&l[1].type==="listItemIndent"&&l[2].sliceSerialize(l[1],!0).length===r.containerState.size?e(o):n(o)}}function FU(t){t.exit(this.containerState.type)}function jU(t,e,n){const r=this;return Ze(t,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(o){const l=r.events[r.events.length-1];return!We(o)&&l&&l[1].type==="listItemPrefixWhitespace"?e(o):n(o)}}const JE={name:"setextUnderline",resolveTo:UU,tokenize:BU};function UU(t,e){let n=t.length,r,i,o;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){r=n;break}t[n][1].type==="paragraph"&&(i=n)}else t[n][1].type==="content"&&t.splice(n,1),!o&&t[n][1].type==="definition"&&(o=n);const l={type:"setextHeading",start:{...t[r][1].start},end:{...t[t.length-1][1].end}};return t[i][1].type="setextHeadingText",o?(t.splice(i,0,["enter",l,e]),t.splice(o+1,0,["exit",t[r][1],e]),t[r][1].end={...t[o][1].end}):t[r][1]=l,t.push(["exit",l,e]),t}function BU(t,e,n){const r=this;let i;return o;function o(f){let p=r.events.length,g;for(;p--;)if(r.events[p][1].type!=="lineEnding"&&r.events[p][1].type!=="linePrefix"&&r.events[p][1].type!=="content"){g=r.events[p][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||g)?(t.enter("setextHeadingLine"),i=f,l(f)):n(f)}function l(f){return t.enter("setextHeadingLineSequence"),u(f)}function u(f){return f===i?(t.consume(f),u):(t.exit("setextHeadingLineSequence"),We(f)?Ze(t,h,"lineSuffix")(f):h(f))}function h(f){return f===null||Le(f)?(t.exit("setextHeadingLine"),e(f)):n(f)}}const zU={tokenize:$U};function $U(t){const e=this,n=t.attempt(Sc,r,t.attempt(this.parser.constructs.flowInitial,i,Ze(t,t.attempt(this.parser.constructs.flow,i,t.attempt(K9,i)),"linePrefix")));return n;function r(o){if(o===null){t.consume(o);return}return t.enter("lineEndingBlank"),t.consume(o),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function i(o){if(o===null){t.consume(o);return}return t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const qU={resolveAll:Mb()},HU=Vb("string"),WU=Vb("text");function Vb(t){return{resolveAll:Mb(t==="text"?GU:void 0),tokenize:e};function e(n){const r=this,i=this.parser.constructs[t],o=n.attempt(i,l,u);return l;function l(p){return f(p)?o(p):u(p)}function u(p){if(p===null){n.consume(p);return}return n.enter("data"),n.consume(p),h}function h(p){return f(p)?(n.exit("data"),o(p)):(n.consume(p),h)}function f(p){if(p===null)return!0;const g=i[p];let v=-1;if(g)for(;++v<g.length;){const x=g[v];if(!x.previous||x.previous.call(r,r.previous))return!0}return!1}}}function Mb(t){return e;function e(n,r){let i=-1,o;for(;++i<=n.length;)o===void 0?n[i]&&n[i][1].type==="data"&&(o=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==o+2&&(n[o][1].end=n[i-1][1].end,n.splice(o+2,i-o-2),i=o+2),o=void 0);return t?t(n,r):n}}function GU(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const r=t[n-1][1],i=e.sliceStream(r);let o=i.length,l=-1,u=0,h;for(;o--;){const f=i[o];if(typeof f=="string"){for(l=f.length;f.charCodeAt(l-1)===32;)u++,l--;if(l)break;l=-1}else if(f===-2)h=!0,u++;else if(f!==-1){o++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(u=0),u){const f={type:n===t.length||h||u<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:o?l:r.start._bufferIndex+l,_index:r.start._index+o,line:r.end.line,column:r.end.column-u,offset:r.end.offset-u},end:{...r.end}};r.end={...f.start},r.start.offset===r.end.offset?Object.assign(r,f):(t.splice(n,0,["enter",f,e],["exit",f,e]),n+=2)}n++}return t}const KU={42:Mn,43:Mn,45:Mn,48:Mn,49:Mn,50:Mn,51:Mn,52:Mn,53:Mn,54:Mn,55:Mn,56:Mn,57:Mn,62:bb},QU={91:Z9},YU={[-2]:$m,[-1]:$m,32:$m},XU={35:sU,42:gf,45:[JE,gf],60:uU,61:JE,95:gf,96:YE,126:YE},JU={38:Pb,92:Ab},ZU={[-5]:qm,[-4]:qm,[-3]:qm,33:CU,38:Pb,42:sy,60:[A9,gU],91:AU,92:[rU,Ab],93:sw,95:sy,96:z9},eB={null:[sy,qU]},tB={null:[42,95]},nB={null:[]},rB=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:tB,contentInitial:QU,disable:nB,document:KU,flow:XU,flowInitial:YU,insideSpan:eB,string:JU,text:ZU},Symbol.toStringTag,{value:"Module"}));function iB(t,e,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},o=[];let l=[],u=[];const h={attempt:O(X),check:O(H),consume:z,enter:U,exit:J,interrupt:O(H,{interrupt:!0})},f={code:null,containerState:{},defineSkip:I,events:[],now:T,parser:t,previous:null,sliceSerialize:v,sliceStream:x,write:g};let p=e.tokenize.call(f,h);return e.resolveAll&&o.push(e),f;function g(M){return l=fr(l,M),b(),l[l.length-1]!==null?[]:(A(e,0),f.events=Cd(o,f.events,f),f.events)}function v(M,F){return oB(x(M),F)}function x(M){return sB(l,M)}function T(){const{_bufferIndex:M,_index:F,line:D,column:ce,offset:ae}=r;return{_bufferIndex:M,_index:F,line:D,column:ce,offset:ae}}function I(M){i[M.line]=M.column,S()}function b(){let M;for(;r._index<l.length;){const F=l[r._index];if(typeof F=="string")for(M=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===M&&r._bufferIndex<F.length;)N(F.charCodeAt(r._bufferIndex));else N(F)}}function N(M){p=p(M)}function z(M){Le(M)?(r.line++,r.column=1,r.offset+=M===-3?2:1,S()):M!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===l[r._index].length&&(r._bufferIndex=-1,r._index++)),f.previous=M}function U(M,F){const D=F||{};return D.type=M,D.start=T(),f.events.push(["enter",D,f]),u.push(D),D}function J(M){const F=u.pop();return F.end=T(),f.events.push(["exit",F,f]),F}function X(M,F){A(M,F.from)}function H(M,F){F.restore()}function O(M,F){return D;function D(ce,ae,Me){let _e,ie,me,L;return Array.isArray(ce)?ne(ce):"tokenize"in ce?ne([ce]):q(ce);function q(we){return Be;function Be(Ce){const be=Ce!==null&&we[Ce],Pe=Ce!==null&&we.null,Lt=[...Array.isArray(be)?be:be?[be]:[],...Array.isArray(Pe)?Pe:Pe?[Pe]:[]];return ne(Lt)(Ce)}}function ne(we){return _e=we,ie=0,we.length===0?Me:R(we[ie])}function R(we){return Be;function Be(Ce){return L=V(),me=we,we.partial||(f.currentConstruct=we),we.name&&f.parser.constructs.disable.null.includes(we.name)?xe():we.tokenize.call(F?Object.assign(Object.create(f),F):f,h,ue,xe)(Ce)}}function ue(we){return M(me,L),ae}function xe(we){return L.restore(),++ie<_e.length?R(_e[ie]):Me}}}function A(M,F){M.resolveAll&&!o.includes(M)&&o.push(M),M.resolve&&er(f.events,F,f.events.length-F,M.resolve(f.events.slice(F),f)),M.resolveTo&&(f.events=M.resolveTo(f.events,f))}function V(){const M=T(),F=f.previous,D=f.currentConstruct,ce=f.events.length,ae=Array.from(u);return{from:ce,restore:Me};function Me(){r=M,f.previous=F,f.currentConstruct=D,f.events.length=ce,u=ae,S()}}function S(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function sB(t,e){const n=e.start._index,r=e.start._bufferIndex,i=e.end._index,o=e.end._bufferIndex;let l;if(n===i)l=[t[n].slice(r,o)];else{if(l=t.slice(n,i),r>-1){const u=l[0];typeof u=="string"?l[0]=u.slice(r):l.shift()}o>0&&l.push(t[i].slice(0,o))}return l}function oB(t,e){let n=-1;const r=[];let i;for(;++n<t.length;){const o=t[n];let l;if(typeof o=="string")l=o;else switch(o){case-5:{l="\r";break}case-4:{l=`
`;break}case-3:{l=`\r
`;break}case-2:{l=e?" ":"	";break}case-1:{if(!e&&i)continue;l=" ";break}default:l=String.fromCharCode(o)}i=o===-2,r.push(l)}return r.join("")}function aB(t){const r={constructs:Ib([rB,...(t||{}).extensions||[]]),content:i(E9),defined:[],document:i(k9),flow:i(zU),lazy:{},string:i(HU),text:i(WU)};return r;function i(o){return l;function l(u){return iB(r,o,u)}}}function lB(t){for(;!Rb(t););return t}const ZE=/[\0\t\n\r]/g;function uB(){let t=1,e="",n=!0,r;return i;function i(o,l,u){const h=[];let f,p,g,v,x;for(o=e+(typeof o=="string"?o.toString():new TextDecoder(l||void 0).decode(o)),g=0,e="",n&&(o.charCodeAt(0)===65279&&g++,n=void 0);g<o.length;){if(ZE.lastIndex=g,f=ZE.exec(o),v=f&&f.index!==void 0?f.index:o.length,x=o.charCodeAt(v),!f){e=o.slice(g);break}if(x===10&&g===v&&r)h.push(-3),r=void 0;else switch(r&&(h.push(-5),r=void 0),g<v&&(h.push(o.slice(g,v)),t+=v-g),x){case 0:{h.push(65533),t++;break}case 9:{for(p=Math.ceil(t/4)*4,h.push(-2);t++<p;)h.push(-1);break}case 10:{h.push(-4),t=1;break}default:r=!0,t=1}g=v+1}return u&&(r&&h.push(-5),e&&h.push(e),h.push(null)),h}}const cB=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function hB(t){return t.replace(cB,fB)}function fB(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),o=i===120||i===88;return Cb(n.slice(o?2:1),o?16:10)}return iw(n)||t}const Ob={}.hasOwnProperty;function dB(t,e,n){return typeof e!="string"&&(n=e,e=void 0),pB(n)(lB(aB(n).document().write(uB()(t,e,!0))))}function pB(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:o(xt),autolinkProtocol:V,autolinkEmail:V,atxHeading:o(Fr),blockQuote:o(Pe),characterEscape:V,characterReference:V,codeFenced:o(Lt),codeFencedFenceInfo:l,codeFencedFenceMeta:l,codeIndented:o(Lt,l),codeText:o(_t,l),codeTextData:V,data:V,codeFlowValue:V,definition:o(st),definitionDestinationString:l,definitionLabelString:l,definitionTitleString:l,emphasis:o(tr),hardBreakEscape:o(yt),hardBreakTrailing:o(yt),htmlFlow:o(jr,l),htmlFlowData:V,htmlText:o(jr,l),htmlTextData:V,image:o(Ws),label:l,link:o(xt),listItem:o(jn),listItemValue:v,listOrdered:o(vt,g),listUnordered:o(vt),paragraph:o(Gs),reference:R,referenceString:l,resourceDestinationString:l,resourceTitleString:l,setextHeading:o(Fr),strong:o(Ks),thematicBreak:o(Ur)},exit:{atxHeading:h(),atxHeadingSequence:X,autolink:h(),autolinkEmail:be,autolinkProtocol:Ce,blockQuote:h(),characterEscapeValue:S,characterReferenceMarkerHexadecimal:xe,characterReferenceMarkerNumeric:xe,characterReferenceValue:we,characterReference:Be,codeFenced:h(b),codeFencedFence:I,codeFencedFenceInfo:x,codeFencedFenceMeta:T,codeFlowValue:S,codeIndented:h(N),codeText:h(ae),codeTextData:S,data:S,definition:h(),definitionDestinationString:J,definitionLabelString:z,definitionTitleString:U,emphasis:h(),hardBreakEscape:h(F),hardBreakTrailing:h(F),htmlFlow:h(D),htmlFlowData:S,htmlText:h(ce),htmlTextData:S,image:h(_e),label:me,labelText:ie,lineEnding:M,link:h(Me),listItem:h(),listOrdered:h(),listUnordered:h(),paragraph:h(),referenceString:ue,resourceDestinationString:L,resourceTitleString:q,resource:ne,setextHeading:h(A),setextHeadingLineSequence:O,setextHeadingText:H,strong:h(),thematicBreak:h()}};Fb(e,(t||{}).mdastExtensions||[]);const n={};return r;function r(Z){let de={type:"root",children:[]};const Re={stack:[de],tokenStack:[],config:e,enter:u,exit:f,buffer:l,resume:p,data:n},qe=[];let Ye=-1;for(;++Ye<Z.length;)if(Z[Ye][1].type==="listOrdered"||Z[Ye][1].type==="listUnordered")if(Z[Ye][0]==="enter")qe.push(Ye);else{const Vt=qe.pop();Ye=i(Z,Vt,Ye)}for(Ye=-1;++Ye<Z.length;){const Vt=e[Z[Ye][0]];Ob.call(Vt,Z[Ye][1].type)&&Vt[Z[Ye][1].type].call(Object.assign({sliceSerialize:Z[Ye][2].sliceSerialize},Re),Z[Ye][1])}if(Re.tokenStack.length>0){const Vt=Re.tokenStack[Re.tokenStack.length-1];(Vt[1]||eT).call(Re,void 0,Vt[0])}for(de.position={start:_s(Z.length>0?Z[0][1].start:{line:1,column:1,offset:0}),end:_s(Z.length>0?Z[Z.length-2][1].end:{line:1,column:1,offset:0})},Ye=-1;++Ye<e.transforms.length;)de=e.transforms[Ye](de)||de;return de}function i(Z,de,Re){let qe=de-1,Ye=-1,Vt=!1,nr,Gt,rr,yr;for(;++qe<=Re;){const ft=Z[qe];switch(ft[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{ft[0]==="enter"?Ye++:Ye--,yr=void 0;break}case"lineEndingBlank":{ft[0]==="enter"&&(nr&&!yr&&!Ye&&!rr&&(rr=qe),yr=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:yr=void 0}if(!Ye&&ft[0]==="enter"&&ft[1].type==="listItemPrefix"||Ye===-1&&ft[0]==="exit"&&(ft[1].type==="listUnordered"||ft[1].type==="listOrdered")){if(nr){let Un=qe;for(Gt=void 0;Un--;){const Kt=Z[Un];if(Kt[1].type==="lineEnding"||Kt[1].type==="lineEndingBlank"){if(Kt[0]==="exit")continue;Gt&&(Z[Gt][1].type="lineEndingBlank",Vt=!0),Kt[1].type="lineEnding",Gt=Un}else if(!(Kt[1].type==="linePrefix"||Kt[1].type==="blockQuotePrefix"||Kt[1].type==="blockQuotePrefixWhitespace"||Kt[1].type==="blockQuoteMarker"||Kt[1].type==="listItemIndent"))break}rr&&(!Gt||rr<Gt)&&(nr._spread=!0),nr.end=Object.assign({},Gt?Z[Gt][1].start:ft[1].end),Z.splice(Gt||qe,0,["exit",nr,ft[2]]),qe++,Re++}if(ft[1].type==="listItemPrefix"){const Un={type:"listItem",_spread:!1,start:Object.assign({},ft[1].start),end:void 0};nr=Un,Z.splice(qe,0,["enter",Un,ft[2]]),qe++,Re++,rr=void 0,yr=!0}}}return Z[de][1]._spread=Vt,Re}function o(Z,de){return Re;function Re(qe){u.call(this,Z(qe),qe),de&&de.call(this,qe)}}function l(){this.stack.push({type:"fragment",children:[]})}function u(Z,de,Re){this.stack[this.stack.length-1].children.push(Z),this.stack.push(Z),this.tokenStack.push([de,Re||void 0]),Z.position={start:_s(de.start),end:void 0}}function h(Z){return de;function de(Re){Z&&Z.call(this,Re),f.call(this,Re)}}function f(Z,de){const Re=this.stack.pop(),qe=this.tokenStack.pop();if(qe)qe[0].type!==Z.type&&(de?de.call(this,Z,qe[0]):(qe[1]||eT).call(this,Z,qe[0]));else throw new Error("Cannot close `"+Z.type+"` ("+Fu({start:Z.start,end:Z.end})+"): its not open");Re.position.end=_s(Z.end)}function p(){return rw(this.stack.pop())}function g(){this.data.expectingFirstListItemValue=!0}function v(Z){if(this.data.expectingFirstListItemValue){const de=this.stack[this.stack.length-2];de.start=Number.parseInt(this.sliceSerialize(Z),10),this.data.expectingFirstListItemValue=void 0}}function x(){const Z=this.resume(),de=this.stack[this.stack.length-1];de.lang=Z}function T(){const Z=this.resume(),de=this.stack[this.stack.length-1];de.meta=Z}function I(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function b(){const Z=this.resume(),de=this.stack[this.stack.length-1];de.value=Z.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function N(){const Z=this.resume(),de=this.stack[this.stack.length-1];de.value=Z.replace(/(\r?\n|\r)$/g,"")}function z(Z){const de=this.resume(),Re=this.stack[this.stack.length-1];Re.label=de,Re.identifier=Nr(this.sliceSerialize(Z)).toLowerCase()}function U(){const Z=this.resume(),de=this.stack[this.stack.length-1];de.title=Z}function J(){const Z=this.resume(),de=this.stack[this.stack.length-1];de.url=Z}function X(Z){const de=this.stack[this.stack.length-1];if(!de.depth){const Re=this.sliceSerialize(Z).length;de.depth=Re}}function H(){this.data.setextHeadingSlurpLineEnding=!0}function O(Z){const de=this.stack[this.stack.length-1];de.depth=this.sliceSerialize(Z).codePointAt(0)===61?1:2}function A(){this.data.setextHeadingSlurpLineEnding=void 0}function V(Z){const Re=this.stack[this.stack.length-1].children;let qe=Re[Re.length-1];(!qe||qe.type!=="text")&&(qe=Qo(),qe.position={start:_s(Z.start),end:void 0},Re.push(qe)),this.stack.push(qe)}function S(Z){const de=this.stack.pop();de.value+=this.sliceSerialize(Z),de.position.end=_s(Z.end)}function M(Z){const de=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Re=de.children[de.children.length-1];Re.position.end=_s(Z.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(de.type)&&(V.call(this,Z),S.call(this,Z))}function F(){this.data.atHardBreak=!0}function D(){const Z=this.resume(),de=this.stack[this.stack.length-1];de.value=Z}function ce(){const Z=this.resume(),de=this.stack[this.stack.length-1];de.value=Z}function ae(){const Z=this.resume(),de=this.stack[this.stack.length-1];de.value=Z}function Me(){const Z=this.stack[this.stack.length-1];if(this.data.inReference){const de=this.data.referenceType||"shortcut";Z.type+="Reference",Z.referenceType=de,delete Z.url,delete Z.title}else delete Z.identifier,delete Z.label;this.data.referenceType=void 0}function _e(){const Z=this.stack[this.stack.length-1];if(this.data.inReference){const de=this.data.referenceType||"shortcut";Z.type+="Reference",Z.referenceType=de,delete Z.url,delete Z.title}else delete Z.identifier,delete Z.label;this.data.referenceType=void 0}function ie(Z){const de=this.sliceSerialize(Z),Re=this.stack[this.stack.length-2];Re.label=hB(de),Re.identifier=Nr(de).toLowerCase()}function me(){const Z=this.stack[this.stack.length-1],de=this.resume(),Re=this.stack[this.stack.length-1];if(this.data.inReference=!0,Re.type==="link"){const qe=Z.children;Re.children=qe}else Re.alt=de}function L(){const Z=this.resume(),de=this.stack[this.stack.length-1];de.url=Z}function q(){const Z=this.resume(),de=this.stack[this.stack.length-1];de.title=Z}function ne(){this.data.inReference=void 0}function R(){this.data.referenceType="collapsed"}function ue(Z){const de=this.resume(),Re=this.stack[this.stack.length-1];Re.label=de,Re.identifier=Nr(this.sliceSerialize(Z)).toLowerCase(),this.data.referenceType="full"}function xe(Z){this.data.characterReferenceType=Z.type}function we(Z){const de=this.sliceSerialize(Z),Re=this.data.characterReferenceType;let qe;Re?(qe=Cb(de,Re==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):qe=iw(de);const Ye=this.stack[this.stack.length-1];Ye.value+=qe}function Be(Z){const de=this.stack.pop();de.position.end=_s(Z.end)}function Ce(Z){S.call(this,Z);const de=this.stack[this.stack.length-1];de.url=this.sliceSerialize(Z)}function be(Z){S.call(this,Z);const de=this.stack[this.stack.length-1];de.url="mailto:"+this.sliceSerialize(Z)}function Pe(){return{type:"blockquote",children:[]}}function Lt(){return{type:"code",lang:null,meta:null,value:""}}function _t(){return{type:"inlineCode",value:""}}function st(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function tr(){return{type:"emphasis",children:[]}}function Fr(){return{type:"heading",depth:0,children:[]}}function yt(){return{type:"break"}}function jr(){return{type:"html",value:""}}function Ws(){return{type:"image",title:null,url:"",alt:null}}function xt(){return{type:"link",title:null,url:"",children:[]}}function vt(Z){return{type:"list",ordered:Z.type==="listOrdered",start:null,spread:Z._spread,children:[]}}function jn(Z){return{type:"listItem",spread:Z._spread,checked:null,children:[]}}function Gs(){return{type:"paragraph",children:[]}}function Ks(){return{type:"strong",children:[]}}function Qo(){return{type:"text",value:""}}function Ur(){return{type:"thematicBreak"}}}function _s(t){return{line:t.line,column:t.column,offset:t.offset}}function Fb(t,e){let n=-1;for(;++n<e.length;){const r=e[n];Array.isArray(r)?Fb(t,r):mB(t,r)}}function mB(t,e){let n;for(n in e)if(Ob.call(e,n))switch(n){case"canContainEols":{const r=e[n];r&&t[n].push(...r);break}case"transforms":{const r=e[n];r&&t[n].push(...r);break}case"enter":case"exit":{const r=e[n];r&&Object.assign(t[n],r);break}}}function eT(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+Fu({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+Fu({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+Fu({start:e.start,end:e.end})+") is still open")}function gB(t){const e=this;e.parser=n;function n(r){return dB(r,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function yB(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function vB(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function wB(t,e){const n=e.value?e.value+`
`:"",r={},i=e.lang?e.lang.split(/\s+/):[];i.length>0&&(r.className=["language-"+i[0]]);let o={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return e.meta&&(o.data={meta:e.meta}),t.patch(e,o),o=t.applyData(e,o),o={type:"element",tagName:"pre",properties:{},children:[o]},t.patch(e,o),o}function _B(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function xB(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function EB(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",r=String(e.identifier).toUpperCase(),i=Il(r.toLowerCase()),o=t.footnoteOrder.indexOf(r);let l,u=t.footnoteCounts.get(r);u===void 0?(u=0,t.footnoteOrder.push(r),l=t.footnoteOrder.length):l=o+1,u+=1,t.footnoteCounts.set(r,u);const h={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(u>1?"-"+u:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(l)}]};t.patch(e,h);const f={type:"element",tagName:"sup",properties:{},children:[h]};return t.patch(e,f),t.applyData(e,f)}function TB(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function kB(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function jb(t,e){const n=e.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+r}];const i=t.all(e),o=i[0];o&&o.type==="text"?o.value="["+o.value:i.unshift({type:"text",value:"["});const l=i[i.length-1];return l&&l.type==="text"?l.value+=r:i.push({type:"text",value:r}),i}function SB(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return jb(t,e);const i={src:Il(r.url||""),alt:e.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const o={type:"element",tagName:"img",properties:i,children:[]};return t.patch(e,o),t.applyData(e,o)}function IB(t,e){const n={src:Il(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,r),t.applyData(e,r)}function CB(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,r),t.applyData(e,r)}function bB(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return jb(t,e);const i={href:Il(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const o={type:"element",tagName:"a",properties:i,children:t.all(e)};return t.patch(e,o),t.applyData(e,o)}function AB(t,e){const n={href:Il(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function PB(t,e,n){const r=t.all(e),i=n?RB(n):Ub(e),o={},l=[];if(typeof e.checked=="boolean"){const p=r[0];let g;p&&p.type==="element"&&p.tagName==="p"?g=p:(g={type:"element",tagName:"p",properties:{},children:[]},r.unshift(g)),g.children.length>0&&g.children.unshift({type:"text",value:" "}),g.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),o.className=["task-list-item"]}let u=-1;for(;++u<r.length;){const p=r[u];(i||u!==0||p.type!=="element"||p.tagName!=="p")&&l.push({type:"text",value:`
`}),p.type==="element"&&p.tagName==="p"&&!i?l.push(...p.children):l.push(p)}const h=r[r.length-1];h&&(i||h.type!=="element"||h.tagName!=="p")&&l.push({type:"text",value:`
`});const f={type:"element",tagName:"li",properties:o,children:l};return t.patch(e,f),t.applyData(e,f)}function RB(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let r=-1;for(;!e&&++r<n.length;)e=Ub(n[r])}return e}function Ub(t){const e=t.spread;return e??t.children.length>1}function NB(t,e){const n={},r=t.all(e);let i=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++i<r.length;){const l=r[i];if(l.type==="element"&&l.tagName==="li"&&l.properties&&Array.isArray(l.properties.className)&&l.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const o={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(r,!0)};return t.patch(e,o),t.applyData(e,o)}function DB(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function LB(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function VB(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function MB(t,e){const n=t.all(e),r=n.shift(),i=[];if(r){const l={type:"element",tagName:"thead",properties:{},children:t.wrap([r],!0)};t.patch(e.children[0],l),i.push(l)}if(n.length>0){const l={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},u=Zv(e.children[1]),h=wb(e.children[e.children.length-1]);u&&h&&(l.position={start:u,end:h}),i.push(l)}const o={type:"element",tagName:"table",properties:{},children:t.wrap(i,!0)};return t.patch(e,o),t.applyData(e,o)}function OB(t,e,n){const r=n?n.children:void 0,o=(r?r.indexOf(e):1)===0?"th":"td",l=n&&n.type==="table"?n.align:void 0,u=l?l.length:e.children.length;let h=-1;const f=[];for(;++h<u;){const g=e.children[h],v={},x=l?l[h]:void 0;x&&(v.align=x);let T={type:"element",tagName:o,properties:v,children:[]};g&&(T.children=t.all(g),t.patch(g,T),T=t.applyData(g,T)),f.push(T)}const p={type:"element",tagName:"tr",properties:{},children:t.wrap(f,!0)};return t.patch(e,p),t.applyData(e,p)}function FB(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const tT=9,nT=32;function jB(t){const e=String(t),n=/\r?\n|\r/g;let r=n.exec(e),i=0;const o=[];for(;r;)o.push(rT(e.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(e);return o.push(rT(e.slice(i),i>0,!1)),o.join("")}function rT(t,e,n){let r=0,i=t.length;if(e){let o=t.codePointAt(r);for(;o===tT||o===nT;)r++,o=t.codePointAt(r)}if(n){let o=t.codePointAt(i-1);for(;o===tT||o===nT;)i--,o=t.codePointAt(i-1)}return i>r?t.slice(r,i):""}function UB(t,e){const n={type:"text",value:jB(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function BB(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const zB={blockquote:yB,break:vB,code:wB,delete:_B,emphasis:xB,footnoteReference:EB,heading:TB,html:kB,imageReference:SB,image:IB,inlineCode:CB,linkReference:bB,link:AB,listItem:PB,list:NB,paragraph:DB,root:LB,strong:VB,table:MB,tableCell:FB,tableRow:OB,text:UB,thematicBreak:BB,toml:Kh,yaml:Kh,definition:Kh,footnoteDefinition:Kh};function Kh(){}const Bb=-1,bd=0,Uu=1,Gf=2,ow=3,aw=4,lw=5,uw=6,zb=7,$b=8,iT=typeof self=="object"?self:globalThis,$B=(t,e)=>{const n=(i,o)=>(t.set(o,i),i),r=i=>{if(t.has(i))return t.get(i);const[o,l]=e[i];switch(o){case bd:case Bb:return n(l,i);case Uu:{const u=n([],i);for(const h of l)u.push(r(h));return u}case Gf:{const u=n({},i);for(const[h,f]of l)u[r(h)]=r(f);return u}case ow:return n(new Date(l),i);case aw:{const{source:u,flags:h}=l;return n(new RegExp(u,h),i)}case lw:{const u=n(new Map,i);for(const[h,f]of l)u.set(r(h),r(f));return u}case uw:{const u=n(new Set,i);for(const h of l)u.add(r(h));return u}case zb:{const{name:u,message:h}=l;return n(new iT[u](h),i)}case $b:return n(BigInt(l),i);case"BigInt":return n(Object(BigInt(l)),i);case"ArrayBuffer":return n(new Uint8Array(l).buffer,l);case"DataView":{const{buffer:u}=new Uint8Array(l);return n(new DataView(u),l)}}return n(new iT[o](l),i)};return r},sT=t=>$B(new Map,t)(0),Da="",{toString:qB}={},{keys:HB}=Object,xu=t=>{const e=typeof t;if(e!=="object"||!t)return[bd,e];const n=qB.call(t).slice(8,-1);switch(n){case"Array":return[Uu,Da];case"Object":return[Gf,Da];case"Date":return[ow,Da];case"RegExp":return[aw,Da];case"Map":return[lw,Da];case"Set":return[uw,Da];case"DataView":return[Uu,n]}return n.includes("Array")?[Uu,n]:n.includes("Error")?[zb,n]:[Gf,n]},Qh=([t,e])=>t===bd&&(e==="function"||e==="symbol"),WB=(t,e,n,r)=>{const i=(l,u)=>{const h=r.push(l)-1;return n.set(u,h),h},o=l=>{if(n.has(l))return n.get(l);let[u,h]=xu(l);switch(u){case bd:{let p=l;switch(h){case"bigint":u=$b,p=l.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+h);p=null;break;case"undefined":return i([Bb],l)}return i([u,p],l)}case Uu:{if(h){let v=l;return h==="DataView"?v=new Uint8Array(l.buffer):h==="ArrayBuffer"&&(v=new Uint8Array(l)),i([h,[...v]],l)}const p=[],g=i([u,p],l);for(const v of l)p.push(o(v));return g}case Gf:{if(h)switch(h){case"BigInt":return i([h,l.toString()],l);case"Boolean":case"Number":case"String":return i([h,l.valueOf()],l)}if(e&&"toJSON"in l)return o(l.toJSON());const p=[],g=i([u,p],l);for(const v of HB(l))(t||!Qh(xu(l[v])))&&p.push([o(v),o(l[v])]);return g}case ow:return i([u,l.toISOString()],l);case aw:{const{source:p,flags:g}=l;return i([u,{source:p,flags:g}],l)}case lw:{const p=[],g=i([u,p],l);for(const[v,x]of l)(t||!(Qh(xu(v))||Qh(xu(x))))&&p.push([o(v),o(x)]);return g}case uw:{const p=[],g=i([u,p],l);for(const v of l)(t||!Qh(xu(v)))&&p.push(o(v));return g}}const{message:f}=l;return i([u,{name:h,message:f}],l)};return o},oT=(t,{json:e,lossy:n}={})=>{const r=[];return WB(!(e||n),!!e,new Map,r)(t),r},Kf=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?sT(oT(t,e)):structuredClone(t):(t,e)=>sT(oT(t,e));function GB(t,e){const n=[{type:"text",value:""}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function KB(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function QB(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||GB,r=t.options.footnoteBackLabel||KB,i=t.options.footnoteLabel||"Footnotes",o=t.options.footnoteLabelTagName||"h2",l=t.options.footnoteLabelProperties||{className:["sr-only"]},u=[];let h=-1;for(;++h<t.footnoteOrder.length;){const f=t.footnoteById.get(t.footnoteOrder[h]);if(!f)continue;const p=t.all(f),g=String(f.identifier).toUpperCase(),v=Il(g.toLowerCase());let x=0;const T=[],I=t.footnoteCounts.get(g);for(;I!==void 0&&++x<=I;){T.length>0&&T.push({type:"text",value:" "});let z=typeof n=="string"?n:n(h,x);typeof z=="string"&&(z={type:"text",value:z}),T.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+v+(x>1?"-"+x:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(h,x),className:["data-footnote-backref"]},children:Array.isArray(z)?z:[z]})}const b=p[p.length-1];if(b&&b.type==="element"&&b.tagName==="p"){const z=b.children[b.children.length-1];z&&z.type==="text"?z.value+=" ":b.children.push({type:"text",value:" "}),b.children.push(...T)}else p.push(...T);const N={type:"element",tagName:"li",properties:{id:e+"fn-"+v},children:t.wrap(p,!0)};t.patch(f,N),u.push(N)}if(u.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:o,properties:{...Kf(l),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(u,!0)},{type:"text",value:`
`}]}}const Ad=(function(t){if(t==null)return ZB;if(typeof t=="function")return Pd(t);if(typeof t=="object")return Array.isArray(t)?YB(t):XB(t);if(typeof t=="string")return JB(t);throw new Error("Expected function, string, or object as test")});function YB(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=Ad(t[n]);return Pd(r);function r(...i){let o=-1;for(;++o<e.length;)if(e[o].apply(this,i))return!0;return!1}}function XB(t){const e=t;return Pd(n);function n(r){const i=r;let o;for(o in t)if(i[o]!==e[o])return!1;return!0}}function JB(t){return Pd(e);function e(n){return n&&n.type===t}}function Pd(t){return e;function e(n,r,i){return!!(ez(n)&&t.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function ZB(){return!0}function ez(t){return t!==null&&typeof t=="object"&&"type"in t}const qb=[],tz=!0,oy=!1,nz="skip";function Hb(t,e,n,r){let i;typeof e=="function"&&typeof n!="function"?(r=n,n=e):i=e;const o=Ad(i),l=r?-1:1;u(t,void 0,[])();function u(h,f,p){const g=h&&typeof h=="object"?h:{};if(typeof g.type=="string"){const x=typeof g.tagName=="string"?g.tagName:typeof g.name=="string"?g.name:void 0;Object.defineProperty(v,"name",{value:"node ("+(h.type+(x?"<"+x+">":""))+")"})}return v;function v(){let x=qb,T,I,b;if((!e||o(h,f,p[p.length-1]||void 0))&&(x=rz(n(h,p)),x[0]===oy))return x;if("children"in h&&h.children){const N=h;if(N.children&&x[0]!==nz)for(I=(r?N.children.length:-1)+l,b=p.concat(N);I>-1&&I<N.children.length;){const z=N.children[I];if(T=u(z,I,b)(),T[0]===oy)return T;I=typeof T[1]=="number"?T[1]:I+l}}return x}}}function rz(t){return Array.isArray(t)?t:typeof t=="number"?[tz,t]:t==null?qb:[t]}function cw(t,e,n,r){let i,o,l;typeof e=="function"&&typeof n!="function"?(o=void 0,l=e,i=n):(o=e,l=n,i=r),Hb(t,o,u,i);function u(h,f){const p=f[f.length-1],g=p?p.children.indexOf(h):void 0;return l(h,g,p)}}const ay={}.hasOwnProperty,iz={};function sz(t,e){const n=e||iz,r=new Map,i=new Map,o=new Map,l={...zB,...n.handlers},u={all:f,applyData:az,definitionById:r,footnoteById:i,footnoteCounts:o,footnoteOrder:[],handlers:l,one:h,options:n,patch:oz,wrap:uz};return cw(t,function(p){if(p.type==="definition"||p.type==="footnoteDefinition"){const g=p.type==="definition"?r:i,v=String(p.identifier).toUpperCase();g.has(v)||g.set(v,p)}}),u;function h(p,g){const v=p.type,x=u.handlers[v];if(ay.call(u.handlers,v)&&x)return x(u,p,g);if(u.options.passThrough&&u.options.passThrough.includes(v)){if("children"in p){const{children:I,...b}=p,N=Kf(b);return N.children=u.all(p),N}return Kf(p)}return(u.options.unknownHandler||lz)(u,p,g)}function f(p){const g=[];if("children"in p){const v=p.children;let x=-1;for(;++x<v.length;){const T=u.one(v[x],p);if(T){if(x&&v[x-1].type==="break"&&(!Array.isArray(T)&&T.type==="text"&&(T.value=aT(T.value)),!Array.isArray(T)&&T.type==="element")){const I=T.children[0];I&&I.type==="text"&&(I.value=aT(I.value))}Array.isArray(T)?g.push(...T):g.push(T)}}}return g}}function oz(t,e){t.position&&(e.position=K6(t))}function az(t,e){let n=e;if(t&&t.data){const r=t.data.hName,i=t.data.hChildren,o=t.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const l="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:l}}n.type==="element"&&o&&Object.assign(n.properties,Kf(o)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function lz(t,e){const n=e.data||{},r="value"in e&&!(ay.call(n,"hProperties")||ay.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function uz(t,e){const n=[];let r=-1;for(e&&n.push({type:"text",value:`
`});++r<t.length;)r&&n.push({type:"text",value:`
`}),n.push(t[r]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function aT(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function lT(t,e){const n=sz(t,e),r=n.one(t,void 0),i=QB(n),o=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&o.children.push({type:"text",value:`
`},i),o}function cz(t,e){return t&&"run"in t?async function(n,r){const i=lT(n,{file:r,...e});await t.run(i,r)}:function(n,r){return lT(n,{file:r,...t||e})}}function uT(t){if(t)throw t}var Hm,cT;function hz(){if(cT)return Hm;cT=1;var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=function(f){return typeof Array.isArray=="function"?Array.isArray(f):e.call(f)==="[object Array]"},o=function(f){if(!f||e.call(f)!=="[object Object]")return!1;var p=t.call(f,"constructor"),g=f.constructor&&f.constructor.prototype&&t.call(f.constructor.prototype,"isPrototypeOf");if(f.constructor&&!p&&!g)return!1;var v;for(v in f);return typeof v>"u"||t.call(f,v)},l=function(f,p){n&&p.name==="__proto__"?n(f,p.name,{enumerable:!0,configurable:!0,value:p.newValue,writable:!0}):f[p.name]=p.newValue},u=function(f,p){if(p==="__proto__")if(t.call(f,p)){if(r)return r(f,p).value}else return;return f[p]};return Hm=function h(){var f,p,g,v,x,T,I=arguments[0],b=1,N=arguments.length,z=!1;for(typeof I=="boolean"&&(z=I,I=arguments[1]||{},b=2),(I==null||typeof I!="object"&&typeof I!="function")&&(I={});b<N;++b)if(f=arguments[b],f!=null)for(p in f)g=u(I,p),v=u(f,p),I!==v&&(z&&v&&(o(v)||(x=i(v)))?(x?(x=!1,T=g&&i(g)?g:[]):T=g&&o(g)?g:{},l(I,{name:p,newValue:h(z,T,v)})):typeof v<"u"&&l(I,{name:p,newValue:v}));return I},Hm}var fz=hz();const Wm=DT(fz);function ly(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function dz(){const t=[],e={run:n,use:r};return e;function n(...i){let o=-1;const l=i.pop();if(typeof l!="function")throw new TypeError("Expected function as last argument, not "+l);u(null,...i);function u(h,...f){const p=t[++o];let g=-1;if(h){l(h);return}for(;++g<i.length;)(f[g]===null||f[g]===void 0)&&(f[g]=i[g]);i=f,p?pz(p,u)(...f):l(null,...f)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return t.push(i),e}}function pz(t,e){let n;return r;function r(...l){const u=t.length>l.length;let h;u&&l.push(i);try{h=t.apply(this,l)}catch(f){const p=f;if(u&&n)throw p;return i(p)}u||(h&&h.then&&typeof h.then=="function"?h.then(o,i):h instanceof Error?i(h):o(h))}function i(l,...u){n||(n=!0,e(l,...u))}function o(l){i(null,l)}}const oi={basename:mz,dirname:gz,extname:yz,join:vz,sep:"/"};function mz(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');Ic(t);let n=0,r=-1,i=t.length,o;if(e===void 0||e.length===0||e.length>t.length){for(;i--;)if(t.codePointAt(i)===47){if(o){n=i+1;break}}else r<0&&(o=!0,r=i+1);return r<0?"":t.slice(n,r)}if(e===t)return"";let l=-1,u=e.length-1;for(;i--;)if(t.codePointAt(i)===47){if(o){n=i+1;break}}else l<0&&(o=!0,l=i+1),u>-1&&(t.codePointAt(i)===e.codePointAt(u--)?u<0&&(r=i):(u=-1,r=l));return n===r?r=l:r<0&&(r=t.length),t.slice(n,r)}function gz(t){if(Ic(t),t.length===0)return".";let e=-1,n=t.length,r;for(;--n;)if(t.codePointAt(n)===47){if(r){e=n;break}}else r||(r=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function yz(t){Ic(t);let e=t.length,n=-1,r=0,i=-1,o=0,l;for(;e--;){const u=t.codePointAt(e);if(u===47){if(l){r=e+1;break}continue}n<0&&(l=!0,n=e+1),u===46?i<0?i=e:o!==1&&(o=1):i>-1&&(o=-1)}return i<0||n<0||o===0||o===1&&i===n-1&&i===r+1?"":t.slice(i,n)}function vz(...t){let e=-1,n;for(;++e<t.length;)Ic(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":wz(n)}function wz(t){Ic(t);const e=t.codePointAt(0)===47;let n=_z(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function _z(t,e){let n="",r=0,i=-1,o=0,l=-1,u,h;for(;++l<=t.length;){if(l<t.length)u=t.codePointAt(l);else{if(u===47)break;u=47}if(u===47){if(!(i===l-1||o===1))if(i!==l-1&&o===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(h=n.lastIndexOf("/"),h!==n.length-1){h<0?(n="",r=0):(n=n.slice(0,h),r=n.length-1-n.lastIndexOf("/")),i=l,o=0;continue}}else if(n.length>0){n="",r=0,i=l,o=0;continue}}e&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+t.slice(i+1,l):n=t.slice(i+1,l),r=l-i-1;i=l,o=0}else u===46&&o>-1?o++:o=-1}return n}function Ic(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const xz={cwd:Ez};function Ez(){return"/"}function uy(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function Tz(t){if(typeof t=="string")t=new URL(t);else if(!uy(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return kz(t)}function kz(t){if(t.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const r=e.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(e)}const Gm=["history","path","basename","stem","extname","dirname"];class Wb{constructor(e){let n;e?uy(e)?n={path:e}:typeof e=="string"||Sz(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":xz.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<Gm.length;){const o=Gm[r];o in n&&n[o]!==void 0&&n[o]!==null&&(this[o]=o==="history"?[...n[o]]:n[o])}let i;for(i in n)Gm.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?oi.basename(this.path):void 0}set basename(e){Qm(e,"basename"),Km(e,"basename"),this.path=oi.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?oi.dirname(this.path):void 0}set dirname(e){hT(this.basename,"dirname"),this.path=oi.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?oi.extname(this.path):void 0}set extname(e){if(Km(e,"extname"),hT(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=oi.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){uy(e)&&(e=Tz(e)),Qm(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?oi.basename(this.path,this.extname):void 0}set stem(e){Qm(e,"stem"),Km(e,"stem"),this.path=oi.join(this.dirname||"",e+(this.extname||""))}fail(e,n,r){const i=this.message(e,n,r);throw i.fatal=!0,i}info(e,n,r){const i=this.message(e,n,r);return i.fatal=void 0,i}message(e,n,r){const i=new xn(e,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function Km(t,e){if(t&&t.includes(oi.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+oi.sep+"`")}function Qm(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function hT(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function Sz(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const Iz=(function(t){const r=this.constructor.prototype,i=r[t],o=function(){return i.apply(o,arguments)};return Object.setPrototypeOf(o,r),o}),Cz={}.hasOwnProperty;class hw extends Iz{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=dz()}copy(){const e=new hw;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];e.use(...r)}return e.data(Wm(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(Jm("data",this.frozen),this.namespace[e]=n,this):Cz.call(this.namespace,e)&&this.namespace[e]||void 0:e?(Jm("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(e,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=Yh(e),r=this.parser||this.Parser;return Ym("parse",r),r(String(n),n)}process(e,n){const r=this;return this.freeze(),Ym("process",this.parser||this.Parser),Xm("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(o,l){const u=Yh(e),h=r.parse(u);r.run(h,u,function(p,g,v){if(p||!g||!v)return f(p);const x=g,T=r.stringify(x,v);Pz(T)?v.value=T:v.result=T,f(p,v)});function f(p,g){p||!g?l(p):o?o(g):n(void 0,g)}}}processSync(e){let n=!1,r;return this.freeze(),Ym("processSync",this.parser||this.Parser),Xm("processSync",this.compiler||this.Compiler),this.process(e,i),dT("processSync","process",n),r;function i(o,l){n=!0,uT(o),r=l}}run(e,n,r){fT(e),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?o(void 0,r):new Promise(o);function o(l,u){const h=Yh(n);i.run(e,h,f);function f(p,g,v){const x=g||e;p?u(p):l?l(x):r(void 0,x,v)}}}runSync(e,n){let r=!1,i;return this.run(e,n,o),dT("runSync","run",r),i;function o(l,u){uT(l),i=u,r=!0}}stringify(e,n){this.freeze();const r=Yh(n),i=this.compiler||this.Compiler;return Xm("stringify",i),fT(e),i(e,r)}use(e,...n){const r=this.attachers,i=this.namespace;if(Jm("use",this.frozen),e!=null)if(typeof e=="function")h(e,n);else if(typeof e=="object")Array.isArray(e)?u(e):l(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function o(f){if(typeof f=="function")h(f,[]);else if(typeof f=="object")if(Array.isArray(f)){const[p,...g]=f;h(p,g)}else l(f);else throw new TypeError("Expected usable value, not `"+f+"`")}function l(f){if(!("plugins"in f)&&!("settings"in f))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");u(f.plugins),f.settings&&(i.settings=Wm(!0,i.settings,f.settings))}function u(f){let p=-1;if(f!=null)if(Array.isArray(f))for(;++p<f.length;){const g=f[p];o(g)}else throw new TypeError("Expected a list of plugins, not `"+f+"`")}function h(f,p){let g=-1,v=-1;for(;++g<r.length;)if(r[g][0]===f){v=g;break}if(v===-1)r.push([f,...p]);else if(p.length>0){let[x,...T]=p;const I=r[v][1];ly(I)&&ly(x)&&(x=Wm(!0,I,x)),r[v]=[f,x,...T]}}}}const bz=new hw().freeze();function Ym(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function Xm(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function Jm(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function fT(t){if(!ly(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function dT(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function Yh(t){return Az(t)?t:new Wb(t)}function Az(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function Pz(t){return typeof t=="string"||Rz(t)}function Rz(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const Nz="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",pT=[],mT={allowDangerousHtml:!0},Dz=/^(https?|ircs?|mailto|xmpp)$/i,Lz=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function Vz(t){const e=Mz(t),n=Oz(t);return Fz(e.runSync(e.parse(n),n),t)}function Mz(t){const e=t.rehypePlugins||pT,n=t.remarkPlugins||pT,r=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...mT}:mT;return bz().use(gB).use(n).use(cz,r).use(e)}function Oz(t){const e=t.children||"",n=new Wb;return typeof e=="string"&&(n.value=e),n}function Fz(t,e){const n=e.allowedElements,r=e.allowElement,i=e.components,o=e.disallowedElements,l=e.skipHtml,u=e.unwrapDisallowed,h=e.urlTransform||jz;for(const p of Lz)Object.hasOwn(e,p.from)&&(""+p.from+(p.to?"use `"+p.to+"` instead":"remove it")+Nz+p.id,void 0);return cw(t,f),Z6(t,{Fragment:C.Fragment,components:i,ignoreInvalidStyle:!0,jsx:C.jsx,jsxs:C.jsxs,passKeys:!0,passNode:!0});function f(p,g,v){if(p.type==="raw"&&v&&typeof g=="number")return l?v.children.splice(g,1):v.children[g]={type:"text",value:p.value},g;if(p.type==="element"){let x;for(x in zm)if(Object.hasOwn(zm,x)&&Object.hasOwn(p.properties,x)){const T=p.properties[x],I=zm[x];(I===null||I.includes(p.tagName))&&(p.properties[x]=h(String(T||""),x,p))}}if(p.type==="element"){let x=n?!n.includes(p.tagName):o?o.includes(p.tagName):!1;if(!x&&r&&typeof g=="number"&&(x=!r(p,g,v)),x&&v&&typeof g=="number")return u&&p.children?v.children.splice(g,1,...p.children):v.children.splice(g,1),g}}}function jz(t){const e=t.indexOf(":"),n=t.indexOf("?"),r=t.indexOf("#"),i=t.indexOf("/");return e===-1||i!==-1&&e>i||n!==-1&&e>n||r!==-1&&e>r||Dz.test(t.slice(0,e))?t:""}function gT(t,e){const n=String(t);if(typeof e!="string")throw new TypeError("Expected character");let r=0,i=n.indexOf(e);for(;i!==-1;)r++,i=n.indexOf(e,i+e.length);return r}function Uz(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function Bz(t,e,n){const i=Ad((n||{}).ignore||[]),o=zz(e);let l=-1;for(;++l<o.length;)Hb(t,"text",u);function u(f,p){let g=-1,v;for(;++g<p.length;){const x=p[g],T=v?v.children:void 0;if(i(x,T?T.indexOf(x):void 0,v))return;v=x}if(v)return h(f,p)}function h(f,p){const g=p[p.length-1],v=o[l][0],x=o[l][1];let T=0;const b=g.children.indexOf(f);let N=!1,z=[];v.lastIndex=0;let U=v.exec(f.value);for(;U;){const J=U.index,X={index:U.index,input:U.input,stack:[...p,f]};let H=x(...U,X);if(typeof H=="string"&&(H=H.length>0?{type:"text",value:H}:void 0),H===!1?v.lastIndex=J+1:(T!==J&&z.push({type:"text",value:f.value.slice(T,J)}),Array.isArray(H)?z.push(...H):H&&z.push(H),T=J+U[0].length,N=!0),!v.global)break;U=v.exec(f.value)}return N?(T<f.value.length&&z.push({type:"text",value:f.value.slice(T)}),g.children.splice(b,1,...z)):z=[f],b+z.length}}function zz(t){const e=[];if(!Array.isArray(t))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!t[0]||Array.isArray(t[0])?t:[t];let r=-1;for(;++r<n.length;){const i=n[r];e.push([$z(i[0]),qz(i[1])])}return e}function $z(t){return typeof t=="string"?new RegExp(Uz(t),"g"):t}function qz(t){return typeof t=="function"?t:function(){return t}}const Zm="phrasing",eg=["autolink","link","image","label"];function Hz(){return{transforms:[Jz],enter:{literalAutolink:Gz,literalAutolinkEmail:tg,literalAutolinkHttp:tg,literalAutolinkWww:tg},exit:{literalAutolink:Xz,literalAutolinkEmail:Yz,literalAutolinkHttp:Kz,literalAutolinkWww:Qz}}}function Wz(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:Zm,notInConstruct:eg},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:Zm,notInConstruct:eg},{character:":",before:"[ps]",after:"\\/",inConstruct:Zm,notInConstruct:eg}]}}function Gz(t){this.enter({type:"link",title:null,url:"",children:[]},t)}function tg(t){this.config.enter.autolinkProtocol.call(this,t)}function Kz(t){this.config.exit.autolinkProtocol.call(this,t)}function Qz(t){this.config.exit.data.call(this,t);const e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(t)}function Yz(t){this.config.exit.autolinkEmail.call(this,t)}function Xz(t){this.exit(t)}function Jz(t){Bz(t,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,Zz],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),e8]],{ignore:["link","linkReference"]})}function Zz(t,e,n,r,i){let o="";if(!Gb(i)||(/^w/i.test(e)&&(n=e+n,e="",o="http://"),!t8(n)))return!1;const l=n8(n+r);if(!l[0])return!1;const u={type:"link",title:null,url:o+e+l[0],children:[{type:"text",value:e+l[0]}]};return l[1]?[u,{type:"text",value:l[1]}]:u}function e8(t,e,n,r){return!Gb(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+n,children:[{type:"text",value:e+"@"+n}]}}function t8(t){const e=t.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function n8(t){const e=/[!"&'),.:;<>?\]}]+$/.exec(t);if(!e)return[t,void 0];t=t.slice(0,e.index);let n=e[0],r=n.indexOf(")");const i=gT(t,"(");let o=gT(t,")");for(;r!==-1&&i>o;)t+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),o++;return[t,n]}function Gb(t,e){const n=t.input.charCodeAt(t.index-1);return(t.index===0||zo(n)||Id(n))&&(!e||n!==47)}Kb.peek=h8;function r8(){this.buffer()}function i8(t){this.enter({type:"footnoteReference",identifier:"",label:""},t)}function s8(){this.buffer()}function o8(t){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},t)}function a8(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Nr(this.sliceSerialize(t)).toLowerCase(),n.label=e}function l8(t){this.exit(t)}function u8(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Nr(this.sliceSerialize(t)).toLowerCase(),n.label=e}function c8(t){this.exit(t)}function h8(){return"["}function Kb(t,e,n,r){const i=n.createTracker(r);let o=i.move("[^");const l=n.enter("footnoteReference"),u=n.enter("reference");return o+=i.move(n.safe(n.associationId(t),{after:"]",before:o})),u(),l(),o+=i.move("]"),o}function f8(){return{enter:{gfmFootnoteCallString:r8,gfmFootnoteCall:i8,gfmFootnoteDefinitionLabelString:s8,gfmFootnoteDefinition:o8},exit:{gfmFootnoteCallString:a8,gfmFootnoteCall:l8,gfmFootnoteDefinitionLabelString:u8,gfmFootnoteDefinition:c8}}}function d8(t){let e=!1;return t&&t.firstLineBlank&&(e=!0),{handlers:{footnoteDefinition:n,footnoteReference:Kb},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,i,o,l){const u=o.createTracker(l);let h=u.move("[^");const f=o.enter("footnoteDefinition"),p=o.enter("label");return h+=u.move(o.safe(o.associationId(r),{before:h,after:"]"})),p(),h+=u.move("]:"),r.children&&r.children.length>0&&(u.shift(4),h+=u.move((e?`
`:" ")+o.indentLines(o.containerFlow(r,u.current()),e?Qb:p8))),f(),h}}function p8(t,e,n){return e===0?t:Qb(t,e,n)}function Qb(t,e,n){return(n?"":"    ")+t}const m8=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];Yb.peek=_8;function g8(){return{canContainEols:["delete"],enter:{strikethrough:v8},exit:{strikethrough:w8}}}function y8(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:m8}],handlers:{delete:Yb}}}function v8(t){this.enter({type:"delete",children:[]},t)}function w8(t){this.exit(t)}function Yb(t,e,n,r){const i=n.createTracker(r),o=n.enter("strikethrough");let l=i.move("~~");return l+=n.containerPhrasing(t,{...i.current(),before:l,after:"~"}),l+=i.move("~~"),o(),l}function _8(){return"~"}function x8(t){return t.length}function E8(t,e){const n=e||{},r=(n.align||[]).concat(),i=n.stringLength||x8,o=[],l=[],u=[],h=[];let f=0,p=-1;for(;++p<t.length;){const I=[],b=[];let N=-1;for(t[p].length>f&&(f=t[p].length);++N<t[p].length;){const z=T8(t[p][N]);if(n.alignDelimiters!==!1){const U=i(z);b[N]=U,(h[N]===void 0||U>h[N])&&(h[N]=U)}I.push(z)}l[p]=I,u[p]=b}let g=-1;if(typeof r=="object"&&"length"in r)for(;++g<f;)o[g]=yT(r[g]);else{const I=yT(r);for(;++g<f;)o[g]=I}g=-1;const v=[],x=[];for(;++g<f;){const I=o[g];let b="",N="";I===99?(b=":",N=":"):I===108?b=":":I===114&&(N=":");let z=n.alignDelimiters===!1?1:Math.max(1,h[g]-b.length-N.length);const U=b+"-".repeat(z)+N;n.alignDelimiters!==!1&&(z=b.length+z+N.length,z>h[g]&&(h[g]=z),x[g]=z),v[g]=U}l.splice(1,0,v),u.splice(1,0,x),p=-1;const T=[];for(;++p<l.length;){const I=l[p],b=u[p];g=-1;const N=[];for(;++g<f;){const z=I[g]||"";let U="",J="";if(n.alignDelimiters!==!1){const X=h[g]-(b[g]||0),H=o[g];H===114?U=" ".repeat(X):H===99?X%2?(U=" ".repeat(X/2+.5),J=" ".repeat(X/2-.5)):(U=" ".repeat(X/2),J=U):J=" ".repeat(X)}n.delimiterStart!==!1&&!g&&N.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&z==="")&&(n.delimiterStart!==!1||g)&&N.push(" "),n.alignDelimiters!==!1&&N.push(U),N.push(z),n.alignDelimiters!==!1&&N.push(J),n.padding!==!1&&N.push(" "),(n.delimiterEnd!==!1||g!==f-1)&&N.push("|")}T.push(n.delimiterEnd===!1?N.join("").replace(/ +$/,""):N.join(""))}return T.join(`
`)}function T8(t){return t==null?"":String(t)}function yT(t){const e=typeof t=="string"?t.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}function k8(t,e,n,r){const i=n.enter("blockquote"),o=n.createTracker(r);o.move("> "),o.shift(2);const l=n.indentLines(n.containerFlow(t,o.current()),S8);return i(),l}function S8(t,e,n){return">"+(n?"":" ")+t}function I8(t,e){return vT(t,e.inConstruct,!0)&&!vT(t,e.notInConstruct,!1)}function vT(t,e,n){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return n;let r=-1;for(;++r<e.length;)if(t.includes(e[r]))return!0;return!1}function wT(t,e,n,r){let i=-1;for(;++i<n.unsafe.length;)if(n.unsafe[i].character===`
`&&I8(n.stack,n.unsafe[i]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function C8(t,e){const n=String(t);let r=n.indexOf(e),i=r,o=0,l=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===i?++o>l&&(l=o):o=1,i=r+e.length,r=n.indexOf(e,i);return l}function b8(t,e){return!!(e.options.fences===!1&&t.value&&!t.lang&&/[^ \r\n]/.test(t.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(t.value))}function A8(t){const e=t.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function P8(t,e,n,r){const i=A8(n),o=t.value||"",l=i==="`"?"GraveAccent":"Tilde";if(b8(t,n)){const g=n.enter("codeIndented"),v=n.indentLines(o,R8);return g(),v}const u=n.createTracker(r),h=i.repeat(Math.max(C8(o,i)+1,3)),f=n.enter("codeFenced");let p=u.move(h);if(t.lang){const g=n.enter(`codeFencedLang${l}`);p+=u.move(n.safe(t.lang,{before:p,after:" ",encode:["`"],...u.current()})),g()}if(t.lang&&t.meta){const g=n.enter(`codeFencedMeta${l}`);p+=u.move(" "),p+=u.move(n.safe(t.meta,{before:p,after:`
`,encode:["`"],...u.current()})),g()}return p+=u.move(`
`),o&&(p+=u.move(o+`
`)),p+=u.move(h),f(),p}function R8(t,e,n){return(n?"":"    ")+t}function fw(t){const e=t.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function N8(t,e,n,r){const i=fw(n),o=i==='"'?"Quote":"Apostrophe",l=n.enter("definition");let u=n.enter("label");const h=n.createTracker(r);let f=h.move("[");return f+=h.move(n.safe(n.associationId(t),{before:f,after:"]",...h.current()})),f+=h.move("]: "),u(),!t.url||/[\0- \u007F]/.test(t.url)?(u=n.enter("destinationLiteral"),f+=h.move("<"),f+=h.move(n.safe(t.url,{before:f,after:">",...h.current()})),f+=h.move(">")):(u=n.enter("destinationRaw"),f+=h.move(n.safe(t.url,{before:f,after:t.title?" ":`
`,...h.current()}))),u(),t.title&&(u=n.enter(`title${o}`),f+=h.move(" "+i),f+=h.move(n.safe(t.title,{before:f,after:i,...h.current()})),f+=h.move(i),u()),l(),f}function D8(t){const e=t.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function sc(t){return"&#x"+t.toString(16).toUpperCase()+";"}function Qf(t,e,n){const r=fl(t),i=fl(e);return r===void 0?i===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}Xb.peek=L8;function Xb(t,e,n,r){const i=D8(n),o=n.enter("emphasis"),l=n.createTracker(r),u=l.move(i);let h=l.move(n.containerPhrasing(t,{after:i,before:u,...l.current()}));const f=h.charCodeAt(0),p=Qf(r.before.charCodeAt(r.before.length-1),f,i);p.inside&&(h=sc(f)+h.slice(1));const g=h.charCodeAt(h.length-1),v=Qf(r.after.charCodeAt(0),g,i);v.inside&&(h=h.slice(0,-1)+sc(g));const x=l.move(i);return o(),n.attentionEncodeSurroundingInfo={after:v.outside,before:p.outside},u+h+x}function L8(t,e,n){return n.options.emphasis||"*"}function V8(t,e){let n=!1;return cw(t,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,oy}),!!((!t.depth||t.depth<3)&&rw(t)&&(e.options.setext||n))}function M8(t,e,n,r){const i=Math.max(Math.min(6,t.depth||1),1),o=n.createTracker(r);if(V8(t,n)){const p=n.enter("headingSetext"),g=n.enter("phrasing"),v=n.containerPhrasing(t,{...o.current(),before:`
`,after:`
`});return g(),p(),v+`
`+(i===1?"=":"-").repeat(v.length-(Math.max(v.lastIndexOf("\r"),v.lastIndexOf(`
`))+1))}const l="#".repeat(i),u=n.enter("headingAtx"),h=n.enter("phrasing");o.move(l+" ");let f=n.containerPhrasing(t,{before:"# ",after:`
`,...o.current()});return/^[\t ]/.test(f)&&(f=sc(f.charCodeAt(0))+f.slice(1)),f=f?l+" "+f:l,n.options.closeAtx&&(f+=" "+l),h(),u(),f}Jb.peek=O8;function Jb(t){return t.value||""}function O8(){return"<"}Zb.peek=F8;function Zb(t,e,n,r){const i=fw(n),o=i==='"'?"Quote":"Apostrophe",l=n.enter("image");let u=n.enter("label");const h=n.createTracker(r);let f=h.move("![");return f+=h.move(n.safe(t.alt,{before:f,after:"]",...h.current()})),f+=h.move("]("),u(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(u=n.enter("destinationLiteral"),f+=h.move("<"),f+=h.move(n.safe(t.url,{before:f,after:">",...h.current()})),f+=h.move(">")):(u=n.enter("destinationRaw"),f+=h.move(n.safe(t.url,{before:f,after:t.title?" ":")",...h.current()}))),u(),t.title&&(u=n.enter(`title${o}`),f+=h.move(" "+i),f+=h.move(n.safe(t.title,{before:f,after:i,...h.current()})),f+=h.move(i),u()),f+=h.move(")"),l(),f}function F8(){return"!"}eA.peek=j8;function eA(t,e,n,r){const i=t.referenceType,o=n.enter("imageReference");let l=n.enter("label");const u=n.createTracker(r);let h=u.move("![");const f=n.safe(t.alt,{before:h,after:"]",...u.current()});h+=u.move(f+"]["),l();const p=n.stack;n.stack=[],l=n.enter("reference");const g=n.safe(n.associationId(t),{before:h,after:"]",...u.current()});return l(),n.stack=p,o(),i==="full"||!f||f!==g?h+=u.move(g+"]"):i==="shortcut"?h=h.slice(0,-1):h+=u.move("]"),h}function j8(){return"!"}tA.peek=U8;function tA(t,e,n){let r=t.value||"",i="`",o=-1;for(;new RegExp("(^|[^`])"+i+"([^`]|$)").test(r);)i+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++o<n.unsafe.length;){const l=n.unsafe[o],u=n.compilePattern(l);let h;if(l.atBreak)for(;h=u.exec(r);){let f=h.index;r.charCodeAt(f)===10&&r.charCodeAt(f-1)===13&&f--,r=r.slice(0,f)+" "+r.slice(h.index+1)}}return i+r+i}function U8(){return"`"}function nA(t,e){const n=rw(t);return!!(!e.options.resourceLink&&t.url&&!t.title&&t.children&&t.children.length===1&&t.children[0].type==="text"&&(n===t.url||"mailto:"+n===t.url)&&/^[a-z][a-z+.-]+:/i.test(t.url)&&!/[\0- <>\u007F]/.test(t.url))}rA.peek=B8;function rA(t,e,n,r){const i=fw(n),o=i==='"'?"Quote":"Apostrophe",l=n.createTracker(r);let u,h;if(nA(t,n)){const p=n.stack;n.stack=[],u=n.enter("autolink");let g=l.move("<");return g+=l.move(n.containerPhrasing(t,{before:g,after:">",...l.current()})),g+=l.move(">"),u(),n.stack=p,g}u=n.enter("link"),h=n.enter("label");let f=l.move("[");return f+=l.move(n.containerPhrasing(t,{before:f,after:"](",...l.current()})),f+=l.move("]("),h(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(h=n.enter("destinationLiteral"),f+=l.move("<"),f+=l.move(n.safe(t.url,{before:f,after:">",...l.current()})),f+=l.move(">")):(h=n.enter("destinationRaw"),f+=l.move(n.safe(t.url,{before:f,after:t.title?" ":")",...l.current()}))),h(),t.title&&(h=n.enter(`title${o}`),f+=l.move(" "+i),f+=l.move(n.safe(t.title,{before:f,after:i,...l.current()})),f+=l.move(i),h()),f+=l.move(")"),u(),f}function B8(t,e,n){return nA(t,n)?"<":"["}iA.peek=z8;function iA(t,e,n,r){const i=t.referenceType,o=n.enter("linkReference");let l=n.enter("label");const u=n.createTracker(r);let h=u.move("[");const f=n.containerPhrasing(t,{before:h,after:"]",...u.current()});h+=u.move(f+"]["),l();const p=n.stack;n.stack=[],l=n.enter("reference");const g=n.safe(n.associationId(t),{before:h,after:"]",...u.current()});return l(),n.stack=p,o(),i==="full"||!f||f!==g?h+=u.move(g+"]"):i==="shortcut"?h=h.slice(0,-1):h+=u.move("]"),h}function z8(){return"["}function dw(t){const e=t.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function $8(t){const e=dw(t),n=t.options.bulletOther;if(!n)return e==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+n+"`) to be different");return n}function q8(t){const e=t.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function sA(t){const e=t.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function H8(t,e,n,r){const i=n.enter("list"),o=n.bulletCurrent;let l=t.ordered?q8(n):dw(n);const u=t.ordered?l==="."?")":".":$8(n);let h=e&&n.bulletLastUsed?l===n.bulletLastUsed:!1;if(!t.ordered){const p=t.children?t.children[0]:void 0;if((l==="*"||l==="-")&&p&&(!p.children||!p.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(h=!0),sA(n)===l&&p){let g=-1;for(;++g<t.children.length;){const v=t.children[g];if(v&&v.type==="listItem"&&v.children&&v.children[0]&&v.children[0].type==="thematicBreak"){h=!0;break}}}}h&&(l=u),n.bulletCurrent=l;const f=n.containerFlow(t,r);return n.bulletLastUsed=l,n.bulletCurrent=o,i(),f}function W8(t){const e=t.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function G8(t,e,n,r){const i=W8(n);let o=n.bulletCurrent||dw(n);e&&e.type==="list"&&e.ordered&&(o=(typeof e.start=="number"&&e.start>-1?e.start:1)+(n.options.incrementListMarker===!1?0:e.children.indexOf(t))+o);let l=o.length+1;(i==="tab"||i==="mixed"&&(e&&e.type==="list"&&e.spread||t.spread))&&(l=Math.ceil(l/4)*4);const u=n.createTracker(r);u.move(o+" ".repeat(l-o.length)),u.shift(l);const h=n.enter("listItem"),f=n.indentLines(n.containerFlow(t,u.current()),p);return h(),f;function p(g,v,x){return v?(x?"":" ".repeat(l))+g:(x?o:o+" ".repeat(l-o.length))+g}}function K8(t,e,n,r){const i=n.enter("paragraph"),o=n.enter("phrasing"),l=n.containerPhrasing(t,r);return o(),i(),l}const Q8=Ad(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function Y8(t,e,n,r){return(t.children.some(function(l){return Q8(l)})?n.containerPhrasing:n.containerFlow).call(n,t,r)}function X8(t){const e=t.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}oA.peek=J8;function oA(t,e,n,r){const i=X8(n),o=n.enter("strong"),l=n.createTracker(r),u=l.move(i+i);let h=l.move(n.containerPhrasing(t,{after:i,before:u,...l.current()}));const f=h.charCodeAt(0),p=Qf(r.before.charCodeAt(r.before.length-1),f,i);p.inside&&(h=sc(f)+h.slice(1));const g=h.charCodeAt(h.length-1),v=Qf(r.after.charCodeAt(0),g,i);v.inside&&(h=h.slice(0,-1)+sc(g));const x=l.move(i+i);return o(),n.attentionEncodeSurroundingInfo={after:v.outside,before:p.outside},u+h+x}function J8(t,e,n){return n.options.strong||"*"}function Z8(t,e,n,r){return n.safe(t.value,r)}function e$(t){const e=t.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function t$(t,e,n){const r=(sA(n)+(n.options.ruleSpaces?" ":"")).repeat(e$(n));return n.options.ruleSpaces?r.slice(0,-1):r}const aA={blockquote:k8,break:wT,code:P8,definition:N8,emphasis:Xb,hardBreak:wT,heading:M8,html:Jb,image:Zb,imageReference:eA,inlineCode:tA,link:rA,linkReference:iA,list:H8,listItem:G8,paragraph:K8,root:Y8,strong:oA,text:Z8,thematicBreak:t$};function n$(){return{enter:{table:r$,tableData:_T,tableHeader:_T,tableRow:s$},exit:{codeText:o$,table:i$,tableData:ng,tableHeader:ng,tableRow:ng}}}function r$(t){const e=t._align;this.enter({type:"table",align:e.map(function(n){return n==="none"?null:n}),children:[]},t),this.data.inTable=!0}function i$(t){this.exit(t),this.data.inTable=void 0}function s$(t){this.enter({type:"tableRow",children:[]},t)}function ng(t){this.exit(t)}function _T(t){this.enter({type:"tableCell",children:[]},t)}function o$(t){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,a$));const n=this.stack[this.stack.length-1];n.type,n.value=e,this.exit(t)}function a$(t,e){return e==="|"?e:t}function l$(t){const e=t||{},n=e.tableCellPadding,r=e.tablePipeAlign,i=e.stringLength,o=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:v,table:l,tableCell:h,tableRow:u}};function l(x,T,I,b){return f(p(x,I,b),x.align)}function u(x,T,I,b){const N=g(x,I,b),z=f([N]);return z.slice(0,z.indexOf(`
`))}function h(x,T,I,b){const N=I.enter("tableCell"),z=I.enter("phrasing"),U=I.containerPhrasing(x,{...b,before:o,after:o});return z(),N(),U}function f(x,T){return E8(x,{align:T,alignDelimiters:r,padding:n,stringLength:i})}function p(x,T,I){const b=x.children;let N=-1;const z=[],U=T.enter("table");for(;++N<b.length;)z[N]=g(b[N],T,I);return U(),z}function g(x,T,I){const b=x.children;let N=-1;const z=[],U=T.enter("tableRow");for(;++N<b.length;)z[N]=h(b[N],x,T,I);return U(),z}function v(x,T,I){let b=aA.inlineCode(x,T,I);return I.stack.includes("tableCell")&&(b=b.replace(/\|/g,"\\$&")),b}}function u$(){return{exit:{taskListCheckValueChecked:xT,taskListCheckValueUnchecked:xT,paragraph:h$}}}function c$(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:f$}}}function xT(t){const e=this.stack[this.stack.length-2];e.type,e.checked=t.type==="taskListCheckValueChecked"}function h$(t){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const i=e.children;let o=-1,l;for(;++o<i.length;){const u=i[o];if(u.type==="paragraph"){l=u;break}}l===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(t)}function f$(t,e,n,r){const i=t.children[0],o=typeof t.checked=="boolean"&&i&&i.type==="paragraph",l="["+(t.checked?"x":" ")+"] ",u=n.createTracker(r);o&&u.move(l);let h=aA.listItem(t,e,n,{...r,...u.current()});return o&&(h=h.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,f)),h;function f(p){return p+l}}function d$(){return[Hz(),f8(),g8(),n$(),u$()]}function p$(t){return{extensions:[Wz(),d8(t),y8(),l$(t),c$()]}}const m$={tokenize:x$,partial:!0},lA={tokenize:E$,partial:!0},uA={tokenize:T$,partial:!0},cA={tokenize:k$,partial:!0},g$={tokenize:S$,partial:!0},hA={name:"wwwAutolink",tokenize:w$,previous:dA},fA={name:"protocolAutolink",tokenize:_$,previous:pA},Ki={name:"emailAutolink",tokenize:v$,previous:mA},_i={};function y$(){return{text:_i}}let Eo=48;for(;Eo<123;)_i[Eo]=Ki,Eo++,Eo===58?Eo=65:Eo===91&&(Eo=97);_i[43]=Ki;_i[45]=Ki;_i[46]=Ki;_i[95]=Ki;_i[72]=[Ki,fA];_i[104]=[Ki,fA];_i[87]=[Ki,hA];_i[119]=[Ki,hA];function v$(t,e,n){const r=this;let i,o;return l;function l(g){return!cy(g)||!mA.call(r,r.previous)||pw(r.events)?n(g):(t.enter("literalAutolink"),t.enter("literalAutolinkEmail"),u(g))}function u(g){return cy(g)?(t.consume(g),u):g===64?(t.consume(g),h):n(g)}function h(g){return g===46?t.check(g$,p,f)(g):g===45||g===95||vn(g)?(o=!0,t.consume(g),h):p(g)}function f(g){return t.consume(g),i=!0,h}function p(g){return o&&i&&Sn(r.previous)?(t.exit("literalAutolinkEmail"),t.exit("literalAutolink"),e(g)):n(g)}}function w$(t,e,n){const r=this;return i;function i(l){return l!==87&&l!==119||!dA.call(r,r.previous)||pw(r.events)?n(l):(t.enter("literalAutolink"),t.enter("literalAutolinkWww"),t.check(m$,t.attempt(lA,t.attempt(uA,o),n),n)(l))}function o(l){return t.exit("literalAutolinkWww"),t.exit("literalAutolink"),e(l)}}function _$(t,e,n){const r=this;let i="",o=!1;return l;function l(g){return(g===72||g===104)&&pA.call(r,r.previous)&&!pw(r.events)?(t.enter("literalAutolink"),t.enter("literalAutolinkHttp"),i+=String.fromCodePoint(g),t.consume(g),u):n(g)}function u(g){if(Sn(g)&&i.length<5)return i+=String.fromCodePoint(g),t.consume(g),u;if(g===58){const v=i.toLowerCase();if(v==="http"||v==="https")return t.consume(g),h}return n(g)}function h(g){return g===47?(t.consume(g),o?f:(o=!0,h)):n(g)}function f(g){return g===null||Wf(g)||at(g)||zo(g)||Id(g)?n(g):t.attempt(lA,t.attempt(uA,p),n)(g)}function p(g){return t.exit("literalAutolinkHttp"),t.exit("literalAutolink"),e(g)}}function x$(t,e,n){let r=0;return i;function i(l){return(l===87||l===119)&&r<3?(r++,t.consume(l),i):l===46&&r===3?(t.consume(l),o):n(l)}function o(l){return l===null?n(l):e(l)}}function E$(t,e,n){let r,i,o;return l;function l(f){return f===46||f===95?t.check(cA,h,u)(f):f===null||at(f)||zo(f)||f!==45&&Id(f)?h(f):(o=!0,t.consume(f),l)}function u(f){return f===95?r=!0:(i=r,r=void 0),t.consume(f),l}function h(f){return i||r||!o?n(f):e(f)}}function T$(t,e){let n=0,r=0;return i;function i(l){return l===40?(n++,t.consume(l),i):l===41&&r<n?o(l):l===33||l===34||l===38||l===39||l===41||l===42||l===44||l===46||l===58||l===59||l===60||l===63||l===93||l===95||l===126?t.check(cA,e,o)(l):l===null||at(l)||zo(l)?e(l):(t.consume(l),i)}function o(l){return l===41&&r++,t.consume(l),i}}function k$(t,e,n){return r;function r(u){return u===33||u===34||u===39||u===41||u===42||u===44||u===46||u===58||u===59||u===63||u===95||u===126?(t.consume(u),r):u===38?(t.consume(u),o):u===93?(t.consume(u),i):u===60||u===null||at(u)||zo(u)?e(u):n(u)}function i(u){return u===null||u===40||u===91||at(u)||zo(u)?e(u):r(u)}function o(u){return Sn(u)?l(u):n(u)}function l(u){return u===59?(t.consume(u),r):Sn(u)?(t.consume(u),l):n(u)}}function S$(t,e,n){return r;function r(o){return t.consume(o),i}function i(o){return vn(o)?n(o):e(o)}}function dA(t){return t===null||t===40||t===42||t===95||t===91||t===93||t===126||at(t)}function pA(t){return!Sn(t)}function mA(t){return!(t===47||cy(t))}function cy(t){return t===43||t===45||t===46||t===95||vn(t)}function pw(t){let e=t.length,n=!1;for(;e--;){const r=t[e][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return t.length>0&&!n&&(t[t.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const I$={tokenize:L$,partial:!0};function C$(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:R$,continuation:{tokenize:N$},exit:D$}},text:{91:{name:"gfmFootnoteCall",tokenize:P$},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:b$,resolveTo:A$}}}}function b$(t,e,n){const r=this;let i=r.events.length;const o=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let l;for(;i--;){const h=r.events[i][1];if(h.type==="labelImage"){l=h;break}if(h.type==="gfmFootnoteCall"||h.type==="labelLink"||h.type==="label"||h.type==="image"||h.type==="link")break}return u;function u(h){if(!l||!l._balanced)return n(h);const f=Nr(r.sliceSerialize({start:l.end,end:r.now()}));return f.codePointAt(0)!==94||!o.includes(f.slice(1))?n(h):(t.enter("gfmFootnoteCallLabelMarker"),t.consume(h),t.exit("gfmFootnoteCallLabelMarker"),e(h))}}function A$(t,e){let n=t.length;for(;n--;)if(t[n][1].type==="labelImage"&&t[n][0]==="enter"){t[n][1];break}t[n+1][1].type="data",t[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},t[n+3][1].start),end:Object.assign({},t[t.length-1][1].end)},i={type:"gfmFootnoteCallMarker",start:Object.assign({},t[n+3][1].end),end:Object.assign({},t[n+3][1].end)};i.end.column++,i.end.offset++,i.end._bufferIndex++;const o={type:"gfmFootnoteCallString",start:Object.assign({},i.end),end:Object.assign({},t[t.length-1][1].start)},l={type:"chunkString",contentType:"string",start:Object.assign({},o.start),end:Object.assign({},o.end)},u=[t[n+1],t[n+2],["enter",r,e],t[n+3],t[n+4],["enter",i,e],["exit",i,e],["enter",o,e],["enter",l,e],["exit",l,e],["exit",o,e],t[t.length-2],t[t.length-1],["exit",r,e]];return t.splice(n,t.length-n+1,...u),t}function P$(t,e,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o=0,l;return u;function u(g){return t.enter("gfmFootnoteCall"),t.enter("gfmFootnoteCallLabelMarker"),t.consume(g),t.exit("gfmFootnoteCallLabelMarker"),h}function h(g){return g!==94?n(g):(t.enter("gfmFootnoteCallMarker"),t.consume(g),t.exit("gfmFootnoteCallMarker"),t.enter("gfmFootnoteCallString"),t.enter("chunkString").contentType="string",f)}function f(g){if(o>999||g===93&&!l||g===null||g===91||at(g))return n(g);if(g===93){t.exit("chunkString");const v=t.exit("gfmFootnoteCallString");return i.includes(Nr(r.sliceSerialize(v)))?(t.enter("gfmFootnoteCallLabelMarker"),t.consume(g),t.exit("gfmFootnoteCallLabelMarker"),t.exit("gfmFootnoteCall"),e):n(g)}return at(g)||(l=!0),o++,t.consume(g),g===92?p:f}function p(g){return g===91||g===92||g===93?(t.consume(g),o++,f):f(g)}}function R$(t,e,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o,l=0,u;return h;function h(T){return t.enter("gfmFootnoteDefinition")._container=!0,t.enter("gfmFootnoteDefinitionLabel"),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(T),t.exit("gfmFootnoteDefinitionLabelMarker"),f}function f(T){return T===94?(t.enter("gfmFootnoteDefinitionMarker"),t.consume(T),t.exit("gfmFootnoteDefinitionMarker"),t.enter("gfmFootnoteDefinitionLabelString"),t.enter("chunkString").contentType="string",p):n(T)}function p(T){if(l>999||T===93&&!u||T===null||T===91||at(T))return n(T);if(T===93){t.exit("chunkString");const I=t.exit("gfmFootnoteDefinitionLabelString");return o=Nr(r.sliceSerialize(I)),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(T),t.exit("gfmFootnoteDefinitionLabelMarker"),t.exit("gfmFootnoteDefinitionLabel"),v}return at(T)||(u=!0),l++,t.consume(T),T===92?g:p}function g(T){return T===91||T===92||T===93?(t.consume(T),l++,p):p(T)}function v(T){return T===58?(t.enter("definitionMarker"),t.consume(T),t.exit("definitionMarker"),i.includes(o)||i.push(o),Ze(t,x,"gfmFootnoteDefinitionWhitespace")):n(T)}function x(T){return e(T)}}function N$(t,e,n){return t.check(Sc,e,t.attempt(I$,e,n))}function D$(t){t.exit("gfmFootnoteDefinition")}function L$(t,e,n){const r=this;return Ze(t,i,"gfmFootnoteDefinitionIndent",5);function i(o){const l=r.events[r.events.length-1];return l&&l[1].type==="gfmFootnoteDefinitionIndent"&&l[2].sliceSerialize(l[1],!0).length===4?e(o):n(o)}}function V$(t){let n=(t||{}).singleTilde;const r={name:"strikethrough",tokenize:o,resolveAll:i};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function i(l,u){let h=-1;for(;++h<l.length;)if(l[h][0]==="enter"&&l[h][1].type==="strikethroughSequenceTemporary"&&l[h][1]._close){let f=h;for(;f--;)if(l[f][0]==="exit"&&l[f][1].type==="strikethroughSequenceTemporary"&&l[f][1]._open&&l[h][1].end.offset-l[h][1].start.offset===l[f][1].end.offset-l[f][1].start.offset){l[h][1].type="strikethroughSequence",l[f][1].type="strikethroughSequence";const p={type:"strikethrough",start:Object.assign({},l[f][1].start),end:Object.assign({},l[h][1].end)},g={type:"strikethroughText",start:Object.assign({},l[f][1].end),end:Object.assign({},l[h][1].start)},v=[["enter",p,u],["enter",l[f][1],u],["exit",l[f][1],u],["enter",g,u]],x=u.parser.constructs.insideSpan.null;x&&er(v,v.length,0,Cd(x,l.slice(f+1,h),u)),er(v,v.length,0,[["exit",g,u],["enter",l[h][1],u],["exit",l[h][1],u],["exit",p,u]]),er(l,f-1,h-f+3,v),h=f+v.length-2;break}}for(h=-1;++h<l.length;)l[h][1].type==="strikethroughSequenceTemporary"&&(l[h][1].type="data");return l}function o(l,u,h){const f=this.previous,p=this.events;let g=0;return v;function v(T){return f===126&&p[p.length-1][1].type!=="characterEscape"?h(T):(l.enter("strikethroughSequenceTemporary"),x(T))}function x(T){const I=fl(f);if(T===126)return g>1?h(T):(l.consume(T),g++,x);if(g<2&&!n)return h(T);const b=l.exit("strikethroughSequenceTemporary"),N=fl(T);return b._open=!N||N===2&&!!I,b._close=!I||I===2&&!!N,u(T)}}}class M${constructor(){this.map=[]}add(e,n,r){O$(this,e,n,r)}consume(e){if(this.map.sort(function(o,l){return o[0]-l[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(e.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),e.length=this.map[n][0];r.push(e.slice()),e.length=0;let i=r.pop();for(;i;){for(const o of i)e.push(o);i=r.pop()}this.map.length=0}}function O$(t,e,n,r){let i=0;if(!(n===0&&r.length===0)){for(;i<t.map.length;){if(t.map[i][0]===e){t.map[i][1]+=n,t.map[i][2].push(...r);return}i+=1}t.map.push([e,n,r])}}function F$(t,e){let n=!1;const r=[];for(;e<t.length;){const i=t[e];if(n){if(i[0]==="enter")i[1].type==="tableContent"&&r.push(t[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(i[1].type==="tableContent"){if(t[e-1][1].type==="tableDelimiterMarker"){const o=r.length-1;r[o]=r[o]==="left"?"center":"right"}}else if(i[1].type==="tableDelimiterRow")break}else i[0]==="enter"&&i[1].type==="tableDelimiterRow"&&(n=!0);e+=1}return r}function j$(){return{flow:{null:{name:"table",tokenize:U$,resolveAll:B$}}}}function U$(t,e,n){const r=this;let i=0,o=0,l;return u;function u(S){let M=r.events.length-1;for(;M>-1;){const ce=r.events[M][1].type;if(ce==="lineEnding"||ce==="linePrefix")M--;else break}const F=M>-1?r.events[M][1].type:null,D=F==="tableHead"||F==="tableRow"?H:h;return D===H&&r.parser.lazy[r.now().line]?n(S):D(S)}function h(S){return t.enter("tableHead"),t.enter("tableRow"),f(S)}function f(S){return S===124||(l=!0,o+=1),p(S)}function p(S){return S===null?n(S):Le(S)?o>1?(o=0,r.interrupt=!0,t.exit("tableRow"),t.enter("lineEnding"),t.consume(S),t.exit("lineEnding"),x):n(S):We(S)?Ze(t,p,"whitespace")(S):(o+=1,l&&(l=!1,i+=1),S===124?(t.enter("tableCellDivider"),t.consume(S),t.exit("tableCellDivider"),l=!0,p):(t.enter("data"),g(S)))}function g(S){return S===null||S===124||at(S)?(t.exit("data"),p(S)):(t.consume(S),S===92?v:g)}function v(S){return S===92||S===124?(t.consume(S),g):g(S)}function x(S){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(S):(t.enter("tableDelimiterRow"),l=!1,We(S)?Ze(t,T,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(S):T(S))}function T(S){return S===45||S===58?b(S):S===124?(l=!0,t.enter("tableCellDivider"),t.consume(S),t.exit("tableCellDivider"),I):X(S)}function I(S){return We(S)?Ze(t,b,"whitespace")(S):b(S)}function b(S){return S===58?(o+=1,l=!0,t.enter("tableDelimiterMarker"),t.consume(S),t.exit("tableDelimiterMarker"),N):S===45?(o+=1,N(S)):S===null||Le(S)?J(S):X(S)}function N(S){return S===45?(t.enter("tableDelimiterFiller"),z(S)):X(S)}function z(S){return S===45?(t.consume(S),z):S===58?(l=!0,t.exit("tableDelimiterFiller"),t.enter("tableDelimiterMarker"),t.consume(S),t.exit("tableDelimiterMarker"),U):(t.exit("tableDelimiterFiller"),U(S))}function U(S){return We(S)?Ze(t,J,"whitespace")(S):J(S)}function J(S){return S===124?T(S):S===null||Le(S)?!l||i!==o?X(S):(t.exit("tableDelimiterRow"),t.exit("tableHead"),e(S)):X(S)}function X(S){return n(S)}function H(S){return t.enter("tableRow"),O(S)}function O(S){return S===124?(t.enter("tableCellDivider"),t.consume(S),t.exit("tableCellDivider"),O):S===null||Le(S)?(t.exit("tableRow"),e(S)):We(S)?Ze(t,O,"whitespace")(S):(t.enter("data"),A(S))}function A(S){return S===null||S===124||at(S)?(t.exit("data"),O(S)):(t.consume(S),S===92?V:A)}function V(S){return S===92||S===124?(t.consume(S),A):A(S)}}function B$(t,e){let n=-1,r=!0,i=0,o=[0,0,0,0],l=[0,0,0,0],u=!1,h=0,f,p,g;const v=new M$;for(;++n<t.length;){const x=t[n],T=x[1];x[0]==="enter"?T.type==="tableHead"?(u=!1,h!==0&&(ET(v,e,h,f,p),p=void 0,h=0),f={type:"table",start:Object.assign({},T.start),end:Object.assign({},T.end)},v.add(n,0,[["enter",f,e]])):T.type==="tableRow"||T.type==="tableDelimiterRow"?(r=!0,g=void 0,o=[0,0,0,0],l=[0,n+1,0,0],u&&(u=!1,p={type:"tableBody",start:Object.assign({},T.start),end:Object.assign({},T.end)},v.add(n,0,[["enter",p,e]])),i=T.type==="tableDelimiterRow"?2:p?3:1):i&&(T.type==="data"||T.type==="tableDelimiterMarker"||T.type==="tableDelimiterFiller")?(r=!1,l[2]===0&&(o[1]!==0&&(l[0]=l[1],g=Xh(v,e,o,i,void 0,g),o=[0,0,0,0]),l[2]=n)):T.type==="tableCellDivider"&&(r?r=!1:(o[1]!==0&&(l[0]=l[1],g=Xh(v,e,o,i,void 0,g)),o=l,l=[o[1],n,0,0])):T.type==="tableHead"?(u=!0,h=n):T.type==="tableRow"||T.type==="tableDelimiterRow"?(h=n,o[1]!==0?(l[0]=l[1],g=Xh(v,e,o,i,n,g)):l[1]!==0&&(g=Xh(v,e,l,i,n,g)),i=0):i&&(T.type==="data"||T.type==="tableDelimiterMarker"||T.type==="tableDelimiterFiller")&&(l[3]=n)}for(h!==0&&ET(v,e,h,f,p),v.consume(e.events),n=-1;++n<e.events.length;){const x=e.events[n];x[0]==="enter"&&x[1].type==="table"&&(x[1]._align=F$(e.events,n))}return t}function Xh(t,e,n,r,i,o){const l=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",u="tableContent";n[0]!==0&&(o.end=Object.assign({},Ua(e.events,n[0])),t.add(n[0],0,[["exit",o,e]]));const h=Ua(e.events,n[1]);if(o={type:l,start:Object.assign({},h),end:Object.assign({},h)},t.add(n[1],0,[["enter",o,e]]),n[2]!==0){const f=Ua(e.events,n[2]),p=Ua(e.events,n[3]),g={type:u,start:Object.assign({},f),end:Object.assign({},p)};if(t.add(n[2],0,[["enter",g,e]]),r!==2){const v=e.events[n[2]],x=e.events[n[3]];if(v[1].end=Object.assign({},x[1].end),v[1].type="chunkText",v[1].contentType="text",n[3]>n[2]+1){const T=n[2]+1,I=n[3]-n[2]-1;t.add(T,I,[])}}t.add(n[3]+1,0,[["exit",g,e]])}return i!==void 0&&(o.end=Object.assign({},Ua(e.events,i)),t.add(i,0,[["exit",o,e]]),o=void 0),o}function ET(t,e,n,r,i){const o=[],l=Ua(e.events,n);i&&(i.end=Object.assign({},l),o.push(["exit",i,e])),r.end=Object.assign({},l),o.push(["exit",r,e]),t.add(n+1,0,o)}function Ua(t,e){const n=t[e],r=n[0]==="enter"?"start":"end";return n[1][r]}const z$={name:"tasklistCheck",tokenize:q$};function $$(){return{text:{91:z$}}}function q$(t,e,n){const r=this;return i;function i(h){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(h):(t.enter("taskListCheck"),t.enter("taskListCheckMarker"),t.consume(h),t.exit("taskListCheckMarker"),o)}function o(h){return at(h)?(t.enter("taskListCheckValueUnchecked"),t.consume(h),t.exit("taskListCheckValueUnchecked"),l):h===88||h===120?(t.enter("taskListCheckValueChecked"),t.consume(h),t.exit("taskListCheckValueChecked"),l):n(h)}function l(h){return h===93?(t.enter("taskListCheckMarker"),t.consume(h),t.exit("taskListCheckMarker"),t.exit("taskListCheck"),u):n(h)}function u(h){return Le(h)?e(h):We(h)?t.check({tokenize:H$},e,n)(h):n(h)}}function H$(t,e,n){return Ze(t,r,"whitespace");function r(i){return i===null?n(i):e(i)}}function W$(t){return Ib([y$(),C$(),V$(t),j$(),$$()])}const G$={};function K$(t){const e=this,n=t||G$,r=e.data(),i=r.micromarkExtensions||(r.micromarkExtensions=[]),o=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),l=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);i.push(W$(n)),o.push(d$()),l.push(p$(n))}function Q$({role:t,content:e,suggestions:n,onSuggestionClick:r,isLoading:i,warning:o,sources:l}){const u=t==="user";return C.jsxs("div",{className:`mb-4 flex flex-col ${u?"items-end":"items-start"}`,children:[C.jsxs("div",{className:`max-w-[85%] md:max-w-[75%] border px-5 py-3.5 ${u?"ml-auto":"mr-auto"}`,style:{borderColor:o?"var(--nerdvana-accent)":"var(--nerdvana-border)",backgroundColor:u?"var(--nerdvana-surface)":"var(--nerdvana-conversation-bg)",fontFamily:'"Times New Roman", serif',color:"var(--nerdvana-text)",fontSize:"0.96rem",lineHeight:"1.6",position:"relative"},children:[C.jsx("div",{className:"mb-2 text-[0.62rem] uppercase tracking-[0.12em]",style:{fontFamily:'"Courier New", monospace',opacity:.7},children:u?"YOU":"NERDVANA"}),o&&C.jsx("div",{className:"mb-3 p-2 text-[0.75rem] border border-dashed",style:{borderColor:"var(--nerdvana-accent)",color:"var(--nerdvana-accent)",fontFamily:'"Courier New", monospace'},children:' SPOILERS HIDDEN. Enable "Conversation Spoilers" to reveal details.'}),C.jsx("div",{className:"prose prose-sm max-w-none dark:prose-invert transition-all duration-300",style:o?{filter:"blur(6px)",opacity:.5,userSelect:"none",pointerEvents:"none"}:{},children:e?C.jsx(Vz,{remarkPlugins:[K$],components:{p:({children:h})=>C.jsx("p",{className:"mb-2 last:mb-0",children:h}),strong:({children:h})=>C.jsx("strong",{style:{fontWeight:700,color:"var(--nerdvana-text)"},children:h}),em:({children:h})=>C.jsx("em",{style:{fontStyle:"italic"},children:h}),ul:({children:h})=>C.jsx("ul",{className:"list-disc pl-5 mb-2",children:h}),ol:({children:h})=>C.jsx("ol",{className:"list-decimal pl-5 mb-2",children:h}),li:({children:h})=>C.jsx("li",{className:"mb-1",children:h}),a:({href:h,children:f})=>C.jsx("a",{href:h,target:"_blank",rel:"noopener noreferrer",className:"underline hover:no-underline transition-colors",style:{color:"var(--nerdvana-accent)"},children:f}),blockquote:({children:h})=>C.jsx("blockquote",{className:"border-l-4 pl-3 my-2 italic",style:{borderColor:"var(--nerdvana-border)",opacity:.8},children:h}),code:({children:h})=>C.jsx("code",{className:"px-1 py-0.5 rounded text-[0.85em]",style:{backgroundColor:"var(--nerdvana-border)",color:"var(--nerdvana-conversation-bg)",fontFamily:'"Courier New", monospace'},children:h})},children:e}):i?C.jsxs("div",{className:"animate-pulse space-y-2",children:[C.jsx("div",{className:"h-4 bg-[var(--nerdvana-border)] rounded w-3/4 opacity-30"}),C.jsx("div",{className:"h-4 bg-[var(--nerdvana-border)] rounded w-full opacity-30"}),C.jsx("div",{className:"h-4 bg-[var(--nerdvana-border)] rounded w-5/6 opacity-30"})]}):null}),l&&l.length>0&&!u&&C.jsxs("div",{className:"mt-4 pt-3 border-t",style:{borderColor:"var(--nerdvana-border)"},children:[C.jsx("div",{className:"flex items-center justify-between mb-2",children:C.jsx("p",{className:"text-[0.6rem] uppercase tracking-widest opacity-60",style:{fontFamily:'"Courier New", monospace'},children:"Sources"})}),C.jsx("div",{className:"flex flex-wrap gap-2",children:l.map((h,f)=>C.jsxs("a",{href:h.url,target:"_blank",rel:"noopener noreferrer",className:"text-[0.7rem] hover:underline opacity-80",style:{color:"var(--nerdvana-accent)"},children:["[",f+1,"] ",h.title]},f))})]})]}),!u&&n&&n.length>0&&C.jsx("div",{className:"mt-2 ml-1 flex flex-wrap gap-2 max-w-[85%] md:max-w-[75%]",children:n.map((h,f)=>C.jsxs("button",{onClick:()=>r==null?void 0:r(h),className:"text-[0.7rem] px-3 py-1.5 rounded-full border transition-colors duration-200 hover:bg-[var(--nerdvana-border)] text-left",style:{fontFamily:'"Courier New", monospace',borderColor:"var(--nerdvana-border)",color:"var(--nerdvana-text)",backgroundColor:"transparent"},children:[h," "]},f))})]})}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Y$(t,e,n,r){function i(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(p){try{f(r.next(p))}catch(g){l(g)}}function h(p){try{f(r.throw(p))}catch(g){l(g)}}function f(p){p.done?o(p.value):i(p.value).then(u,h)}f((r=r.apply(t,[])).next())})}function X$(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,l;return l={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function u(f){return function(p){return h([f,p])}}function h(f){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=f[0]&2?i.return:f[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,f[1])).done)return o;switch(i=0,o&&(f=[f[0]&2,o.value]),f[0]){case 0:case 1:o=f;break;case 4:return n.label++,{value:f[1],done:!1};case 5:n.label++,i=f[1],f=[0];continue;case 7:f=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(f[0]===6||f[0]===2)){n=0;continue}if(f[0]===3&&(!o||f[1]>o[0]&&f[1]<o[3])){n.label=f[1];break}if(f[0]===6&&n.label<o[1]){n.label=o[1],o=f;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(f);break}o[2]&&n.ops.pop(),n.trys.pop();continue}f=e.call(t,n)}catch(p){f=[6,p],i=0}finally{r=o=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Wa=function(){return Wa=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Wa.apply(this,arguments)},gA=function(t){return{loading:t==null,value:t}},J$=function(){return function(t,e){switch(e.type){case"error":return Wa(Wa({},t),{error:e.error,loading:!1,value:void 0});case"reset":return gA(e.defaultValue);case"value":return Wa(Wa({},t),{error:void 0,loading:!1,value:e.value});default:return t}}},Z$=(function(t){var e=t?t():void 0,n=ee.useReducer(J$(),gA(e)),r=n[0],i=n[1],o=ee.useCallback(function(){var h=t?t():void 0;i({type:"reset",defaultValue:h})},[t]),l=ee.useCallback(function(h){i({type:"error",error:h})},[]),u=ee.useCallback(function(h){i({type:"value",value:h})},[]);return ee.useMemo(function(){return{error:r.error,loading:r.loading,reset:o,setError:l,setValue:u,value:r.value}},[r.error,r.loading,o,l,u,r.value])}),Rd=(function(t,e){var n=Z$(function(){return t.currentUser}),r=n.error,i=n.loading,o=n.setError,l=n.setValue,u=n.value;return ee.useEffect(function(){var h=DC(t,function(f){return Y$(void 0,void 0,void 0,function(){var p;return X$(this,function(g){switch(g.label){case 0:return[3,4];case 1:return g.trys.push([1,3,,4]),[4,e.onUserChanged(f)];case 2:return g.sent(),[3,4];case 3:return p=g.sent(),o(p),[3,4];case 4:return l(f),[2]}})})},o);return function(){h()}},[t]),[u,i,r]});const e7=new Set(["a","an","and","are","as","at","be","by","for","from","how","in","is","it","of","on","or","the","to","what","when","where","why","with"]);function t7(t){return t.split(/\s+/g).filter(Boolean).map(e=>`${e.slice(0,1).toUpperCase()}${e.slice(1).toLowerCase()}`).join(" ")}function rg(t){const e=t.trim();if(!e)return"Open Query";const n=e.split(/[^a-zA-Z0-9]+/g).map(i=>i.trim()).filter(i=>i.length>0).filter(i=>!e7.has(i.toLowerCase()));if(n.length===0)return e;const r=n.slice(0,2);return t7(r.join(" "))}const TT="nerdvana_case";function n7(){const t=ee.useCallback(n=>{typeof window>"u"||window.sessionStorage.setItem(TT,JSON.stringify(n))},[]),e=ee.useCallback(()=>{if(typeof window>"u")return null;const n=window.sessionStorage.getItem(TT);if(!n)return null;try{return JSON.parse(n)}catch{return null}},[]);return{save:t,load:e}}function r7(){const{user:t}=Go(),[e,n]=ee.useState({dominantItem:null,caseCount:0});return ee.useEffect(()=>{if(!t){n({dominantItem:null,caseCount:0});return}(async()=>{var i;try{const o=Iv(ll(yn,"users",t.uid,"cases"),Pv("timestamp","desc"),j4(5)),l=await H4(o),u={};l.docs.forEach(f=>{const g=f.data().item;g&&(u[g]=(u[g]||0)+1)});const h=((i=Object.entries(u).sort((f,p)=>p[1]-f[1])[0])==null?void 0:i[0])||null;n({dominantItem:h,caseCount:l.docs.length})}catch{n({dominantItem:null,caseCount:0})}})()},[t]),e}const yA="nerdvana_cases";function i7(){if(typeof window>"u")return[];try{return JSON.parse(window.localStorage.getItem(yA)||"[]")}catch{return[]}}function s7(t){if(typeof window>"u")return;const e=i7(),n=[t,...e.filter(r=>r.id!==t.id)].slice(0,20);window.localStorage.setItem(yA,JSON.stringify(n))}async function o7(t,e){const n=vi(yn,"users",t,"cases",e.id);await Of(n,e)}const a7={inception:{id:"inception",type:"movie",documents:[{source:"plot",text:"Inception follows Dom Cobb, a thief who enters dreams to steal ideas. He is offered a chance to clear his criminal status by performing inception, the act of planting an idea in someone else's mind."},{source:"ending",text:"The ending features Cobb returning home and seeing his children. The spinning top keeps wobbling before the film cuts to black, leaving reality intentionally ambiguous."},{source:"themes",text:"The key themes include guilt, reality versus illusion, grief, and emotional closure. Cobb's journey moves from obsession with certainty toward acceptance and release."}]},interstellar:{id:"interstellar",type:"movie",documents:[{source:"plot",text:"Interstellar follows Cooper, a former pilot, as he travels through a wormhole to find habitable worlds while Earth faces ecological collapse. The mission balances human survival against family sacrifice."},{source:"bookshelf",text:"The bookshelf sequence reveals a non-linear tesseract where Cooper can influence Murph's room through gravity. He transmits crucial data through the watch hand, completing a causal loop."},{source:"themes",text:"Themes include survival, sacrifice, parental love, and time dilation. The story frames emotional bonds as motivations that coexist with scientific problem solving."}]}},La={},l7="text-embedding-3-small";async function vA(t){var u,h;const e=t.trim();if(!e)return[];const n=La==null?void 0:La.VITE_OPENAI_API_KEY;if(!n)return[];const r=(La==null?void 0:La.VITE_OPENAI_EMBEDDING_MODEL)||l7,i=await fetch("https://api.openai.com/v1/embeddings",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify({model:r,input:e})});if(!i.ok)return[];const l=(h=(u=(await i.json()).data)==null?void 0:u[0])==null?void 0:h.embedding;return Array.isArray(l)?l:[]}function u7(t,e){if(t.length===0||e.length===0||t.length!==e.length)return 0;let n=0,r=0,i=0;for(let o=0;o<t.length;o+=1)n+=t[o]*e[o],r+=t[o]*t[o],i+=e[o]*e[o];return r===0||i===0?0:n/(Math.sqrt(r)*Math.sqrt(i))}class c7{constructor(){this.records=new Map}upsert(e){this.records.set(e.id,e)}query(e,n){if(e.length===0||n<=0)return[];const r=[];for(const i of this.records.values()){const o=u7(e,i.vector);r.push({id:i.id,score:o,metadata:i.metadata})}return r.sort((i,o)=>o.score-i.score||i.id.localeCompare(o.id)).slice(0,n)}}const kT={wiki:3,article:2,reddit:1,default:0},h7=12,mw=[{id:"reddit_inception_ending_1",itemSlug:"inception",type:"reddit",title:"Inception ending and the spinning top debate",url:"https://reddit.com/r/movies/comments/inception-ending-debate",text:"Many viewers focus on the spinning top wobble, but Cobb walking away from the totem is treated as emotional closure over literal certainty.",tags:["inception","ending","spinning top","cobb","totem"]},{id:"wiki_inception_1",itemSlug:"inception",type:"wiki",title:"Inception plot and themes summary",url:"https://example-wiki.org/inception",text:"Inception follows Dom Cobb through layered dream infiltration. Themes include guilt, memory, and uncertainty between reality and illusion.",tags:["inception","plot","themes","dream","reality"]},{id:"article_inception_ending_1",itemSlug:"inception",type:"article",title:"Why Inception ends on ambiguity",url:"https://filmjournal.example.com/inception-ambiguity",text:"Critical readings describe the final cut as intentional ambiguity, prioritizing character resolution rather than proving objective reality.",tags:["inception","ending","ambiguity","analysis"]},{id:"reddit_interstellar_bookshelf_1",itemSlug:"interstellar",type:"reddit",title:"Bookshelf scene explained by fans",url:"https://reddit.com/r/interstellar/comments/bookshelf-scene-explained",text:"The bookshelf scene is often explained as Cooper communicating through gravity from a higher-dimensional tesseract to Murph.",tags:["interstellar","bookshelf","cooper","murph","tesseract"]},{id:"wiki_interstellar_1",itemSlug:"interstellar",type:"wiki",title:"Interstellar story notes and scientific concepts",url:"https://example-wiki.org/interstellar",text:"Interstellar combines survival stakes with relativity and causal loops. The mission to find habitable worlds intersects with family sacrifice.",tags:["interstellar","plot","wormhole","time dilation","causal loop"]},{id:"article_interstellar_time_1",itemSlug:"interstellar",type:"article",title:"Interstellar, causality, and emotional logic",url:"https://cinema-notes.example.com/interstellar-causality",text:"Analyses frame the film as a closed causal structure where scientific communication and emotional motivation coexist.",tags:["interstellar","bookshelf","causality","analysis"]},{id:"reddit_aot_ending_1",itemSlug:"attack-on-titan",type:"reddit",title:"Attack on Titan ending interpretation thread",url:"https://reddit.com/r/ShingekiNoKyojin/comments/aot-ending-interpretation",text:"Discussion centers on freedom, cycles of violence, and whether Eren's final choices break or continue inherited conflict.",tags:["attack on titan","aot","eren","ending","freedom"]},{id:"wiki_aot_1",itemSlug:"attack-on-titan",type:"wiki",title:"Attack on Titan timeline and factions",url:"https://example-wiki.org/attack-on-titan",text:"The narrative shifts from survival horror to geopolitical conflict, examining propaganda, retaliation, and historical memory.",tags:["attack on titan","shingeki","timeline","war","themes"]},{id:"reddit_jjk_binding_1",itemSlug:"jujutsu-kaisen",type:"reddit",title:"Cursed Binding Explained in JJK",url:"https://reddit.com/r/Jujutsushi/comments/cursed-binding-explained",text:"Cursed binding is a vow placed on a sorcerer that trades freedom for power under strict conditions and consequences.",tags:["jjk","jujutsu","cursed binding","binding vow","sorcerer"]},{id:"wiki_jjk_1",itemSlug:"jujutsu-kaisen",type:"wiki",title:"Jujutsu Kaisen mechanics overview",url:"https://example-wiki.org/jujutsu-kaisen",text:"The system includes cursed energy manipulation, domain expansion, and binding vows that rebalance power through constraints.",tags:["jjk","jujutsu","cursed energy","binding vow"]}];function Xn(t){return t.trim().toLowerCase()}function wA(t){return Xn(t).split(/[^a-z0-9]+/g).map(e=>e.trim()).filter(e=>e.length>1)}function ST(t){return Array.from(new Set(wA(t)))}function oc(t){return kT[t]??kT.default}function ig(t){return Xn(`${t.title} ${t.text}`)}function f7(t,e){const n=new Set(t),r=new Set(e);let i=0;for(const l of n)r.has(l)&&(i+=1);const o=n.size+r.size-i;return o===0?1:i/o}function _A(t,e){const n=ig(t),r=ST(n);for(const i of e){if(i.id===t.id)continue;if(n===ig(i))return!0;if(!(Xn(i.itemSlug)===Xn(t.itemSlug)))continue;if(f7(r,ST(ig(i)))>=.82)return!0}return!1}function d7(t,e,n){const r=Xn(e),i=wA(e),o=Xn(`${t.title} ${t.text} ${t.tags.join(" ")}`),l=oc(t.type);let u=l*4;for(const h of i)o.includes(h)&&(u+=2+l);for(const h of t.tags)r.includes(Xn(h))&&(u+=3+l);return n&&Xn(t.itemSlug)===Xn(n)&&(u+=6+l*2),r.includes(t.type)&&(u+=1),u}function sg(t,e="",n=6){const r=mw.map(o=>({source:o,score:d7(o,t,e)})).filter(o=>o.score>0).sort((o,l)=>l.score-o.score||oc(l.source.type)-oc(o.source.type)||o.source.id.localeCompare(l.source.id)),i=[];for(const o of r)if(!_A(o.source,i)&&(i.push(o.source),i.length>=n))break;return i}let Jh=null;function p7(t){return`${t.title}. ${t.text} ${t.tags.join(" ")}`.trim()}async function m7(){return Jh||(Jh=(async()=>{const t=new c7;for(const e of mw){const n=await vA(p7(e));n.length!==0&&t.upsert({id:e.id,vector:n,metadata:{sourceId:e.id}})}return t})(),Jh)}function g7(t,e){return t.sort((n,r)=>{const i=e&&Xn(n.source.itemSlug)===Xn(e)?.25:0,o=e&&Xn(r.source.itemSlug)===Xn(e)?.25:0,l=n.semanticScore+oc(n.source.type)*.08+i;return r.semanticScore+oc(r.source.type)*.08+o-l||n.source.id.localeCompare(r.source.id)})}async function y7(t,e="",n=6){const r=await vA(t);if(r.length===0)return sg(t,e,n);const o=(await m7()).query(r,h7);if(o.length===0)return sg(t,e,n);const l=new Map(mw.map(p=>[p.id,p])),u=o.map(p=>{const g=l.get(p.id);return g?{source:g,semanticScore:p.score}:null}).filter(p=>!!p),h=g7(u,e),f=[];for(const p of h)if(!_A(p.source,f)&&(f.push(p.source),f.length>=n))break;return f.length===0?sg(t,e,n):f}const Va={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_WHOOGLE_URL:"http://127.0.0.1:5000"},v7=new Set(["a","an","and","are","as","at","be","by","for","from","how","in","is","it","of","on","or","the","to","what","when","where","why","with"]);function Nd(t){return t.trim().toLowerCase()}function w7(t){return Nd(t).split(/[^a-z0-9]+/g).map(e=>e.trim()).filter(e=>e.length>1&&!v7.has(e))}function _7(t,e,n){const r=Nd(`${t.source} ${t.text}`),i=n.reduce((l,u)=>r.includes(u)?l+1:l,0),o=e&&r.includes(e)?2:0;return i+o}function x7(t,e){const n=Nd(e),r=w7(e),i=t.map(u=>({doc:u,score:_7(u,n,r)})).sort((u,h)=>h.score-u.score||u.doc.source.localeCompare(h.doc.source)),o=i.filter(u=>u.score>0);return(o.length>0?o:i.slice(0,Math.min(2,i.length))).map(u=>u.doc)}function E7(t){const e=new Map;for(const n of t){const r=e.get(n.type)??[];r.push(`${n.title}. ${n.text}`),e.set(n.type,r)}return Array.from(e.entries()).map(([n,r])=>({source:n,text:r.join(" ")}))}function T7(t){const e=new Map;for(const n of t){const r=e.get(n.type)??[];r.some(i=>i.url===n.url)||(r.push({title:n.title,url:n.url,type:n.type,text:n.text}),e.set(n.type,r))}return e}function k7(t){return t.split(/[.!?]+/g).map(e=>e.trim()).filter(Boolean).slice(0,2)}function hy(t,e){return{text:t.trim(),source:(e==null?void 0:e.trim())||void 0}}function S7(t){return t.replace(/[_-]+/g," ").toUpperCase()}function Bu(t,e){return t.length<=e?t:`${t.slice(0,Math.max(0,e-3)).trimEnd()}...`}function xA(t,e=240){const n=t.join(" ").trim();return Bu(n,e)}function To(t,e){const n=e.flatMap(i=>k7(i)).map(i=>Bu(i,140)),r=Array.from(new Set(n)).slice(0,5);for(;r.length<3;)r.push(r.length===0?`No strong evidence found for ${t}.`:r.length===1?"Try asking with a more specific question.":"Use item-specific terms to improve retrieval.");return{summary:xA(e),points:r.map(i=>hy(i,t))}}function I7(t){const e=t.trim();if(!e)return null;const n=e.match(/```(?:json)?\s*([\s\S]*?)```/i),r=n?n[1].trim():e;try{return JSON.parse(r)}catch{return null}}async function EA(t,e,n){var o;const r=n.map(l=>l.trim()).filter(Boolean);if(r.length===0)return To(t,[]);const i=Va==null?void 0:Va.VITE_OPENAI_API_KEY;if(!i)return To(t,r);try{const l=(Va==null?void 0:Va.VITE_OPENAI_MODEL)||"gpt-4.1-mini",u=["You are a retrieval summarizer for Nerdvana.","Return only strict JSON with keys: summary (string), points (array of objects).","Rules:","- Use only the provided chunks. Do not add facts.","- Keep summary <= 2 sentences.","- Return 3 to 5 distinct bullet points in points.","- Each bullet must represent a different fact or angle from the chunks.","- Keep each bullet concise and evidence-grounded.",'- Each bullet object must be: {"text": "...", "source": "..."}.',`- Source must be one of: ${t}.`,`Category: ${t}`,`Question: ${e}`,"Chunks:",...r.map((T,I)=>`[${I+1}] ${T}`)].join(`
`),h=await fetch("https://api.openai.com/v1/responses",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${i}`},body:JSON.stringify({model:l,temperature:.2,input:u})});if(!h.ok)return To(t,r);const p=(o=(await h.json()).output_text)==null?void 0:o.trim();if(!p)return To(t,r);const g=I7(p);if(!g)return To(t,r);const v=typeof g.summary=="string"?Bu(g.summary.trim(),280):"",x=Array.isArray(g.points)?g.points.map(T=>{if(typeof T=="string")return hy(Bu(T.trim(),160),t);if(T&&typeof T=="object"){const I="text"in T&&typeof T.text=="string"?T.text.trim():"",b="source"in T&&typeof T.source=="string"?T.source.trim():t;return I?hy(Bu(I,160),b||t):null}return null}).filter(T=>!!(T!=null&&T.text)).slice(0,5):[];return!v||x.length<3?To(t,r):{summary:v,points:x}}catch{return To(t,r)}}async function C7(t,e,n){return EA(t,e,n)}function IT(t,e){return{summary:`No matching static documents were found${e?` for item "${e}"`:""}. Ask a more specific question to improve keyword retrieval.`,categories:[{id:"retrieval_status",title:"RETRIEVAL STATUS",description:"Static keyword retrieval checks question tokens against item documents.",points:[`Question: "${t||"empty"}"`,e?`Context item "${e}" has no indexed documents.`:"No item context provided in query parameter 'item'."]}],spoilers:"No spoiler excerpt available because retrieval did not return relevant chunks."}}async function b7(t,e,n){var T;const r=t.trim(),i=Nd(e),o=i?a7[i]:void 0,l=await y7(r,i),u=E7(l),h=T7(l),f=u.length>0?u:(o==null?void 0:o.documents)??[];if(!r||f.length===0)return IT(r,i);const p=x7(f,r);if(p.length===0)return IT(r,i);const g=await Promise.all(p.map(async I=>{const b=await EA(I.source,r,[I.text]);return{id:`source_${I.source}`,title:S7(I.source),description:`Retrieved from static sources for ${i||"query context"}.`,points:b.points,summary:b.summary,sources:h.get(I.source)??[]}})),v=p.find(I=>/ending|bookshelf|twist|finale|spoiler/i.test(I.source))??p[0],x=await C7("spoilers",r,[v.text]);return{summary:((T=g[0])==null?void 0:T.summary)??xA([p[0].text]),categories:g.map(({summary:I,...b})=>b),spoilers:x.summary}}const A7={inception:["inception","cobb","spinning top","dream","totem"],interstellar:["interstellar","bookshelf","cooper","wormhole","tesseract"],"jujutsu-kaisen":["jjk","jujutsu","gojo","cursed binding","sukuna"],"attack-on-titan":["attack titan","attack on titan","aot","eren","shingeki","titan"],dune:["dune","arrakis","paul atreides","spice"],batman:["batman","gotham","bruce wayne","joker"]},P7=new Set(["dream","titan","ending","themes","plot"]),R7={inception:{label:"Inception",type:"Movie"},interstellar:{label:"Interstellar",type:"Movie"},"jujutsu-kaisen":{label:"Jujutsu Kaisen",type:"Anime"},"attack-on-titan":{label:"Attack on Titan",type:"Anime"},dune:{label:"Dune",type:"Franchise"},batman:{label:"Batman",type:"Franchise"}};function ac(t){return t.trim().toLowerCase()}function N7(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function D7(t,e){const n=new RegExp(`\\b${N7(e)}\\b`,"g");return(t.match(n)??[]).length}function L7(t){return t.split("-").filter(Boolean).map(e=>`${e.slice(0,1).toUpperCase()}${e.slice(1)}`).join(" ")}function V7(t,e){const n=R7[t];return{id:t,label:(n==null?void 0:n.label)??L7(t),type:(n==null?void 0:n.type)??"Item",confidence:Number(e.toFixed(2))}}function M7(t,e){const n=ac(e);if(!n)return 0;if(n.includes(" "))return t.includes(n)?4:0;const r=D7(t,n);return r>0?2*r:0}function O7(t){const e=ac(t),n=[];for(const[u,h]of Object.entries(A7)){const f=[u,...h];let p=0,g=0,v="";for(const x of f){const T=ac(x),I=M7(e,x);I<=0||(p+=I,T.length>g&&(g=T.length,v=T))}p>0&&n.push({id:u,score:p,longestAlias:g,alias:v})}if(n.length===0)return{item:null,score:0,alias:"",ambiguous:!1,candidates:[]};n.sort((u,h)=>h.score!==u.score?h.score-u.score:h.longestAlias-u.longestAlias);const r=n[0],i=n.filter(u=>u.score===r.score&&u.longestAlias===r.longestAlias).map(u=>u.id),o=n.reduce((u,h)=>u+h.score,0),l=n.filter(u=>i.includes(u.id)).map(u=>V7(u.id,o>0?u.score/o:0));return{item:r.id,score:r.score,alias:r.alias,ambiguous:l.length>1,candidates:l}}function F7(t){const e=ac(t);if(!e)return{item:null,source:"unknown",confidence:"low",candidates:[]};const n=O7(e);if(!n.item)return{item:null,source:"unknown",confidence:"low",candidates:[]};if(n.ambiguous)return{item:null,source:"ambiguous",confidence:"low",candidates:n.candidates};const r=P7.has(n.alias);return n.score>=6&&!r?{item:n.item,source:"query",confidence:"high",candidates:[]}:n.score>=3?{item:n.item,source:"inferred",confidence:r?"low":"medium",candidates:[]}:{item:null,source:"unknown",confidence:"low",candidates:[]}}function j7(t,e){const n=ac(e??"");return n?{item:n,source:"explicit",confidence:"high",candidates:[]}:F7(t)}function U7(t){return t.item!==null&&t.source!=="ambiguous"&&t.confidence!=="low"}function B7(t){return t==="high"?.8:t==="medium"?.6:.3}function z7(t){return t>=.75?"high":t>=.45?"medium":"low"}function $7(t,e){if(!e||t.source==="explicit"||t.source==="ambiguous"||t.source!=="inferred"||!t.item)return t;const n=t.item,r=B7(t.confidence);if(r>=.7||e!==n&&r<.4)return t;const i=Math.min(.85,r+.1);return{...t,item:e,source:"identity-stabilized",confidence:z7(i)}}async function q7(t){return((await(await fetch(`/api/search?q=${encodeURIComponent(t)}&format=json`)).json()).results||[]).map(r=>({title:r.text||"",url:r.href,snippet:r.text||"",source:new URL(r.href).hostname}))}function H7(){var o,l;const t=new URLSearchParams(window.location.search),e=((o=t.get("q"))==null?void 0:o.trim())??"",n=((l=t.get("item"))==null?void 0:l.trim())??"",r=window.history.state&&typeof window.history.state.item=="string"?window.history.state.item.trim():"";return{question:e,item:n||r}}function CT(t,e=70){return t.length<=e?t:`${t.slice(0,Math.max(0,e-3)).trimEnd()}...`}function W7(t){if(t.source&&t.source.trim())return t.source.trim();try{return new URL(t.url).hostname}catch{return"source"}}function G7(t){const e=`${t.url} ${t.source??""}`.toLowerCase();return e.includes("reddit")?"reddit":e.includes("wikipedia")||e.includes("wiki")?"wiki":"article"}function bT(t){const e=`${t.title??""}${t.snippet??""}`.toLowerCase();return e.includes("ending explained")||e.includes("official")||e.includes("wiki")||e.includes("lore")?"canon":e.includes("theory")||e.includes("reddit")||e.includes("discussion")?"theories":e.includes("ending")||e.includes("spoiler")?"spoilers":"canon"}function K7(t,e=!1){const n=W7(t),r=`https://www.google.com/s2/favicons?domain=${encodeURIComponent(n)}&sz=32`;return C.jsx("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:`nerdvana-clickable block border-b py-2 transition-colors duration-150 hover:text-[var(--nerdvana-accent)] ${e?"spoilerCard":""}`,style:{borderColor:"var(--nerdvana-border)",color:"var(--nerdvana-text)"},children:C.jsxs("div",{className:"flex items-start gap-2",children:[C.jsx("img",{src:r,alt:"",width:16,height:16,className:"mt-[1px] h-4 w-4 shrink-0"}),C.jsxs("div",{className:"min-w-0",children:[C.jsx("p",{className:"text-[0.92rem] leading-5",style:{fontFamily:'"Times New Roman", serif',fontWeight:700},children:CT(t.title||n)}),C.jsx("p",{className:"text-[0.62rem] uppercase tracking-[0.12em]",style:{fontFamily:'"Courier New", monospace',opacity:.84},children:n}),C.jsx("div",{className:"mt-1",children:C.jsx("span",{className:"border px-1.5 py-[1px] text-[0.56rem] uppercase tracking-[0.08em]",style:{fontFamily:'"Courier New", monospace',borderColor:"var(--nerdvana-border)",opacity:.9},children:G7(t)})}),C.jsx("p",{className:"mt-1 text-[0.82rem] leading-5",style:{fontFamily:'"Times New Roman", serif',opacity:.96,display:"-webkit-box",WebkitLineClamp:1,WebkitBoxOrient:"vertical",overflow:"hidden"},children:CT(t.snippet||t.title||n,110)})]})]})},`${t.url}-${t.title}`)}function og({title:t,items:e,isSpoiler:n=!1}){return C.jsxs("section",{className:"category mt-4",children:[C.jsx("h3",{className:"categoryLabel text-[0.68rem] md:text-[0.72rem] uppercase",children:t}),C.jsx("div",{className:"results-list mt-2 space-y-1",children:e.map(r=>K7(r,n))})]})}function Q7({question:t,onNavigatePage:e}){const{question:n,item:r}=H7(),i=n||t.trim(),o=ee.useMemo(()=>j7(i,r),[i,r]),{dominantItem:l}=r7(),u=ee.useMemo(()=>$7(o,l),[l,o]);ee.useEffect(()=>{},[l,o.item,o.source,u.item]);const h=u.item,f=u.source==="ambiguous",p=ee.useMemo(()=>U7(u),[u]),g=typeof window<"u"?window.history.state:{},v=(g==null?void 0:g.rehydrated)===!0,[x,T]=ee.useState(v&&g.answer?g.answer:{summary:"",categories:[],spoilers:""}),[I,b]=ee.useState(v&&g.results?g.results:[]),[N,z]=ee.useState({canon:[],theories:[],spoilers:[]}),{save:U}=n7(),[J]=Rd(Vo),X=ee.useRef(""),H=ee.useRef(v?i:""),O=ee.useRef(!1),[A,V]=ee.useState(v&&g.historyId?g.historyId:null),[S,M]=ee.useState(v&&g.conversation?g.conversation:[]),[F,D]=ee.useState(""),[ce,ae]=ee.useState(!1),Me=async()=>{if(!J){alert("Please sign in to save lorebooks.");return}const R=[];if(i&&R.push({role:"user",content:i}),x.summary&&R.push({role:"assistant",content:x.summary}),R.push(...S),R.length!==0)try{await oE(ll(yn,"users",J.uid,"lorebooks"),{topic:i,conversation:R,results:I.map(ue=>({title:ue.title,url:ue.url})),createdAt:eE()}),alert("Session saved to Lorebooks!")}catch(ue){console.error("Error saving lorebook:",ue),alert("Failed to save.")}};ee.useEffect(()=>{try{const R=localStorage.getItem("nerdvana_active_session");if(!R)return;const ue=JSON.parse(R);ue.topic===i&&(console.log("Restoring active session from localStorage"),T(ue.answer||{summary:"",categories:[],spoilers:""}),b(ue.results||[]),z(ue.categorized||{canon:[],theories:[],spoilers:[]}),M(ue.conversation||[]),O.current=!0)}catch(R){console.error("Failed to restore session",R)}},[]),ee.useEffect(()=>{i&&localStorage.setItem("nerdvana_active_session",JSON.stringify({topic:i,answer:x,results:I,categorized:N,conversation:S}))},[i,x,I,N,S]);const[_e,ie]=ee.useState(!1),[me,L]=ee.useState(!1),q=R=>{if(_e)return R;const ue=/(ending explained|dies|death|final scene|plot twist|spoiler)/i;return R.filter(xe=>!ue.test(((xe.title||"")+(xe.snippet||"")).toLowerCase()))};ee.useEffect(()=>{let R=!1;const ue=i.trim();if(T({summary:"",categories:[],spoilers:""}),b([]),z({canon:[],theories:[],spoilers:[]}),!ue)return()=>{R=!0};if(O.current){console.log("Skipping search due to session restoration"),O.current=!1;return}return Promise.resolve().then(async()=>{const xe=await q7(ue).catch(()=>[]);if(R)return null;const we={canon:[],theories:[],spoilers:[]};if(xe.forEach(Ce=>{const be={title:Ce.title,url:Ce.url,source:Ce.source,snippet:Ce.snippet};we[bT(be)].push(be)}),!p||!h)return{resolved:null,whoogleLinks:xe,categorized:we};const Be=await b7(i,h,{snippets:xe.map(Ce=>Ce.snippet).join(`
`)});return R?null:{resolved:Be,whoogleLinks:xe,categorized:we}}).then(async xe=>{if(R||!xe)return;const{resolved:we,whoogleLinks:Be,categorized:Ce}=xe,be=Be.map(Pe=>({title:Pe.title,url:Pe.url,source:Pe.source,snippet:Pe.snippet}));if(b(be),z(Ce),T(we??{summary:"",categories:[],spoilers:""}),J&&ue){const Pe=window.history.state||{},Lt=Pe.historySaved&&Pe.query===ue;if(Pe.rehydrated||Lt)console.log("History session already exists or restoring, skipping save."),Pe.historyId&&V(Pe.historyId),H.current=ue,Pe.answer&&!x.summary&&T(Pe.answer),Pe.conversation&&S.length===0&&M(Pe.conversation);else{console.log("Creating new history session for:",J.uid,ue);const _t=await oE(ll(yn,"users",J.uid,"history"),{query:ue,conversation:[],results:be.map(st=>({title:st.title,url:st.url})),createdAt:eE()});V(_t.id),H.current=ue,window.history.replaceState({...Pe,historySaved:!0,historyId:_t.id,query:ue},"")}}}).catch(()=>{R||(T({summary:"",categories:[],spoilers:""}),b([]),z({canon:[],theories:[],spoilers:[]}))}),()=>{R=!0}},[p,i,h,J]),ee.useEffect(()=>{if(!p||f||!h||x.categories.length===0)return;const R=`${h}|${i}`;if(X.current===R)return;const ue=Date.now();s7({id:`${h}-${ue}`,query:i,item:h,intent:rg(i),timestamp:ue}),U({item:h,intent:rg(i),timestamp:ue}),J&&o7(J.uid,{id:`${h}-${ue}`,query:i,item:h,intent:rg(i),timestamp:ue}).catch(xe=>{console.warn("Query cloud sync failed",xe)}),X.current=R},[x.categories.length,p,i,f,h,U,J]);const ne=async(R,ue)=>{R&&R.preventDefault();const xe=ue?ue.trim():F.trim();if(!xe||ce)return;const we={role:"user",content:xe},Be={role:"assistant",content:""};M(be=>[...be,we,Be]),D(""),ae(!0);let Ce="";try{const be=await fetch("/api/nerdvana-answer",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:xe,spoilerMode:me,conversation:[{role:"user",content:i},{role:"assistant",content:x.summary||"No answer available"},...S]})});if(!be.ok){const _t=await be.text();throw new Error(`API ${be.status}: ${_t}`)}const Pe=await be.json();Ce=(Pe==null?void 0:Pe.answer)??"";const Lt=Array.isArray(Pe==null?void 0:Pe.sources)?Pe.sources:[];if(Lt.length>0){const _t=Lt.map(yt=>({title:yt.title,url:yt.url,source:yt.url?new URL(yt.url).hostname:"Source",snippet:yt.snippet})),st=new Set(I.map(yt=>yt.url)),tr=[...I];for(const yt of _t)st.has(yt.url)||(st.add(yt.url),tr.push(yt));b(tr);const Fr={canon:[],theories:[],spoilers:[]};tr.forEach(yt=>{Fr[bT(yt)].push(yt)}),z(Fr)}M(_t=>{const st=[..._t];return st[st.length-1]={role:"assistant",content:Ce},st})}catch(be){console.error("Follow-up generation failed:",be);const Pe=be.message.includes("Failed to fetch")?"Connection Error: Unable to reach /api/nerdvana-answer.":`Error: ${be.message}`;M(Lt=>{const _t=[...Lt],st=_t[_t.length-1];return st&&st.role==="assistant"?st.content+=`

${Pe}`:_t.push({role:"assistant",content:Pe}),_t})}finally{if(ae(!1),J&&A){const be=[...S,{role:"user",content:xe},{role:"assistant",content:Ce}];W4(vi(yn,"users",J.uid,"history",A),{conversation:be}).catch(Pe=>console.error("Failed to update history conversation",Pe))}}};return C.jsxs("div",{className:"min-h-screen w-full transition-colors duration-300",style:{backgroundColor:"var(--nerdvana-conversation-bg)"},children:[C.jsx("div",{className:"fixed inset-0 pointer-events-none paper-texture nerdvana-paper-texture-conversation"}),C.jsxs("div",{className:"relative",children:[C.jsx(Mr,{onNavigate:R=>{e(R)}}),C.jsx("main",{className:"px-6 md:px-12 py-8 md:py-12",children:C.jsxs("article",{className:"max-w-4xl mx-auto",children:[C.jsx("form",{method:"get",action:"/ask",className:"mb-4",children:C.jsxs("div",{className:"border-[2px] p-[2px]",style:{borderColor:"var(--nerdvana-border)",backgroundColor:"var(--nerdvana-surface)"},children:[C.jsx("input",{name:"q",defaultValue:i,placeholder:"Ask Nerdvana anything...",className:"askQueryInput w-full px-4 py-3 text-[1rem] md:text-[1.08rem] focus:outline-none",style:{fontFamily:'"Times New Roman", serif',backgroundColor:"var(--nerdvana-surface)",color:"var(--nerdvana-text)"}}),h&&C.jsx("input",{type:"hidden",name:"item",value:h})]})}),C.jsx("div",{className:"mb-4 flex justify-end gap-6 items-center",children:[{label:"Results Spoilers",checked:_e,set:ie},{label:"Conversation Spoilers",checked:me,set:L}].map((R,ue)=>C.jsxs("label",{className:"flex items-center cursor-pointer gap-2 group select-none",children:[C.jsx("span",{className:"text-[0.6rem] uppercase tracking-[0.1em]",style:{fontFamily:'"Courier New", monospace',color:R.checked?"var(--nerdvana-accent)":"var(--nerdvana-text)",opacity:R.checked?1:.7,transition:"color 0.2s"},children:R.label}),C.jsxs("div",{className:"relative w-8 h-4 rounded-full transition-colors duration-200",style:{backgroundColor:R.checked?"var(--nerdvana-accent)":"rgba(120,120,120,0.3)",border:"1px solid var(--nerdvana-border)"},children:[C.jsx("input",{type:"checkbox",className:"hidden",checked:R.checked,onChange:xe=>R.set(xe.target.checked)}),C.jsx("div",{className:`absolute top-0.5 left-0.5 w-2.5 h-2.5 bg-white rounded-full shadow-sm transform transition-transform duration-200 ${R.checked?"translate-x-4":"translate-x-0"}`})]})]},ue))}),i&&C.jsx("div",{className:"mb-6 flex justify-end",children:C.jsxs("button",{onClick:Me,className:"group relative px-4 py-2 border-[2px] transition-all duration-300 hover:-translate-y-0.5",style:{borderColor:"var(--nerdvana-border)",backgroundColor:"var(--nerdvana-surface)",color:"var(--nerdvana-text)"},children:[C.jsxs("span",{className:"flex items-center gap-2 text-[0.75rem] uppercase tracking-[0.15em]",style:{fontFamily:'"Courier New", monospace'},children:[C.jsx("span",{children:"Save"}),C.jsx("span",{children:"Lorebook"})]}),C.jsx("div",{className:"absolute inset-0 bg-[var(--nerdvana-accent)] opacity-0 group-hover:opacity-5 transition-opacity duration-300"})]})}),q(N.canon).length>0&&C.jsx(og,{title:"CANON RECORDS",items:q(N.canon)}),q(N.theories).length>0&&C.jsx(og,{title:"FAN THEORIES",items:q(N.theories)}),_e&&N.spoilers.length>0&&C.jsx(og,{title:"SPOILER MATERIAL",items:N.spoilers,isSpoiler:!0}),!I.length&&C.jsx("p",{className:"mt-6 text-[0.82rem] uppercase tracking-[0.12em]",style:{fontFamily:'"Courier New", monospace',opacity:.88,color:"var(--nerdvana-text)"},children:"No web results yet."}),I.length>0&&C.jsx("div",{className:"mt-12 border-t-2 pt-8",style:{borderColor:"var(--nerdvana-border)"},children:C.jsxs("form",{onSubmit:ne,children:[C.jsx("div",{className:"border-[2px] p-[2px]",style:{borderColor:"var(--nerdvana-border)",backgroundColor:"var(--nerdvana-surface)"},children:C.jsx("input",{value:F,onChange:R=>D(R.target.value),placeholder:"Ask a follow-up about this topic...",disabled:ce,className:"followUpInput w-full px-4 py-3 text-[1rem] md:text-[1.08rem] focus:outline-none",spellCheck:!1,autoComplete:"off",style:{fontFamily:'"Times New Roman", serif',backgroundColor:"var(--nerdvana-surface)",color:"var(--nerdvana-text)",opacity:ce?.6:1}})}),ce&&C.jsx("p",{className:"mt-2 text-[0.68rem] uppercase tracking-[0.12em]",style:{fontFamily:'"Courier New", monospace',opacity:.7,color:"var(--nerdvana-text)"},children:"Generating response..."})]})}),S.length>0&&C.jsxs("div",{className:"mt-6 border-t pt-6",style:{borderColor:"var(--nerdvana-border)"},children:[C.jsx("h3",{className:"mb-4 text-[0.68rem] md:text-[0.72rem] uppercase tracking-[3px]",style:{fontFamily:'"Special Elite", monospace',color:"var(--nerdvana-text)",opacity:.96},children:"CONVERSATION"}),C.jsx("div",{className:"space-y-2",children:S.map((R,ue)=>{const xe=R.role==="assistant"&&ue===S.length-1?k6(R.content):void 0,we=ue>0?S[ue-1]:null,Be=(we==null?void 0:we.role)==="user"?we.content:"",Ce=/\b(die|dies|death|dead|ending|kills|killed|final scene|spoiler|plot twist)\b/i,be=Ce.test(R.content)||Ce.test(Be),Pe=!me&&be&&R.role==="assistant",Lt=ue===S.length-1,_t=ce&&Lt&&R.role==="assistant";return C.jsx(Q$,{role:R.role,content:R.content,suggestions:xe,onSuggestionClick:st=>{D(st),ne(void 0,st)},warning:Pe,isLoading:_t},ue)})})]})]})})]}),C.jsx(hl,{}),C.jsx("style",{children:`
        .paper-texture {
          background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 600 600' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='6.5' numOctaves='5' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
          background-repeat: repeat;
        }

        .nerdvana-paper-texture-conversation {
          opacity: 0.04;
          transition: opacity 0.3s ease;
        }

        .dark .nerdvana-paper-texture-conversation {
          opacity: 0.08;
        }

        .categoryLabel {
          font-family: "Special Elite", monospace;
          letter-spacing: 3px;
          border-top: 1px solid var(--nerdvana-border);
          margin-top: 40px;
          padding-top: 10px;
          color: var(--nerdvana-text);
          opacity: 0.96;
        }

        .spoilerCard {
          cursor: pointer;
        }

        .spoilerCard:hover {
          filter: none;
        }

        .askQueryInput::placeholder {
          color: var(--nerdvana-text);
          opacity: 0.55;
        }

        .followUpInput::placeholder {
          color: var(--nerdvana-text);
          opacity: 0.55;
        }

        .dark .askQueryInput {
          color: #f5f1e8 !important;
          background-color: #1a1918 !important;
        }

        .dark .askQueryInput::placeholder {
          color: #d9d4c8;
          opacity: 0.72;
        }

        .dark .followUpInput {
          color: #f5f1e8 !important;
          background-color: #1a1918 !important;
        }

        .dark .followUpInput::placeholder {
          color: #d9d4c8;
          opacity: 0.72;
        }
      `})]})}const TA=[{slug:"inception",title:"Inception",type:"Movie",description:"Dream layers, memory, and the cost of closure.",overview:"Inception follows Cobb's final extraction mission, where layered dream architecture blurs strategic deception with unresolved guilt and family longing.",whyThisMatters:"Inception matters because it turns uncertainty into the core experience, forcing viewers to choose what counts as truth in a story built on manipulation.",themes:["Reality vs Dreams","Guilt","Time","Emotional Closure"],questions:["What does the ending of Inception mean?","Is Cobb still dreaming?","Why does Cobb stop checking the top?"]},{slug:"interstellar",title:"Interstellar",type:"Movie",description:"Cosmic survival framed through family and causality.",overview:"Interstellar explores humanity's extinction risk, using relativistic space travel and a closed causal loop to connect science, sacrifice, and parent-child bonds.",whyThisMatters:"Interstellar matters because it links abstract physics to emotional stakes, making its biggest scientific ideas legible through family decisions and sacrifice.",themes:["Time Dilation","Love and Duty","Survival","Causality"],questions:["How does the bookshelf sequence work in Interstellar?","Who created the tesseract in Interstellar?","What does the ending of Interstellar imply?"]},{slug:"dune",title:"Dune",type:"Book / Movie",description:"Power, prophecy, ecology, and political control.",overview:"Dune tracks Paul Atreides' rise within imperial conflict, where religion, resource economics, and long-term strategy collide on Arrakis.",whyThisMatters:"Dune matters because it frames hero narratives as political systems, showing how prophecy and control can destabilize entire civilizations.",themes:["Power and Empire","Prophecy","Ecology","Destiny vs Agency"],questions:["What is the core theme of Dune?","Is Paul Atreides a hero or a warning?","Why is spice central to the Dune universe?"]},{slug:"batman",title:"Batman",type:"Comic",description:"Justice, fear, and moral boundaries in Gotham.",overview:"Batman narratives examine vigilantism, trauma, and institutional failure through recurring conflicts between order, vengeance, and symbolic identity.",whyThisMatters:"Batman matters because it asks whether justice can exist without becoming vengeance, especially when institutions fail and symbols take over public trust.",themes:["Justice vs Vengeance","Identity","Trauma","Moral Limits"],questions:["Why does Batman refuse to kill?","What does Gotham represent in Batman stories?","How should Joker and Batman be interpreted?"]},{slug:"attack-on-titan",title:"Attack on Titan",type:"Anime",description:"Freedom, war cycles, and inherited violence.",overview:"Attack on Titan escalates from survival horror to political tragedy, focusing on intergenerational conflict, propaganda, and the ethics of retaliation.",whyThisMatters:"Attack on Titan matters because it dismantles simple hero-villain logic and exposes how fear, history, and propaganda perpetuate conflict.",themes:["Freedom","Cycle of Hatred","Nationalism","Sacrifice"],questions:["What does the ending of Attack on Titan mean?","Was Eren's plan inevitable?","What is the central message of Attack on Titan?"]}];function Y7(t){return TA.find(e=>e.slug===t)}function X7({onOpenItem:t,onNavigatePage:e}){return C.jsxs("div",{className:"min-h-screen w-full transition-colors duration-300",style:{backgroundColor:"var(--nerdvana-conversation-bg)"},children:[C.jsx("div",{className:"fixed inset-0 pointer-events-none paper-texture nerdvana-paper-texture-conversation"}),C.jsxs("div",{className:"relative",children:[C.jsx(Mr,{onNavigate:n=>{e(n)}}),C.jsx("main",{className:"px-6 md:px-12 py-8 md:py-12",children:C.jsxs("article",{className:"max-w-4xl mx-auto",children:[C.jsx("h1",{className:"text-3xl md:text-5xl font-black tracking-[-0.03em] leading-tight uppercase",style:{fontFamily:'Impact, "Arial Black", sans-serif',color:"var(--nerdvana-text)"},children:"Explore"}),C.jsx("p",{className:"mt-3 text-sm md:text-base leading-relaxed",style:{fontFamily:'"Times New Roman", serif',color:"var(--nerdvana-text)",opacity:.68},children:"Stories, universes, and ideas Nerdvana understands."}),C.jsx("section",{className:"mt-8 border-[2px] p-5 md:p-7 transition-colors duration-300",style:{borderColor:"var(--nerdvana-border)",backgroundColor:"var(--nerdvana-message-bg)"},children:C.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-5",children:TA.map(n=>C.jsxs("button",{className:"nerdvana-clickable text-left border-[2px] p-4 md:p-5 transition-all duration-300 hover:-translate-y-0.5",style:{borderColor:"var(--nerdvana-border)",backgroundColor:"var(--nerdvana-surface)"},onClick:()=>t(n.slug),children:[C.jsx("h2",{className:"text-xl md:text-2xl uppercase tracking-[-0.02em]",style:{fontFamily:'Impact, "Arial Black", sans-serif',color:"var(--nerdvana-text)"},children:n.title}),C.jsx("span",{className:"mt-2 inline-flex items-center text-[0.64rem] md:text-[0.7rem] uppercase tracking-[0.12em] border px-2 py-1",style:{fontFamily:'"Courier New", monospace',color:"var(--nerdvana-accent)",borderColor:"var(--nerdvana-border)",backgroundColor:"var(--nerdvana-message-bg)",opacity:.88},children:n.type}),C.jsx("p",{className:"mt-3 text-[0.98rem] leading-7",style:{fontFamily:'"Times New Roman", serif',color:"var(--nerdvana-text)"},children:n.description})]},n.slug))})})]})})]}),C.jsx("style",{children:`
        .paper-texture {
          background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 600 600' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='6.5' numOctaves='5' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
          background-repeat: repeat;
        }

        .nerdvana-paper-texture-conversation {
          opacity: 0.04;
          transition: opacity 0.3s ease;
        }

        .dark .nerdvana-paper-texture-conversation {
          opacity: 0.08;
        }

        .legacy-nerdvana-cursor {
          cursor: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='30' height='30' viewBox='0 0 30 30'%3E%3Crect x='2' y='9' width='10' height='8' rx='2' fill='%231a1918'/%3E%3Crect x='18' y='9' width='10' height='8' rx='2' fill='%231a1918'/%3E%3Crect x='12' y='11' width='6' height='4' fill='%238c1c13'/%3E%3Crect x='5' y='12' width='4' height='2' fill='%23ebe8df'/%3E%3Crect x='21' y='12' width='4' height='2' fill='%23ebe8df'/%3E%3Cpath d='M12 20 L18 20 L15 26 Z' fill='%238c1c13'/%3E%3C/svg%3E") 4 4, auto;
        }

        .dark .legacy-nerdvana-cursor {
          cursor: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='30' height='30' viewBox='0 0 30 30'%3E%3Crect x='2' y='9' width='10' height='8' rx='2' fill='%234a4845'/%3E%3Crect x='18' y='9' width='10' height='8' rx='2' fill='%234a4845'/%3E%3Crect x='12' y='11' width='6' height='4' fill='%23a83228'/%3E%3Crect x='5' y='12' width='4' height='2' fill='%23f5f1e8'/%3E%3Crect x='21' y='12' width='4' height='2' fill='%23f5f1e8'/%3E%3Cpath d='M12 20 L18 20 L15 26 Z' fill='%23a83228'/%3E%3C/svg%3E") 4 4, auto;
        }

        .legacy-nerdvana-cursor button,
        .legacy-nerdvana-cursor a,
        .legacy-nerdvana-cursor .nerdvana-clickable {
          cursor: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='30' height='30' viewBox='0 0 30 30'%3E%3Crect x='2' y='9' width='10' height='8' rx='2' fill='%238c1c13'/%3E%3Crect x='18' y='9' width='10' height='8' rx='2' fill='%238c1c13'/%3E%3Crect x='12' y='11' width='6' height='4' fill='%231a1918'/%3E%3Crect x='5' y='12' width='4' height='2' fill='%23fff8dc'/%3E%3Crect x='21' y='12' width='4' height='2' fill='%23fff8dc'/%3E%3Cpath d='M15 2 L18 9 L12 9 Z' fill='%231a1918'/%3E%3C/svg%3E") 4 4, pointer;
        }

        .dark .legacy-nerdvana-cursor button,
        .dark .legacy-nerdvana-cursor a,
        .dark .legacy-nerdvana-cursor .nerdvana-clickable {
          cursor: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='30' height='30' viewBox='0 0 30 30'%3E%3Crect x='2' y='9' width='10' height='8' rx='2' fill='%23a83228'/%3E%3Crect x='18' y='9' width='10' height='8' rx='2' fill='%23a83228'/%3E%3Crect x='12' y='11' width='6' height='4' fill='%234a4845'/%3E%3Crect x='5' y='12' width='4' height='2' fill='%23f5f1e8'/%3E%3Crect x='21' y='12' width='4' height='2' fill='%23f5f1e8'/%3E%3Cpath d='M15 2 L18 9 L12 9 Z' fill='%234a4845'/%3E%3C/svg%3E") 4 4, pointer;
        }
      `})]})}function J7({slug:t,onAskQuestion:e,onNavigatePage:n}){const r=Y7(t);return C.jsxs("div",{className:"min-h-screen w-full transition-colors duration-300",style:{backgroundColor:"var(--nerdvana-conversation-bg)"},children:[C.jsx("div",{className:"fixed inset-0 pointer-events-none paper-texture nerdvana-paper-texture-conversation"}),C.jsxs("div",{className:"relative",children:[C.jsx(Mr,{onNavigate:i=>{n(i)}}),C.jsx("main",{className:"px-6 md:px-12 py-8 md:py-12",children:C.jsx("article",{className:"max-w-4xl mx-auto",children:r?C.jsxs(C.Fragment,{children:[C.jsx("h1",{className:"text-3xl md:text-5xl font-black tracking-[-0.03em] leading-tight uppercase",style:{fontFamily:'Impact, "Arial Black", sans-serif',color:"var(--nerdvana-text)"},children:r.title}),C.jsx("p",{className:"mt-3 text-xs md:text-sm uppercase tracking-[0.16em]",style:{fontFamily:'"Courier New", monospace',color:"var(--nerdvana-accent)"},children:r.type}),C.jsxs("section",{className:"mt-8 border-[2px] p-5 md:p-7 transition-colors duration-300",style:{borderColor:"var(--nerdvana-border)",backgroundColor:"var(--nerdvana-message-bg)"},children:[C.jsx("p",{className:"text-[1rem] leading-7",style:{fontFamily:'"Times New Roman", serif',color:"var(--nerdvana-text)"},children:r.overview}),C.jsxs("section",{className:"mt-10 pt-6 border-t",style:{borderColor:"var(--nerdvana-border)"},children:[C.jsx("h2",{className:"text-xs md:text-sm uppercase tracking-[0.18em]",style:{fontFamily:'"Courier New", monospace',color:"var(--nerdvana-accent)"},children:"Why This Matters"}),C.jsx("p",{className:"mt-3 text-[1rem] leading-7",style:{fontFamily:'"Times New Roman", serif',color:"var(--nerdvana-text)"},children:r.whyThisMatters})]}),C.jsxs("section",{className:"mt-10 pt-6 border-t",style:{borderColor:"var(--nerdvana-border)"},children:[C.jsx("h2",{className:"text-xs md:text-sm uppercase tracking-[0.18em]",style:{fontFamily:'"Courier New", monospace',color:"var(--nerdvana-accent)"},children:"Key Themes"}),C.jsx("ul",{className:"mt-3 list-disc pl-5 space-y-2",style:{fontFamily:'"Times New Roman", serif',color:"var(--nerdvana-text)"},children:r.themes.map(i=>C.jsx("li",{className:"leading-7",children:i},i))})]}),C.jsxs("section",{className:"mt-10 pt-6 border-t",style:{borderColor:"var(--nerdvana-border)"},children:[C.jsx("h2",{className:"text-xs md:text-sm uppercase tracking-[0.18em]",style:{fontFamily:'"Courier New", monospace',color:"var(--nerdvana-accent)"},children:"Common Questions"}),C.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:r.questions.map(i=>C.jsx("button",{className:"nerdvana-clickable text-[0.72rem] md:text-[0.78rem] uppercase tracking-[0.09em] px-3 py-1.5 border-[1.8px] transition-all duration-300 hover:-translate-y-0.5 text-left",style:{fontFamily:'"Courier New", monospace',borderColor:"var(--nerdvana-border)",backgroundColor:"var(--nerdvana-bg)",color:"var(--nerdvana-text)"},onClick:()=>e(i),children:i},i))})]})]})]}):C.jsxs("section",{className:"mt-8 border-[2px] p-5 md:p-7 transition-colors duration-300",style:{borderColor:"var(--nerdvana-border)",backgroundColor:"var(--nerdvana-message-bg)"},children:[C.jsx("h1",{className:"text-3xl md:text-5xl font-black tracking-[-0.03em] leading-tight uppercase",style:{fontFamily:'Impact, "Arial Black", sans-serif',color:"var(--nerdvana-text)"},children:"Item Not Found"}),C.jsx("p",{className:"mt-4 text-[1rem] leading-7",style:{fontFamily:'"Times New Roman", serif',color:"var(--nerdvana-text)"},children:"This entry does not exist in the current mock index."}),C.jsx("button",{className:"nerdvana-clickable mt-5 text-xs md:text-sm uppercase tracking-[0.14em] border-[2px] px-4 py-2",style:{fontFamily:'"Courier New", monospace',borderColor:"var(--nerdvana-border)",color:"var(--nerdvana-text)",backgroundColor:"var(--nerdvana-surface)"},onClick:()=>n("explore"),children:"Back to Explore"})]})})})]}),C.jsx("style",{children:`
        .paper-texture {
          background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 600 600' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='6.5' numOctaves='5' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
          background-repeat: repeat;
        }

        .nerdvana-paper-texture-conversation {
          opacity: 0.04;
          transition: opacity 0.3s ease;
        }

        .dark .nerdvana-paper-texture-conversation {
          opacity: 0.08;
        }

        .nerdvana-cursor {
          cursor: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='30' height='30' viewBox='0 0 30 30'%3E%3Crect x='2' y='9' width='10' height='8' rx='2' fill='%231a1918'/%3E%3Crect x='18' y='9' width='10' height='8' rx='2' fill='%231a1918'/%3E%3Crect x='12' y='11' width='6' height='4' fill='%238c1c13'/%3E%3Crect x='5' y='12' width='4' height='2' fill='%23ebe8df'/%3E%3Crect x='21' y='12' width='4' height='2' fill='%23ebe8df'/%3E%3Cpath d='M12 20 L18 20 L15 26 Z' fill='%238c1c13'/%3E%3C/svg%3E") 4 4, auto;
        }

        .dark .nerdvana-cursor {
          cursor: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='30' height='30' viewBox='0 0 30 30'%3E%3Crect x='2' y='9' width='10' height='8' rx='2' fill='%234a4845'/%3E%3Crect x='18' y='9' width='10' height='8' rx='2' fill='%234a4845'/%3E%3Crect x='12' y='11' width='6' height='4' fill='%23a83228'/%3E%3Crect x='5' y='12' width='4' height='2' fill='%23f5f1e8'/%3E%3Crect x='21' y='12' width='4' height='2' fill='%23f5f1e8'/%3E%3Cpath d='M12 20 L18 20 L15 26 Z' fill='%23a83228'/%3E%3C/svg%3E") 4 4, auto;
        }

        .nerdvana-cursor button,
        .nerdvana-cursor a,
        .nerdvana-cursor .nerdvana-clickable {
          cursor: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='30' height='30' viewBox='0 0 30 30'%3E%3Crect x='2' y='9' width='10' height='8' rx='2' fill='%238c1c13'/%3E%3Crect x='18' y='9' width='10' height='8' rx='2' fill='%238c1c13'/%3E%3Crect x='12' y='11' width='6' height='4' fill='%231a1918'/%3E%3Crect x='5' y='12' width='4' height='2' fill='%23fff8dc'/%3E%3Crect x='21' y='12' width='4' height='2' fill='%23fff8dc'/%3E%3Cpath d='M15 2 L18 9 L12 9 Z' fill='%231a1918'/%3E%3C/svg%3E") 4 4, pointer;
        }

        .dark .nerdvana-cursor button,
        .dark .nerdvana-cursor a,
        .dark .nerdvana-cursor .nerdvana-clickable {
          cursor: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='30' height='30' viewBox='0 0 30 30'%3E%3Crect x='2' y='9' width='10' height='8' rx='2' fill='%23a83228'/%3E%3Crect x='18' y='9' width='10' height='8' rx='2' fill='%23a83228'/%3E%3Crect x='12' y='11' width='6' height='4' fill='%234a4845'/%3E%3Crect x='5' y='12' width='4' height='2' fill='%23f5f1e8'/%3E%3Crect x='21' y='12' width='4' height='2' fill='%23f5f1e8'/%3E%3Cpath d='M15 2 L18 9 L12 9 Z' fill='%234a4845'/%3E%3C/svg%3E") 4 4, pointer;
        }
      `})]})}function Z7({onNavigatePage:t}){return C.jsxs("div",{className:"min-h-screen w-full transition-colors duration-300",style:{backgroundColor:"var(--nerdvana-conversation-bg)"},children:[C.jsx("div",{className:"fixed inset-0 pointer-events-none paper-texture nerdvana-paper-texture-conversation"}),C.jsxs("div",{className:"relative",children:[C.jsx(Mr,{onNavigate:t}),C.jsx("main",{className:"px-6 md:px-12 py-8 md:py-12",children:C.jsxs("article",{className:"max-w-4xl mx-auto",children:[C.jsx("h1",{className:"text-3xl md:text-5xl font-black tracking-[-0.03em] leading-tight uppercase",style:{fontFamily:'Impact, "Arial Black", sans-serif',color:"var(--nerdvana-text)"},children:"About Nerdvana"}),C.jsxs("section",{className:"mt-8 border-[2px] p-5 md:p-7 transition-colors duration-300",style:{borderColor:"var(--nerdvana-border)",backgroundColor:"var(--nerdvana-message-bg)"},children:[C.jsx("p",{className:"text-[1rem] leading-7",style:{fontFamily:'"Times New Roman", serif',color:"var(--nerdvana-text)"},children:"Nerdvana is an editorial question engine for story-heavy worlds. It helps people decode endings, themes, and canon signals by organizing answers in clear, inspectable buckets instead of collapsing everything into one vague paragraph."}),C.jsx("p",{className:"mt-4 text-[1rem] leading-7",style:{fontFamily:'"Times New Roman", serif',color:"var(--nerdvana-text)"},children:"Traditional search surfaces links and fragments, then leaves synthesis to the reader. Nerdvana is designed to structure interpretation first: evidence, intent, and common theories can be compared in one place without losing nuance."}),C.jsxs("section",{className:"mt-10 pt-6 border-t",style:{borderColor:"var(--nerdvana-border)"},children:[C.jsx("h2",{className:"text-xs md:text-sm uppercase tracking-[0.18em]",style:{fontFamily:'"Courier New", monospace',color:"var(--nerdvana-accent)"},children:"What Nerdvana Is Not"}),C.jsx("p",{className:"mt-3 text-[1rem] leading-7",style:{fontFamily:'"Times New Roman", serif',color:"var(--nerdvana-text)"},children:"It is not a replacement for source material, and it is not a platform for definitive verdicts on every interpretation. The goal is clarity and context, not to flatten every debate into one final answer."})]}),C.jsxs("section",{className:"mt-10 pt-6 border-t",style:{borderColor:"var(--nerdvana-border)"},children:[C.jsx("h2",{className:"text-xs md:text-sm uppercase tracking-[0.18em]",style:{fontFamily:'"Courier New", monospace',color:"var(--nerdvana-accent)"},children:"What's Coming Next"}),C.jsx("p",{className:"mt-3 text-[1rem] leading-7",style:{fontFamily:'"Times New Roman", serif',color:"var(--nerdvana-text)"},children:"Next iterations will focus on stronger source grounding, clearer comparison views between competing readings, and deeper topic coverage across films, anime, games, and comics."})]})]})]})})]}),C.jsx("style",{children:`
        .paper-texture {
          background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 600 600' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='6.5' numOctaves='5' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
          background-repeat: repeat;
        }

        .nerdvana-paper-texture-conversation {
          opacity: 0.04;
          transition: opacity 0.3s ease;
        }

        .dark .nerdvana-paper-texture-conversation {
          opacity: 0.08;
        }

        .nerdvana-cursor {
          cursor: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='30' height='30' viewBox='0 0 30 30'%3E%3Crect x='2' y='9' width='10' height='8' rx='2' fill='%231a1918'/%3E%3Crect x='18' y='9' width='10' height='8' rx='2' fill='%231a1918'/%3E%3Crect x='12' y='11' width='6' height='4' fill='%238c1c13'/%3E%3Crect x='5' y='12' width='4' height='2' fill='%23ebe8df'/%3E%3Crect x='21' y='12' width='4' height='2' fill='%23ebe8df'/%3E%3Cpath d='M12 20 L18 20 L15 26 Z' fill='%238c1c13'/%3E%3C/svg%3E") 4 4, auto;
        }

        .dark .nerdvana-cursor {
          cursor: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='30' height='30' viewBox='0 0 30 30'%3E%3Crect x='2' y='9' width='10' height='8' rx='2' fill='%234a4845'/%3E%3Crect x='18' y='9' width='10' height='8' rx='2' fill='%234a4845'/%3E%3Crect x='12' y='11' width='6' height='4' fill='%23a83228'/%3E%3Crect x='5' y='12' width='4' height='2' fill='%23f5f1e8'/%3E%3Crect x='21' y='12' width='4' height='2' fill='%23f5f1e8'/%3E%3Cpath d='M12 20 L18 20 L15 26 Z' fill='%23a83228'/%3E%3C/svg%3E") 4 4, auto;
        }

        .nerdvana-cursor button,
        .nerdvana-cursor a,
        .nerdvana-cursor .nerdvana-clickable {
          cursor: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='30' height='30' viewBox='0 0 30 30'%3E%3Crect x='2' y='9' width='10' height='8' rx='2' fill='%238c1c13'/%3E%3Crect x='18' y='9' width='10' height='8' rx='2' fill='%238c1c13'/%3E%3Crect x='12' y='11' width='6' height='4' fill='%231a1918'/%3E%3Crect x='5' y='12' width='4' height='2' fill='%23fff8dc'/%3E%3Crect x='21' y='12' width='4' height='2' fill='%23fff8dc'/%3E%3Cpath d='M15 2 L18 9 L12 9 Z' fill='%231a1918'/%3E%3C/svg%3E") 4 4, pointer;
        }

        .dark .nerdvana-cursor button,
        .dark .nerdvana-cursor a,
        .dark .nerdvana-cursor .nerdvana-clickable {
          cursor: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='30' height='30' viewBox='0 0 30 30'%3E%3Crect x='2' y='9' width='10' height='8' rx='2' fill='%23a83228'/%3E%3Crect x='18' y='9' width='10' height='8' rx='2' fill='%23a83228'/%3E%3Crect x='12' y='11' width='6' height='4' fill='%234a4845'/%3E%3Crect x='5' y='12' width='4' height='2' fill='%23f5f1e8'/%3E%3Crect x='21' y='12' width='4' height='2' fill='%23f5f1e8'/%3E%3Cpath d='M15 2 L18 9 L12 9 Z' fill='%234a4845'/%3E%3C/svg%3E") 4 4, pointer;
        }
      `})]})}function eq({onNavigatePage:t}){return C.jsxs("div",{className:"nerdvana-cursor min-h-screen w-full transition-colors duration-300",style:{backgroundColor:"var(--nerdvana-conversation-bg)"},children:[C.jsx("div",{className:"fixed inset-0 pointer-events-none paper-texture nerdvana-paper-texture-conversation"}),C.jsxs("div",{className:"relative",children:[C.jsx(Mr,{onNavigate:t}),C.jsx("main",{className:"px-6 md:px-12 py-8 md:py-12",children:C.jsxs("article",{className:"max-w-4xl mx-auto",children:[C.jsx("h1",{className:"text-3xl md:text-5xl font-black tracking-[-0.03em] leading-tight uppercase",style:{fontFamily:'Impact, "Arial Black", sans-serif',color:"var(--nerdvana-text)"},children:"Debates"}),C.jsxs("section",{className:"mt-8 border-[2px] p-5 md:p-7 transition-colors duration-300",style:{borderColor:"var(--nerdvana-border)",backgroundColor:"var(--nerdvana-message-bg)"},children:[C.jsx("p",{className:"text-[1rem] leading-7",style:{fontFamily:'"Times New Roman", serif',color:"var(--nerdvana-text)"},children:"Debates will allow multiple interpretations of stories to be explored side by side."}),C.jsx("p",{className:"mt-5 text-xs md:text-sm uppercase tracking-[0.16em]",style:{fontFamily:'"Courier New", monospace',color:"var(--nerdvana-accent)",opacity:.8},children:"Coming soon"})]})]})})]}),C.jsx("style",{children:`
        .paper-texture {
          background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 600 600' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='6.5' numOctaves='5' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
          background-repeat: repeat;
        }

        .nerdvana-paper-texture-conversation {
          opacity: 0.04;
          transition: opacity 0.3s ease;
        }

        .dark .nerdvana-paper-texture-conversation {
          opacity: 0.08;
        }

        .nerdvana-cursor {
          cursor: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='30' height='30' viewBox='0 0 30 30'%3E%3Crect x='2' y='9' width='10' height='8' rx='2' fill='%231a1918'/%3E%3Crect x='18' y='9' width='10' height='8' rx='2' fill='%231a1918'/%3E%3Crect x='12' y='11' width='6' height='4' fill='%238c1c13'/%3E%3Crect x='5' y='12' width='4' height='2' fill='%23ebe8df'/%3E%3Crect x='21' y='12' width='4' height='2' fill='%23ebe8df'/%3E%3Cpath d='M12 20 L18 20 L15 26 Z' fill='%238c1c13'/%3E%3C/svg%3E") 4 4, auto;
        }

        .dark .nerdvana-cursor {
          cursor: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='30' height='30' viewBox='0 0 30 30'%3E%3Crect x='2' y='9' width='10' height='8' rx='2' fill='%234a4845'/%3E%3Crect x='18' y='9' width='10' height='8' rx='2' fill='%234a4845'/%3E%3Crect x='12' y='11' width='6' height='4' fill='%23a83228'/%3E%3Crect x='5' y='12' width='4' height='2' fill='%23f5f1e8'/%3E%3Crect x='21' y='12' width='4' height='2' fill='%23f5f1e8'/%3E%3Cpath d='M12 20 L18 20 L15 26 Z' fill='%23a83228'/%3E%3C/svg%3E") 4 4, auto;
        }

        .nerdvana-cursor button,
        .nerdvana-cursor a,
        .nerdvana-cursor .nerdvana-clickable {
          cursor: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='30' height='30' viewBox='0 0 30 30'%3E%3Crect x='2' y='9' width='10' height='8' rx='2' fill='%238c1c13'/%3E%3Crect x='18' y='9' width='10' height='8' rx='2' fill='%238c1c13'/%3E%3Crect x='12' y='11' width='6' height='4' fill='%231a1918'/%3E%3Crect x='5' y='12' width='4' height='2' fill='%23fff8dc'/%3E%3Crect x='21' y='12' width='4' height='2' fill='%23fff8dc'/%3E%3Cpath d='M15 2 L18 9 L12 9 Z' fill='%231a1918'/%3E%3C/svg%3E") 4 4, pointer;
        }

        .dark .nerdvana-cursor button,
        .dark .nerdvana-cursor a,
        .dark .nerdvana-cursor .nerdvana-clickable {
          cursor: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='30' height='30' viewBox='0 0 30 30'%3E%3Crect x='2' y='9' width='10' height='8' rx='2' fill='%23a83228'/%3E%3Crect x='18' y='9' width='10' height='8' rx='2' fill='%23a83228'/%3E%3Crect x='12' y='11' width='6' height='4' fill='%234a4845'/%3E%3Crect x='5' y='12' width='4' height='2' fill='%23f5f1e8'/%3E%3Crect x='21' y='12' width='4' height='2' fill='%23f5f1e8'/%3E%3Cpath d='M15 2 L18 9 L12 9 Z' fill='%234a4845'/%3E%3C/svg%3E") 4 4, pointer;
        }
      `})]})}function tq({onNavigatePage:t}){return C.jsxs("div",{className:"min-h-screen w-full transition-colors duration-300",style:{backgroundColor:"var(--nerdvana-conversation-bg)"},children:[C.jsx("div",{className:"fixed inset-0 pointer-events-none paper-texture nerdvana-paper-texture-conversation"}),C.jsxs("div",{className:"relative",children:[C.jsx(Mr,{onNavigate:t}),C.jsx("main",{className:"px-6 md:px-12 py-8 md:py-12",children:C.jsxs("article",{className:"max-w-4xl mx-auto",children:[C.jsx("h1",{className:"text-3xl md:text-5xl font-black tracking-[-0.03em] leading-tight uppercase",style:{fontFamily:'Impact, "Arial Black", sans-serif',color:"var(--nerdvana-text)"},children:"Community"}),C.jsxs("section",{className:"mt-8 border-[2px] p-5 md:p-7 transition-colors duration-300",style:{borderColor:"var(--nerdvana-border)",backgroundColor:"var(--nerdvana-message-bg)"},children:[C.jsx("p",{className:"text-[1rem] leading-7",style:{fontFamily:'"Times New Roman", serif',color:"var(--nerdvana-text)"},children:"Community is where shared interpretations, constructive discussion, and collaborative reading of story worlds will eventually live."}),C.jsx("p",{className:"mt-5 text-xs md:text-sm uppercase tracking-[0.16em]",style:{fontFamily:'"Courier New", monospace',color:"var(--nerdvana-accent)",opacity:.8},children:"This feature is not open yet"})]})]})})]}),C.jsx("style",{children:`
        .paper-texture {
          background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 600 600' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='6.5' numOctaves='5' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
          background-repeat: repeat;
        }

        .nerdvana-paper-texture-conversation {
          opacity: 0.04;
          transition: opacity 0.3s ease;
        }

        .dark .nerdvana-paper-texture-conversation {
          opacity: 0.08;
        }

        .nerdvana-cursor {
          cursor: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='30' height='30' viewBox='0 0 30 30'%3E%3Crect x='2' y='9' width='10' height='8' rx='2' fill='%231a1918'/%3E%3Crect x='18' y='9' width='10' height='8' rx='2' fill='%231a1918'/%3E%3Crect x='12' y='11' width='6' height='4' fill='%238c1c13'/%3E%3Crect x='5' y='12' width='4' height='2' fill='%23ebe8df'/%3E%3Crect x='21' y='12' width='4' height='2' fill='%23ebe8df'/%3E%3Cpath d='M12 20 L18 20 L15 26 Z' fill='%238c1c13'/%3E%3C/svg%3E") 4 4, auto;
        }

        .dark .nerdvana-cursor {
          cursor: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='30' height='30' viewBox='0 0 30 30'%3E%3Crect x='2' y='9' width='10' height='8' rx='2' fill='%234a4845'/%3E%3Crect x='18' y='9' width='10' height='8' rx='2' fill='%234a4845'/%3E%3Crect x='12' y='11' width='6' height='4' fill='%23a83228'/%3E%3Crect x='5' y='12' width='4' height='2' fill='%23f5f1e8'/%3E%3Crect x='21' y='12' width='4' height='2' fill='%23f5f1e8'/%3E%3Cpath d='M12 20 L18 20 L15 26 Z' fill='%23a83228'/%3E%3C/svg%3E") 4 4, auto;
        }

        .nerdvana-cursor button,
        .nerdvana-cursor a,
        .nerdvana-cursor .nerdvana-clickable {
          cursor: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='30' height='30' viewBox='0 0 30 30'%3E%3Crect x='2' y='9' width='10' height='8' rx='2' fill='%238c1c13'/%3E%3Crect x='18' y='9' width='10' height='8' rx='2' fill='%238c1c13'/%3E%3Crect x='12' y='11' width='6' height='4' fill='%231a1918'/%3E%3Crect x='5' y='12' width='4' height='2' fill='%23fff8dc'/%3E%3Crect x='21' y='12' width='4' height='2' fill='%23fff8dc'/%3E%3Cpath d='M15 2 L18 9 L12 9 Z' fill='%231a1918'/%3E%3C/svg%3E") 4 4, pointer;
        }

        .dark .nerdvana-cursor button,
        .dark .nerdvana-cursor a,
        .dark .nerdvana-cursor .nerdvana-clickable {
          cursor: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='30' height='30' viewBox='0 0 30 30'%3E%3Crect x='2' y='9' width='10' height='8' rx='2' fill='%23a83228'/%3E%3Crect x='18' y='9' width='10' height='8' rx='2' fill='%23a83228'/%3E%3Crect x='12' y='11' width='6' height='4' fill='%234a4845'/%3E%3Crect x='5' y='12' width='4' height='2' fill='%23f5f1e8'/%3E%3Crect x='21' y='12' width='4' height='2' fill='%23f5f1e8'/%3E%3Cpath d='M15 2 L18 9 L12 9 Z' fill='%234a4845'/%3E%3C/svg%3E") 4 4, pointer;
        }
      `})]})}function nq(t){const e=t;return typeof(e==null?void 0:e.toDate)=="function"?e.toDate().toLocaleString():"Unknown time"}function rq({onNavigatePage:t}){const[e]=Rd(Vo),{login:n}=Go(),[r,i]=ee.useState([]),[o,l]=ee.useState(!1);ee.useEffect(()=>{if(!e){i([]);return}const p=Iv(ll(yn,"users",e.uid,"history"),Pv("createdAt","desc")),g=Dv(p,v=>{const x=v.docs.map(T=>{var b,N;const I=T.data();return typeof I.query!="string"||!I.query.trim()?null:{id:T.id,query:I.query,createdAtText:nq(I.createdAt),conversation:I.conversation||[],results:I.results||[],timestamp:((N=(b=I.createdAt)==null?void 0:b.toMillis)==null?void 0:N.call(b))||Date.now()}}).filter(T=>!!T);i(x)});return()=>g()},[e]);const u=async(p,g)=>{p.stopPropagation(),e&&await fC(vi(yn,"users",e.uid,"history",g))},h=async()=>{if(!(!e||o||r.length===0)){l(!0);try{const p=G4(yn);r.forEach(g=>{p.delete(vi(yn,"users",e.uid,"history",g.id))}),await p.commit()}catch(p){console.error("Failed to clear history",p)}finally{l(!1)}}},f=p=>{const g=encodeURIComponent(p.query),v={query:p.query,conversation:p.conversation,results:p.results,rehydrated:!0,historyId:p.id};window.history.pushState(v,"",`/ask?q=${g}`),window.dispatchEvent(new PopStateEvent("popstate"))};return C.jsxs("div",{className:"min-h-screen w-full flex flex-col transition-colors duration-300",style:{backgroundColor:"var(--nerdvana-conversation-bg)"},children:[C.jsx("div",{className:"fixed inset-0 pointer-events-none paper-texture nerdvana-paper-texture-conversation"}),C.jsxs("div",{className:"relative flex-1 flex flex-col",children:[C.jsx(Mr,{onNavigate:t}),C.jsx("main",{className:"px-6 md:px-12 py-8 md:py-12 flex-1",children:C.jsxs("article",{className:"max-w-4xl mx-auto",children:[C.jsxs("div",{className:"flex items-center justify-between gap-3",children:[C.jsx("h1",{className:"text-3xl md:text-5xl font-black tracking-[-0.03em] leading-tight uppercase",style:{fontFamily:'Impact, "Arial Black", sans-serif',color:"var(--nerdvana-text)"},children:"History"}),e&&C.jsx("button",{type:"button",className:"nerdvana-clickable border-[2px] px-3 py-1.5 text-[0.68rem] uppercase tracking-[0.12em]",style:{fontFamily:'"Courier New", monospace',borderColor:"var(--nerdvana-border)",color:"var(--nerdvana-text)"},onClick:()=>{h().catch(()=>{})},children:o?"Clearing...":"Clear All History"})]}),e?C.jsxs("div",{className:"mt-6 space-y-3",children:[r.map(p=>C.jsxs("div",{className:"border p-3 md:p-4 flex items-start justify-between gap-3 nerdvana-clickable transition-colors hover:bg-[rgba(255,255,255,0.03)]",style:{borderColor:"var(--nerdvana-border)",backgroundColor:"var(--nerdvana-surface)",cursor:"pointer"},onClick:()=>f(p),children:[C.jsxs("div",{className:"min-w-0",children:[C.jsx("p",{className:"text-[0.66rem] uppercase tracking-[0.14em]",style:{fontFamily:'"Courier New", monospace',color:"var(--nerdvana-text)",opacity:.72},children:p.createdAtText}),C.jsx("p",{className:"mt-1 text-[0.95rem] leading-6",style:{fontFamily:'"Times New Roman", serif',color:"var(--nerdvana-text)"},children:p.query})]}),C.jsx("button",{type:"button",className:"nerdvana-clickable shrink-0 border px-2 py-1 text-[0.62rem] uppercase tracking-[0.12em] z-10 hover:bg-red-900/20",style:{fontFamily:'"Courier New", monospace',borderColor:"var(--nerdvana-border)",color:"var(--nerdvana-text)"},onClick:g=>{u(g,p.id).catch(()=>{})},children:"Delete"})]},p.id)),r.length===0&&C.jsx("p",{className:"text-[0.78rem] uppercase tracking-[0.12em]",style:{fontFamily:'"Courier New", monospace',color:"var(--nerdvana-text)",opacity:.8},children:"No history yet."})]}):C.jsxs("div",{className:"mt-5 border p-4",style:{borderColor:"var(--nerdvana-border)",backgroundColor:"var(--nerdvana-surface)"},children:[C.jsx("p",{style:{fontFamily:'"Times New Roman", serif',color:"var(--nerdvana-text)"},children:"Sign in to view and manage your search history."}),C.jsx("button",{type:"button",className:"mt-4 nerdvana-clickable border-[2px] px-4 py-2 text-[0.7rem] uppercase tracking-[0.15em]",style:{fontFamily:'"Courier New", monospace',borderColor:"var(--nerdvana-border)",color:"var(--nerdvana-text)"},onClick:()=>{n().catch(()=>{})},children:"Sign In"})]})]})}),C.jsx(hl,{})]}),C.jsx("style",{children:`
        .paper-texture {
          background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 600 600' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='6.5' numOctaves='5' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
          background-repeat: repeat;
        }
        .nerdvana-paper-texture-conversation { opacity: 0.04; transition: opacity 0.3s ease; }
        .dark .nerdvana-paper-texture-conversation { opacity: 0.08; }
      `})]})}/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iq=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),sq=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),AT=t=>{const e=sq(t);return e.charAt(0).toUpperCase()+e.slice(1)},kA=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var oq={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aq=ee.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:o,iconNode:l,...u},h)=>ee.createElement("svg",{ref:h,...oq,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:kA("lucide",i),...u},[...l.map(([f,p])=>ee.createElement(f,p)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lq=(t,e)=>{const n=ee.forwardRef(({className:r,...i},o)=>ee.createElement(aq,{ref:o,iconNode:e,className:kA(`lucide-${iq(AT(t))}`,`lucide-${t}`,r),...i}));return n.displayName=AT(t),n};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uq=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],cq=lq("trash-2",uq);function hq({onNavigatePage:t}){const[e]=Rd(Vo),{login:n}=Go(),[r,i]=ee.useState([]);ee.useEffect(()=>{if(!e){i([]);return}const u=Iv(ll(yn,"users",e.uid,"lorebooks"),Pv("createdAt","desc")),h=Dv(u,f=>{const p=f.docs.map(g=>({id:g.id,...g.data()}));i(p)});return()=>h()},[e]);const o=u=>{const h=encodeURIComponent(u.topic);let f={summary:"",categories:[],spoilers:""},p=[];if(u.conversation&&u.conversation.length>0){const v=u.conversation.findIndex(x=>x.role==="assistant");v!==-1&&(f={summary:u.conversation[v].content,categories:[],spoilers:""},u.conversation.length>2&&(p=u.conversation.slice(2)))}const g={query:u.topic,conversation:p,results:u.results,answer:f,rehydrated:!0};window.history.pushState(g,"",`/ask?q=${h}`),window.dispatchEvent(new PopStateEvent("popstate"))},l=async(u,h)=>{if(u.stopPropagation(),!!e&&window.confirm("Are you sure you want to delete this lorebook? This cannot be undone."))try{await fC(vi(yn,"users",e.uid,"lorebooks",h))}catch(f){console.error("Error deleting lorebook:",f),alert("Failed to delete lorebook.")}};return C.jsxs("div",{className:"min-h-screen w-full flex flex-col transition-colors duration-300",style:{backgroundColor:"var(--nerdvana-conversation-bg)"},children:[C.jsx("div",{className:"fixed inset-0 pointer-events-none paper-texture nerdvana-paper-texture-conversation"}),C.jsxs("div",{className:"relative flex-1 flex flex-col",children:[C.jsx(Mr,{onNavigate:t}),C.jsx("main",{className:"px-6 md:px-12 py-8 md:py-12 flex-1",children:C.jsxs("article",{className:"max-w-5xl mx-auto",children:[C.jsx("h1",{className:"text-3xl md:text-5xl font-black tracking-[-0.03em] leading-tight uppercase",style:{fontFamily:'Impact, "Arial Black", sans-serif',color:"var(--nerdvana-text)"},children:"Saved Lorebooks"}),e?C.jsxs("div",{className:"mt-6 grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:[r.map(u=>{var h;return C.jsxs("div",{className:"relative group h-full",children:[C.jsxs("button",{className:"nerdvana-clickable w-full text-left border p-4 transition-transform duration-150 hover:-translate-y-0.5 flex flex-col h-full",style:{borderColor:"var(--nerdvana-border)",backgroundColor:"var(--nerdvana-surface)"},onClick:()=>o(u),children:[C.jsx("p",{className:"text-[0.66rem] uppercase tracking-[0.14em] mb-2",style:{fontFamily:'"Courier New", monospace',color:"var(--nerdvana-text)",opacity:.72},children:(h=u.createdAt)!=null&&h.toDate?u.createdAt.toDate().toLocaleDateString():"Saved Session"}),C.jsx("h3",{className:"text-[1.1rem] leading-6 font-bold mb-2 break-words pr-6",style:{fontFamily:'"Times New Roman", serif',color:"var(--nerdvana-text)"},children:u.topic}),C.jsx("p",{className:"text-[0.85rem] leading-5 opacity-80",style:{fontFamily:'"Times New Roman", serif',color:"var(--nerdvana-text)"},children:u.conversation?`Chat Session (${u.conversation.length} msgs)`:"Legacy Item"})]}),C.jsx("button",{onClick:f=>l(f,u.id),className:"absolute top-2 right-2 p-1.5 opacity-0 group-hover:opacity-100 transition-opacity duration-200 hover:text-red-500 rounded-md",style:{color:"var(--nerdvana-text)"},title:"Delete Lorebook",children:C.jsx(cq,{size:16})})]},u.id)}),r.length===0&&C.jsx("p",{className:"text-[0.78rem] uppercase tracking-[0.12em]",style:{fontFamily:'"Courier New", monospace',color:"var(--nerdvana-text)",opacity:.8},children:"No saved lorebooks yet."})]}):C.jsxs("div",{className:"mt-5 border p-4",style:{borderColor:"var(--nerdvana-border)",backgroundColor:"var(--nerdvana-surface)"},children:[C.jsx("p",{style:{fontFamily:'"Times New Roman", serif',color:"var(--nerdvana-text)"},children:"Sign in to view saved lorebooks."}),C.jsx("button",{type:"button",className:"mt-4 nerdvana-clickable border-[2px] px-4 py-2 text-[0.7rem] uppercase tracking-[0.15em]",style:{fontFamily:'"Courier New", monospace',borderColor:"var(--nerdvana-border)",color:"var(--nerdvana-text)"},onClick:()=>{n().catch(()=>{})},children:"Sign In"})]})]})}),C.jsx(hl,{})]}),C.jsx("style",{children:`
        .paper-texture {
          background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 600 600' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='6.5' numOctaves='5' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
          background-repeat: repeat;
        }
        .nerdvana-paper-texture-conversation { opacity: 0.04; transition: opacity 0.3s ease; }
        .dark .nerdvana-paper-texture-conversation { opacity: 0.08; }
      `})]})}function fq(){return typeof window>"u"?!0:window.localStorage.getItem("nerdvana_pref_remember_context")!=="false"}function PT({onNavigatePage:t}){const[e]=Rd(Vo),{login:n}=Go(),[r,i]=ee.useState(0),[o,l]=ee.useState("Explorer"),[u,h]=ee.useState("Explorer"),[f,p]=ee.useState(!1),g=ee.useMemo(()=>fq(),[]);ee.useEffect(()=>{if(!e){i(0),l("Explorer"),h("Explorer");return}B4(ll(yn,"users",e.uid,"saved")).then(I=>i(I.data().count)).catch(()=>i(0)),(async()=>{try{const I=vi(yn,"users",e.uid),N=(await hC(I)).data(),z=typeof(N==null?void 0:N.username)=="string"&&N.username.trim()?N.username.trim():e.displayName||"Explorer";l(z),h(z)}catch{const b=e.displayName||"Explorer";l(b),h(b)}})()},[e]);const v=ee.useMemo(()=>{const T=u.trim();return T.length>0&&T!==o},[o,u]),x=async()=>{if(console.log("=== Saving settings started ==="),!(e!=null&&e.uid)||!v||f){console.error("Save aborted:",{hasUser:!!(e!=null&&e.uid),canSave:v,alreadySaving:f});return}const T=setTimeout(()=>{console.error(" TIMEOUT: Save took too long, forcing state reset"),p(!1)},1e4);try{console.log("Setting saving state to true"),p(!0);const I=vi(yn,"users",e.uid);console.log("Writing to path:",I.path);const b={username:u.trim()};console.log("Data to save:",b),await Of(I,b,{merge:!0}),console.log(" Firestore write success:",b),l(b.username),console.log(" Local state updated")}catch(I){console.error(" SETTINGS SAVE ERROR:",I),console.error("Error details:",{name:I.name,message:I.message,stack:I.stack}),typeof window<"u"&&(window.__lastSaveError=I,console.error("Error saved to window.__lastSaveError for inspection"))}finally{clearTimeout(T),p(!1),console.log("=== Saving finished, state reset ===")}};return e?C.jsxs("div",{className:"min-h-screen w-full transition-colors duration-300",style:{backgroundColor:"var(--nerdvana-conversation-bg)"},children:[C.jsx("div",{className:"fixed inset-0 pointer-events-none paper-texture nerdvana-paper-texture-conversation"}),C.jsxs("div",{className:"relative",children:[C.jsx(Mr,{onNavigate:t}),C.jsx("main",{className:"px-6 md:px-12 py-8 md:py-12",children:C.jsxs("article",{className:"profile-shell max-w-3xl mx-auto border p-5 md:p-8",children:[C.jsx("div",{className:"border p-4 md:p-5 flex items-center gap-4",style:{borderColor:"var(--nerdvana-border)",backgroundColor:"var(--nerdvana-surface)"},children:C.jsxs("div",{children:[C.jsx("h1",{className:"text-2xl md:text-3xl font-black tracking-[-0.03em] uppercase",style:{fontFamily:'Impact, "Arial Black", sans-serif',color:"var(--nerdvana-text)"},children:`Hi, ${o} !`}),C.jsxs("p",{className:"mt-1 text-[0.72rem] uppercase tracking-[0.14em]",style:{fontFamily:'"Courier New", monospace',color:"var(--nerdvana-text)",opacity:.75},children:["Continuity Memory: ",g?"Active":"Off"]})]})}),C.jsxs("section",{className:"control-card mt-6 border p-4",children:[C.jsx("p",{className:"text-[0.7rem] uppercase tracking-[0.14em]",style:{fontFamily:'"Courier New", monospace',color:"var(--nerdvana-text)",opacity:.75},children:"Profile Settings"}),C.jsx("label",{className:"mt-3 block text-[0.66rem] uppercase tracking-[0.16em]",style:{fontFamily:'"Courier New", monospace',color:"var(--nerdvana-text)",opacity:.8},children:"Username"}),C.jsx("input",{value:u,onChange:T=>h(T.target.value),className:"mt-2 w-full border px-3 py-2 text-[1rem] focus:outline-none",style:{borderColor:"var(--nerdvana-border)",backgroundColor:"var(--nerdvana-conversation-bg)",color:"var(--nerdvana-text)",fontFamily:'"Times New Roman", serif'}}),C.jsx("button",{type:"button",disabled:!v||f,onClick:x,className:"nerdvana-clickable mt-4 border-[2px] px-3 py-1.5 text-[0.68rem] uppercase tracking-[0.12em] disabled:opacity-60",style:{fontFamily:'"Courier New", monospace',borderColor:"var(--nerdvana-border)",color:"var(--nerdvana-text)"},children:f?"Saving...":"Save Settings"})]}),C.jsxs("section",{className:"grid md:grid-cols-2 gap-4 mt-6",children:[C.jsxs("div",{className:"control-card border p-4",children:[C.jsx("p",{className:"text-[0.7rem] uppercase tracking-[0.14em]",style:{fontFamily:'"Courier New", monospace',color:"var(--nerdvana-text)",opacity:.75},children:"Saved Lorebooks"}),C.jsx("p",{className:"mt-2 text-3xl font-black",style:{fontFamily:'Impact, "Arial Black", sans-serif',color:"var(--nerdvana-text)"},children:r}),C.jsx("button",{className:"nerdvana-clickable mt-4 border-[2px] px-3 py-1.5 text-[0.68rem] uppercase tracking-[0.12em]",style:{fontFamily:'"Courier New", monospace',borderColor:"var(--nerdvana-border)",color:"var(--nerdvana-text)"},onClick:()=>{window.history.pushState({},"","/saved"),window.dispatchEvent(new PopStateEvent("popstate"))},children:"View Saved"})]}),C.jsxs("div",{className:"control-card border p-4",children:[C.jsx("p",{className:"text-[0.7rem] uppercase tracking-[0.14em]",style:{fontFamily:'"Courier New", monospace',color:"var(--nerdvana-text)",opacity:.75},children:"Continuity Settings"}),C.jsx("p",{className:"mt-2 text-[0.9rem]",style:{fontFamily:'"Times New Roman", serif',color:"var(--nerdvana-text)"},children:g?"Continuity memory is active.":"Continuity memory is currently off."})]})]})]})})]}),C.jsx(hl,{}),C.jsx("style",{children:`
        .paper-texture {
          background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 600 600' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='6.5' numOctaves='5' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
          background-repeat: repeat;
        }
        .nerdvana-paper-texture-conversation { opacity: 0.04; transition: opacity 0.3s ease; }
        .dark .nerdvana-paper-texture-conversation { opacity: 0.08; }
        .profile-shell {
          border-color: var(--nerdvana-border);
          background: linear-gradient(180deg, var(--nerdvana-surface) 0%, var(--nerdvana-conversation-bg) 100%);
        }
        .control-card {
          border-color: var(--nerdvana-border);
          background-color: var(--nerdvana-surface);
          transition: transform 0.18s ease, box-shadow 0.18s ease;
        }
        .control-card:hover {
          transform: translateY(-2px);
          box-shadow: 2px 2px 0 var(--nerdvana-shadow);
        }
      `})]}):C.jsxs("div",{className:"min-h-screen w-full transition-colors duration-300",style:{backgroundColor:"var(--nerdvana-conversation-bg)"},children:[C.jsx("div",{className:"fixed inset-0 pointer-events-none paper-texture nerdvana-paper-texture-conversation"}),C.jsxs("div",{className:"relative",children:[C.jsx(Mr,{onNavigate:t}),C.jsx("main",{className:"px-6 md:px-12 py-8 md:py-12",children:C.jsxs("section",{className:"archive-main",children:[C.jsxs("div",{className:"archive-header",children:[C.jsx("p",{className:"archive-label",children:"PROFILE ARCHIVE"}),C.jsx("p",{className:"archive-label",children:"ACCESS LEVEL: GUEST"}),C.jsx("p",{className:"archive-label",children:"STATUS: LOCKED"})]}),C.jsxs("div",{className:"archive-modules",children:[C.jsx("div",{className:"archive-module",children:"Saved Lorebooks"}),C.jsx("div",{className:"archive-module",children:"Search History"}),C.jsx("div",{className:"archive-module",children:"Continuity Memory"})]}),C.jsx("button",{type:"button",className:"profileSignInBtn auth-button nerdvana-clickable",onClick:()=>{n().then(()=>t("home")).catch(T=>console.warn("Sign in failed",T))},children:"SIGN IN"})]})})]}),C.jsx(hl,{}),C.jsx("style",{children:`
          .paper-texture {
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 600 600' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='6.5' numOctaves='5' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
            background-repeat: repeat;
          }
          .nerdvana-paper-texture-conversation { opacity: 0.04; transition: opacity 0.3s ease; }
          .dark .nerdvana-paper-texture-conversation { opacity: 0.08; }
          .archive-main { max-width: 900px; margin: 120px auto; font-family: inherit; text-align: left; }
          .archive-header { border: 1px solid var(--nerdvana-border); background: var(--nerdvana-surface); padding: 14px 16px; }
          .archive-label { font-size: 0.68rem; letter-spacing: 0.16em; opacity: 0.7; text-transform: uppercase; font-family: "Courier New", monospace; color: var(--nerdvana-text); }
          .archive-label + .archive-label { margin-top: 6px; }
          .archive-modules { margin-top: 14px; display: grid; gap: 10px; }
          .archive-module { border: 1px dashed var(--nerdvana-border); background: var(--nerdvana-surface); padding: 12px 14px; opacity: 0.6; font-family: "Times New Roman", serif; color: var(--nerdvana-text); transition: transform 180ms ease, border-color 180ms ease, opacity 180ms ease; }
          .archive-module:hover { transform: translateX(3px); border-color: var(--nerdvana-accent); opacity: 0.86; }
          .profileSignInBtn { margin-top: 16px; padding: 6px 14px; border: 2px solid var(--nerdvana-border); box-shadow: 2px 2px 0 var(--nerdvana-accent); font-size: 0.7rem; letter-spacing: 0.15em; font-family: "Courier New", monospace; text-transform: uppercase; }
          .auth-button { background-color: var(--nerdvana-border); border-color: var(--nerdvana-border); color: var(--nerdvana-surface); transition: background-color 0.3s ease, border-color 0.3s ease, transform 0.2s ease; }
          .auth-button:hover { background-color: var(--nerdvana-accent); border-color: var(--nerdvana-accent); transform: translateY(-1px); }
        `})]})}function RT({onNavigatePage:t,onStartInsights:e}){const{login:n}=Go(),r=()=>{n().catch(i=>{console.warn("Login failed",i)})};return C.jsxs("div",{className:"w-full min-h-screen bg-black transition-colors duration-300 flex flex-col",children:[C.jsxs("section",{className:"hero relative min-h-screen flex items-center overflow-hidden bg-black",children:[C.jsxs("div",{className:"absolute inset-0 pointer-events-none origin-center animate-[drift_40s_linear_infinite]",children:[C.jsx("div",{className:"absolute inset-0 bg-black"}),C.jsx("div",{className:"absolute inset-0 opacity-20 bg-[radial-gradient(circle,#ffffff10_1px,transparent_1px),repeating-linear-gradient(0deg,rgba(255,255,255,0.025)_0px,rgba(255,255,255,0.025)_1px,transparent_1px,transparent_2px)] [background-size:16px_16px,3px_3px]"}),C.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(120deg,transparent_45%,rgba(255,0,0,0.12)_60%,transparent_75%)]"}),C.jsx("div",{className:"absolute inset-0 pointer-events-none bg-[radial-gradient(circle,#ffffff08_1px,transparent_1px)] [background-size:20px_20px] opacity-[0.05] mix-blend-overlay"}),C.jsx("div",{className:"absolute inset-0 pointer-events-none bg-[radial-gradient(circle_at_20%_50%,rgba(255,0,0,0.12),transparent_60%)]"})]}),C.jsxs("div",{className:"relative z-10 w-full max-w-xl pl-16 pr-6 animate-[fade-up_700ms_ease-out_forwards] opacity-0 translate-y-5",children:[C.jsx("h1",{className:"text-7xl md:text-8xl font-black tracking-tight uppercase text-white drop-shadow-[0_4px_12px_rgba(0,0,0,0.6)]",style:{fontFamily:'Impact, "Arial Black", sans-serif'},children:"NERDVANA"}),C.jsx("p",{className:"mt-6 uppercase tracking-[0.3em] text-white/80 text-lg md:text-xl",children:"THE STORY ENDED. THE QUESTIONS DIDN'T."}),C.jsxs("div",{className:"mt-10 flex flex-wrap gap-4",children:[C.jsx("button",{type:"button",onClick:e,className:"nerdvana-clickable bg-red-600 text-white uppercase font-semibold px-6 py-3 tracking-[0.14em] shadow-[6px_6px_0_black] transition-all duration-200 ease-out hover:translate-x-1 hover:translate-y-1 hover:shadow-[3px_3px_0_black]",children:"LET'S DECODE!"}),C.jsx("button",{type:"button",onClick:r,className:"nerdvana-clickable border border-white/60 bg-transparent text-white px-6 py-3 uppercase tracking-[0.14em] transition-colors duration-150 hover:bg-white/10",children:"SIGN IN"})]})]})]}),C.jsx("style",{children:`
        @keyframes drift {
          0% { transform: scale(1.05) translateX(0); }
          100% { transform: scale(1.05) translateX(-30px); }
        }

        @keyframes fade-up {
          0% { opacity: 0; transform: translateY(20px); }
          100% { opacity: 1; transform: translateY(0); }
        }

      `})]})}const SA=["The Story Ended. The Questions Didn't.","Decode endings, twists, and hidden clues.","From canon facts to wild theories.","Every fandom has secrets. Let's unpack them."],dq=["Movies","TV","Anime","Games","Comics"],IA={Movies:["Explain the ending of Inception...","What did Nolan really imply there?","Was that scene symbolic or literal?"],TV:["Why did THAT happen in Game of Thrones?","Did the finale contradict earlier seasons?","What foreshadowing did I miss?"],Anime:["Was that anime ending rushed or planned?","Canon arc or filler arc implications?","What does that final shot really mean?"],Games:["Hidden lore behind this game ending?","Was this questline choice the canon path?","What did the post-credits scene imply?"],Comics:["Is this comic event canon now?","Main timeline or alternate earth?","Which run explains this best?"]},pq={Movies:["Inception ending","Interstellar bookshelf","Dune prophecy"],TV:["GOT Azor Ahai","Dark timeline knot","Severance finale clues"],Anime:["Attack Titan paths","JJK cursed binding","One Piece will"],Games:["Elden Ring age choice","Silent Hill loop","RDR2 honor lore"],Comics:["Secret Wars reset","Flashpoint paradox","Kang variants"]};function NT(){return new URLSearchParams(window.location.search).get("q")??""}function mq(t){const e=t.match(/^\/item\/([^/]+)$/);return e?decodeURIComponent(e[1]):""}function gq({entry:t,isFocused:e,placeholderIndex:n,taglineIndex:r,selectedUniverse:i,onSetEntry:o,onSetFocused:l,onSetUniverse:u,onSubmit:h,onNavigateHome:f,onNavigatePage:p}){const g=v=>{v.key==="Enter"&&t.trim()&&h(t)};return C.jsxs("div",{className:"min-h-screen w-full relative overflow-hidden flex flex-col transition-colors duration-300",style:{backgroundColor:"var(--nerdvana-bg)"},children:[C.jsx(Mr,{onNavigate:v=>{p(v)}}),C.jsxs("div",{className:"flex-1 flex items-center justify-center px-6 py-8 md:py-12",children:[C.jsx("div",{className:"deadpool-bg fixed inset-0 pointer-events-none bg-no-repeat",style:{backgroundImage:"url(/image.jpg)"}}),C.jsx("div",{className:"fixed inset-0 pointer-events-none paper-texture nerdvana-paper-texture"}),C.jsx("div",{className:"fixed -top-28 -right-20 w-80 h-80 rounded-full blur-3xl pointer-events-none transition-opacity duration-300 nerdvana-gradient-accent"}),C.jsx("div",{className:"fixed -bottom-20 left-1/3 w-72 h-72 rounded-full blur-3xl pointer-events-none transition-opacity duration-300 nerdvana-gradient-dark"}),C.jsx("div",{className:"fixed inset-0 pointer-events-none transition-opacity duration-300 nerdvana-vignette"}),C.jsxs("div",{className:"relative z-10 w-full max-w-3xl mx-auto text-center",children:[C.jsx(Ka.h1,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},whileHover:{scale:1.03},transition:{duration:.3},className:"nerdvana-clickable text-[clamp(3.5rem,11vw,6.8rem)] font-black tracking-[-0.04em] leading-[0.85] uppercase mb-2 cursor-pointer transition-colors duration-300",style:{fontFamily:'Impact, "Arial Black", sans-serif',color:"var(--nerdvana-text)"},onMouseEnter:v=>v.currentTarget.style.color="var(--nerdvana-accent)",onMouseLeave:v=>v.currentTarget.style.color="var(--nerdvana-text)",children:"NERDVANA"}),C.jsx(Ka.p,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},transition:{duration:.45,ease:"easeOut"},className:"text-[1.0625rem] md:text-[1.2rem] mb-6 tracking-wide transition-colors duration-300",style:{fontFamily:'"Courier New", monospace',color:"var(--nerdvana-text)"},children:SA[r]},r),C.jsx("div",{className:"flex flex-wrap justify-center gap-2 mb-5",children:dq.map(v=>{const x=i===v;return C.jsx("button",{onClick:()=>u(v),className:`px-3 py-1.5 text-xs md:text-sm uppercase tracking-[0.12em] border-[2px] transition-all duration-300 ${x?"shadow-[2px_2px_0_var(--nerdvana-border)]":"hover:-translate-y-0.5 hover:shadow-[1px_1px_0_var(--nerdvana-border)]"}`,style:{fontFamily:'"Courier New", monospace',backgroundColor:x?"var(--nerdvana-accent)":"var(--nerdvana-surface)",color:x?"var(--nerdvana-surface)":"var(--nerdvana-text)",borderColor:x?"var(--nerdvana-accent)":"var(--nerdvana-border)",opacity:x?1:.85},children:v},v)})}),C.jsxs(Ka.div,{initial:{opacity:0,y:24},animate:{opacity:1,y:0},whileHover:{scale:1.01},transition:{duration:.6,delay:.3,type:"spring",stiffness:110},className:"relative group",children:[C.jsx("div",{className:`relative rounded-[2px] p-[2px] transition-all duration-300 ${e?"animate-border-shift":""}`,style:{background:e?"linear-gradient(120deg, var(--nerdvana-accent), var(--nerdvana-border), var(--nerdvana-accent))":"var(--nerdvana-border)",boxShadow:e?"0 0 0 3px var(--nerdvana-accent)":"0 0 0 3px var(--nerdvana-border)"},children:C.jsx("input",{type:"text",value:t,onChange:v=>o(v.target.value),onKeyDown:g,onFocus:()=>l(!0),onBlur:()=>l(!1),placeholder:IA[i][n],className:`w-full text-[1.0625rem] md:text-[1.2rem] px-5 md:px-6 py-4 md:py-5 focus:outline-none tracking-wide transition-all duration-300 nerdvana-input ${e?"cursor-help":""}`,style:{fontFamily:'"Times New Roman", serif',backgroundColor:"var(--nerdvana-surface)",color:"var(--nerdvana-text)",caretColor:"var(--nerdvana-accent)"},autoFocus:!0,spellCheck:!1,autoCorrect:"off",autoComplete:"off"})}),C.jsx("div",{className:"mt-3 text-[0.75rem] uppercase tracking-[0.2em] transition-all duration-300",style:{fontFamily:'"Courier New", monospace',color:e?"var(--nerdvana-accent)":"var(--nerdvana-text)",opacity:e?1:.75},children:"Press Enter To Open The Query"})]}),C.jsx("div",{className:"mt-5 flex flex-wrap justify-center gap-2",children:pq[i].map(v=>C.jsx("button",{onClick:()=>h(v),className:"text-[0.72rem] md:text-[0.78rem] uppercase tracking-[0.09em] px-3 py-1.5 border-[1.8px] transition-all duration-300 hover:-translate-y-0.5",style:{fontFamily:'"Courier New", monospace',borderColor:"var(--nerdvana-border)",backgroundColor:"var(--nerdvana-bg)",color:"var(--nerdvana-text)"},children:v},v))})]}),C.jsx("style",{children:`
          .deadpool-bg {
            background-position: 8% bottom;
            background-size: auto 90%;
            opacity: 0.6;
            mix-blend-mode: multiply;
            transition: opacity 0.3s ease, mix-blend-mode 0.3s ease, filter 0.3s ease;
          }

          .dark .deadpool-bg {
            opacity: 0.9;
            mix-blend-mode: multiply;
            filter: brightness(1.15) contrast(1.15) saturate(1.08);
          }

          .paper-texture {
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 600 600' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='6.5' numOctaves='5' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
            background-repeat: repeat;
          }

          .nerdvana-paper-texture {
            opacity: 0.045;
            transition: opacity 0.3s ease;
          }

          .dark .nerdvana-paper-texture {
            opacity: 0.12;
          }

          .nerdvana-input::placeholder {
            color: var(--nerdvana-placeholder);
            opacity: 1;
          }

          .nerdvana-gradient-accent {
            background: radial-gradient(circle, rgba(140,28,19,0.22) 0%, rgba(140,28,19,0) 70%);
          }

          .dark .nerdvana-gradient-accent {
            background: radial-gradient(circle, rgba(168,50,40,0.15) 0%, rgba(168,50,40,0) 70%);
          }

          .nerdvana-gradient-dark {
            background: radial-gradient(circle, rgba(26,25,24,0.15) 0%, rgba(26,25,24,0) 70%);
          }

          .dark .nerdvana-gradient-dark {
            background: radial-gradient(circle, rgba(74,72,69,0.2) 0%, rgba(74,72,69,0) 70%);
          }

          .nerdvana-vignette {
            background: radial-gradient(ellipse at center, rgba(235,232,223,0) 0%, rgba(235,232,223,0.4) 60%, rgba(235,232,223,0.8) 100%);
          }

          .dark .nerdvana-vignette {
            background: radial-gradient(ellipse at center, rgba(31,29,27,0) 0%, rgba(31,29,27,0.15) 60%, rgba(31,29,27,0.4) 100%);
          }

          @keyframes border-shift {
            0% {
              background-position: 0% 50%;
            }
            100% {
              background-position: 100% 50%;
            }
          }

          .animate-border-shift {
            background-size: 200% 200%;
            animation: border-shift 3s linear infinite;
          }

          @media (max-width: 1024px) {
            .deadpool-bg {
              background-position: 50% bottom;
              background-size: 100%;
              opacity: 1;
            }

            .dark .deadpool-bg {
              opacity: 1;
            }
          }

        `})]}),C.jsx(hl,{variant:"signature"})]})}function yq(){const[t,e]=ee.useState(""),[n,r]=ee.useState(!1),[i,o]=ee.useState(0),[l,u]=ee.useState(0),[h,f]=ee.useState("Movies"),[p,g]=ee.useState(()=>window.location.pathname),[v,x]=ee.useState(()=>NT()),{user:T,loading:I}=Go(),b=ee.useRef(null),N=ee.useRef(!1);ee.useEffect(()=>{const F=()=>{g(window.location.pathname),x(NT())};return window.addEventListener("popstate",F),()=>window.removeEventListener("popstate",F)},[]),ee.useEffect(()=>{if(I)return;const F=typeof window<"u"&&window.sessionStorage.getItem("nerdvana-auth-intent")==="signin",D=!b.current;!!T&&(F||N.current&&D)&&(window.history.pushState({},"","/home"),g("/home"),x(""),typeof window<"u"&&window.sessionStorage.removeItem("nerdvana-auth-intent")),N.current||(N.current=!0),b.current=T},[I,T]),ee.useEffect(()=>{if(p==="/home"){const F=setInterval(()=>{o(D=>(D+1)%IA[h].length)},3e3);return()=>clearInterval(F)}},[p,h]),ee.useEffect(()=>{if(p==="/home"){const F=setInterval(()=>{u(D=>(D+1)%SA.length)},4200);return()=>clearInterval(F)}},[p]),ee.useEffect(()=>{o(0)},[h]);const z=F=>{const D=F.trim();if(!D)return;const ce=encodeURIComponent(D);window.history.pushState({},"",`/ask?q=${ce}`),g("/ask"),x(D),e("")},U=()=>{window.history.pushState({},"","/home"),g("/home"),x("")},J=()=>{window.history.pushState({},"","/explore"),g("/explore"),x("")},X=()=>{window.history.pushState({},"","/about"),g("/about"),x("")},H=()=>{window.history.pushState({},"","/debates"),g("/debates"),x("")},O=()=>{window.history.pushState({},"","/community"),g("/community"),x("")},A=()=>{window.history.pushState({},"","/profile"),g("/profile"),x("")},V=F=>{const ce=`/item/${encodeURIComponent(F)}`;window.history.pushState({},"",ce),g(ce)},S=F=>{F==="home"&&U(),F==="explore"&&J(),F==="about"&&X(),F==="debates"&&H(),F==="community"&&O(),F==="profile"&&A()};return ee.useMemo(()=>{if(p==="/")return C.jsx(RT,{onNavigatePage:S,onStartInsights:()=>{window.history.pushState({},"","/home"),g("/home"),x("")}});if(p==="/home")return C.jsx(gq,{entry:t,isFocused:n,placeholderIndex:i,taglineIndex:l,selectedUniverse:h,onSetEntry:e,onSetFocused:r,onSetUniverse:f,onSubmit:z,onNavigateHome:U,onNavigatePage:S});if(p==="/ask")return C.jsx(Q7,{question:v,onNavigatePage:S});if(p==="/explore")return C.jsx(X7,{onOpenItem:V,onNavigatePage:S});if(p.startsWith("/item/")){const F=mq(p);return C.jsx(J7,{slug:F,onAskQuestion:z,onNavigatePage:S})}return p==="/about"?C.jsx(Z7,{onNavigatePage:S}):p==="/debates"?C.jsx(eq,{onNavigatePage:S}):p==="/community"?C.jsx(tq,{onNavigatePage:S}):p==="/profile"?C.jsx(PT,{onNavigatePage:S}):p==="/customize-profile"?C.jsx(PT,{onNavigatePage:S}):p==="/saved"?C.jsx(hq,{onNavigatePage:S}):p==="/history"?C.jsx(rq,{onNavigatePage:S}):C.jsx(RT,{onNavigatePage:S,onStartInsights:U})},[t,n,p,i,v,h,l])}BP.createRoot(document.getElementById("root")).render(C.jsx(yq,{}));
